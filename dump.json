{"ts":"2024-10-03T23:00:59.212221546Z","level":"INFO","msg":"started","caller":"/home/runner/work/coder/coder/coderd/notifications/manager.go:140","func":"github.com/coder/coder/v2/coderd/notifications.(*Manager).Run","logger_names":["notifications.manager"]}
{"ts":"2024-10-03T23:00:59.212454577Z","level":"INFO","msg":"started","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:67","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).run","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"0769c28c-dda6-439b-b29f-ee38a733f53d"}}
{"ts":"2024-10-03T23:00:59.213302736Z","level":"INFO","msg":"report generator finished","caller":"/home/runner/work/coder/coder/coderd/notifications/reports/generator.go:57","func":"github.com/coder/coder/v2/coderd/notifications/reports.NewReportGenerator.func1.1","logger_names":["notifications.report_generator"],"fields":{"duration":"870.484µs"}}
{"ts":"2024-10-03T23:00:59.216067362Z","level":"INFO","msg":"successfully connected to coderd","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:216","func":"github.com/coder/coder/v2/provisionerd.(*Server).connect","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:00:59.217191004Z","level":"INFO","msg":"successfully connected to coderd","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:216","func":"github.com/coder/coder/v2/provisionerd.(*Server).connect","logger_names":["provisionerd-backstage-jr-2"]}
{"ts":"2024-10-03T23:00:59.217339301Z","level":"INFO","msg":"successfully connected to coderd","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:216","func":"github.com/coder/coder/v2/provisionerd.(*Server).connect","logger_names":["provisionerd-backstage-jr-1"]}
{"ts":"2024-10-03T23:00:59.220933811Z","level":"INFO","msg":"purged old database entries","caller":"/home/runner/work/coder/coder/coderd/database/dbpurge/dbpurge.go:66","func":"github.com/coder/coder/v2/coderd/database/dbpurge.New.func1.1","logger_names":["dbpurge"],"fields":{"duration":"8.238849ms"}}
{"ts":"2024-10-03T23:00:59.237135166Z","level":"INFO","msg":"detected terraform version","caller":"/home/runner/work/coder/coder/provisioner/terraform/serve.go:66","func":"github.com/coder/coder/v2/provisioner/terraform.absoluteBinaryPath","logger_names":["provisionerd-backstage-jr-0"],"fields":{"installed_version":"1.5.7","min_version":"1.1.0","max_version":"1.9.9"}}
{"ts":"2024-10-03T23:00:59.237449583Z","level":"INFO","msg":"detected terraform version","caller":"/home/runner/work/coder/coder/provisioner/terraform/serve.go:66","func":"github.com/coder/coder/v2/provisioner/terraform.absoluteBinaryPath","logger_names":["provisionerd-backstage-jr-2"],"fields":{"installed_version":"1.5.7","min_version":"1.1.0","max_version":"1.9.9"}}
{"ts":"2024-10-03T23:00:59.239898608Z","level":"INFO","msg":"detected terraform version","caller":"/home/runner/work/coder/coder/provisioner/terraform/serve.go:66","func":"github.com/coder/coder/v2/provisioner/terraform.absoluteBinaryPath","logger_names":["provisionerd-backstage-jr-1"],"fields":{"installed_version":"1.5.7","min_version":"1.1.0","max_version":"1.9.9"}}
{"ts":"2024-10-03T23:02:32.653938306Z","level":"INFO","msg":"graceful stop requested","caller":"/home/runner/work/coder/coder/coderd/notifications/manager.go:365","func":"github.com/coder/coder/v2/coderd/notifications.(*Manager).Stop.func1","logger_names":["notifications.manager"]}
{"ts":"2024-10-03T23:02:32.65428197Z","level":"INFO","msg":"graceful stop requested","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:345","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).stop.func1","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"0769c28c-dda6-439b-b29f-ee38a733f53d"}}
{"ts":"2024-10-03T23:02:32.65424544Z","level":"INFO","msg":"[ERR] yamux: Failed to read header: failed to get reader: context canceled","caller":"/home/runner/go/pkg/mod/github.com/hashicorp/yamux@v0.1.1/session.go:538","func":"github.com/hashicorp/yamux.(*Session).recvLoop","logger_names":["coderd","agentrpc","yamux","stdlib"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"cbd9a15a-0f84-4ac9-8861-945b248b109c"}}
{"ts":"2024-10-03T23:02:32.654511374Z","level":"INFO","msg":"gracefully stopped","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:71","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).run.func1","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"0769c28c-dda6-439b-b29f-ee38a733f53d"}}
{"ts":"2024-10-03T23:02:32.654700129Z","level":"INFO","msg":"[ERR] yamux: Failed to write header: failed to write msg: failed to write: failed to write data frame: failed to write frame: WebSocket closed: read timed out: context canceled","caller":"/home/runner/go/pkg/mod/github.com/hashicorp/yamux@v0.1.1/session.go:473","func":"github.com/hashicorp/yamux.(*Session).sendLoop","logger_names":["coderd","agentrpc","yamux","stdlib"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"cbd9a15a-0f84-4ac9-8861-945b248b109c"}}
{"ts":"2024-10-03T23:02:32.654740216Z","level":"INFO","msg":"notification manager stopped","caller":"/home/runner/work/coder/coder/coderd/notifications/manager.go:160","func":"github.com/coder/coder/v2/coderd/notifications.(*Manager).loop.func1","logger_names":["notifications.manager"]}
{"ts":"2024-10-03T23:02:32.654891268Z","level":"INFO","msg":"gracefully stopped","caller":"/home/runner/work/coder/coder/coderd/notifications/manager.go:392","func":"github.com/coder/coder/v2/coderd/notifications.(*Manager).Stop.func1","logger_names":["notifications.manager"]}
{"ts":"2024-10-03T23:02:32.655261885Z","level":"INFO","msg":"attempting graceful shutdown","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:486","func":"github.com/coder/coder/v2/provisionerd.(*Server).Shutdown","logger_names":["provisionerd-backstage-jr-2"]}
{"ts":"2024-10-03T23:02:32.655286563Z","level":"INFO","msg":"attempting graceful shutdown","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:486","func":"github.com/coder/coder/v2/provisionerd.(*Server).Shutdown","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:02:32.655280922Z","level":"INFO","msg":"attempting graceful shutdown","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:486","func":"github.com/coder/coder/v2/provisionerd.(*Server).Shutdown","logger_names":["provisionerd-backstage-jr-1"]}
{"ts":"2024-10-03T23:02:32.656264974Z","level":"INFO","msg":"gracefully shutdown","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:500","func":"github.com/coder/coder/v2/provisionerd.(*Server).Shutdown","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:02:32.656299601Z","level":"INFO","msg":"gracefully shutdown","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:500","func":"github.com/coder/coder/v2/provisionerd.(*Server).Shutdown","logger_names":["provisionerd-backstage-jr-2"]}
{"ts":"2024-10-03T23:02:32.65629883Z","level":"INFO","msg":"gracefully shutdown","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:500","func":"github.com/coder/coder/v2/provisionerd.(*Server).Shutdown","logger_names":["provisionerd-backstage-jr-1"]}
{"ts":"2024-10-03T23:02:32.656518775Z","level":"INFO","msg":"closing provisionerd","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:507","func":"github.com/coder/coder/v2/provisionerd.(*Server).Close","logger_names":["provisionerd-backstage-jr-2"]}
{"ts":"2024-10-03T23:02:32.656382962Z","level":"INFO","msg":"closing provisionerd","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:507","func":"github.com/coder/coder/v2/provisionerd.(*Server).Close","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:02:32.656564584Z","level":"INFO","msg":"closing provisionerd","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:507","func":"github.com/coder/coder/v2/provisionerd.(*Server).Close","logger_names":["provisionerd-backstage-jr-1"]}
{"ts":"2024-10-03T23:02:32.656709514Z","level":"INFO","msg":"provisioner daemon disconnected","caller":"/home/runner/work/coder/coder/coderd/coderd.go:1563","func":"github.com/coder/coder/v2/coderd.(*API).CreateInMemoryTaggedProvisionerDaemon.func3","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"error":"InmemoryListener is already closed: use of closed network connection"}}
{"ts":"2024-10-03T23:02:32.656718111Z","level":"INFO","msg":"provisioner daemon disconnected","caller":"/home/runner/work/coder/coder/coderd/coderd.go:1563","func":"github.com/coder/coder/v2/coderd.(*API).CreateInMemoryTaggedProvisionerDaemon.func3","logger_names":["coderd","inmem-provisionerd-backstage-jr-2"],"fields":{"error":"InmemoryListener is already closed: use of closed network connection"}}
{"ts":"2024-10-03T23:02:32.656826961Z","level":"INFO","msg":"provisioner daemon disconnected","caller":"/home/runner/work/coder/coder/coderd/coderd.go:1563","func":"github.com/coder/coder/v2/coderd.(*API).CreateInMemoryTaggedProvisionerDaemon.func3","logger_names":["coderd","inmem-provisionerd-backstage-jr-1"],"fields":{"error":"InmemoryListener is already closed: use of closed network connection"}}
{"ts":"2024-10-03T23:02:32.658180468Z","level":"INFO","msg":"closing tailnet Conn","caller":"/home/runner/work/coder/coder/tailnet/conn.go:572","func":"github.com/coder/coder/v2/tailnet.(*Conn).Close","logger_names":["coderd","servertailnet"]}
{"ts":"2024-10-03T23:02:32.868500542Z","level":"INFO","msg":"closing provisionerd","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:507","func":"github.com/coder/coder/v2/provisionerd.(*Server).Close","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:02:32.868738281Z","level":"INFO","msg":"closing provisionerd","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:507","func":"github.com/coder/coder/v2/provisionerd.(*Server).Close","logger_names":["provisionerd-backstage-jr-1"]}
{"ts":"2024-10-03T23:02:32.868951754Z","level":"INFO","msg":"closing provisionerd","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:507","func":"github.com/coder/coder/v2/provisionerd.(*Server).Close","logger_names":["provisionerd-backstage-jr-2"]}
{"ts":"2024-10-03T23:02:32.869365845Z","level":"INFO","msg":"pubsub is closing","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:314","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Close","logger_names":["pubsub"]}
{"ts":"2024-10-03T23:02:32.869652058Z","level":"INFO","msg":"pubsub listen stopped receiving notify","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:337","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).listen.func1","logger_names":["pubsub"]}
{"ts":"2024-10-03T23:04:51.628004442Z","level":"DEBUG","msg":"started debug logging","caller":"/home/runner/work/coder/coder/cli/server.go:349","func":"github.com/coder/coder/v2/cli.(*RootCmd).Server.func2"}
{"ts":"2024-10-03T23:04:51.737064561Z","level":"DEBUG","msg":"waiting for server to start....2024-10-03 23:04:51.646 UTC [334615] LOG:  starting PostgreSQL 13.16 on x86_64-pc-linux-gnu, compiled by gcc (Ubuntu 7.5.0-3ubuntu1~18.04) 7.5.0, 64-bit\n2024-10-03 23:04:51.646 UTC [334615] LOG:  listening on IPv4 address \"127.0.0.1\", port 44339\n2024-10-03 23:04:51.646 UTC [334615] LOG:  could not bind IPv6 address \"::1\": Cannot assign requested address\n2024-10-03 23:04:51.646 UTC [334615] HINT:  Is another postmaster already running on port 44339? If not, wait a few seconds and retry.\n2024-10-03 23:04:51.647 UTC [334615] LOG:  listening on Unix socket \"/tmp/.s.PGSQL.44339\"\n2024-10-03 23:04:51.648 UTC [334616] LOG:  database system was shut down at 2024-10-03 23:02:32 UTC\n2024-10-03 23:04:51.650 UTC [334615] LOG:  database system is ready to accept connections\n done\nserver started","caller":"/home/runner/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.22.6.linux-amd64/src/os/file.go:269","func":"os.genericWriteTo","logger_names":["postgres","stdlib"]}
{"ts":"2024-10-03T23:04:51.772204183Z","level":"DEBUG","msg":"Routine: handshake worker 6 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.77225949Z","level":"DEBUG","msg":"Routine: decryption worker 2 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.772186199Z","level":"DEBUG","msg":"Routine: handshake worker 4 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.772261534Z","level":"DEBUG","msg":"Routine: encryption worker 5 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.772240924Z","level":"DEBUG","msg":"UAPI: Updating private key","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.772325678Z","level":"DEBUG","msg":"Routine: event worker - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.772467031Z","level":"DEBUG","msg":"Interface up requested","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.772339034Z","level":"DEBUG","msg":"Routine: handshake worker 5 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.772239421Z","level":"DEBUG","msg":"Routine: handshake worker 3 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.772293556Z","level":"DEBUG","msg":"Routine: encryption worker 49 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.772282725Z","level":"DEBUG","msg":"Routine: encryption worker 2 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.772549149Z","level":"DEBUG","msg":"Routine: decryption worker 43 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.77241984Z","level":"DEBUG","msg":"Routine: decryption worker 4 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.772350746Z","level":"DEBUG","msg":"Routine: encryption worker 4 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773252678Z","level":"DEBUG","msg":"Routine: decryption worker 23 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773226568Z","level":"DEBUG","msg":"Routine: decryption worker 34 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773184577Z","level":"DEBUG","msg":"Routine: decryption worker 20 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773254331Z","level":"DEBUG","msg":"Routine: handshake worker 1 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773327433Z","level":"DEBUG","msg":"Routine: handshake worker 43 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773378311Z","level":"DEBUG","msg":"Routine: handshake worker 20 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773209575Z","level":"DEBUG","msg":"Routine: decryption worker 35 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773290351Z","level":"DEBUG","msg":"Routine: encryption worker 61 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.772375995Z","level":"DEBUG","msg":"Routine: encryption worker 37 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773340548Z","level":"DEBUG","msg":"Routine: handshake worker 35 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773403159Z","level":"DEBUG","msg":"Routine: handshake worker 44 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773118659Z","level":"DEBUG","msg":"Routine: decryption worker 26 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773362771Z","level":"DEBUG","msg":"Routine: decryption worker 48 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.772433496Z","level":"DEBUG","msg":"Routine: encryption worker 34 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.772451671Z","level":"DEBUG","msg":"Routine: handshake worker 19 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773068322Z","level":"DEBUG","msg":"Routine: encryption worker 20 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773168095Z","level":"DEBUG","msg":"Routine: decryption worker 47 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.774910029Z","level":"DEBUG","msg":"Routine: decryption worker 18 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.774932933Z","level":"DEBUG","msg":"Routine: decryption worker 52 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.774946439Z","level":"DEBUG","msg":"Routine: handshake worker 11 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773966447Z","level":"DEBUG","msg":"Routine: handshake worker 36 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773662369Z","level":"DEBUG","msg":"Routine: handshake worker 29 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773778454Z","level":"DEBUG","msg":"Routine: decryption worker 15 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.77492113Z","level":"DEBUG","msg":"Routine: decryption worker 58 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775045731Z","level":"DEBUG","msg":"Routine: handshake worker 12 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.772232057Z","level":"DEBUG","msg":"Routine: encryption worker 33 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773436964Z","level":"DEBUG","msg":"Routine: handshake worker 23 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775088504Z","level":"DEBUG","msg":"Routine: decryption worker 64 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.77501945Z","level":"DEBUG","msg":"Routine: handshake worker 13 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.774228733Z","level":"DEBUG","msg":"Routine: handshake worker 21 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773474166Z","level":"DEBUG","msg":"Routine: handshake worker 26 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775067243Z","level":"DEBUG","msg":"Routine: decryption worker 25 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775186423Z","level":"DEBUG","msg":"Routine: encryption worker 17 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775185671Z","level":"DEBUG","msg":"Routine: handshake worker 24 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773475639Z","level":"DEBUG","msg":"Routine: decryption worker 57 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773737064Z","level":"DEBUG","msg":"Routine: handshake worker 64 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775099094Z","level":"DEBUG","msg":"Routine: encryption worker 21 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.772546815Z","level":"DEBUG","msg":"Routine: decryption worker 41 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775310011Z","level":"DEBUG","msg":"Routine: handshake worker 58 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775139181Z","level":"DEBUG","msg":"Routine: handshake worker 8 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773366528Z","level":"DEBUG","msg":"Routine: encryption worker 44 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775133751Z","level":"DEBUG","msg":"Routine: decryption worker 16 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775204427Z","level":"DEBUG","msg":"Routine: decryption worker 8 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.77418067Z","level":"DEBUG","msg":"Routine: encryption worker 14 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775180702Z","level":"DEBUG","msg":"Routine: encryption worker 11 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.77515917Z","level":"DEBUG","msg":"Routine: encryption worker 50 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.772428156Z","level":"DEBUG","msg":"Routine: decryption worker 13 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773681687Z","level":"DEBUG","msg":"Routine: handshake worker 32 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.772406975Z","level":"DEBUG","msg":"Routine: encryption worker 35 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773990784Z","level":"DEBUG","msg":"Routine: handshake worker 42 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775007347Z","level":"DEBUG","msg":"Routine: encryption worker 55 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773757784Z","level":"DEBUG","msg":"Routine: decryption worker 17 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773804744Z","level":"DEBUG","msg":"Routine: handshake worker 28 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773656638Z","level":"DEBUG","msg":"Routine: handshake worker 47 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.77548541Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - UAPI: Created","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.77518479Z","level":"DEBUG","msg":"Routine: encryption worker 31 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775199718Z","level":"DEBUG","msg":"Routine: encryption worker 19 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.7751902Z","level":"DEBUG","msg":"Routine: decryption worker 53 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773811878Z","level":"DEBUG","msg":"Routine: TUN reader - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773697597Z","level":"DEBUG","msg":"Routine: encryption worker 62 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775584742Z","level":"DEBUG","msg":"UDP bind has been updated","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.77563573Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - UAPI: Updating endpoint","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775485801Z","level":"DEBUG","msg":"Routine: encryption worker 18 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.77519028Z","level":"DEBUG","msg":"Routine: decryption worker 7 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.77619983Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - UAPI: Updating persistent keepalive interval","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775489718Z","level":"DEBUG","msg":"Routine: decryption worker 37 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775430975Z","level":"DEBUG","msg":"Routine: handshake worker 60 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773858508Z","level":"DEBUG","msg":"Routine: decryption worker 40 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773710312Z","level":"DEBUG","msg":"Routine: decryption worker 31 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775637935Z","level":"DEBUG","msg":"Routine: encryption worker 51 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773711745Z","level":"DEBUG","msg":"Routine: encryption worker 42 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773741993Z","level":"DEBUG","msg":"Routine: decryption worker 49 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775441616Z","level":"DEBUG","msg":"Routine: encryption worker 27 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775624238Z","level":"DEBUG","msg":"Routine: decryption worker 29 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.774167495Z","level":"DEBUG","msg":"Routine: handshake worker 56 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.774277668Z","level":"DEBUG","msg":"Routine: handshake worker 17 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775238934Z","level":"DEBUG","msg":"Routine: handshake worker 59 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775541609Z","level":"DEBUG","msg":"Routine: handshake worker 34 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775572999Z","level":"DEBUG","msg":"Routine: encryption worker 59 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.776284283Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - UAPI: Adding allowedip","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775468878Z","level":"DEBUG","msg":"Routine: encryption worker 52 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775495179Z","level":"DEBUG","msg":"Routine: decryption worker 46 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.776442849Z","level":"DEBUG","msg":"Routine: decryption worker 62 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775524606Z","level":"DEBUG","msg":"Routine: encryption worker 23 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.776299693Z","level":"DEBUG","msg":"Routine: encryption worker 56 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773410683Z","level":"DEBUG","msg":"Routine: encryption worker 53 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775070799Z","level":"DEBUG","msg":"Routine: handshake worker 61 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775248242Z","level":"DEBUG","msg":"Routine: encryption worker 25 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.776440935Z","level":"DEBUG","msg":"Routine: decryption worker 12 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.77427869Z","level":"DEBUG","msg":"Routine: handshake worker 15 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775062874Z","level":"DEBUG","msg":"Routine: encryption worker 12 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.774048265Z","level":"DEBUG","msg":"Routine: handshake worker 63 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.776638116Z","level":"DEBUG","msg":"Routine: encryption worker 26 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.776666381Z","level":"DEBUG","msg":"Routine: handshake worker 48 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775468898Z","level":"DEBUG","msg":"Routine: decryption worker 39 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.77562502Z","level":"DEBUG","msg":"Routine: handshake worker 40 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.77557832Z","level":"DEBUG","msg":"Routine: handshake worker 18 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.77646386Z","level":"DEBUG","msg":"Routine: handshake worker 50 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.774006344Z","level":"DEBUG","msg":"Routine: encryption worker 46 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.776850947Z","level":"DEBUG","msg":"Routine: handshake worker 49 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773701525Z","level":"DEBUG","msg":"Routine: handshake worker 62 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.772446271Z","level":"DEBUG","msg":"Routine: decryption worker 1 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.776890925Z","level":"DEBUG","msg":"Routine: encryption worker 6 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773903545Z","level":"DEBUG","msg":"Routine: handshake worker 38 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.776962793Z","level":"DEBUG","msg":"Routine: decryption worker 21 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.776362955Z","level":"DEBUG","msg":"Routine: handshake worker 46 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775593258Z","level":"DEBUG","msg":"Routine: encryption worker 9 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.772165118Z","level":"DEBUG","msg":"Routine: decryption worker 6 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.776941262Z","level":"DEBUG","msg":"Routine: handshake worker 54 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775120906Z","level":"DEBUG","msg":"Routine: decryption worker 36 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.772393749Z","level":"DEBUG","msg":"Routine: encryption worker 13 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773673521Z","level":"DEBUG","msg":"Routine: handshake worker 57 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775454811Z","level":"DEBUG","msg":"Routine: encryption worker 7 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775213285Z","level":"DEBUG","msg":"Routine: encryption worker 40 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775133771Z","level":"DEBUG","msg":"Routine: encryption worker 58 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.777039832Z","level":"DEBUG","msg":"Routine: decryption worker 45 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.777052216Z","level":"DEBUG","msg":"Routine: handshake worker 25 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.77525762Z","level":"DEBUG","msg":"Routine: encryption worker 8 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.77535565Z","level":"DEBUG","msg":"Routine: decryption worker 33 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.7736627Z","level":"DEBUG","msg":"Routine: encryption worker 24 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773930167Z","level":"DEBUG","msg":"Routine: encryption worker 22 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.776721217Z","level":"DEBUG","msg":"Routine: handshake worker 39 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.777285927Z","level":"DEBUG","msg":"Routine: decryption worker 27 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.77693523Z","level":"DEBUG","msg":"Routine: decryption worker 54 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.774157075Z","level":"DEBUG","msg":"Routine: encryption worker 16 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773700433Z","level":"DEBUG","msg":"Routine: decryption worker 63 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.776557901Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Starting","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.774177464Z","level":"DEBUG","msg":"Routine: decryption worker 60 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.777166918Z","level":"DEBUG","msg":"Routine: handshake worker 10 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.776255377Z","level":"DEBUG","msg":"Routine: encryption worker 47 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775303409Z","level":"DEBUG","msg":"Routine: encryption worker 32 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.776886887Z","level":"DEBUG","msg":"Routine: handshake worker 33 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.776971891Z","level":"DEBUG","msg":"Routine: encryption worker 48 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.77758743Z","level":"DEBUG","msg":"Routine: handshake worker 16 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.772456751Z","level":"DEBUG","msg":"Routine: encryption worker 43 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.774308096Z","level":"DEBUG","msg":"Routine: handshake worker 2 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773711885Z","level":"DEBUG","msg":"Routine: decryption worker 32 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.77545419Z","level":"DEBUG","msg":"Routine: encryption worker 60 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.77717361Z","level":"DEBUG","msg":"Routine: decryption worker 5 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.774270514Z","level":"DEBUG","msg":"Routine: handshake worker 37 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775332535Z","level":"DEBUG","msg":"Routine: encryption worker 30 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.777159533Z","level":"DEBUG","msg":"Routine: encryption worker 39 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.776233715Z","level":"DEBUG","msg":"Routine: encryption worker 15 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.772172091Z","level":"DEBUG","msg":"Routine: decryption worker 19 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773735691Z","level":"DEBUG","msg":"Routine: decryption worker 24 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775041302Z","level":"DEBUG","msg":"Routine: handshake worker 7 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775167687Z","level":"DEBUG","msg":"Routine: decryption worker 11 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.777397964Z","level":"DEBUG","msg":"Routine: handshake worker 51 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775015633Z","level":"DEBUG","msg":"Routine: decryption worker 10 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.772203662Z","level":"DEBUG","msg":"Routine: encryption worker 1 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.777155275Z","level":"DEBUG","msg":"Routine: handshake worker 14 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.777636394Z","level":"DEBUG","msg":"Routine: encryption worker 29 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773713328Z","level":"DEBUG","msg":"Routine: handshake worker 30 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.772436502Z","level":"DEBUG","msg":"Routine: encryption worker 45 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.777372034Z","level":"DEBUG","msg":"Routine: encryption worker 10 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.774042243Z","level":"DEBUG","msg":"Routine: handshake worker 53 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773920788Z","level":"DEBUG","msg":"Routine: encryption worker 54 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.777078387Z","level":"DEBUG","msg":"Routine: encryption worker 38 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.776615813Z","level":"DEBUG","msg":"Routine: handshake worker 31 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773835113Z","level":"DEBUG","msg":"Routine: decryption worker 50 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773933202Z","level":"DEBUG","msg":"Routine: decryption worker 42 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.77728204Z","level":"DEBUG","msg":"Routine: decryption worker 22 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.774193525Z","level":"DEBUG","msg":"Routine: decryption worker 28 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.777782366Z","level":"DEBUG","msg":"Routine: decryption worker 9 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773155731Z","level":"DEBUG","msg":"Routine: encryption worker 57 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.777278433Z","level":"DEBUG","msg":"Routine: encryption worker 28 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.777104727Z","level":"DEBUG","msg":"Routine: decryption worker 56 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.778835019Z","level":"DEBUG","msg":"Routine: decryption worker 38 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.77881981Z","level":"DEBUG","msg":"Routine: decryption worker 14 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.777637566Z","level":"DEBUG","msg":"Routine: handshake worker 52 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.774193465Z","level":"DEBUG","msg":"Routine: decryption worker 61 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.777616355Z","level":"DEBUG","msg":"Routine: handshake worker 9 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.777521833Z","level":"DEBUG","msg":"Routine: handshake worker 45 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.777852702Z","level":"DEBUG","msg":"Routine: handshake worker 55 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.776670288Z","level":"DEBUG","msg":"Routine: handshake worker 27 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.777058308Z","level":"DEBUG","msg":"Routine: encryption worker 36 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.777320304Z","level":"DEBUG","msg":"Routine: handshake worker 41 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.772167022Z","level":"DEBUG","msg":"Routine: encryption worker 3 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.777055392Z","level":"DEBUG","msg":"Routine: receive incoming v4 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.779108998Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending keepalive packet","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.7791564Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Routine: sequential receiver - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.779202278Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending handshake initiation","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773288417Z","level":"DEBUG","msg":"Routine: decryption worker 3 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.777526171Z","level":"DEBUG","msg":"Routine: receive incoming v6 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.772384461Z","level":"DEBUG","msg":"Routine: encryption worker 41 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773986345Z","level":"DEBUG","msg":"Routine: decryption worker 55 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.776695928Z","level":"DEBUG","msg":"Routine: decryption worker 30 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.775095888Z","level":"DEBUG","msg":"Routine: encryption worker 63 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773984191Z","level":"DEBUG","msg":"Routine: encryption worker 64 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.777357185Z","level":"DEBUG","msg":"Routine: decryption worker 59 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.779278425Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Routine: sequential sender - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.773845693Z","level":"DEBUG","msg":"Routine: decryption worker 44 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.777370962Z","level":"DEBUG","msg":"Routine: handshake worker 22 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.777197136Z","level":"DEBUG","msg":"Routine: decryption worker 51 - started","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.779879196Z","level":"DEBUG","msg":"Interface state was Down, requested Up, now Up","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:51.785222013Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Received handshake response","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:04:54.489818457Z","level":"DEBUG","msg":"connecting to postgresql","caller":"/home/runner/work/coder/coder/cli/server.go:2187","func":"github.com/coder/coder/v2/cli.ConnectToPostgres"}
{"ts":"2024-10-03T23:04:54.492488885Z","level":"DEBUG","msg":"connected to postgresql","caller":"/home/runner/work/coder/coder/cli/server.go:2249","func":"github.com/coder/coder/v2/cli.ConnectToPostgres","fields":{"version":130016}}
{"ts":"2024-10-03T23:04:54.504932636Z","level":"DEBUG","msg":"pubsub dialing postgres","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:416","func":"github.com/coder/coder/v2/coderd/database/pubsub.logDialer.DialContext","logger_names":["pubsub"],"fields":{"network":"tcp","address":"localhost:44339","timeout_ms":0}}
{"ts":"2024-10-03T23:04:54.505325816Z","level":"DEBUG","msg":"pubsub postgres TCP connection established","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:424","func":"github.com/coder/coder/v2/coderd/database/pubsub.logDialer.DialContext","logger_names":["pubsub"],"fields":{"network":"tcp","address":"localhost:44339","timeout_ms":0,"elapsed_ms":0}}
{"ts":"2024-10-03T23:04:54.507766198Z","level":"DEBUG","msg":"pubsub connected to postgres","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:469","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).startListener.func1","logger_names":["pubsub"]}
{"ts":"2024-10-03T23:04:54.507876862Z","level":"DEBUG","msg":"pubsub has started","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:621","func":"github.com/coder/coder/v2/coderd/database/pubsub.New","logger_names":["pubsub"]}
{"ts":"2024-10-03T23:04:54.508114451Z","level":"DEBUG","msg":"started listening to event channel","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:252","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).subscribeQueue","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog"}}
{"ts":"2024-10-03T23:04:54.642186986Z","level":"DEBUG","msg":"submitted deployment info","caller":"/home/runner/work/coder/coder/coderd/telemetry/telemetry.go:282","func":"github.com/coder/coder/v2/coderd/telemetry.(*remoteReporter).deployment","logger_names":["telemetry"]}
{"ts":"2024-10-03T23:04:54.723700868Z","level":"DEBUG","msg":"submitted snapshot","caller":"/home/runner/work/coder/coder/coderd/telemetry/telemetry.go:150","func":"github.com/coder/coder/v2/coderd/telemetry.(*remoteReporter).reportSync","logger_names":["telemetry"]}
{"ts":"2024-10-03T23:04:55.281023136Z","level":"DEBUG","msg":"rolling up data","caller":"/home/runner/work/coder/coder/coderd/database/dbrollup/dbrollup.go:91","func":"github.com/coder/coder/v2/coderd/database/dbrollup.(*Rolluper).start.func1","logger_names":["coderd","dbrollup"]}
{"ts":"2024-10-03T23:04:55.282418111Z","level":"DEBUG","msg":"started listening to event channel","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:252","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).subscribeQueue","logger_names":["pubsub"],"fields":{"event":"provisioner_job_posted"}}
{"ts":"2024-10-03T23:04:55.28261474Z","level":"DEBUG","msg":"subscribed to job postings","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:317","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).subscribe.func1","logger_names":["coderd","acquirer"]}
{"ts":"2024-10-03T23:04:55.285193871Z","level":"DEBUG","msg":"[v1] using fake (no-op) tun device","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:238","func":"tailscale.com/wgengine.NewUserspaceEngine","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.285559147Z","level":"DEBUG","msg":"[v1] using fake (no-op) OS network configurator","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:242","func":"tailscale.com/wgengine.NewUserspaceEngine","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.285409107Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"4.4735ms"}}
{"ts":"2024-10-03T23:04:55.285686573Z","level":"DEBUG","msg":"[v1] using fake (no-op) DNS configurator","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:246","func":"tailscale.com/wgengine.NewUserspaceEngine","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.285865408Z","level":"DEBUG","msg":"dns: using dns.noopManager","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/net/dns.NewManager.WithPrefix.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.285989578Z","level":"DEBUG","msg":"link state: interfaces.State{defaultRoute=eth0 ifs={docker0:[172.17.0.1/16] eth0:[172.20.0.15/16]} v4=true v6=false}","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:305","func":"tailscale.com/wgengine.NewUserspaceEngine","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.286293775Z","level":"DEBUG","msg":"magicsock: [warning] failed to force-set UDP read buffer size to 7340032: operation not permitted; using kernel default values (impacts throughput only)","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/magicsock/magicsock_linux.go:306","func":"tailscale.com/wgengine/magicsock.trySetSocketBuffer.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.286430529Z","level":"DEBUG","msg":"magicsock: [warning] failed to force-set UDP write buffer size to 7340032: operation not permitted; using kernel default values (impacts throughput only)","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/magicsock/magicsock_linux.go:310","func":"tailscale.com/wgengine/magicsock.trySetSocketBuffer.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.286630636Z","level":"DEBUG","msg":"magicsock: [warning] failed to force-set UDP read buffer size to 7340032: operation not permitted; using kernel default values (impacts throughput only)","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/magicsock/magicsock_linux.go:306","func":"tailscale.com/wgengine/magicsock.trySetSocketBuffer.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.286722644Z","level":"DEBUG","msg":"magicsock: [warning] failed to force-set UDP write buffer size to 7340032: operation not permitted; using kernel default values (impacts throughput only)","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/magicsock/magicsock_linux.go:310","func":"tailscale.com/wgengine/magicsock.trySetSocketBuffer.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.286904405Z","level":"DEBUG","msg":"[v1] couldn't create raw v4 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/magicsock/magicsock.go:473","func":"tailscale.com/wgengine/magicsock.NewConn","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.287003476Z","level":"DEBUG","msg":"[v1] couldn't create raw v6 disco listener, using regular listener instead: raw disco listening disabled, SO_MARK unavailable","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/magicsock/magicsock.go:479","func":"tailscale.com/wgengine/magicsock.NewConn","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.287106345Z","level":"DEBUG","msg":"magicsock: disco key = d:6a657cfc8f75c76e","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/magicsock/magicsock.go:482","func":"tailscale.com/wgengine/magicsock.NewConn","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.287215626Z","level":"DEBUG","msg":"Creating WireGuard device...","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:383","func":"tailscale.com/wgengine.NewUserspaceEngine","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.287543709Z","level":"DEBUG","msg":"Bringing WireGuard device up...","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:408","func":"tailscale.com/wgengine.NewUserspaceEngine","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.287509934Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"template build times","interval":"4h0m0s","took":"6.50351ms"}}
{"ts":"2024-10-03T23:04:55.287674652Z","level":"DEBUG","msg":"wg: [v2] UDP bind has been updated","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/wglog/wglog.go:58","func":"tailscale.com/wgengine/wglog.NewLogger.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.287703197Z","level":"DEBUG","msg":"wg: [v2] Routine: receive incoming mkReceiveFunc - started","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/wglog/wglog.go:58","func":"tailscale.com/wgengine/wglog.NewLogger.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.287808942Z","level":"DEBUG","msg":"wg: [v2] Routine: receive incoming receiveDERP - started","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/wglog/wglog.go:58","func":"tailscale.com/wgengine/wglog.NewLogger.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.287800746Z","level":"DEBUG","msg":"wg: [v2] Interface state was Down, requested Up, now Up","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/wglog/wglog.go:58","func":"tailscale.com/wgengine/wglog.NewLogger.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.287770497Z","level":"DEBUG","msg":"wg: [v2] Routine: receive incoming mkReceiveFunc - started","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/wglog/wglog.go:58","func":"tailscale.com/wgengine/wglog.NewLogger.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.288012956Z","level":"DEBUG","msg":"Bringing router up...","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:412","func":"tailscale.com/wgengine.NewUserspaceEngine","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.288140091Z","level":"DEBUG","msg":"[v1] warning: fakeRouter.Up: not implemented.","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/router/router_fake.go:21","func":"tailscale.com/wgengine/router.fakeRouter.Up","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.288228692Z","level":"DEBUG","msg":"Clearing router settings...","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:420","func":"tailscale.com/wgengine.NewUserspaceEngine","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.288328705Z","level":"DEBUG","msg":"[v1] warning: fakeRouter.Set: not implemented.","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/router/router_fake.go:26","func":"tailscale.com/wgengine/router.fakeRouter.Set","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.2884242Z","level":"DEBUG","msg":"Starting network monitor...","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:424","func":"tailscale.com/wgengine.NewUserspaceEngine","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.288565012Z","level":"DEBUG","msg":"Engine created.","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:436","func":"tailscale.com/wgengine.NewUserspaceEngine","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.288650988Z","level":"DEBUG","msg":"magicsock debug logging disabled, use CODER_MAGICSOCK_DEBUG_LOGGING=true to enable","caller":"/home/runner/work/coder/coder/tailnet/conn.go:217","func":"github.com/coder/coder/v2/tailnet.NewConn","logger_names":["coderd","servertailnet"]}
{"ts":"2024-10-03T23:04:55.28864178Z","level":"DEBUG","msg":"time until next update check","caller":"/home/runner/work/coder/coder/coderd/updatecheck/updatecheck.go:148","func":"github.com/coder/coder/v2/coderd/updatecheck.(*Checker).start","logger_names":["coderd","update_checker"],"fields":{"duration":"23h36m33.444172608s"}}
{"ts":"2024-10-03T23:04:55.288796509Z","level":"DEBUG","msg":"magicsock: SetPrivateKey called (init)","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/magicsock/magicsock.go:1808","func":"tailscale.com/wgengine/magicsock.(*Conn).SetPrivateKey","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.289408741Z","level":"DEBUG","msg":"skipped sending node; no node callback","caller":"/home/runner/work/coder/coder/tailnet/node.go:66","func":"github.com/coder/coder/v2/tailnet.(*nodeUpdater).updateLoop","logger_names":["coderd","servertailnet"]}
{"ts":"2024-10-03T23:04:55.289405415Z","level":"DEBUG","msg":"initPeer","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:757","func":"github.com/coder/coder/v2/tailnet.(*core).initPeer","logger_names":["coderd","coord"],"fields":{"peer_id":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","peer_name":"08c6a77c-80ad-4fd2-a89c-738973cd7a13"}}
{"ts":"2024-10-03T23:04:55.289359887Z","level":"DEBUG","msg":"updating engine network map","caller":"/home/runner/work/coder/coder/tailnet/configmaps.go:157","func":"github.com/coder/coder/v2/tailnet.(*configMaps).configLoop.func3","logger_names":["coderd","servertailnet"],"fields":{"network_map":"netmap: self: [D+E0H] auth=machine-unknown u=? [fd7a:115c:a1e0:47d3:a6eb:7bea:2a88:57fc/128]\n"}}
{"ts":"2024-10-03T23:04:55.289562047Z","level":"DEBUG","msg":"initial tunnel peers","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:776","func":"github.com/coder/coder/v2/tailnet.(*core).initPeer","logger_names":["coderd","coord"],"fields":{"peer_id":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","peer_name":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","tunnel_peers":[]}}
{"ts":"2024-10-03T23:04:55.289655077Z","level":"DEBUG","msg":"[v1] magicsock: got updated network map; 0 peers","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/magicsock/magicsock.go:1903","func":"tailscale.com/wgengine/magicsock.(*Conn).SetNetworkMap","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.289835355Z","level":"DEBUG","msg":"[v2] netstack: registered IP fd7a:115c:a1e0:47d3:a6eb:7bea:2a88:57fc/128","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/netstack/netstack.go:452","func":"tailscale.com/wgengine/netstack.(*Impl).updateIPs","logger_names":["coderd","servertailnet","net.netstack"]}
{"ts":"2024-10-03T23:04:55.289883929Z","level":"DEBUG","msg":"workspace app stats collector started","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:294","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).start","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:04:55.289794676Z","level":"DEBUG","msg":"skipped sending node; no PreferredDERP","caller":"/home/runner/work/coder/coder/tailnet/node.go:75","func":"github.com/coder/coder/v2/tailnet.(*nodeUpdater).updateLoop","logger_names":["coderd","servertailnet"],"fields":{"node":{"id":7768615550718223489,"as_of":"2024-10-03T23:04:55.28979Z","key":"nodekey:0fe1341c62f708d41407ea8d9d19046a27c785841290ad233c93ce8a56bbd73d","disco":"discokey:6a657cfc8f75c76e4412243bfb2299c4785a8ab776a583da9a86d45032b6d75f","preferred_derp":0,"derp_latency":null,"derp_forced_websockets":{},"addresses":["fd7a:115c:a1e0:47d3:a6eb:7bea:2a88:57fc/128"],"allowed_ips":["fd7a:115c:a1e0:47d3:a6eb:7bea:2a88:57fc/128"],"endpoints":null}}}
{"ts":"2024-10-03T23:04:55.290054939Z","level":"DEBUG","msg":"wgengine: Reconfig: configuring userspace WireGuard config (with 0/0 peers)","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:696","func":"tailscale.com/wgengine.(*userspaceEngine).maybeReconfigWireguardLocked","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.290188958Z","level":"DEBUG","msg":"wg: [v2] UAPI: Updating private key","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/wglog/wglog.go:81","func":"tailscale.com/wgengine/wglog.NewLogger.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.290327385Z","level":"DEBUG","msg":"wgengine: Reconfig: configuring router","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:912","func":"tailscale.com/wgengine.(*userspaceEngine).Reconfig","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.290369727Z","level":"DEBUG","msg":"[v1] warning: fakeRouter.Set: not implemented.","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/router/router_fake.go:26","func":"tailscale.com/wgengine/router.fakeRouter.Set","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.290404795Z","level":"DEBUG","msg":"wgengine: Reconfig: configuring DNS","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:922","func":"tailscale.com/wgengine.(*userspaceEngine).Reconfig","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.29045936Z","level":"DEBUG","msg":"dns: Set: {DefaultResolvers:[] Routes:{} SearchDomains:[] Hosts:0}","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/net/dns.NewManager.WithPrefix.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.290899811Z","level":"DEBUG","msg":"dns: Resolvercfg: {Routes:{} Hosts:0 LocalDomains:[]}","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/net/dns.NewManager.WithPrefix.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.290962752Z","level":"DEBUG","msg":"dns: OScfg: {Nameservers:[] SearchDomains:[] MatchDomains:[] Hosts:[]}","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/net/dns.NewManager.WithPrefix.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.29100322Z","level":"DEBUG","msg":"[v1] wgengine: Reconfig done","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:958","func":"tailscale.com/wgengine.(*userspaceEngine).Reconfig","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.291050742Z","level":"DEBUG","msg":"updating engine filter","caller":"/home/runner/work/coder/coder/tailnet/configmaps.go:165","func":"github.com/coder/coder/v2/tailnet.(*configMaps).configLoop.func4","logger_names":["coderd","servertailnet"],"fields":{"filter":"\u0026{logf:0x14118a0 local:0xc0008bd3c8 logIPs:0xc0008bd3e0 matches4:[{IPProto:[6 17 1 58 132] Srcs:[{ip:{addr:{hi:0 lo:281470681743360} z:0xc000010030} bitsPlusOne:1}] Dsts:[{Net:{ip:{addr:{hi:0 lo:281470681743360} z:0xc000010030} bitsPlusOne:1} Ports:{First:0 Last:65535}}] Caps:[]}] matches6:[{IPProto:[6 17 1 58 132] Srcs:[{ip:{addr:{hi:0 lo:0} z:0xc000010048} bitsPlusOne:1}] Dsts:[{Net:{ip:{addr:{hi:0 lo:0} z:0xc000010048} bitsPlusOne:1} Ports:{First:0 Last:65535}}] Caps:[]}] cap4:[] cap6:[] state:0xc000a8dc90 shieldsUp:false}"}}
{"ts":"2024-10-03T23:04:55.29117901Z","level":"DEBUG","msg":"updating engine DERP map","caller":"/home/runner/work/coder/coder/tailnet/configmaps.go:150","func":"github.com/coder/coder/v2/tailnet.(*configMaps).configLoop.func2","logger_names":["coderd","servertailnet"],"fields":{"derp_map":{"Regions":{"1000":{"EmbeddedRelay":false,"RegionID":1000,"RegionCode":"coder_stun_1000","RegionName":"Coder STUN 1000","Nodes":[{"Name":"1000stun0","RegionID":1000,"HostName":"stun.l.google.com","STUNPort":19302,"STUNOnly":true}]},"1001":{"EmbeddedRelay":false,"RegionID":1001,"RegionCode":"coder_stun_1001","RegionName":"Coder STUN 1001","Nodes":[{"Name":"1001stun0","RegionID":1001,"HostName":"stun1.l.google.com","STUNPort":19302,"STUNOnly":true}]},"1002":{"EmbeddedRelay":false,"RegionID":1002,"RegionCode":"coder_stun_1002","RegionName":"Coder STUN 1002","Nodes":[{"Name":"1002stun0","RegionID":1002,"HostName":"stun2.l.google.com","STUNPort":19302,"STUNOnly":true}]},"1003":{"EmbeddedRelay":false,"RegionID":1003,"RegionCode":"coder_stun_1003","RegionName":"Coder STUN 1003","Nodes":[{"Name":"1003stun0","RegionID":1003,"HostName":"stun3.l.google.com","STUNPort":19302,"STUNOnly":true}]},"1004":{"EmbeddedRelay":false,"RegionID":1004,"RegionCode":"coder_stun_1004","RegionName":"Coder STUN 1004","Nodes":[{"Name":"1004stun0","RegionID":1004,"HostName":"stun4.l.google.com","STUNPort":19302,"STUNOnly":true}]},"999":{"EmbeddedRelay":true,"RegionID":999,"RegionCode":"coder","RegionName":"Coder Embedded Relay","Nodes":[{"Name":"999b","RegionID":999,"HostName":"1ce8t8h51oihk.pit-1.try.coder.app","STUNPort":-1,"DERPPort":443}]}}}}}
{"ts":"2024-10-03T23:04:55.291269154Z","level":"DEBUG","msg":"rolled up data","caller":"/home/runner/work/coder/coder/coderd/database/dbrollup/dbrollup.go:126","func":"github.com/coder/coder/v2/coderd/database/dbrollup.(*Rolluper).start.func1","logger_names":["coderd","dbrollup"],"fields":{"took":"9.895371ms","event":{"template_usage_stats":true}}}
{"ts":"2024-10-03T23:04:55.291412852Z","level":"DEBUG","msg":"next rollup at","caller":"/home/runner/work/coder/coder/coderd/database/dbrollup/dbrollup.go:174","func":"github.com/coder/coder/v2/coderd/database/dbrollup.(*Rolluper).start","logger_names":["coderd","dbrollup"],"fields":{"next":"2024-10-03T23:05:00Z"}}
{"ts":"2024-10-03T23:04:55.300749563Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1003stun0 from 204.16.241.141:54187 (7053ae876eb83b327fbd8398) in 8.405533ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.300860107Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1003stun0 from 204.16.241.141:54187 (440137af19d2dd041c9258a9) in 8.506999ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.300922798Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1003stun0 from 204.16.241.141:54187 (3827333711e395f09379546c) in 8.586783ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.30097603Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1001stun0 from 204.16.241.141:54187 (e2950b7c9fe82eb8c17a948d) in 8.52833ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.301029173Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1001stun0 from 204.16.241.141:54187 (c32f7f9ccf5746e7a7d8e8f4) in 8.555353ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.301077336Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1001stun0 from 204.16.241.141:54187 (c72703f2bf7bb3f1f18f068d) in 8.592785ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.301121832Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1000stun0 from 204.16.241.141:54187 (b3d01f23cab46509a267b2f4) in 8.614417ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.301163913Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1000stun0 from 204.16.241.141:54187 (a60049a7058829ea270e1ac1) in 8.656167ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.301206345Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1000stun0 from 204.16.241.141:54187 (718e7e363a1d93406b72173f) in 8.696656ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.301246713Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1002stun0 from 204.16.241.141:54187 (a9a86bde3aa6356587078c83) in 8.670745ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.301299806Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1002stun0 from 204.16.241.141:54187 (f1bb4b7758d134b765c0ee77) in 8.721403ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.301345594Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1002stun0 from 204.16.241.141:54187 (588d4de84b8f16088e757702) in 8.762443ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.301389048Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1004stun0 from 204.16.241.141:54187 (9bc59d7e397e33b6e93b9ee4) in 8.76613ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.301431921Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1004stun0 from 204.16.241.141:54187 (b22553ef69e98ddeb2a9816b) in 8.803351ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.301472419Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1004stun0 from 204.16.241.141:54187 (b51fbfd671247e2ded906083) in 8.837848ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.330577778Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"replica","message_len":36}}
{"ts":"2024-10-03T23:04:55.332720165Z","level":"DEBUG","msg":"started listening to event channel","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:252","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).subscribeQueue","logger_names":["pubsub"],"fields":{"event":"replica"}}
{"ts":"2024-10-03T23:04:55.334475455Z","level":"INFO","msg":"started","caller":"/home/runner/work/coder/coder/coderd/notifications/manager.go:140","func":"github.com/coder/coder/v2/coderd/notifications.(*Manager).Run","logger_names":["notifications.manager"]}
{"ts":"2024-10-03T23:04:55.334430188Z","level":"DEBUG","msg":"started listening to event channel","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:252","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).subscribeQueue","logger_names":["pubsub"],"fields":{"event":"licenses"}}
{"ts":"2024-10-03T23:04:55.334582522Z","level":"DEBUG","msg":"successfully subscribed to pubsub","caller":"/home/runner/work/coder/coder/enterprise/coderd/coderd.go:1065","func":"github.com/coder/coder/v2/enterprise/coderd.(*API).runEntitlementsLoop","logger_names":["coderd"]}
{"ts":"2024-10-03T23:04:55.334639612Z","level":"DEBUG","msg":"syncing licensed entitlements","caller":"/home/runner/work/coder/coder/enterprise/coderd/coderd.go:1068","func":"github.com/coder/coder/v2/enterprise/coderd.(*API).runEntitlementsLoop","logger_names":["coderd"]}
{"ts":"2024-10-03T23:04:55.334710088Z","level":"DEBUG","msg":"dialing coderd","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:198","func":"github.com/coder/coder/v2/provisionerd.(*Server).connect","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:04:55.334719647Z","level":"DEBUG","msg":"dialing coderd","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:198","func":"github.com/coder/coder/v2/provisionerd.(*Server).connect","logger_names":["provisionerd-backstage-jr-1"]}
{"ts":"2024-10-03T23:04:55.334685721Z","level":"INFO","msg":"started","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:67","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).run","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d"}}
{"ts":"2024-10-03T23:04:55.334809881Z","level":"DEBUG","msg":"dialing coderd","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:198","func":"github.com/coder/coder/v2/provisionerd.(*Server).connect","logger_names":["provisionerd-backstage-jr-2"]}
{"ts":"2024-10-03T23:04:55.335540853Z","level":"DEBUG","msg":"synced licensed entitlements","caller":"/home/runner/work/coder/coder/enterprise/coderd/coderd.go:1076","func":"github.com/coder/coder/v2/enterprise/coderd.(*API).runEntitlementsLoop","logger_names":["coderd"]}
{"ts":"2024-10-03T23:04:55.335887292Z","level":"INFO","msg":"report generator finished","caller":"/home/runner/work/coder/coder/coderd/notifications/reports/generator.go:57","func":"github.com/coder/coder/v2/coderd/notifications/reports.NewReportGenerator.func1.1","logger_names":["notifications.report_generator"],"fields":{"duration":"1.248049ms"}}
{"ts":"2024-10-03T23:04:55.339643165Z","level":"INFO","msg":"purged old database entries","caller":"/home/runner/work/coder/coder/coderd/database/dbpurge/dbpurge.go:66","func":"github.com/coder/coder/v2/coderd/database/dbpurge.New.func1.1","logger_names":["dbpurge"],"fields":{"duration":"4.832133ms"}}
{"ts":"2024-10-03T23:04:55.340326014Z","level":"DEBUG","msg":"starting in-memory provisioner daemon","caller":"/home/runner/work/coder/coder/coderd/coderd.go:1506","func":"github.com/coder/coder/v2/coderd.(*API).CreateInMemoryTaggedProvisionerDaemon","logger_names":["coderd"],"fields":{"name":"backstage-jr-0"}}
{"ts":"2024-10-03T23:04:55.340381101Z","level":"DEBUG","msg":"starting in-memory provisioner daemon","caller":"/home/runner/work/coder/coder/coderd/coderd.go:1506","func":"github.com/coder/coder/v2/coderd.(*API).CreateInMemoryTaggedProvisionerDaemon","logger_names":["coderd"],"fields":{"name":"backstage-jr-1"}}
{"ts":"2024-10-03T23:04:55.340451476Z","level":"INFO","msg":"successfully connected to coderd","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:216","func":"github.com/coder/coder/v2/provisionerd.(*Server).connect","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:04:55.340496684Z","level":"INFO","msg":"successfully connected to coderd","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:216","func":"github.com/coder/coder/v2/provisionerd.(*Server).connect","logger_names":["provisionerd-backstage-jr-1"]}
{"ts":"2024-10-03T23:04:55.340499249Z","level":"DEBUG","msg":"starting in-memory provisioner daemon","caller":"/home/runner/work/coder/coder/coderd/coderd.go:1506","func":"github.com/coder/coder/v2/coderd.(*API).CreateInMemoryTaggedProvisionerDaemon","logger_names":["coderd"],"fields":{"name":"backstage-jr-2"}}
{"ts":"2024-10-03T23:04:55.340528024Z","level":"DEBUG","msg":"start of acquireAndRunOne","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:282","func":"github.com/coder/coder/v2/provisionerd.(*Server).acquireAndRunOne","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:04:55.340566028Z","level":"DEBUG","msg":"start of acquireAndRunOne","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:282","func":"github.com/coder/coder/v2/provisionerd.(*Server).acquireAndRunOne","logger_names":["provisionerd-backstage-jr-1"]}
{"ts":"2024-10-03T23:04:55.340638888Z","level":"INFO","msg":"successfully connected to coderd","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:216","func":"github.com/coder/coder/v2/provisionerd.(*Server).connect","logger_names":["provisionerd-backstage-jr-2"]}
{"ts":"2024-10-03T23:04:55.340723582Z","level":"DEBUG","msg":"start of acquireAndRunOne","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:282","func":"github.com/coder/coder/v2/provisionerd.(*Server).acquireAndRunOne","logger_names":["provisionerd-backstage-jr-2"]}
{"ts":"2024-10-03T23:04:55.340788547Z","level":"DEBUG","msg":"acquiring job","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:101","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:04:55.340791593Z","level":"DEBUG","msg":"acquiring job","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:101","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c37f3a0b-0952-4c61-bb4e-b2ec7eed4b7b","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:04:55.340879353Z","level":"DEBUG","msg":"acquiring job","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:101","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:04:55.341025565Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:04:55.341027669Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:04:55.341683696Z","level":"DEBUG","msg":"netcheck: [v1] measuring ICMP latency of coder (999): no address for node 999b","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.342615005Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:04:55.351835612Z","level":"DEBUG","msg":"started listening to event channel","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:252","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).subscribeQueue","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9"}}
{"ts":"2024-10-03T23:04:55.352439649Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:04:55.334953829Z","took":"17.484527ms","status_code":200,"latency_ms":17,"request_id":"2a369912-9026-4755-9555-17d5d3b52e1e"}}
{"ts":"2024-10-03T23:04:55.352446041Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/derp/latency-check","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:04:55.352396886Z","took":"48.393µs","status_code":200,"latency_ms":0,"request_id":"40774c71-aff9-40f9-b837-4870b156a1bb"}}
{"ts":"2024-10-03T23:04:55.353176582Z","level":"DEBUG","msg":"got initial metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1051","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:04:55.353365366Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:04:55.353658212Z","level":"DEBUG","msg":"netcheck: [v1] report: udp=true v6=false v6os=false mapvarydest=false hair= portmap= v4a=204.16.241.141:54187 derp=999 derpdist=999v4:2ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.353803032Z","level":"DEBUG","msg":"magicsock: home is now derp-999 (coder)","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/magicsock/derp.go:171","func":"tailscale.com/wgengine/magicsock.(*Conn).setNearestDERP","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.353868748Z","level":"DEBUG","msg":"magicsock: adding connection to derp-999 for home-keep-alive","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/magicsock/derp.go:312","func":"tailscale.com/wgengine/magicsock.(*Conn).derpWriteChanOfAddr","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.353884038Z","level":"DEBUG","msg":"new preferred DERP","caller":"/home/runner/work/coder/coder/tailnet/node.go:144","func":"github.com/coder/coder/v2/tailnet.(*nodeUpdater).setNetInfo","logger_names":["coderd","servertailnet"],"fields":{"preferred_derp":999}}
{"ts":"2024-10-03T23:04:55.354031523Z","level":"DEBUG","msg":"magicsock: 1 active derp conns: derp-999=cr0s,wr0s","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/magicsock/derp.go:827","func":"tailscale.com/wgengine/magicsock.(*Conn).logActiveDerpLocked","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.354035911Z","level":"DEBUG","msg":"calling nodeUpdater callback","caller":"/home/runner/work/coder/coder/tailnet/node.go:80","func":"github.com/coder/coder/v2/tailnet.(*nodeUpdater).updateLoop","logger_names":["coderd","servertailnet"],"fields":{"node":{"id":7768615550718223489,"as_of":"2024-10-03T23:04:55.354029Z","key":"nodekey:0fe1341c62f708d41407ea8d9d19046a27c785841290ad233c93ce8a56bbd73d","disco":"discokey:6a657cfc8f75c76e4412243bfb2299c4785a8ab776a583da9a86d45032b6d75f","preferred_derp":999,"derp_latency":{"999-v4":0.002472886},"derp_forced_websockets":{},"addresses":["fd7a:115c:a1e0:47d3:a6eb:7bea:2a88:57fc/128"],"allowed_ips":["fd7a:115c:a1e0:47d3:a6eb:7bea:2a88:57fc/128"],"endpoints":null}}}
{"ts":"2024-10-03T23:04:55.354112429Z","level":"DEBUG","msg":"wireguard status","caller":"/home/runner/work/coder/coder/tailnet/node.go:173","func":"github.com/coder/coder/v2/tailnet.(*nodeUpdater).setStatus","logger_names":["coderd","servertailnet"],"fields":{"status":"\u0026{AsOf:2024-10-03 23:04:55.354106217 +0000 UTC m=+3.805413845 Peers:[] LocalAddrs:[] DERPs:1}","error":null}}
{"ts":"2024-10-03T23:04:55.354142748Z","level":"DEBUG","msg":"connecting to embedded DERP via in-memory pipe","caller":"/home/runner/work/coder/coder/coderd/tailnet.go:82","func":"github.com/coder/coder/v2/coderd.NewServerTailnet.func1","logger_names":["coderd","servertailnet"]}
{"ts":"2024-10-03T23:04:55.354245877Z","level":"DEBUG","msg":"magicsock: endpoints changed: 204.16.241.141:54187 (stun), 172.17.0.1:54187 (local), 172.20.0.15:54187 (local)","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/magicsock/magicsock.go:2039","func":"tailscale.com/wgengine/magicsock.(*Conn).logEndpointChange","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.354217001Z","level":"DEBUG","msg":"peerReadLoop got request","caller":"/home/runner/work/coder/coder/tailnet/peer.go:135","func":"github.com/coder/coder/v2/tailnet.(*peer).reqLoop","logger_names":["coderd","coord"],"fields":{"peer_id":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","peer_name":"08c6a77c-80ad-4fd2-a89c-738973cd7a13"}}
{"ts":"2024-10-03T23:04:55.354352733Z","level":"DEBUG","msg":"wireguard status","caller":"/home/runner/work/coder/coder/tailnet/node.go:173","func":"github.com/coder/coder/v2/tailnet.(*nodeUpdater).setStatus","logger_names":["coderd","servertailnet"],"fields":{"status":"\u0026{AsOf:2024-10-03 23:04:55.354351721 +0000 UTC m=+3.805659349 Peers:[] LocalAddrs:[{Addr:204.16.241.141:54187 Type:stun} {Addr:172.17.0.1:54187 Type:local} {Addr:172.20.0.15:54187 Type:local}] DERPs:1}","error":null}}
{"ts":"2024-10-03T23:04:55.354492774Z","level":"DEBUG","msg":"calling nodeUpdater callback","caller":"/home/runner/work/coder/coder/tailnet/node.go:80","func":"github.com/coder/coder/v2/tailnet.(*nodeUpdater).updateLoop","logger_names":["coderd","servertailnet"],"fields":{"node":{"id":7768615550718223489,"as_of":"2024-10-03T23:04:55.35449Z","key":"nodekey:0fe1341c62f708d41407ea8d9d19046a27c785841290ad233c93ce8a56bbd73d","disco":"discokey:6a657cfc8f75c76e4412243bfb2299c4785a8ab776a583da9a86d45032b6d75f","preferred_derp":999,"derp_latency":{"999-v4":0.002472886},"derp_forced_websockets":{},"addresses":["fd7a:115c:a1e0:47d3:a6eb:7bea:2a88:57fc/128"],"allowed_ips":["fd7a:115c:a1e0:47d3:a6eb:7bea:2a88:57fc/128"],"endpoints":["204.16.241.141:54187","172.17.0.1:54187","172.20.0.15:54187"]}}}
{"ts":"2024-10-03T23:04:55.354569472Z","level":"DEBUG","msg":"processing node update","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:678","func":"github.com/coder/coder/v2/tailnet.(*core).nodeUpdateLocked","logger_names":["coderd","coord"],"fields":{"peer_id":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","node":"id:7768615550718223489  as_of:{seconds:1727996695  nanos:354029000}  key:\"np\\x0f\\xe14\\x1cb\\xf7\\x08\\xd4\\x14\\x07ꍝ\\x19\\x04j'ǅ\\x84\\x12\\x90\\xad#\u003c\\x93ΊV\\xbb\\xd7=\"  disco:\"discokey:6a657cfc8f75c76e4412243bfb2299c4785a8ab776a583da9a86d45032b6d75f\"  preferred_derp:999  derp_latency:{key:\"999-v4\"  value:0.002472886}  addresses:\"fd7a:115c:a1e0:47d3:a6eb:7bea:2a88:57fc/128\"  allowed_ips:\"fd7a:115c:a1e0:47d3:a6eb:7bea:2a88:57fc/128\""}}
{"ts":"2024-10-03T23:04:55.354674685Z","level":"DEBUG","msg":"got tunnel peers","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:689","func":"github.com/coder/coder/v2/tailnet.(*core).updateTunnelPeersLocked","logger_names":["coderd","coord"],"fields":{"peer_id":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","tunnel_peers":[]}}
{"ts":"2024-10-03T23:04:55.354748437Z","level":"DEBUG","msg":"peerReadLoop got request","caller":"/home/runner/work/coder/coder/tailnet/peer.go:135","func":"github.com/coder/coder/v2/tailnet.(*peer).reqLoop","logger_names":["coderd","coord"],"fields":{"peer_id":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","peer_name":"08c6a77c-80ad-4fd2-a89c-738973cd7a13"}}
{"ts":"2024-10-03T23:04:55.354824274Z","level":"DEBUG","msg":"processing node update","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:678","func":"github.com/coder/coder/v2/tailnet.(*core).nodeUpdateLocked","logger_names":["coderd","coord"],"fields":{"peer_id":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","node":"id:7768615550718223489  as_of:{seconds:1727996695  nanos:354490000}  key:\"np\\x0f\\xe14\\x1cb\\xf7\\x08\\xd4\\x14\\x07ꍝ\\x19\\x04j'ǅ\\x84\\x12\\x90\\xad#\u003c\\x93ΊV\\xbb\\xd7=\"  disco:\"discokey:6a657cfc8f75c76e4412243bfb2299c4785a8ab776a583da9a86d45032b6d75f\"  preferred_derp:999  derp_latency:{key:\"999-v4\"  value:0.002472886}  addresses:\"fd7a:115c:a1e0:47d3:a6eb:7bea:2a88:57fc/128\"  allowed_ips:\"fd7a:115c:a1e0:47d3:a6eb:7bea:2a88:57fc/128\"  endpoints:\"204.16.241.141:54187\"  endpoints:\"172.17.0.1:54187\"  endpoints:\"172.20.0.15:54187\""}}
{"ts":"2024-10-03T23:04:55.354906463Z","level":"DEBUG","msg":"got tunnel peers","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:689","func":"github.com/coder/coder/v2/tailnet.(*core).updateTunnelPeersLocked","logger_names":["coderd","coord"],"fields":{"peer_id":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","tunnel_peers":[]}}
{"ts":"2024-10-03T23:04:55.354903677Z","level":"DEBUG","msg":"magicsock: derp-999 connected; connGen=1","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/magicsock/derp.go:540","func":"tailscale.com/wgengine/magicsock.(*Conn).runDerpReader","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:04:55.356780211Z","level":"INFO","msg":"detected terraform version","caller":"/home/runner/work/coder/coder/provisioner/terraform/serve.go:66","func":"github.com/coder/coder/v2/provisioner/terraform.absoluteBinaryPath","logger_names":["provisionerd-backstage-jr-2"],"fields":{"installed_version":"1.5.7","min_version":"1.1.0","max_version":"1.9.9"}}
{"ts":"2024-10-03T23:04:55.36009847Z","level":"INFO","msg":"detected terraform version","caller":"/home/runner/work/coder/coder/provisioner/terraform/serve.go:66","func":"github.com/coder/coder/v2/provisioner/terraform.absoluteBinaryPath","logger_names":["provisionerd-backstage-jr-0"],"fields":{"installed_version":"1.5.7","min_version":"1.1.0","max_version":"1.9.9"}}
{"ts":"2024-10-03T23:04:55.360195096Z","level":"INFO","msg":"detected terraform version","caller":"/home/runner/work/coder/coder/provisioner/terraform/serve.go:66","func":"github.com/coder/coder/v2/provisioner/terraform.absoluteBinaryPath","logger_names":["provisionerd-backstage-jr-1"],"fields":{"installed_version":"1.5.7","min_version":"1.1.0","max_version":"1.9.9"}}
{"ts":"2024-10-03T23:04:56.059503224Z","level":"DEBUG","msg":"check-auth","caller":"/home/runner/work/coder/coder/coderd/authorize.go:130","func":"github.com/coder/coder/v2/coderd.(*API).checkAuthorization","logger_names":["coderd"],"fields":{"request_id":"57cd7973-b112-407a-a27b-bc5c9c01ddbf","my_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","got_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","name":"{FriendlyName:Help ID:45d2dc02-0d60-41da-8f83-b611c0a5728b Roles:[{Identifier:owner DisplayName:Owner Site:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:organization_member Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:user Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:workspace Action:start} {Negate:false ResourceType:workspace Action:stop} {Negate:false ResourceType:workspace Action:ssh} {Negate:false ResourceType:workspace Action:application_connect} {Negate:false ResourceType:workspace Action:create} {Negate:false ResourceType:workspace Action:read} {Negate:false ResourceType:workspace Action:update} {Negate:false ResourceType:workspace Action:delete} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] Org:map[] User:[] cachedRegoValue:0xc00069b380} {Identifier:member DisplayName:Member Site:[{Negate:false ResourceType:assign_role Action:read} {Negate:false ResourceType:oauth2_app Action:read} {Negate:false ResourceType:workspace_proxy Action:read}] Org:map[] User:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:workspace Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:create} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:update} {Negate:false ResourceType:user Action:read} {Negate:false ResourceType:user Action:read_personal} {Negate:false ResourceType:user Action:update_personal} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] cachedRegoValue:0xc00069bf40} {Identifier:organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11 DisplayName: Site:[] Org:map[6ed51444-d360-4b0c-aac1-6894bd4cbd11:[{Negate:false ResourceType:assign_org_role Action:read} {Negate:false ResourceType:organization Action:read} {Negate:false ResourceType:provisioner_daemon Action:read}]] User:[{Negate:false ResourceType:organization_member Action:read}] cachedRegoValue:\u003cnil\u003e}] Groups:[] Scope:all cachedASTValue:0xc01b1ec540}","roles":["owner","member","organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11"],"scope":"all"}}
{"ts":"2024-10-03T23:04:56.066817289Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/api/v2/authcheck","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:04:56.05643069Z","took":"10.385126ms","status_code":200,"latency_ms":10,"request_id":"57cd7973-b112-407a-a27b-bc5c9c01ddbf"}}
{"ts":"2024-10-03T23:04:56.117395939Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/api/v2/organizations","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:04:56.114286574Z","took":"3.108052ms","status_code":200,"latency_ms":3,"request_id":"f0011c02-f3a3-4599-b787-0f32b8bca6ef"}}
{"ts":"2024-10-03T23:04:56.208138113Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/latency-check","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:04:56.208112324Z","took":"24.888µs","status_code":200,"latency_ms":0,"request_id":"d83471ce-64cc-4f8a-8ecd-507dbd81c151"}}
{"ts":"2024-10-03T23:04:56.210028224Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/api/v2/updatecheck","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:04:56.208822896Z","took":"1.202863ms","status_code":200,"latency_ms":1,"request_id":"7d9aee18-6ba7-4ac7-9d51-8b504e73022e"}}
{"ts":"2024-10-03T23:04:56.210785707Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/api/v2/deployment/stats","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:04:56.208959901Z","took":"1.823682ms","status_code":200,"latency_ms":1,"request_id":"8aa8f246-adbb-4f50-946e-3bde568d08fc"}}
{"ts":"2024-10-03T23:04:56.215043119Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/healthz","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:04:56.215017409Z","took":"24.928µs","status_code":200,"latency_ms":0,"request_id":"4a11f6b0-6664-41df-8eb6-927609228010"}}
{"ts":"2024-10-03T23:04:56.221374717Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/api/v2/debug/ws","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:04:56.216701431Z","took":"4.671182ms","status_code":101,"latency_ms":4,"request_id":"7abceebc-d6e6-4e4c-bc5d-3bac0cd43ead"}}
{"ts":"2024-10-03T23:04:56.228256296Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/derp","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:04:56.220097971Z","took":"8.156712ms","status_code":0,"latency_ms":8,"request_id":"3e879bbe-6df9-4efa-81a8-2debc1b6c534"}}
{"ts":"2024-10-03T23:04:56.228355889Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/derp","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:04:56.226214163Z","took":"2.1386ms","status_code":0,"latency_ms":2,"request_id":"9aedc93b-86a2-4f26-aca2-bd9734c53ba7"}}
{"ts":"2024-10-03T23:04:56.271028479Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/api/v2/users","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:04:56.258075204Z","took":"12.942044ms","status_code":200,"latency_ms":12,"request_id":"2f39d6cb-f8c5-4ea5-a1a9-c258c246b7bf"}}
{"ts":"2024-10-03T23:04:56.275729759Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/api/v2/organizations","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:04:56.274328943Z","took":"1.399473ms","status_code":200,"latency_ms":1,"request_id":"a8a92fac-8bfc-4903-bb32-c44c33ea20bb"}}
{"ts":"2024-10-03T23:04:56.275937139Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/api/v2/templates","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:04:56.257958188Z","took":"17.977609ms","status_code":200,"latency_ms":17,"request_id":"ce1f5504-cbbb-441c-99f4-64c3fbb48cc3"}}
{"ts":"2024-10-03T23:04:56.281160667Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/derp/latency-check","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:04:56.281129798Z","took":"29.266µs","status_code":200,"latency_ms":0,"request_id":"5af2669c-d017-4f42-b3fa-feb96690cb22"}}
{"ts":"2024-10-03T23:04:56.283695262Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/api/v2/debug/health","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:04:56.208103256Z","took":"75.590082ms","status_code":200,"latency_ms":75,"request_id":"dfedc919-839a-40ce-8b01-338b91750170"}}
{"ts":"2024-10-03T23:04:56.310491402Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:04:56.273666294Z","took":"36.822703ms","status_code":200,"latency_ms":36,"request_id":"0f2686d8-8bf2-45ad-bcce-eb3df1b06de2"}}
{"ts":"2024-10-03T23:04:56.337797246Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/api/v2/templates","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:04:56.319998202Z","took":"17.797451ms","status_code":200,"latency_ms":17,"request_id":"e5f1deff-a884-4b14-8f5b-3a84a7f4fd26"}}
{"ts":"2024-10-03T23:04:56.353399838Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:04:56.354851782Z","level":"DEBUG","msg":"check-auth","caller":"/home/runner/work/coder/coder/coderd/authorize.go:130","func":"github.com/coder/coder/v2/coderd.(*API).checkAuthorization","logger_names":["coderd"],"fields":{"request_id":"5abfd94e-6af4-460b-bfc6-f7dcf02758fa","my_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","got_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","name":"{FriendlyName:Help ID:45d2dc02-0d60-41da-8f83-b611c0a5728b Roles:[{Identifier:owner DisplayName:Owner Site:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:organization_member Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:user Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:workspace Action:start} {Negate:false ResourceType:workspace Action:stop} {Negate:false ResourceType:workspace Action:ssh} {Negate:false ResourceType:workspace Action:application_connect} {Negate:false ResourceType:workspace Action:create} {Negate:false ResourceType:workspace Action:read} {Negate:false ResourceType:workspace Action:update} {Negate:false ResourceType:workspace Action:delete} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] Org:map[] User:[] cachedRegoValue:0xc00069b380} {Identifier:member DisplayName:Member Site:[{Negate:false ResourceType:assign_role Action:read} {Negate:false ResourceType:oauth2_app Action:read} {Negate:false ResourceType:workspace_proxy Action:read}] Org:map[] User:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:workspace Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:create} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:update} {Negate:false ResourceType:user Action:read} {Negate:false ResourceType:user Action:read_personal} {Negate:false ResourceType:user Action:update_personal} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] cachedRegoValue:0xc00069bf40} {Identifier:organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11 DisplayName: Site:[] Org:map[6ed51444-d360-4b0c-aac1-6894bd4cbd11:[{Negate:false ResourceType:assign_org_role Action:read} {Negate:false ResourceType:organization Action:read} {Negate:false ResourceType:provisioner_daemon Action:read}]] User:[{Negate:false ResourceType:organization_member Action:read}] cachedRegoValue:\u003cnil\u003e}] Groups:[] Scope:all cachedASTValue:0xc01b7b5bc0}","roles":["owner","member","organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11"],"scope":"all"}}
{"ts":"2024-10-03T23:04:56.355935204Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/api/v2/authcheck","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:04:56.353353849Z","took":"2.579873ms","status_code":200,"latency_ms":2,"request_id":"5abfd94e-6af4-460b-bfc6-f7dcf02758fa"}}
{"ts":"2024-10-03T23:04:57.909480604Z","level":"DEBUG","msg":"accepting agent RPC connection","caller":"/home/runner/work/coder/coder/coderd/workspaceagentsrpc.go:119","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentRPC","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","agent_created_at":"2024-10-03T22:48:39.744785Z","agent_updated_at":"2024-10-03T23:02:32.654955Z","agent_name":"main","agent_first_connected_at":"2024-10-03T22:49:06.115983Z","agent_last_connected_at":"2024-10-03T23:02:29.223922Z","agent_disconnected_at":"2024-10-03T23:02:32.654954Z","agent_version":"v2.16.0+683a720","agent_last_connected_replica_id":"7b70d0f2-3dae-442f-910e-3e4174003ef2","agent_connection_timeout_seconds":120,"agent_api_version":"2.2","agent_resource_id":"eaa41026-3d26-4934-8d73-804859387c9e"}}
{"ts":"2024-10-03T23:04:57.911043813Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:04:57.922023416Z","level":"DEBUG","msg":"post workspace agent version","caller":"/home/runner/work/coder/coder/coderd/agentapi/lifecycle.go:148","func":"github.com/coder/coder/v2/coderd/agentapi.(*LifecycleAPI).UpdateStartup","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","agent_version":"v2.16.0+683a720"}}
{"ts":"2024-10-03T23:04:57.927051196Z","level":"DEBUG","msg":"starting tailnet Coordinate","caller":"/home/runner/work/coder/coder/tailnet/service.go:195","func":"github.com/coder/coder/v2/tailnet.(*DRPCService).Coordinate","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","peer_id":"{Name:Help-azure-kite-88-main ID:510b058c-9955-47e0-af97-46e48e739ac9 Auth:{ID:510b058c-9955-47e0-af97-46e48e739ac9}}","name":"Help-azure-kite-88-main","request_id":"542db09f-4624-40a8-8994-108a409aa956"}}
{"ts":"2024-10-03T23:04:57.927379951Z","level":"DEBUG","msg":"initPeer","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:757","func":"github.com/coder/coder/v2/tailnet.(*core).initPeer","logger_names":["coderd","coord"],"fields":{"peer_id":"510b058c-9955-47e0-af97-46e48e739ac9","peer_name":"Help-azure-kite-88-main"}}
{"ts":"2024-10-03T23:04:57.92749833Z","level":"DEBUG","msg":"initial tunnel peers","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:776","func":"github.com/coder/coder/v2/tailnet.(*core).initPeer","logger_names":["coderd","coord"],"fields":{"peer_id":"510b058c-9955-47e0-af97-46e48e739ac9","peer_name":"Help-azure-kite-88-main","tunnel_peers":[]}}
{"ts":"2024-10-03T23:04:57.927825081Z","level":"DEBUG","msg":"peerReadLoop got request","caller":"/home/runner/work/coder/coder/tailnet/peer.go:135","func":"github.com/coder/coder/v2/tailnet.(*peer).reqLoop","logger_names":["coderd","coord"],"fields":{"peer_id":"510b058c-9955-47e0-af97-46e48e739ac9","peer_name":"Help-azure-kite-88-main","request_id":"542db09f-4624-40a8-8994-108a409aa956"}}
{"ts":"2024-10-03T23:04:57.928058241Z","level":"DEBUG","msg":"processing node update","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:678","func":"github.com/coder/coder/v2/tailnet.(*core).nodeUpdateLocked","logger_names":["coderd","coord"],"fields":{"peer_id":"510b058c-9955-47e0-af97-46e48e739ac9","node":"id:5794084448132425015  as_of:{seconds:1727996697  nanos:925671000}  key:\"np\\x7f'!F1m!/\\xbc\\xd19g\\r\\xe9\\xd8V\\xbb֣\\xd6p4KY{\\x13\\xa8\\x8f\u003e=\\x8cM\"  disco:\"discokey:3878a3035da432f2f5177937a1d00f313c2527d1b4cb3f661b2c8984c13ae170\"  preferred_derp:999  derp_latency:{key:\"999-v4\"  value:0.00162412}  addresses:\"fd7a:115c:a1e0:47e0:af97:46e4:8e73:9ac9/128\"  allowed_ips:\"fd7a:115c:a1e0:47e0:af97:46e4:8e73:9ac9/128\"  endpoints:\"204.16.241.141:49010\"  endpoints:\"172.17.0.3:49010\""}}
{"ts":"2024-10-03T23:04:57.928196939Z","level":"DEBUG","msg":"got tunnel peers","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:689","func":"github.com/coder/coder/v2/tailnet.(*core).updateTunnelPeersLocked","logger_names":["coderd","coord"],"fields":{"peer_id":"510b058c-9955-47e0-af97-46e48e739ac9","tunnel_peers":[]}}
{"ts":"2024-10-03T23:04:57.932089687Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:04:57.933948056Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:04:58.511808717Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.484727ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:04:58.91933493Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:04:58.919332Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:04:58.919772385Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:04:58.919332Z","key":"6_load_host","value":"0.10"}}
{"ts":"2024-10-03T23:04:58.920013029Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:04:58.919332Z","key":"1_ram_usage","value":"0.208 GiB\n"}}
{"ts":"2024-10-03T23:04:58.920249586Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:04:58.919332Z","key":"5_mem_usage_host","value":"27.6/251 GiB (11..."}}
{"ts":"2024-10-03T23:04:58.920502344Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:04:58.919332Z","key":"3_home_disk","value":"23.7/468 GiB (5%..."}}
{"ts":"2024-10-03T23:04:58.920735565Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:04:58.919332Z","key":"0_cpu_usage","value":"0.169 cores\n"}}
{"ts":"2024-10-03T23:04:58.920957934Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:04:58.919332Z","key":"4_cpu_usage_host","value":"2.47/64 cores (4..."}}
{"ts":"2024-10-03T23:04:58.922633731Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":163}}
{"ts":"2024-10-03T23:04:58.923201738Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:04:58.919332Z","keys":["7_swap_host","6_load_host","1_ram_usage","5_mem_usage_host","3_home_disk","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:04:58.9247771Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","6_load_host","1_ram_usage","5_mem_usage_host","3_home_disk","0_cpu_usage","4_cpu_usage_host"],"num":7}}
{"ts":"2024-10-03T23:04:59.354246102Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:05:00.000271838Z","level":"DEBUG","msg":"rolling up data","caller":"/home/runner/work/coder/coder/coderd/database/dbrollup/dbrollup.go:91","func":"github.com/coder/coder/v2/coderd/database/dbrollup.(*Rolluper).start.func1","logger_names":["coderd","dbrollup"]}
{"ts":"2024-10-03T23:05:00.007362001Z","level":"DEBUG","msg":"rolled up data","caller":"/home/runner/work/coder/coder/coderd/database/dbrollup/dbrollup.go:126","func":"github.com/coder/coder/v2/coderd/database/dbrollup.(*Rolluper).start.func1","logger_names":["coderd","dbrollup"],"fields":{"took":"6.807167ms","event":{"template_usage_stats":true}}}
{"ts":"2024-10-03T23:05:00.007732196Z","level":"DEBUG","msg":"next rollup at","caller":"/home/runner/work/coder/coder/coderd/database/dbrollup/dbrollup.go:174","func":"github.com/coder/coder/v2/coderd/database/dbrollup.(*Rolluper).start","logger_names":["coderd","dbrollup"],"fields":{"next":"2024-10-03T23:10:00Z"}}
{"ts":"2024-10-03T23:05:05.353647424Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:05:08.914747827Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:05:08.914744Z","key":"0_cpu_usage","value":"0.267 cores\n"}}
{"ts":"2024-10-03T23:05:08.915213666Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:05:08.914744Z","key":"4_cpu_usage_host","value":"1.3/64 cores (2%..."}}
{"ts":"2024-10-03T23:05:08.915530649Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:05:08.914744Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:05:08.915814026Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:05:08.914744Z","key":"1_ram_usage","value":"0.203 GiB\n"}}
{"ts":"2024-10-03T23:05:08.916070621Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:05:08.914744Z","key":"5_mem_usage_host","value":"29.4/251 GiB (12..."}}
{"ts":"2024-10-03T23:05:08.918107455Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:05:08.918737602Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:05:08.914744Z","keys":["0_cpu_usage","4_cpu_usage_host","7_swap_host","1_ram_usage","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:05:08.920603065Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage","4_cpu_usage_host","7_swap_host","1_ram_usage","5_mem_usage_host"],"num":5}}
{"ts":"2024-10-03T23:05:09.353686543Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:05:09.508189532Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:05:09.508977434Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:05:09.509166549Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:05:10.247158344Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:05:10.211298888Z","took":"35.857691ms","status_code":200,"latency_ms":35,"request_id":"9b524a2a-82b7-4263-a50d-74d9398cc69b"}}
{"ts":"2024-10-03T23:05:10.338534487Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:05:11.399186786Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:05:11.361413925Z","took":"37.770916ms","status_code":200,"latency_ms":37,"request_id":"2a10f764-f7db-40fd-a64c-3c7b8a643082"}}
{"ts":"2024-10-03T23:05:12.913004095Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:05:15.35382914Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:05:15.443546381Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/cli-auth","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:05:15.438023455Z","took":"5.521223ms","status_code":200,"latency_ms":5,"request_id":"72a5731b-1c06-4316-91b0-5408408764ae"}}
{"ts":"2024-10-03T23:05:15.93318258Z","level":"DEBUG","msg":"check-auth","caller":"/home/runner/work/coder/coder/coderd/authorize.go:130","func":"github.com/coder/coder/v2/coderd.(*API).checkAuthorization","logger_names":["coderd"],"fields":{"request_id":"a6e1b923-c53b-4a45-8bd6-cecb5f9cd35e","my_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","got_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","name":"{FriendlyName:Help ID:45d2dc02-0d60-41da-8f83-b611c0a5728b Roles:[{Identifier:owner DisplayName:Owner Site:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:organization_member Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:user Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:workspace Action:start} {Negate:false ResourceType:workspace Action:stop} {Negate:false ResourceType:workspace Action:ssh} {Negate:false ResourceType:workspace Action:application_connect} {Negate:false ResourceType:workspace Action:create} {Negate:false ResourceType:workspace Action:read} {Negate:false ResourceType:workspace Action:update} {Negate:false ResourceType:workspace Action:delete} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] Org:map[] User:[] cachedRegoValue:0xc00069b380} {Identifier:member DisplayName:Member Site:[{Negate:false ResourceType:assign_role Action:read} {Negate:false ResourceType:oauth2_app Action:read} {Negate:false ResourceType:workspace_proxy Action:read}] Org:map[] User:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:workspace Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:create} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:update} {Negate:false ResourceType:user Action:read} {Negate:false ResourceType:user Action:read_personal} {Negate:false ResourceType:user Action:update_personal} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] cachedRegoValue:0xc00069bf40} {Identifier:organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11 DisplayName: Site:[] Org:map[6ed51444-d360-4b0c-aac1-6894bd4cbd11:[{Negate:false ResourceType:assign_org_role Action:read} {Negate:false ResourceType:organization Action:read} {Negate:false ResourceType:provisioner_daemon Action:read}]] User:[{Negate:false ResourceType:organization_member Action:read}] cachedRegoValue:\u003cnil\u003e}] Groups:[] Scope:all cachedASTValue:0xc01b843c40}","roles":["owner","member","organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11"],"scope":"all"}}
{"ts":"2024-10-03T23:05:15.934118257Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/authcheck","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:05:15.931789139Z","took":"2.327826ms","status_code":200,"latency_ms":2,"request_id":"a6e1b923-c53b-4a45-8bd6-cecb5f9cd35e"}}
{"ts":"2024-10-03T23:05:15.969439463Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/organizations","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:05:15.967707428Z","took":"1.72938ms","status_code":200,"latency_ms":1,"request_id":"254bdc23-3eb2-4436-800d-e58005402e22"}}
{"ts":"2024-10-03T23:05:16.047714676Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/users/me/keys","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:05:16.044295072Z","took":"3.414986ms","status_code":201,"latency_ms":3,"request_id":"3230222c-8f18-422a-beb0-1d7e8733323d"}}
{"ts":"2024-10-03T23:05:16.11227339Z","level":"DEBUG","msg":"submitted snapshot","caller":"/home/runner/work/coder/coder/coderd/telemetry/telemetry.go:150","func":"github.com/coder/coder/v2/coderd/telemetry.(*remoteReporter).reportSync","logger_names":["telemetry"]}
{"ts":"2024-10-03T23:05:16.202576784Z","level":"DEBUG","msg":"CSP violation reported","caller":"/home/runner/work/coder/coder/coderd/csp.go:46","func":"github.com/coder/coder/v2/coderd.(*API).logReportCSPViolations","logger_names":["coderd"],"fields":{"request_id":"2269e4f8-0ea0-4e84-a86b-42fc1872b4d0","violated-directive":"connect-src","disposition":"enforce","document-uri":"http://localhost:3005/cli-auth","referrer":"http://localhost:8083/","blocked-uri":"https://1ce8t8h51oihk.pit-1.try.coder.app/latency-check?cache_bust=O31ro84w","line-number":279,"column-number":7449,"source-file":"http://localhost:3005/assets/index-2nv8Z01B.js","status-code":200,"script-sample":"","effective-directive":"connect-src","original-policy":"child-src 'self'; style-src 'self' 'unsafe-inline'; font-src 'self' data:; frame-src 'self'; media-src 'self'; default-src 'self'; connect-src 'self' https://coder.com wss://localhost:3005 ws://localhost:3005; img-src 'self' https: data:; form-action 'self'; frame-ancestors 'none'; worker-src 'self' blob:; object-src 'self'; manifest-src 'self' blob:; script-src 'self'; report-uri /api/v2/csp/reports;"}}
{"ts":"2024-10-03T23:05:16.202944584Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/csp/reports","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:05:16.202454137Z","took":"489.535µs","status_code":200,"latency_ms":0,"request_id":"2269e4f8-0ea0-4e84-a86b-42fc1872b4d0"}}
{"ts":"2024-10-03T23:05:17.18686383Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/deployment/stats","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:05:17.185560382Z","took":"1.301825ms","status_code":200,"latency_ms":1,"request_id":"84f061e3-627c-42e1-96d8-827f4f591e04"}}
{"ts":"2024-10-03T23:05:19.913891573Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:05:19.913889Z","key":"4_cpu_usage_host","value":"2.28/64 cores (4..."}}
{"ts":"2024-10-03T23:05:19.914187083Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:05:19.913889Z","key":"0_cpu_usage","value":"0.282 cores\n"}}
{"ts":"2024-10-03T23:05:19.914337444Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:05:19.913889Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:05:19.914462545Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:05:19.913889Z","key":"1_ram_usage","value":"0.203 GiB\n"}}
{"ts":"2024-10-03T23:05:19.91459938Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:05:19.913889Z","key":"5_mem_usage_host","value":"29.3/251 GiB (12..."}}
{"ts":"2024-10-03T23:05:19.915673013Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:05:19.916055803Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:05:19.913889Z","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host","1_ram_usage","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:05:19.91773222Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host","1_ram_usage","5_mem_usage_host"],"num":5}}
{"ts":"2024-10-03T23:05:20.35337551Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:05:24.508660471Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:05:24.509134095Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:05:24.509240972Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:05:25.282482817Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"1.358224ms"}}
{"ts":"2024-10-03T23:05:25.291197648Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:05:25.291469714Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:05:25.338439719Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:05:25.341714423Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:05:25.342754622Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:05:25.354270484Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:05:27.932848056Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:05:27.935526599Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:05:28.511790339Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.178566ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:05:29.914428214Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:05:29.914424Z","key":"1_ram_usage","value":"0.198 GiB\n"}}
{"ts":"2024-10-03T23:05:29.915091145Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:05:29.914424Z","key":"0_cpu_usage","value":"0.248 cores\n"}}
{"ts":"2024-10-03T23:05:29.9155029Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:05:29.914424Z","key":"4_cpu_usage_host","value":"7.9/64 cores (12..."}}
{"ts":"2024-10-03T23:05:29.915885249Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:05:29.914424Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:05:29.916151833Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:05:29.914424Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:05:29.918502103Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:05:29.919163009Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:05:29.914424Z","keys":["1_ram_usage","0_cpu_usage","4_cpu_usage_host","7_swap_host","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:05:29.920805051Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage","0_cpu_usage","4_cpu_usage_host","7_swap_host","5_mem_usage_host"],"num":5}}
{"ts":"2024-10-03T23:05:30.354044843Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:05:36.213186408Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/api/v2/deployment/stats","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:05:36.211938177Z","took":"1.246027ms","status_code":200,"latency_ms":1,"request_id":"ccbf237a-1b08-48e2-8306-e5d639a275da"}}
{"ts":"2024-10-03T23:05:36.354121077Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:05:39.508259083Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:05:39.509049229Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:05:39.509260588Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:05:40.33808758Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:05:40.915127624Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:05:40.915122Z","key":"5_mem_usage_host","value":"29.1/251 GiB (12..."}}
{"ts":"2024-10-03T23:05:40.915678869Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:05:40.915122Z","key":"1_ram_usage","value":"0.198 GiB\n"}}
{"ts":"2024-10-03T23:05:40.916020669Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:05:40.915122Z","key":"4_cpu_usage_host","value":"6.37/64 cores (1..."}}
{"ts":"2024-10-03T23:05:40.916336569Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:05:40.915122Z","key":"0_cpu_usage","value":"0.374 cores\n"}}
{"ts":"2024-10-03T23:05:40.916613915Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:05:40.915122Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:05:40.919104495Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:05:40.919643416Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:05:40.915122Z","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage","7_swap_host"]}}}
{"ts":"2024-10-03T23:05:40.921184162Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage","7_swap_host"],"num":5}}
{"ts":"2024-10-03T23:05:41.194831114Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/api/v2/deployment/stats","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:05:41.193271762Z","took":"1.556035ms","status_code":200,"latency_ms":1,"request_id":"736bcb93-4538-40cf-9223-1c17112523f5"}}
{"ts":"2024-10-03T23:05:41.354334799Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:05:43.605228566Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/proxy/coder/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:05:43.601254661Z","took":"3.970148ms","status_code":200,"latency_ms":3,"request_id":"0789104a-57a3-4d13-a499-b8dd54ab48a8"}}
{"ts":"2024-10-03T23:05:45.657735753Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/proxy/coder/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:05:45.653485054Z","took":"4.246481ms","status_code":200,"latency_ms":4,"request_id":"59a5fc11-80ff-4d01-8fbe-fdee7d1e0cc1"}}
{"ts":"2024-10-03T23:05:46.354372149Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:05:47.172512451Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/proxy/coder/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:05:47.163231375Z","took":"9.278541ms","status_code":200,"latency_ms":9,"request_id":"c3a00dee-48e7-4849-aeec-53e69c8a20db"}}
{"ts":"2024-10-03T23:05:48.219389092Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/proxy/coder/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:05:48.215140937Z","took":"4.244718ms","status_code":200,"latency_ms":4,"request_id":"c7a1e7d9-c46f-4631-93cb-0c0b5d8e0b74"}}
{"ts":"2024-10-03T23:05:50.914924177Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:05:50.914919Z","key":"1_ram_usage","value":"0.199 GiB\n"}}
{"ts":"2024-10-03T23:05:50.915440033Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:05:50.914919Z","key":"4_cpu_usage_host","value":"3.93/64 cores (6..."}}
{"ts":"2024-10-03T23:05:50.915747267Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:05:50.914919Z","key":"0_cpu_usage","value":"0.313 cores\n"}}
{"ts":"2024-10-03T23:05:50.916059059Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:05:50.914919Z","key":"5_mem_usage_host","value":"29.4/251 GiB (12..."}}
{"ts":"2024-10-03T23:05:50.918252746Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":121}}
{"ts":"2024-10-03T23:05:50.91892805Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:05:50.914919Z","keys":["1_ram_usage","4_cpu_usage_host","0_cpu_usage","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:05:50.92100929Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage","4_cpu_usage_host","0_cpu_usage","5_mem_usage_host"],"num":4}}
{"ts":"2024-10-03T23:05:51.353815227Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:05:51.913654009Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:05:51.913651Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:05:51.915301301Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:05:51.915746681Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:05:51.913651Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:05:51.916771681Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:05:52.354112237Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:05:54.508839739Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:05:54.509599186Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:05:54.509851894Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:05:55.280868421Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:05:55.283155158Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"2.030612ms"}}
{"ts":"2024-10-03T23:05:55.292573739Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:05:55.292654996Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:05:55.334912284Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:05:55.3367686Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:05:55.340421254Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:05:55.341572057Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:05:55.342555757Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:05:57.354300316Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:05:57.931969037Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:05:57.933992766Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:05:58.511454299Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"727.405µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:05:58.913822156Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:05:58.913819Z","key":"6_load_host","value":"0.10"}}
{"ts":"2024-10-03T23:05:58.915735602Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:05:58.916395056Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:05:58.913819Z","keys":["6_load_host"]}}}
{"ts":"2024-10-03T23:05:58.919388778Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host"],"num":1}}
{"ts":"2024-10-03T23:05:59.353905811Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:05:59.913461923Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:05:59.913459Z","key":"3_home_disk","value":"23.7/468 GiB (5%..."}}
{"ts":"2024-10-03T23:05:59.914499137Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:05:59.914862769Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:05:59.913459Z","keys":["3_home_disk"]}}}
{"ts":"2024-10-03T23:05:59.916053078Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["3_home_disk"],"num":1}}
{"ts":"2024-10-03T23:06:00.214479809Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/deployment/stats","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:06:00.210915344Z","took":"3.56193ms","status_code":200,"latency_ms":3,"request_id":"e8f5ea9f-51f4-4c9a-924f-f5e7c7121ab5"}}
{"ts":"2024-10-03T23:06:00.354194212Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:06:01.915325357Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:01.915321Z","key":"4_cpu_usage_host","value":"4.04/64 cores (6..."}}
{"ts":"2024-10-03T23:06:01.915835242Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:01.915321Z","key":"1_ram_usage","value":"0.203 GiB\n"}}
{"ts":"2024-10-03T23:06:01.916141574Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:01.915321Z","key":"5_mem_usage_host","value":"29.5/251 GiB (12..."}}
{"ts":"2024-10-03T23:06:01.916411595Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:01.915321Z","key":"0_cpu_usage","value":"0.098 cores\n"}}
{"ts":"2024-10-03T23:06:01.918175763Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":121}}
{"ts":"2024-10-03T23:06:01.918552961Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:06:01.915321Z","keys":["4_cpu_usage_host","1_ram_usage","5_mem_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:06:01.919551871Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","1_ram_usage","5_mem_usage_host","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:06:02.354169132Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:06:02.913504613Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:02.913503Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:06:02.914737214Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:06:02.915062602Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:06:02.913503Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:06:02.91605043Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:06:03.353609805Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:06:08.354131222Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:06:09.508256278Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:06:09.50925179Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:06:09.509256119Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:06:10.336665247Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:06:12.913369479Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:12.913358Z","key":"5_mem_usage_host","value":"29.4/251 GiB (12..."}}
{"ts":"2024-10-03T23:06:12.913756467Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:12.913358Z","key":"0_cpu_usage","value":"0.224 cores\n"}}
{"ts":"2024-10-03T23:06:12.91401726Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:12.913358Z","key":"4_cpu_usage_host","value":"2.74/64 cores (4..."}}
{"ts":"2024-10-03T23:06:12.914273956Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:12.913358Z","key":"1_ram_usage","value":"0.203 GiB\n"}}
{"ts":"2024-10-03T23:06:12.916371367Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":121}}
{"ts":"2024-10-03T23:06:12.91700948Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:06:12.913358Z","keys":["5_mem_usage_host","0_cpu_usage","4_cpu_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:06:12.919021827Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host","0_cpu_usage","4_cpu_usage_host","1_ram_usage"],"num":4}}
{"ts":"2024-10-03T23:06:13.353959212Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:06:13.9139453Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:13.913942Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:06:13.916191468Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:06:13.91688062Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:06:13.913942Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:06:13.918805247Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:06:14.354450902Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:06:20.353698037Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:06:23.913427627Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:23.913424Z","key":"0_cpu_usage","value":"0.112 cores\n"}}
{"ts":"2024-10-03T23:06:23.913879199Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:23.913424Z","key":"4_cpu_usage_host","value":"15.7/64 cores (2..."}}
{"ts":"2024-10-03T23:06:23.914089896Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:23.913424Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:06:23.914291215Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:23.913424Z","key":"1_ram_usage","value":"0.202 GiB\n"}}
{"ts":"2024-10-03T23:06:23.914472545Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:23.913424Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:06:23.916529428Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:06:23.917070173Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:06:23.913424Z","keys":["0_cpu_usage","4_cpu_usage_host","7_swap_host","1_ram_usage","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:06:23.918563828Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage","4_cpu_usage_host","7_swap_host","1_ram_usage","5_mem_usage_host"],"num":5}}
{"ts":"2024-10-03T23:06:24.354336281Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:06:24.508677939Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:06:24.509207853Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:06:24.509308687Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:06:25.284058562Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"2.808054ms"}}
{"ts":"2024-10-03T23:06:25.293538884Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:06:25.293619029Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:06:25.336996935Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:06:25.341163073Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:06:25.341945003Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:06:27.933315637Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:06:27.93568328Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:06:28.511968829Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.050409ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:06:30.353403421Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:06:34.914746176Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:34.914742Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:06:34.915240982Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:34.914742Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:06:34.915520441Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:34.914742Z","key":"1_ram_usage","value":"0.199 GiB\n"}}
{"ts":"2024-10-03T23:06:34.915830901Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:34.914742Z","key":"4_cpu_usage_host","value":"0.998/64 cores (..."}}
{"ts":"2024-10-03T23:06:34.916092126Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:34.914742Z","key":"0_cpu_usage","value":"0.102 cores\n"}}
{"ts":"2024-10-03T23:06:34.918171422Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:06:34.91890051Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:06:34.914742Z","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:06:34.920566869Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":5}}
{"ts":"2024-10-03T23:06:35.353738054Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:06:39.508300716Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:06:39.508816543Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:06:39.508931575Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:06:40.336427471Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:06:41.353522066Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:06:44.914408576Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:44.914405Z","key":"4_cpu_usage_host","value":"4.09/64 cores (6..."}}
{"ts":"2024-10-03T23:06:44.914871921Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:44.914405Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:06:44.915160448Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:44.914405Z","key":"1_ram_usage","value":"0.204 GiB\n"}}
{"ts":"2024-10-03T23:06:44.915422875Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:44.914405Z","key":"5_mem_usage_host","value":"29.3/251 GiB (12..."}}
{"ts":"2024-10-03T23:06:44.915767721Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:44.914405Z","key":"0_cpu_usage","value":"0.258 cores\n"}}
{"ts":"2024-10-03T23:06:44.917628396Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:06:44.918182716Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:06:44.914405Z","keys":["4_cpu_usage_host","7_swap_host","1_ram_usage","5_mem_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:06:44.919843434Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","7_swap_host","1_ram_usage","5_mem_usage_host","0_cpu_usage"],"num":5}}
{"ts":"2024-10-03T23:06:45.353612236Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:06:50.353982019Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:06:54.508010201Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:06:54.508599539Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:06:54.508724611Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:06:55.281997796Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:06:55.286184162Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"4.128625ms"}}
{"ts":"2024-10-03T23:06:55.294455359Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:06:55.294620398Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:06:55.334775203Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:06:55.336877093Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:06:55.338126917Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:06:55.341777018Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:06:55.343278929Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:06:55.35386118Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending handshake initiation","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:06:55.355269099Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Received handshake response","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:06:55.355477402Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending keepalive packet","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:06:55.91477785Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:55.914775Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:06:55.915040507Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:55.914775Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:06:55.915179004Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:55.914775Z","key":"1_ram_usage","value":"0.197 GiB\n"}}
{"ts":"2024-10-03T23:06:55.915310999Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:55.914775Z","key":"4_cpu_usage_host","value":"4.91/64 cores (8..."}}
{"ts":"2024-10-03T23:06:55.91544587Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:55.914775Z","key":"0_cpu_usage","value":"0.158 cores\n"}}
{"ts":"2024-10-03T23:06:55.91764629Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:06:55.918125155Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:06:55.914775Z","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:06:55.920210403Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":5}}
{"ts":"2024-10-03T23:06:56.353837777Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:06:57.93347693Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:06:57.937326406Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:06:58.511717949Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"972.539µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:06:58.915369462Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:58.915364Z","key":"6_load_host","value":"0.13"}}
{"ts":"2024-10-03T23:06:58.917658574Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:06:58.918258773Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:06:58.915364Z","keys":["6_load_host"]}}}
{"ts":"2024-10-03T23:06:58.922179427Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host"],"num":1}}
{"ts":"2024-10-03T23:06:59.35405984Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:06:59.914228822Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:06:59.914224Z","key":"3_home_disk","value":"23.7/468 GiB (5%..."}}
{"ts":"2024-10-03T23:06:59.91645402Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:06:59.917084728Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:06:59.914224Z","keys":["3_home_disk"]}}}
{"ts":"2024-10-03T23:06:59.918681102Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["3_home_disk"],"num":1}}
{"ts":"2024-10-03T23:07:00.354075163Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:07:05.354332815Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:07:05.913967565Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:05.913963Z","key":"0_cpu_usage","value":"0.081 cores\n"}}
{"ts":"2024-10-03T23:07:05.914401753Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:05.913963Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:07:05.91467957Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:05.913963Z","key":"5_mem_usage_host","value":"29.7/251 GiB (12..."}}
{"ts":"2024-10-03T23:07:05.914936246Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:05.913963Z","key":"1_ram_usage","value":"0.197 GiB\n"}}
{"ts":"2024-10-03T23:07:05.915180448Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:05.913963Z","key":"4_cpu_usage_host","value":"4.07/64 cores (6..."}}
{"ts":"2024-10-03T23:07:05.917294982Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:07:05.917944978Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:07:05.913963Z","keys":["0_cpu_usage","7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:07:05.919843916Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage","7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host"],"num":5}}
{"ts":"2024-10-03T23:07:06.353456213Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:07:09.50865476Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:07:09.509202488Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:07:09.509327149Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:07:10.335881149Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:07:11.353575817Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:07:16.354078984Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:07:16.913147879Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:16.913145Z","key":"4_cpu_usage_host","value":"5.04/64 cores (8..."}}
{"ts":"2024-10-03T23:07:16.913404124Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:16.913145Z","key":"0_cpu_usage","value":"0.105 cores\n"}}
{"ts":"2024-10-03T23:07:16.913554494Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:16.913145Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:07:16.913688974Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:16.913145Z","key":"5_mem_usage_host","value":"28.9/251 GiB (11..."}}
{"ts":"2024-10-03T23:07:16.913823274Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:16.913145Z","key":"1_ram_usage","value":"0.192 GiB\n"}}
{"ts":"2024-10-03T23:07:16.915413776Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:07:16.915972004Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:07:16.913145Z","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host","5_mem_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:07:16.917791119Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host","5_mem_usage_host","1_ram_usage"],"num":5}}
{"ts":"2024-10-03T23:07:17.353662173Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:07:22.353847663Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:07:24.50907282Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:07:24.510181241Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:07:24.510409001Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:07:25.285800596Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"4.534489ms"}}
{"ts":"2024-10-03T23:07:25.295386544Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:07:25.295600787Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:07:25.337364283Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:07:25.341568735Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:07:25.343353322Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:07:26.915024507Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:26.915021Z","key":"5_mem_usage_host","value":"28.7/251 GiB (11..."}}
{"ts":"2024-10-03T23:07:26.915352491Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:26.915021Z","key":"4_cpu_usage_host","value":"3.61/64 cores (6..."}}
{"ts":"2024-10-03T23:07:26.915625328Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:26.915021Z","key":"0_cpu_usage","value":"0.184 cores\n"}}
{"ts":"2024-10-03T23:07:26.915841024Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:26.915021Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:07:26.916037885Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:26.915021Z","key":"1_ram_usage","value":"0.199 GiB\n"}}
{"ts":"2024-10-03T23:07:26.917786953Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:07:26.918202095Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:07:26.915021Z","keys":["5_mem_usage_host","4_cpu_usage_host","0_cpu_usage","7_swap_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:07:26.919131791Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host","4_cpu_usage_host","0_cpu_usage","7_swap_host","1_ram_usage"],"num":5}}
{"ts":"2024-10-03T23:07:27.354193374Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:07:27.932959577Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:07:27.93424491Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:07:28.512186581Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.334297ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:07:33.353673764Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:07:37.914527005Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:37.914523Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:07:37.914983387Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:37.914523Z","key":"1_ram_usage","value":"0.201 GiB\n"}}
{"ts":"2024-10-03T23:07:37.915251655Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:37.914523Z","key":"5_mem_usage_host","value":"28.7/251 GiB (11..."}}
{"ts":"2024-10-03T23:07:37.915506808Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:37.914523Z","key":"0_cpu_usage","value":"0.373 cores\n"}}
{"ts":"2024-10-03T23:07:37.915779535Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:37.914523Z","key":"4_cpu_usage_host","value":"3.4/64 cores (5%..."}}
{"ts":"2024-10-03T23:07:37.918058878Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:07:37.918950691Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:07:37.914523Z","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:07:37.920996563Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","0_cpu_usage","4_cpu_usage_host"],"num":5}}
{"ts":"2024-10-03T23:07:38.354033558Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:07:39.053514631Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/cli-auth","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:07:39.042361366Z","took":"11.149929ms","status_code":200,"latency_ms":11,"request_id":"1b27e610-8de4-43a8-9ef8-e3f32d5a3505"}}
{"ts":"2024-10-03T23:07:39.312316136Z","level":"DEBUG","msg":"check-auth","caller":"/home/runner/work/coder/coder/coderd/authorize.go:130","func":"github.com/coder/coder/v2/coderd.(*API).checkAuthorization","logger_names":["coderd"],"fields":{"request_id":"947f4586-ba6d-4ba0-a788-305e723d79dc","my_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","got_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","name":"{FriendlyName:Help ID:45d2dc02-0d60-41da-8f83-b611c0a5728b Roles:[{Identifier:owner DisplayName:Owner Site:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:organization_member Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:user Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:workspace Action:start} {Negate:false ResourceType:workspace Action:stop} {Negate:false ResourceType:workspace Action:ssh} {Negate:false ResourceType:workspace Action:application_connect} {Negate:false ResourceType:workspace Action:create} {Negate:false ResourceType:workspace Action:read} {Negate:false ResourceType:workspace Action:update} {Negate:false ResourceType:workspace Action:delete} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] Org:map[] User:[] cachedRegoValue:0xc00069b380} {Identifier:member DisplayName:Member Site:[{Negate:false ResourceType:assign_role Action:read} {Negate:false ResourceType:oauth2_app Action:read} {Negate:false ResourceType:workspace_proxy Action:read}] Org:map[] User:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:workspace Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:create} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:update} {Negate:false ResourceType:user Action:read} {Negate:false ResourceType:user Action:read_personal} {Negate:false ResourceType:user Action:update_personal} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] cachedRegoValue:0xc00069bf40} {Identifier:organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11 DisplayName: Site:[] Org:map[6ed51444-d360-4b0c-aac1-6894bd4cbd11:[{Negate:false ResourceType:assign_org_role Action:read} {Negate:false ResourceType:organization Action:read} {Negate:false ResourceType:provisioner_daemon Action:read}]] User:[{Negate:false ResourceType:organization_member Action:read}] cachedRegoValue:\u003cnil\u003e}] Groups:[] Scope:all cachedASTValue:0xc015adca80}","roles":["owner","member","organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11"],"scope":"all"}}
{"ts":"2024-10-03T23:07:39.317768539Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/authcheck","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:07:39.310435363Z","took":"7.331813ms","status_code":200,"latency_ms":7,"request_id":"947f4586-ba6d-4ba0-a788-305e723d79dc"}}
{"ts":"2024-10-03T23:07:39.35369986Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/organizations","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:07:39.351265036Z","took":"2.431477ms","status_code":200,"latency_ms":2,"request_id":"571aec72-8f0f-468d-9b51-64df5d7d5662"}}
{"ts":"2024-10-03T23:07:39.392756849Z","level":"DEBUG","msg":"CSP violation reported","caller":"/home/runner/work/coder/coder/coderd/csp.go:46","func":"github.com/coder/coder/v2/coderd.(*API).logReportCSPViolations","logger_names":["coderd"],"fields":{"request_id":"830eb59f-e909-43aa-b500-988341a972dd","effective-directive":"connect-src","original-policy":"frame-src 'self'; media-src 'self'; font-src 'self' data:; object-src 'self'; manifest-src 'self' blob:; script-src 'self'; report-uri /api/v2/csp/reports; default-src 'self'; connect-src 'self' https://coder.com wss://localhost:3005 ws://localhost:3005; child-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' https: data:; frame-ancestors 'none'; worker-src 'self' blob:; form-action 'self';","script-sample":"","blocked-uri":"https://1ce8t8h51oihk.pit-1.try.coder.app/latency-check?cache_bust=D7v66Egy","line-number":279,"column-number":7449,"source-file":"http://localhost:3005/assets/index-2nv8Z01B.js","document-uri":"http://localhost:3005/cli-auth","referrer":"http://localhost:8083/","violated-directive":"connect-src","disposition":"enforce","status-code":200}}
{"ts":"2024-10-03T23:07:39.393337461Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/csp/reports","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:07:39.392642478Z","took":"693.209µs","status_code":200,"latency_ms":0,"request_id":"830eb59f-e909-43aa-b500-988341a972dd"}}
{"ts":"2024-10-03T23:07:39.397948458Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/users/me/keys","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:07:39.392792508Z","took":"5.154838ms","status_code":201,"latency_ms":5,"request_id":"3520e27c-c850-4c00-accc-e2f50c8d1bad"}}
{"ts":"2024-10-03T23:07:39.508758898Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:07:39.50935012Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:07:39.509573541Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:07:39.528266422Z","level":"DEBUG","msg":"submitted snapshot","caller":"/home/runner/work/coder/coder/coderd/telemetry/telemetry.go:150","func":"github.com/coder/coder/v2/coderd/telemetry.(*remoteReporter).reportSync","logger_names":["telemetry"]}
{"ts":"2024-10-03T23:07:40.336033451Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:07:44.354116527Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:07:48.915025513Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:48.915021Z","key":"4_cpu_usage_host","value":"1.55/64 cores (2..."}}
{"ts":"2024-10-03T23:07:48.915459271Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:48.915021Z","key":"0_cpu_usage","value":"0.145 cores\n"}}
{"ts":"2024-10-03T23:07:48.915749792Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:48.915021Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:07:48.91602304Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:48.915021Z","key":"1_ram_usage","value":"0.198 GiB\n"}}
{"ts":"2024-10-03T23:07:48.916272993Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:48.915021Z","key":"5_mem_usage_host","value":"28.6/251 GiB (11..."}}
{"ts":"2024-10-03T23:07:48.918455499Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:07:48.919142737Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:07:48.915021Z","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host","1_ram_usage","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:07:48.921022448Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host","1_ram_usage","5_mem_usage_host"],"num":5}}
{"ts":"2024-10-03T23:07:49.353930127Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:07:54.354094652Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:07:54.5084981Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:07:54.509167773Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:07:54.509314196Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:07:55.281304885Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:07:55.283048814Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"1.75989ms"}}
{"ts":"2024-10-03T23:07:55.296618508Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:07:55.296702691Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:07:55.334815858Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:07:55.336187618Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:07:55.33648879Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:07:55.341633649Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:07:55.342283444Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:07:57.933566372Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:07:57.9354032Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:07:58.511509493Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"862.175µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:07:59.91439664Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:59.914393Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:07:59.914847981Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:59.914393Z","key":"6_load_host","value":"0.07"}}
{"ts":"2024-10-03T23:07:59.91515269Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:59.914393Z","key":"5_mem_usage_host","value":"27.2/251 GiB (11..."}}
{"ts":"2024-10-03T23:07:59.915406911Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:59.914393Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:07:59.915754533Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:59.914393Z","key":"0_cpu_usage","value":"0.255 cores\n"}}
{"ts":"2024-10-03T23:07:59.916026558Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:07:59.914393Z","key":"4_cpu_usage_host","value":"9.02/64 cores (1..."}}
{"ts":"2024-10-03T23:07:59.919151626Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":149}}
{"ts":"2024-10-03T23:07:59.919821359Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:07:59.914393Z","keys":["7_swap_host","6_load_host","5_mem_usage_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:07:59.922236565Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","6_load_host","5_mem_usage_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"],"num":6}}
{"ts":"2024-10-03T23:08:00.353431999Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:08:00.913696692Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:08:00.913693Z","key":"3_home_disk","value":"23.7/468 GiB (5%..."}}
{"ts":"2024-10-03T23:08:00.915409901Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:08:00.915961958Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:08:00.913693Z","keys":["3_home_disk"]}}}
{"ts":"2024-10-03T23:08:00.917316805Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["3_home_disk"],"num":1}}
{"ts":"2024-10-03T23:08:01.354396768Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:08:07.353526505Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:08:09.509047338Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:08:09.509865118Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:08:09.510021991Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:08:09.913973705Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:08:09.91397Z","key":"5_mem_usage_host","value":"28/251 GiB (11%)..."}}
{"ts":"2024-10-03T23:08:09.914415308Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:08:09.91397Z","key":"4_cpu_usage_host","value":"4.53/64 cores (7..."}}
{"ts":"2024-10-03T23:08:09.914772417Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:08:09.91397Z","key":"0_cpu_usage","value":"0.17 cores\n"}}
{"ts":"2024-10-03T23:08:09.915127002Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:08:09.91397Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:08:09.915421742Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:08:09.91397Z","key":"1_ram_usage","value":"0.199 GiB\n"}}
{"ts":"2024-10-03T23:08:09.916986314Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":134}}
{"ts":"2024-10-03T23:08:09.917525927Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:08:09.91397Z","keys":["5_mem_usage_host","4_cpu_usage_host","0_cpu_usage","7_swap_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:08:09.91878528Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host","4_cpu_usage_host","0_cpu_usage","7_swap_host","1_ram_usage"],"num":5}}
{"ts":"2024-10-03T23:08:10.335811953Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:08:10.354092408Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:08:15.35416888Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:08:20.91476443Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:08:20.914759Z","key":"4_cpu_usage_host","value":"2.67/64 cores (4..."}}
{"ts":"2024-10-03T23:08:20.915248085Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:08:20.914759Z","key":"0_cpu_usage","value":"0.092 cores\n"}}
{"ts":"2024-10-03T23:08:20.915517746Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:08:20.914759Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:08:20.915788779Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:08:20.914759Z","key":"1_ram_usage","value":"0.199 GiB\n"}}
{"ts":"2024-10-03T23:08:20.916044022Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:08:20.914759Z","key":"5_mem_usage_host","value":"28.3/251 GiB (11..."}}
{"ts":"2024-10-03T23:08:20.91848093Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:08:20.919241449Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:08:20.914759Z","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host","1_ram_usage","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:08:20.921280318Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host","1_ram_usage","5_mem_usage_host"],"num":5}}
{"ts":"2024-10-03T23:08:21.354188294Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:08:24.508832607Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:08:24.509396316Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:08:24.50951751Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:08:25.012477391Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/cli-auth","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:08:25.001501097Z","took":"10.973028ms","status_code":200,"latency_ms":10,"request_id":"17a96a58-fec8-493a-9298-627c25df644e"}}
{"ts":"2024-10-03T23:08:25.284662804Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.076303ms"}}
{"ts":"2024-10-03T23:08:25.297103829Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:08:25.297186569Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:08:25.308061557Z","level":"DEBUG","msg":"check-auth","caller":"/home/runner/work/coder/coder/coderd/authorize.go:130","func":"github.com/coder/coder/v2/coderd.(*API).checkAuthorization","logger_names":["coderd"],"fields":{"request_id":"8c66affc-ecb0-4652-845d-f88d0eb946b4","my_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","got_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","name":"{FriendlyName:Help ID:45d2dc02-0d60-41da-8f83-b611c0a5728b Roles:[{Identifier:owner DisplayName:Owner Site:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:organization_member Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:user Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:workspace Action:start} {Negate:false ResourceType:workspace Action:stop} {Negate:false ResourceType:workspace Action:ssh} {Negate:false ResourceType:workspace Action:application_connect} {Negate:false ResourceType:workspace Action:create} {Negate:false ResourceType:workspace Action:read} {Negate:false ResourceType:workspace Action:update} {Negate:false ResourceType:workspace Action:delete} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] Org:map[] User:[] cachedRegoValue:0xc00069b380} {Identifier:member DisplayName:Member Site:[{Negate:false ResourceType:assign_role Action:read} {Negate:false ResourceType:oauth2_app Action:read} {Negate:false ResourceType:workspace_proxy Action:read}] Org:map[] User:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:workspace Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:create} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:update} {Negate:false ResourceType:user Action:read} {Negate:false ResourceType:user Action:read_personal} {Negate:false ResourceType:user Action:update_personal} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] cachedRegoValue:0xc00069bf40} {Identifier:organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11 DisplayName: Site:[] Org:map[6ed51444-d360-4b0c-aac1-6894bd4cbd11:[{Negate:false ResourceType:assign_org_role Action:read} {Negate:false ResourceType:organization Action:read} {Negate:false ResourceType:provisioner_daemon Action:read}]] User:[{Negate:false ResourceType:organization_member Action:read}] cachedRegoValue:\u003cnil\u003e}] Groups:[] Scope:all cachedASTValue:0xc00850fac0}","roles":["owner","member","organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11"],"scope":"all"}}
{"ts":"2024-10-03T23:08:25.309640778Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/authcheck","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:08:25.306385089Z","took":"3.253305ms","status_code":200,"latency_ms":3,"request_id":"8c66affc-ecb0-4652-845d-f88d0eb946b4"}}
{"ts":"2024-10-03T23:08:25.33656358Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:08:25.341780228Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c37f3a0b-0952-4c61-bb4e-b2ec7eed4b7b","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:08:25.342735474Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c37f3a0b-0952-4c61-bb4e-b2ec7eed4b7b","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:08:25.371856833Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/organizations","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:08:25.370137551Z","took":"1.716666ms","status_code":200,"latency_ms":1,"request_id":"13ce7877-486c-4b97-a185-ed4ce0ab57f3"}}
{"ts":"2024-10-03T23:08:25.437426236Z","level":"DEBUG","msg":"CSP violation reported","caller":"/home/runner/work/coder/coder/coderd/csp.go:46","func":"github.com/coder/coder/v2/coderd.(*API).logReportCSPViolations","logger_names":["coderd"],"fields":{"request_id":"0470826d-efb9-4481-b462-d37b9d720f64","violated-directive":"connect-src","effective-directive":"connect-src","original-policy":"connect-src 'self' https://coder.com wss://localhost:3005 ws://localhost:3005; worker-src 'self' blob:; frame-src 'self'; img-src 'self' https: data:; form-action 'self'; report-uri /api/v2/csp/reports; default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; manifest-src 'self' blob:; font-src 'self' data:; object-src 'self'; frame-ancestors 'none'; child-src 'self'; media-src 'self';","disposition":"enforce","line-number":279,"column-number":7449,"script-sample":"","document-uri":"http://localhost:3005/cli-auth","referrer":"http://localhost:8083/","blocked-uri":"https://1ce8t8h51oihk.pit-1.try.coder.app/latency-check?cache_bust=HPVykKmt","source-file":"http://localhost:3005/assets/index-2nv8Z01B.js","status-code":200}}
{"ts":"2024-10-03T23:08:25.438032737Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/csp/reports","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:08:25.437296776Z","took":"734.068µs","status_code":200,"latency_ms":0,"request_id":"0470826d-efb9-4481-b462-d37b9d720f64"}}
{"ts":"2024-10-03T23:08:25.440819421Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/users/me/keys","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:08:25.437496141Z","took":"3.320274ms","status_code":201,"latency_ms":3,"request_id":"2ff6d5dd-3e4f-4ffc-a3b1-9244ea0f4ef3"}}
{"ts":"2024-10-03T23:08:25.506584682Z","level":"DEBUG","msg":"submitted snapshot","caller":"/home/runner/work/coder/coder/coderd/telemetry/telemetry.go:150","func":"github.com/coder/coder/v2/coderd/telemetry.(*remoteReporter).reportSync","logger_names":["telemetry"]}
{"ts":"2024-10-03T23:08:27.353404899Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:08:27.931716927Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:08:27.933624842Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:08:28.511911462Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"977.057µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:08:31.914740631Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:08:31.914737Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:08:31.915184649Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:08:31.914737Z","key":"5_mem_usage_host","value":"28.1/251 GiB (11..."}}
{"ts":"2024-10-03T23:08:31.91545962Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:08:31.914737Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:08:31.915739651Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:08:31.914737Z","key":"0_cpu_usage","value":"0.032 cores\n"}}
{"ts":"2024-10-03T23:08:31.916007078Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:08:31.914737Z","key":"4_cpu_usage_host","value":"3.26/64 cores (5..."}}
{"ts":"2024-10-03T23:08:31.918095512Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:08:31.918727884Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:08:31.914737Z","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:08:31.920259383Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"],"num":5}}
{"ts":"2024-10-03T23:08:32.353971975Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:08:37.353995925Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:08:39.508550756Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:08:39.5092622Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:08:39.509441456Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:08:40.337293365Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:08:42.354309295Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:08:42.91391254Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:08:42.913909Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:08:42.914319787Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:08:42.913909Z","key":"1_ram_usage","value":"0.198 GiB\n"}}
{"ts":"2024-10-03T23:08:42.914585169Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:08:42.913909Z","key":"5_mem_usage_host","value":"27.9/251 GiB (11..."}}
{"ts":"2024-10-03T23:08:42.914836014Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:08:42.913909Z","key":"0_cpu_usage","value":"0.298 cores\n"}}
{"ts":"2024-10-03T23:08:42.915102128Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:08:42.913909Z","key":"4_cpu_usage_host","value":"1.37/64 cores (2..."}}
{"ts":"2024-10-03T23:08:42.917121359Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:08:42.917703224Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:08:42.913909Z","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:08:42.919597664Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","0_cpu_usage","4_cpu_usage_host"],"num":5}}
{"ts":"2024-10-03T23:08:43.353528038Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:08:48.354098281Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:08:52.915324377Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:08:52.915321Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:08:52.915785528Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:08:52.915321Z","key":"1_ram_usage","value":"0.199 GiB\n"}}
{"ts":"2024-10-03T23:08:52.916053376Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:08:52.915321Z","key":"5_mem_usage_host","value":"27.9/251 GiB (11..."}}
{"ts":"2024-10-03T23:08:52.916308338Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:08:52.915321Z","key":"0_cpu_usage","value":"0.036 cores\n"}}
{"ts":"2024-10-03T23:08:52.916579352Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:08:52.915321Z","key":"4_cpu_usage_host","value":"0.994/64 cores (..."}}
{"ts":"2024-10-03T23:08:52.918860108Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:08:52.919712996Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:08:52.915321Z","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:08:52.921752426Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","0_cpu_usage","4_cpu_usage_host"],"num":5}}
{"ts":"2024-10-03T23:08:53.353791828Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:08:54.508342533Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:08:54.508996006Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:08:54.509146557Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:08:55.281067729Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:08:55.284104306Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.042829ms"}}
{"ts":"2024-10-03T23:08:55.297810215Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:08:55.298138329Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:08:55.334883169Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:08:55.336748482Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:08:55.33736846Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:08:55.34141591Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:08:55.342301681Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:08:57.910944099Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending handshake initiation","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:08:57.912773584Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Received handshake response","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:08:57.913101116Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending keepalive packet","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:08:57.932350035Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:08:57.93404509Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:08:58.512484437Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.38714ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:08:59.353715631Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:09:00.915336982Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:00.915334Z","key":"6_load_host","value":"0.08"}}
{"ts":"2024-10-03T23:09:00.918567624Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:09:00.919298205Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:09:00.915334Z","keys":["6_load_host"]}}}
{"ts":"2024-10-03T23:09:00.921860856Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host"],"num":1}}
{"ts":"2024-10-03T23:09:01.354361728Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:09:01.91462839Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:01.914621Z","key":"3_home_disk","value":"23.7/468 GiB (5%..."}}
{"ts":"2024-10-03T23:09:01.916956057Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:09:01.91761007Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:09:01.914621Z","keys":["3_home_disk"]}}}
{"ts":"2024-10-03T23:09:01.91943172Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["3_home_disk"],"num":1}}
{"ts":"2024-10-03T23:09:02.354237465Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:09:03.915263538Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:03.915259Z","key":"0_cpu_usage","value":"0.084 cores\n"}}
{"ts":"2024-10-03T23:09:03.915734437Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:03.915259Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:09:03.91600473Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:03.915259Z","key":"5_mem_usage_host","value":"27.8/251 GiB (11..."}}
{"ts":"2024-10-03T23:09:03.916259732Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:03.915259Z","key":"1_ram_usage","value":"0.193 GiB\n"}}
{"ts":"2024-10-03T23:09:03.91651201Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:03.915259Z","key":"4_cpu_usage_host","value":"2.21/64 cores (3..."}}
{"ts":"2024-10-03T23:09:03.918982022Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:09:03.919853165Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:09:03.915259Z","keys":["0_cpu_usage","7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:09:03.921873037Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage","7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host"],"num":5}}
{"ts":"2024-10-03T23:09:04.354489305Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:09:09.508393194Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:09:09.509148804Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:09:09.509419948Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:09:10.337424991Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:09:10.354028789Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:09:13.916525679Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:13.916521Z","key":"1_ram_usage","value":"0.193 GiB\n"}}
{"ts":"2024-10-03T23:09:13.917013752Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:13.916521Z","key":"0_cpu_usage","value":"0.218 cores\n"}}
{"ts":"2024-10-03T23:09:13.917263435Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:13.916521Z","key":"4_cpu_usage_host","value":"3.09/64 cores (5..."}}
{"ts":"2024-10-03T23:09:13.91752492Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:13.916521Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:09:13.917787307Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:13.916521Z","key":"5_mem_usage_host","value":"27.7/251 GiB (11..."}}
{"ts":"2024-10-03T23:09:13.919629025Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:09:13.920269543Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:09:13.916521Z","keys":["1_ram_usage","0_cpu_usage","4_cpu_usage_host","7_swap_host","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:09:13.921617286Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage","0_cpu_usage","4_cpu_usage_host","7_swap_host","5_mem_usage_host"],"num":5}}
{"ts":"2024-10-03T23:09:14.353382279Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:09:19.354042207Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:09:24.508999408Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:09:24.510143118Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:09:24.510453507Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:09:24.914440422Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:24.914434Z","key":"5_mem_usage_host","value":"28/251 GiB (11%)..."}}
{"ts":"2024-10-03T23:09:24.914719191Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:24.914434Z","key":"0_cpu_usage","value":"0.274 cores\n"}}
{"ts":"2024-10-03T23:09:24.914866195Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:24.914434Z","key":"4_cpu_usage_host","value":"1.59/64 cores (2..."}}
{"ts":"2024-10-03T23:09:24.914998811Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:24.914434Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:09:24.915128311Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:24.914434Z","key":"1_ram_usage","value":"0.2 GiB\n"}}
{"ts":"2024-10-03T23:09:24.917028122Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:09:24.91761756Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:09:24.914434Z","keys":["5_mem_usage_host","0_cpu_usage","4_cpu_usage_host","7_swap_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:09:24.918964182Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host","0_cpu_usage","4_cpu_usage_host","7_swap_host","1_ram_usage"],"num":5}}
{"ts":"2024-10-03T23:09:25.284815138Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.114166ms"}}
{"ts":"2024-10-03T23:09:25.299241039Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:09:25.29938623Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:09:25.336458695Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:09:25.341637661Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c37f3a0b-0952-4c61-bb4e-b2ec7eed4b7b","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:09:25.342559672Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c37f3a0b-0952-4c61-bb4e-b2ec7eed4b7b","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:09:25.353793055Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:09:27.932960356Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:09:27.935203901Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:09:28.512448058Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.673523ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:09:30.35437705Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:09:35.354418072Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:09:35.913104525Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:35.9131Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:09:35.913394305Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:35.9131Z","key":"1_ram_usage","value":"0.201 GiB\n"}}
{"ts":"2024-10-03T23:09:35.91353143Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:35.9131Z","key":"5_mem_usage_host","value":"28.1/251 GiB (11..."}}
{"ts":"2024-10-03T23:09:35.913670629Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:35.9131Z","key":"4_cpu_usage_host","value":"3.48/64 cores (5..."}}
{"ts":"2024-10-03T23:09:35.913802143Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:35.9131Z","key":"0_cpu_usage","value":"0.271 cores\n"}}
{"ts":"2024-10-03T23:09:35.915201617Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":133}}
{"ts":"2024-10-03T23:09:35.91585012Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:09:35.9131Z","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:09:35.917073704Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","4_cpu_usage_host","0_cpu_usage"],"num":5}}
{"ts":"2024-10-03T23:09:36.354138758Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:09:39.508104207Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:09:39.508661835Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:09:39.508813898Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:09:40.336804239Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:09:41.354172111Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:09:46.913146467Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:46.913144Z","key":"1_ram_usage","value":"0.193 GiB\n"}}
{"ts":"2024-10-03T23:09:46.913408703Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:46.913144Z","key":"4_cpu_usage_host","value":"9.64/64 cores (1..."}}
{"ts":"2024-10-03T23:09:46.913555226Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:46.913144Z","key":"0_cpu_usage","value":"0.258 cores\n"}}
{"ts":"2024-10-03T23:09:46.913688604Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:46.913144Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:09:46.913837762Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:46.913144Z","key":"5_mem_usage_host","value":"30.5/251 GiB (12..."}}
{"ts":"2024-10-03T23:09:46.915113557Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:09:46.915654362Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:09:46.913144Z","keys":["1_ram_usage","4_cpu_usage_host","0_cpu_usage","7_swap_host","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:09:46.917187995Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage","4_cpu_usage_host","0_cpu_usage","7_swap_host","5_mem_usage_host"],"num":5}}
{"ts":"2024-10-03T23:09:47.354169448Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:09:53.353602081Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:09:54.508312861Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:09:54.509134529Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:09:54.509283507Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:09:55.281265971Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:09:55.284030312Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"2.798507ms"}}
{"ts":"2024-10-03T23:09:55.290280488Z","level":"DEBUG","msg":"pruning inactive agents","caller":"/home/runner/work/coder/coder/coderd/tailnet.go:235","func":"github.com/coder/coder/v2/coderd.(*ServerTailnet).doExpireOldAgents","logger_names":["coderd","servertailnet"],"fields":{"agent_count":0}}
{"ts":"2024-10-03T23:09:55.290577913Z","level":"DEBUG","msg":"successfully pruned inactive agents","caller":"/home/runner/work/coder/coder/coderd/tailnet.go:251","func":"github.com/coder/coder/v2/coderd.(*ServerTailnet).doExpireOldAgents","logger_names":["coderd","servertailnet"],"fields":{"deleted":0,"took":"298.186µs"}}
{"ts":"2024-10-03T23:09:55.299602159Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:09:55.299737981Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:09:55.334731412Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:09:55.336785631Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:09:55.337785623Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:09:55.341517733Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:09:55.342578984Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:09:56.915051717Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:56.915048Z","key":"0_cpu_usage","value":"0.17 cores\n"}}
{"ts":"2024-10-03T23:09:56.915316528Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:56.915048Z","key":"4_cpu_usage_host","value":"3.9/64 cores (6%..."}}
{"ts":"2024-10-03T23:09:56.915486807Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:56.915048Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:09:56.915641917Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:56.915048Z","key":"5_mem_usage_host","value":"30/251 GiB (12%)..."}}
{"ts":"2024-10-03T23:09:56.915774283Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:09:56.915048Z","key":"1_ram_usage","value":"0.193 GiB\n"}}
{"ts":"2024-10-03T23:09:56.918001776Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:09:56.918776784Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:09:56.915048Z","keys":["0_cpu_usage","4_cpu_usage_host","7_swap_host","5_mem_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:09:56.920811756Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage","4_cpu_usage_host","7_swap_host","5_mem_usage_host","1_ram_usage"],"num":5}}
{"ts":"2024-10-03T23:09:57.353707234Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:09:57.931949377Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:09:57.933361204Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:09:58.511944126Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"899.829µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:09:59.753096403Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/proxy/coder/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:09:59.741478546Z","took":"11.61446ms","status_code":200,"latency_ms":11,"request_id":"f71eaadb-f533-463b-a84d-061c0ec83967"}}
{"ts":"2024-10-03T23:10:00.000277934Z","level":"DEBUG","msg":"rolling up data","caller":"/home/runner/work/coder/coder/coderd/database/dbrollup/dbrollup.go:91","func":"github.com/coder/coder/v2/coderd/database/dbrollup.(*Rolluper).start.func1","logger_names":["coderd","dbrollup"]}
{"ts":"2024-10-03T23:10:00.007301634Z","level":"DEBUG","msg":"rolled up data","caller":"/home/runner/work/coder/coder/coderd/database/dbrollup/dbrollup.go:126","func":"github.com/coder/coder/v2/coderd/database/dbrollup.(*Rolluper).start.func1","logger_names":["coderd","dbrollup"],"fields":{"took":"6.738068ms","event":{"template_usage_stats":true}}}
{"ts":"2024-10-03T23:10:00.007516539Z","level":"DEBUG","msg":"next rollup at","caller":"/home/runner/work/coder/coder/coderd/database/dbrollup/dbrollup.go:174","func":"github.com/coder/coder/v2/coderd/database/dbrollup.(*Rolluper).start","logger_names":["coderd","dbrollup"],"fields":{"next":"2024-10-03T23:15:00Z"}}
{"ts":"2024-10-03T23:10:00.920606127Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:00.920601Z","key":"6_load_host","value":"0.06"}}
{"ts":"2024-10-03T23:10:00.923801541Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:10:00.92448946Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:10:00.920601Z","keys":["6_load_host"]}}}
{"ts":"2024-10-03T23:10:00.926768483Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host"],"num":1}}
{"ts":"2024-10-03T23:10:00.957166466Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/proxy/coder/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:10:00.953994707Z","took":"3.169234ms","status_code":200,"latency_ms":3,"request_id":"019e00c4-7389-4df4-9d6e-addc79512976"}}
{"ts":"2024-10-03T23:10:01.353745921Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:10:01.914736657Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:01.91473Z","key":"3_home_disk","value":"23.7/468 GiB (5%..."}}
{"ts":"2024-10-03T23:10:01.916950965Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":68}}
{"ts":"2024-10-03T23:10:01.917709651Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:10:01.91473Z","keys":["3_home_disk"]}}}
{"ts":"2024-10-03T23:10:01.919430175Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["3_home_disk"],"num":1}}
{"ts":"2024-10-03T23:10:02.354176604Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:10:03.045893539Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/proxy/coder/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:10:03.041278151Z","took":"4.610458ms","status_code":200,"latency_ms":4,"request_id":"72a78c81-959a-4073-88f1-ab321445b6b5"}}
{"ts":"2024-10-03T23:10:07.210756595Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/proxy/coder/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:10:07.206429925Z","took":"4.322331ms","status_code":200,"latency_ms":4,"request_id":"7508c52c-fd15-47d5-9b9c-daaa36be6592"}}
{"ts":"2024-10-03T23:10:07.915270351Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:07.915264Z","key":"5_mem_usage_host","value":"29.9/251 GiB (12..."}}
{"ts":"2024-10-03T23:10:07.915778052Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:07.915264Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:10:07.916055037Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:07.915264Z","key":"0_cpu_usage","value":"0.156 cores\n"}}
{"ts":"2024-10-03T23:10:07.916312575Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:07.915264Z","key":"4_cpu_usage_host","value":"1.88/64 cores (3..."}}
{"ts":"2024-10-03T23:10:07.916561115Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:07.915264Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:10:07.918830731Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:10:07.919586471Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:10:07.915264Z","keys":["5_mem_usage_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host","7_swap_host"]}}}
{"ts":"2024-10-03T23:10:07.921897636Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host","7_swap_host"],"num":5}}
{"ts":"2024-10-03T23:10:08.353803802Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:10:09.508703804Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:10:09.509361475Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:10:09.509509391Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:10:10.336396402Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:10:13.353928952Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:10:17.915833888Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:17.915818Z","key":"1_ram_usage","value":"0.2 GiB\n"}}
{"ts":"2024-10-03T23:10:17.916307052Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:17.915818Z","key":"5_mem_usage_host","value":"29.8/251 GiB (12..."}}
{"ts":"2024-10-03T23:10:17.916589087Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:17.915818Z","key":"0_cpu_usage","value":"0.198 cores\n"}}
{"ts":"2024-10-03T23:10:17.916852075Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:17.915818Z","key":"4_cpu_usage_host","value":"2.58/64 cores (4..."}}
{"ts":"2024-10-03T23:10:17.917096057Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:17.915818Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:10:17.919337317Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:10:17.920071145Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:10:17.915818Z","keys":["1_ram_usage","5_mem_usage_host","0_cpu_usage","4_cpu_usage_host","7_swap_host"]}}}
{"ts":"2024-10-03T23:10:17.922209357Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage","5_mem_usage_host","0_cpu_usage","4_cpu_usage_host","7_swap_host"],"num":5}}
{"ts":"2024-10-03T23:10:18.353991752Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:10:23.354411553Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:10:24.508120068Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:10:24.509266383Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:10:24.509532928Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:10:25.284982539Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.309314ms"}}
{"ts":"2024-10-03T23:10:25.300398485Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:10:25.300551701Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:10:25.337162449Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:10:25.341421418Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c37f3a0b-0952-4c61-bb4e-b2ec7eed4b7b","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:10:25.342926856Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c37f3a0b-0952-4c61-bb4e-b2ec7eed4b7b","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:10:27.93109244Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:10:27.93221559Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:10:28.511597431Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.374125ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:10:28.914770588Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:28.914765Z","key":"4_cpu_usage_host","value":"3.42/64 cores (5..."}}
{"ts":"2024-10-03T23:10:28.915187113Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:28.914765Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:10:28.915455341Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:28.914765Z","key":"1_ram_usage","value":"0.2 GiB\n"}}
{"ts":"2024-10-03T23:10:28.915720814Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:28.914765Z","key":"5_mem_usage_host","value":"29.9/251 GiB (12..."}}
{"ts":"2024-10-03T23:10:28.91597238Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:28.914765Z","key":"0_cpu_usage","value":"0.22 cores\n"}}
{"ts":"2024-10-03T23:10:28.918191258Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:10:28.918766259Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:10:28.914765Z","keys":["4_cpu_usage_host","7_swap_host","1_ram_usage","5_mem_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:10:28.920562269Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","7_swap_host","1_ram_usage","5_mem_usage_host","0_cpu_usage"],"num":5}}
{"ts":"2024-10-03T23:10:29.353995634Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:10:29.703090484Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/api/v2/deployment/stats","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:10:29.698029305Z","took":"5.058604ms","status_code":200,"latency_ms":5,"request_id":"812fc921-532b-4798-82c0-3cde2f4a8df8"}}
{"ts":"2024-10-03T23:10:34.354479408Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:10:38.914357679Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:38.914353Z","key":"5_mem_usage_host","value":"29.8/251 GiB (12..."}}
{"ts":"2024-10-03T23:10:38.914806066Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:38.914353Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:10:38.915075386Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:38.914353Z","key":"0_cpu_usage","value":"0.192 cores\n"}}
{"ts":"2024-10-03T23:10:38.915327854Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:38.914353Z","key":"4_cpu_usage_host","value":"0.995/64 cores (..."}}
{"ts":"2024-10-03T23:10:38.915604989Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:38.914353Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:10:38.917676251Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:10:38.918362828Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:10:38.914353Z","keys":["5_mem_usage_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host","7_swap_host"]}}}
{"ts":"2024-10-03T23:10:38.920135372Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host","7_swap_host"],"num":5}}
{"ts":"2024-10-03T23:10:39.3539847Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:10:39.508133084Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:10:39.508866461Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:10:39.508992845Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:10:40.337094743Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:10:44.354347308Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:10:48.915035121Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:48.91503Z","key":"1_ram_usage","value":"0.2 GiB\n"}}
{"ts":"2024-10-03T23:10:48.915485691Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:48.91503Z","key":"5_mem_usage_host","value":"29.9/251 GiB (12..."}}
{"ts":"2024-10-03T23:10:48.915802764Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:48.91503Z","key":"4_cpu_usage_host","value":"3.19/64 cores (5..."}}
{"ts":"2024-10-03T23:10:48.916053809Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:48.91503Z","key":"0_cpu_usage","value":"0.257 cores\n"}}
{"ts":"2024-10-03T23:10:48.916310715Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:48.91503Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:10:48.918557226Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":134}}
{"ts":"2024-10-03T23:10:48.919198425Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:10:48.91503Z","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host","0_cpu_usage","7_swap_host"]}}}
{"ts":"2024-10-03T23:10:48.921057066Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host","0_cpu_usage","7_swap_host"],"num":5}}
{"ts":"2024-10-03T23:10:49.353939033Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:10:54.354044149Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:10:54.508342557Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:10:54.509181929Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:10:54.50935862Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:10:55.28139979Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:10:55.2844737Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.121962ms"}}
{"ts":"2024-10-03T23:10:55.301473998Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:10:55.301662923Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:10:55.335523219Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:10:55.337506351Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:10:55.338092824Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:10:55.341320751Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:10:55.342539887Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:10:57.929707261Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending handshake initiation","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:10:57.931351077Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Received handshake response","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:10:57.931695262Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending keepalive packet","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:10:57.933842201Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:10:57.935649363Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:10:58.511755418Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.174399ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:10:59.914605308Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:59.9146Z","key":"1_ram_usage","value":"0.197 GiB\n"}}
{"ts":"2024-10-03T23:10:59.915079064Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:59.9146Z","key":"5_mem_usage_host","value":"29.6/251 GiB (12..."}}
{"ts":"2024-10-03T23:10:59.91535674Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:59.9146Z","key":"0_cpu_usage","value":"0.229 cores\n"}}
{"ts":"2024-10-03T23:10:59.915650318Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:59.9146Z","key":"4_cpu_usage_host","value":"4.11/64 cores (6..."}}
{"ts":"2024-10-03T23:10:59.915914147Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:10:59.9146Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:10:59.918071155Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":133}}
{"ts":"2024-10-03T23:10:59.918665073Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:10:59.9146Z","keys":["1_ram_usage","5_mem_usage_host","0_cpu_usage","4_cpu_usage_host","7_swap_host"]}}}
{"ts":"2024-10-03T23:10:59.920476072Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage","5_mem_usage_host","0_cpu_usage","4_cpu_usage_host","7_swap_host"],"num":5}}
{"ts":"2024-10-03T23:11:00.354057981Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:11:01.919133333Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:11:01.919132Z","key":"6_load_host","value":"0.05"}}
{"ts":"2024-10-03T23:11:01.92070523Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:11:01.921351599Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:11:01.919132Z","keys":["6_load_host"]}}}
{"ts":"2024-10-03T23:11:01.9237846Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host"],"num":1}}
{"ts":"2024-10-03T23:11:02.353410667Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:11:02.915993115Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:11:02.915989Z","key":"3_home_disk","value":"23.7/468 GiB (5%..."}}
{"ts":"2024-10-03T23:11:02.9172169Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:11:02.917614909Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:11:02.915989Z","keys":["3_home_disk"]}}}
{"ts":"2024-10-03T23:11:02.91864546Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["3_home_disk"],"num":1}}
{"ts":"2024-10-03T23:11:03.353893401Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:11:08.353979881Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:11:09.508959442Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:11:09.509821407Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:11:09.510037465Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:11:10.337161431Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:11:10.914284874Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:11:10.91428Z","key":"5_mem_usage_host","value":"29.9/251 GiB (12..."}}
{"ts":"2024-10-03T23:11:10.914724033Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:11:10.91428Z","key":"4_cpu_usage_host","value":"4.63/64 cores (7..."}}
{"ts":"2024-10-03T23:11:10.914995077Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:11:10.91428Z","key":"0_cpu_usage","value":"0.248 cores\n"}}
{"ts":"2024-10-03T23:11:10.915251061Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:11:10.91428Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:11:10.915506996Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:11:10.91428Z","key":"1_ram_usage","value":"0.197 GiB\n"}}
{"ts":"2024-10-03T23:11:10.916935496Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":134}}
{"ts":"2024-10-03T23:11:10.917569882Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:11:10.91428Z","keys":["5_mem_usage_host","4_cpu_usage_host","0_cpu_usage","7_swap_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:11:10.918844064Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host","4_cpu_usage_host","0_cpu_usage","7_swap_host","1_ram_usage"],"num":5}}
{"ts":"2024-10-03T23:11:11.353800858Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:11:16.353930675Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:11:20.914436307Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:11:20.914434Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:11:20.914706389Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:11:20.914434Z","key":"1_ram_usage","value":"0.183 GiB\n"}}
{"ts":"2024-10-03T23:11:20.914849576Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:11:20.914434Z","key":"4_cpu_usage_host","value":"3.36/64 cores (5..."}}
{"ts":"2024-10-03T23:11:20.916772632Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:11:20.917272708Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:11:20.914434Z","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:11:20.918963355Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:11:21.353835693Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:11:21.913307922Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:11:21.913305Z","key":"5_mem_usage_host","value":"30/251 GiB (12%)..."}}
{"ts":"2024-10-03T23:11:21.913554839Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:11:21.913305Z","key":"0_cpu_usage","value":"0.005 cores\n"}}
{"ts":"2024-10-03T23:11:21.914812088Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":88}}
{"ts":"2024-10-03T23:11:21.915190619Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:11:21.913305Z","keys":["5_mem_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:11:21.916431106Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host","0_cpu_usage"],"num":2}}
{"ts":"2024-10-03T23:11:22.35433861Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:11:24.508299341Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:11:24.509237344Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:11:24.509506404Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:11:25.284947245Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.315036ms"}}
{"ts":"2024-10-03T23:11:25.302492127Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:11:25.302703806Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:11:25.335846196Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:11:25.342052067Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:11:25.343146442Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:11:27.933774766Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:11:27.936047618Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:11:28.35406869Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:11:28.511362085Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.301475ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:11:31.914731108Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:11:31.914727Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:11:31.915195706Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:11:31.914727Z","key":"1_ram_usage","value":"0.183 GiB\n"}}
{"ts":"2024-10-03T23:11:31.915476669Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:11:31.914727Z","key":"4_cpu_usage_host","value":"3.75/64 cores (6..."}}
{"ts":"2024-10-03T23:11:31.917786973Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:11:31.918597931Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:11:31.914727Z","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:11:31.920586874Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:11:32.354324017Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:11:32.914690545Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:11:32.914687Z","key":"5_mem_usage_host","value":"30.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:11:32.915144301Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:11:32.914687Z","key":"0_cpu_usage","value":"0.016 cores\n"}}
{"ts":"2024-10-03T23:11:32.917217768Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":88}}
{"ts":"2024-10-03T23:11:32.917999338Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:11:32.914687Z","keys":["5_mem_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:11:32.919889761Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host","0_cpu_usage"],"num":2}}
{"ts":"2024-10-03T23:11:33.354040244Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:11:39.354024731Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:11:39.50904173Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:11:39.50991107Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:11:39.510114022Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:11:40.335836013Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:11:42.913650735Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:11:42.913648Z","key":"4_cpu_usage_host","value":"1.97/64 cores (3..."}}
{"ts":"2024-10-03T23:11:42.9139019Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:11:42.913648Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:11:42.91404132Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:11:42.913648Z","key":"1_ram_usage","value":"0.184 GiB\n"}}
{"ts":"2024-10-03T23:11:42.915874262Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:11:42.916363397Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:11:42.913648Z","keys":["4_cpu_usage_host","7_swap_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:11:42.917754014Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","7_swap_host","1_ram_usage"],"num":3}}
{"ts":"2024-10-03T23:11:43.353805788Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:11:43.913914288Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:11:43.913911Z","key":"5_mem_usage_host","value":"29.7/251 GiB (12..."}}
{"ts":"2024-10-03T23:11:43.914269735Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:11:43.913911Z","key":"0_cpu_usage","value":"0.008 cores\n"}}
{"ts":"2024-10-03T23:11:43.915345273Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":88}}
{"ts":"2024-10-03T23:11:43.915829138Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:11:43.913911Z","keys":["5_mem_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:11:43.91679774Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host","0_cpu_usage"],"num":2}}
{"ts":"2024-10-03T23:11:44.354144877Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:11:49.354155655Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:11:52.91500327Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:11:52.914999Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:11:52.915446086Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:11:52.914999Z","key":"1_ram_usage","value":"0.184 GiB\n"}}
{"ts":"2024-10-03T23:11:52.915755143Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:11:52.914999Z","key":"4_cpu_usage_host","value":"3.46/64 cores (5..."}}
{"ts":"2024-10-03T23:11:52.917653461Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:11:52.918276976Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:11:52.914999Z","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:11:52.920082935Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:11:53.35410236Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:11:53.914174409Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:11:53.91417Z","key":"5_mem_usage_host","value":"30.1/251 GiB (12..."}}
{"ts":"2024-10-03T23:11:53.914597005Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:11:53.91417Z","key":"0_cpu_usage","value":"0.085 cores\n"}}
{"ts":"2024-10-03T23:11:53.91620372Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":87}}
{"ts":"2024-10-03T23:11:53.916745477Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:11:53.91417Z","keys":["5_mem_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:11:53.918453838Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host","0_cpu_usage"],"num":2}}
{"ts":"2024-10-03T23:11:54.354199268Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:11:54.508558941Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:11:54.509113443Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:11:54.509209689Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:11:55.281201646Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:11:55.28353762Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"2.308521ms"}}
{"ts":"2024-10-03T23:11:55.30341027Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:11:55.303603464Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:11:55.334799725Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:11:55.335979174Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:11:55.341642397Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c37f3a0b-0952-4c61-bb4e-b2ec7eed4b7b","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:11:55.342706934Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:11:55.342992667Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c37f3a0b-0952-4c61-bb4e-b2ec7eed4b7b","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:11:57.932816019Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:11:57.935121334Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:11:58.511441734Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"979.914µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:12:00.354133915Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:12:01.914537504Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:01.914534Z","key":"6_load_host","value":"0.04"}}
{"ts":"2024-10-03T23:12:01.916987539Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:12:01.917638767Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:12:01.914534Z","keys":["6_load_host"]}}}
{"ts":"2024-10-03T23:12:01.919553587Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host"],"num":1}}
{"ts":"2024-10-03T23:12:02.354203967Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:12:03.915304469Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:03.915301Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:12:03.91555349Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:03.915301Z","key":"3_home_disk","value":"23.7/468 GiB (5%..."}}
{"ts":"2024-10-03T23:12:03.915712728Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:03.915301Z","key":"1_ram_usage","value":"0.183 GiB\n"}}
{"ts":"2024-10-03T23:12:03.915886263Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:03.915301Z","key":"4_cpu_usage_host","value":"6.46/64 cores (1..."}}
{"ts":"2024-10-03T23:12:03.917584955Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:12:03.917994617Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:12:03.915301Z","keys":["7_swap_host","3_home_disk","1_ram_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:12:03.919472162Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","3_home_disk","1_ram_usage","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:12:04.354214121Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:12:04.914230733Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:04.914229Z","key":"5_mem_usage_host","value":"30/251 GiB (12%)..."}}
{"ts":"2024-10-03T23:12:04.914478291Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:04.914229Z","key":"0_cpu_usage","value":"0.003 cores\n"}}
{"ts":"2024-10-03T23:12:04.916323647Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":88}}
{"ts":"2024-10-03T23:12:04.916876605Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:12:04.914229Z","keys":["5_mem_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:12:04.918236503Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host","0_cpu_usage"],"num":2}}
{"ts":"2024-10-03T23:12:05.353697152Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:12:09.508184248Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:12:09.508906444Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:12:09.509084839Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:12:10.336249458Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:12:11.35386128Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:12:14.915258105Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:14.915254Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:12:14.915593944Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:14.915254Z","key":"1_ram_usage","value":"0.184 GiB\n"}}
{"ts":"2024-10-03T23:12:14.915826464Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:14.915254Z","key":"4_cpu_usage_host","value":"1.77/64 cores (3..."}}
{"ts":"2024-10-03T23:12:14.917803844Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:12:14.918269504Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:12:14.915254Z","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:12:14.919864656Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:12:15.353864008Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:12:15.91446572Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:15.914461Z","key":"5_mem_usage_host","value":"30.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:12:15.914905811Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:15.914461Z","key":"0_cpu_usage","value":"0.003 cores\n"}}
{"ts":"2024-10-03T23:12:15.916938739Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":88}}
{"ts":"2024-10-03T23:12:15.917609515Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:12:15.914461Z","keys":["5_mem_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:12:15.919540297Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host","0_cpu_usage"],"num":2}}
{"ts":"2024-10-03T23:12:16.35431668Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:12:21.620055043Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/proxy/coder/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:12:21.611946815Z","took":"8.104401ms","status_code":200,"latency_ms":8,"request_id":"4090efed-3767-409b-aa4a-05d06d279902"}}
{"ts":"2024-10-03T23:12:22.35396737Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:12:22.77161557Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/proxy/coder/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:12:22.76722731Z","took":"4.385234ms","status_code":200,"latency_ms":4,"request_id":"b5c86414-8576-4cf1-9c4e-0ce32a876038"}}
{"ts":"2024-10-03T23:12:24.508689269Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:12:24.509554651Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:12:24.509741161Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:12:24.825934654Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/proxy/coder/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:12:24.821311921Z","took":"4.620127ms","status_code":200,"latency_ms":4,"request_id":"114e2c05-2b90-4c54-8d12-6c5f8cf4a3e7"}}
{"ts":"2024-10-03T23:12:24.914653692Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:24.91465Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:12:24.915024108Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:24.91465Z","key":"1_ram_usage","value":"0.184 GiB\n"}}
{"ts":"2024-10-03T23:12:24.915312014Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:24.91465Z","key":"4_cpu_usage_host","value":"1.59/64 cores (2..."}}
{"ts":"2024-10-03T23:12:24.917366384Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":101}}
{"ts":"2024-10-03T23:12:24.918035637Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:12:24.91465Z","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:12:24.919503394Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:12:25.284980982Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.851503ms"}}
{"ts":"2024-10-03T23:12:25.304392252Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:12:25.304610123Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:12:25.337395988Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:12:25.341659917Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:12:25.342969237Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:12:25.354178518Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:12:25.914302737Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:25.914299Z","key":"5_mem_usage_host","value":"30.5/251 GiB (12..."}}
{"ts":"2024-10-03T23:12:25.91468198Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:25.914299Z","key":"0_cpu_usage","value":"0.093 cores\n"}}
{"ts":"2024-10-03T23:12:25.916587091Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":88}}
{"ts":"2024-10-03T23:12:25.917126043Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:12:25.914299Z","keys":["5_mem_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:12:25.918804186Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host","0_cpu_usage"],"num":2}}
{"ts":"2024-10-03T23:12:26.353508246Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:12:27.933126682Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:12:27.9352424Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:12:28.512337766Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.463398ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:12:28.868812269Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/proxy/coder/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:12:28.86627688Z","took":"2.53032ms","status_code":200,"latency_ms":2,"request_id":"3745c923-c601-4391-bd3b-830a601dc208"}}
{"ts":"2024-10-03T23:12:31.354190614Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:12:35.915267673Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:35.915263Z","key":"4_cpu_usage_host","value":"4.61/64 cores (7..."}}
{"ts":"2024-10-03T23:12:35.91576806Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:35.915263Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:12:35.916035968Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:35.915263Z","key":"1_ram_usage","value":"0.19 GiB\n"}}
{"ts":"2024-10-03T23:12:35.916299097Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:35.915263Z","key":"5_mem_usage_host","value":"30/251 GiB (12%)..."}}
{"ts":"2024-10-03T23:12:35.918534136Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":121}}
{"ts":"2024-10-03T23:12:35.919278684Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:12:35.915263Z","keys":["4_cpu_usage_host","7_swap_host","1_ram_usage","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:12:35.92113409Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","7_swap_host","1_ram_usage","5_mem_usage_host"],"num":4}}
{"ts":"2024-10-03T23:12:36.353810469Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:12:36.914654088Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:36.914649Z","key":"0_cpu_usage","value":"0.016 cores\n"}}
{"ts":"2024-10-03T23:12:36.917016182Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:12:36.917399243Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:12:36.914649Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:12:36.918266198Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:12:37.354285157Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:12:39.508768415Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:12:39.509641522Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:12:39.509933717Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:12:40.335782303Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:12:43.35362209Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:12:46.914358889Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:46.914355Z","key":"1_ram_usage","value":"0.184 GiB\n"}}
{"ts":"2024-10-03T23:12:46.914777298Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:46.914355Z","key":"4_cpu_usage_host","value":"1.97/64 cores (3..."}}
{"ts":"2024-10-03T23:12:46.915059694Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:46.914355Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:12:46.915289919Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:46.914355Z","key":"5_mem_usage_host","value":"30.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:12:46.91760364Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":121}}
{"ts":"2024-10-03T23:12:46.91835914Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:12:46.914355Z","keys":["1_ram_usage","4_cpu_usage_host","7_swap_host","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:12:46.92024286Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage","4_cpu_usage_host","7_swap_host","5_mem_usage_host"],"num":4}}
{"ts":"2024-10-03T23:12:47.354148241Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:12:47.913865934Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:47.913863Z","key":"0_cpu_usage","value":"0.016 cores\n"}}
{"ts":"2024-10-03T23:12:47.915192477Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:12:47.915619512Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:12:47.913863Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:12:47.916748354Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:12:48.353798123Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:12:54.353717602Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:12:54.508245985Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:12:54.508889088Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:12:54.509028297Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:12:55.281040146Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:12:55.284166187Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.18257ms"}}
{"ts":"2024-10-03T23:12:55.304833234Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:12:55.305898974Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:12:55.335711715Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:12:55.33751509Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:12:55.338906659Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:12:55.341933448Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:12:55.343250633Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:12:56.915187725Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:56.915183Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:12:56.915647874Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:56.915183Z","key":"5_mem_usage_host","value":"29.7/251 GiB (12..."}}
{"ts":"2024-10-03T23:12:56.91592524Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:56.915183Z","key":"1_ram_usage","value":"0.184 GiB\n"}}
{"ts":"2024-10-03T23:12:56.916168611Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:56.915183Z","key":"4_cpu_usage_host","value":"3.93/64 cores (6..."}}
{"ts":"2024-10-03T23:12:56.918872937Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":121}}
{"ts":"2024-10-03T23:12:56.919738349Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:12:56.915183Z","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:12:56.921906248Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:12:57.113677762Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/proxy/coder/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:12:57.109383624Z","took":"4.289168ms","status_code":200,"latency_ms":4,"request_id":"7404010b-76c4-4385-af00-14dd7b65ed9d"}}
{"ts":"2024-10-03T23:12:57.353985918Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:12:57.914523694Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:12:57.914521Z","key":"0_cpu_usage","value":"0.016 cores\n"}}
{"ts":"2024-10-03T23:12:57.91642627Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:12:57.916872492Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:12:57.914521Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:12:57.918465891Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:12:57.932541131Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:12:57.934617674Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:12:57.934767924Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending handshake initiation","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:12:57.93633366Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Received handshake response","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:12:57.936560498Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending keepalive packet","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:12:58.226563657Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/proxy/coder/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:12:58.221995379Z","took":"4.563178ms","status_code":200,"latency_ms":4,"request_id":"da4bc349-4b6d-44e9-a502-3b17a35e8b81"}}
{"ts":"2024-10-03T23:12:58.353902379Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:12:58.511840232Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.212995ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:13:01.914541579Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:13:01.914537Z","key":"6_load_host","value":"0.03"}}
{"ts":"2024-10-03T23:13:01.917109632Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:13:01.917963742Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:13:01.914537Z","keys":["6_load_host"]}}}
{"ts":"2024-10-03T23:13:01.919989507Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host"],"num":1}}
{"ts":"2024-10-03T23:13:02.3535487Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:13:03.914776403Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:13:03.914771Z","key":"3_home_disk","value":"23.7/468 GiB (5%..."}}
{"ts":"2024-10-03T23:13:03.917046469Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:13:03.917816467Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:13:03.914771Z","keys":["3_home_disk"]}}}
{"ts":"2024-10-03T23:13:03.921071347Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["3_home_disk"],"num":1}}
{"ts":"2024-10-03T23:13:04.353695343Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:13:07.916286778Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:13:07.916283Z","key":"4_cpu_usage_host","value":"4.53/64 cores (7..."}}
{"ts":"2024-10-03T23:13:07.916599161Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:13:07.916283Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:13:07.916793807Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:13:07.916283Z","key":"1_ram_usage","value":"0.19 GiB\n"}}
{"ts":"2024-10-03T23:13:07.916982472Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:13:07.916283Z","key":"5_mem_usage_host","value":"29.6/251 GiB (12..."}}
{"ts":"2024-10-03T23:13:07.9197604Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":121}}
{"ts":"2024-10-03T23:13:07.920220329Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:13:07.916283Z","keys":["4_cpu_usage_host","7_swap_host","1_ram_usage","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:13:07.922055826Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","7_swap_host","1_ram_usage","5_mem_usage_host"],"num":4}}
{"ts":"2024-10-03T23:13:08.354137867Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:13:08.914410139Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:13:08.914405Z","key":"0_cpu_usage","value":"0.015 cores\n"}}
{"ts":"2024-10-03T23:13:08.916657361Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:13:08.917152408Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:13:08.914405Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:13:08.918867622Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:13:09.354329436Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:13:09.50904806Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:13:09.509925426Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:13:09.5101503Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:13:10.33719793Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:13:15.353805754Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:13:17.914558029Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:13:17.914554Z","key":"1_ram_usage","value":"0.19 GiB\n"}}
{"ts":"2024-10-03T23:13:17.91502988Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:13:17.914554Z","key":"5_mem_usage_host","value":"29.7/251 GiB (12..."}}
{"ts":"2024-10-03T23:13:17.915302457Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:13:17.914554Z","key":"4_cpu_usage_host","value":"1.89/64 cores (3..."}}
{"ts":"2024-10-03T23:13:17.915556739Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:13:17.914554Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:13:17.91777234Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":121}}
{"ts":"2024-10-03T23:13:17.918441484Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:13:17.914554Z","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host","7_swap_host"]}}}
{"ts":"2024-10-03T23:13:17.920489361Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host","7_swap_host"],"num":4}}
{"ts":"2024-10-03T23:13:18.354369744Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:13:19.914975391Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:13:19.914971Z","key":"0_cpu_usage","value":"0.021 cores\n"}}
{"ts":"2024-10-03T23:13:19.91739118Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:13:19.918144415Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:13:19.914971Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:13:19.919687737Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:13:20.353451817Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:13:24.508089358Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:13:24.509014045Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:13:24.509298946Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:13:25.284567222Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.225714ms"}}
{"ts":"2024-10-03T23:13:25.307026854Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:13:25.307313719Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:13:25.337494492Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:13:25.341765165Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:13:25.343008738Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:13:25.354270972Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:13:27.931760798Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:13:27.933039089Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:13:28.511639023Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.393072ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:13:28.91443359Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:13:28.914429Z","key":"1_ram_usage","value":"0.192 GiB\n"}}
{"ts":"2024-10-03T23:13:28.914887548Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:13:28.914429Z","key":"5_mem_usage_host","value":"29.8/251 GiB (12..."}}
{"ts":"2024-10-03T23:13:28.915160495Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:13:28.914429Z","key":"4_cpu_usage_host","value":"1.68/64 cores (3..."}}
{"ts":"2024-10-03T23:13:28.915429225Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:13:28.914429Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:13:28.917701005Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":121}}
{"ts":"2024-10-03T23:13:28.918336793Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:13:28.914429Z","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host","7_swap_host"]}}}
{"ts":"2024-10-03T23:13:28.920116633Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host","7_swap_host"],"num":4}}
{"ts":"2024-10-03T23:13:29.353997413Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:13:29.657380712Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/api/v2/deployment/stats","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:13:29.652821301Z","took":"4.556996ms","status_code":200,"latency_ms":4,"request_id":"6f769e6e-a357-4e26-a266-55dc4ec06be9"}}
{"ts":"2024-10-03T23:13:29.913190946Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:13:29.913188Z","key":"0_cpu_usage","value":"0.01 cores\n"}}
{"ts":"2024-10-03T23:13:29.914601653Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:13:29.915092271Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:13:29.913188Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:13:29.91629768Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:13:30.353856138Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:13:36.353678052Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:13:39.508738261Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:13:39.509628952Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:13:39.509835131Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:13:39.914400235Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:13:39.914396Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:13:39.914825898Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:13:39.914396Z","key":"5_mem_usage_host","value":"29.8/251 GiB (12..."}}
{"ts":"2024-10-03T23:13:39.915113574Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:13:39.914396Z","key":"1_ram_usage","value":"0.192 GiB\n"}}
{"ts":"2024-10-03T23:13:39.915376552Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:13:39.914396Z","key":"0_cpu_usage","value":"0.226 cores\n"}}
{"ts":"2024-10-03T23:13:39.915682353Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:13:39.914396Z","key":"4_cpu_usage_host","value":"4.16/64 cores (6..."}}
{"ts":"2024-10-03T23:13:39.91778673Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:13:39.91848548Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:13:39.914396Z","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:13:39.920318923Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"],"num":5}}
{"ts":"2024-10-03T23:13:40.336870502Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:13:40.354134454Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:13:46.354255719Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:13:49.91438826Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:13:49.914384Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:13:49.914845855Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:13:49.914384Z","key":"5_mem_usage_host","value":"29.9/251 GiB (12..."}}
{"ts":"2024-10-03T23:13:49.915160823Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:13:49.914384Z","key":"1_ram_usage","value":"0.192 GiB\n"}}
{"ts":"2024-10-03T23:13:49.915424813Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:13:49.914384Z","key":"4_cpu_usage_host","value":"3.07/64 cores (5..."}}
{"ts":"2024-10-03T23:13:49.915701969Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:13:49.914384Z","key":"0_cpu_usage","value":"0.35 cores\n"}}
{"ts":"2024-10-03T23:13:49.917751399Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:13:49.918444749Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:13:49.914384Z","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:13:49.920459793Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":5}}
{"ts":"2024-10-03T23:13:50.354212379Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:13:54.508515846Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:13:54.509201691Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:13:54.50936679Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:13:55.281410266Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:13:55.28461554Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.272284ms"}}
{"ts":"2024-10-03T23:13:55.308366809Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:13:55.308530977Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:13:55.335505255Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:13:55.336660767Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:13:55.337182756Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:13:55.341400116Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:13:55.342182258Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:13:56.353466217Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:13:57.93266626Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:13:57.934730258Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:13:58.511947555Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.083564ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:14:00.913643593Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:00.91364Z","key":"4_cpu_usage_host","value":"1.87/64 cores (3..."}}
{"ts":"2024-10-03T23:14:00.913919807Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:00.91364Z","key":"0_cpu_usage","value":"0.091 cores\n"}}
{"ts":"2024-10-03T23:14:00.914053735Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:00.91364Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:14:00.914184198Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:00.91364Z","key":"5_mem_usage_host","value":"29.8/251 GiB (12..."}}
{"ts":"2024-10-03T23:14:00.914311984Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:00.91364Z","key":"1_ram_usage","value":"0.192 GiB\n"}}
{"ts":"2024-10-03T23:14:00.915227313Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":134}}
{"ts":"2024-10-03T23:14:00.915615243Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:14:00.91364Z","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host","5_mem_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:14:00.916571822Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host","5_mem_usage_host","1_ram_usage"],"num":5}}
{"ts":"2024-10-03T23:14:01.353802164Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:14:02.914718823Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:02.914715Z","key":"6_load_host","value":"0.04"}}
{"ts":"2024-10-03T23:14:02.917173297Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:14:02.91803917Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:14:02.914715Z","keys":["6_load_host"]}}}
{"ts":"2024-10-03T23:14:02.920095514Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host"],"num":1}}
{"ts":"2024-10-03T23:14:03.354023185Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:14:04.915288813Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:04.915285Z","key":"3_home_disk","value":"23.7/468 GiB (5%..."}}
{"ts":"2024-10-03T23:14:04.917564751Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:14:04.918170592Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:14:04.915285Z","keys":["3_home_disk"]}}}
{"ts":"2024-10-03T23:14:04.921199084Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["3_home_disk"],"num":1}}
{"ts":"2024-10-03T23:14:05.3541504Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:14:09.508561116Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:14:09.509440846Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:14:09.509630172Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:14:10.336186901Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:14:10.35444743Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:14:10.915068903Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:10.915065Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:14:10.915463947Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:10.915065Z","key":"5_mem_usage_host","value":"29.6/251 GiB (12..."}}
{"ts":"2024-10-03T23:14:10.915779026Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:10.915065Z","key":"1_ram_usage","value":"0.193 GiB\n"}}
{"ts":"2024-10-03T23:14:10.91603462Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:10.915065Z","key":"4_cpu_usage_host","value":"9.37/64 cores (1..."}}
{"ts":"2024-10-03T23:14:10.916289492Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:10.915065Z","key":"0_cpu_usage","value":"0.203 cores\n"}}
{"ts":"2024-10-03T23:14:10.918370434Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:14:10.918899817Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:14:10.915065Z","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:14:10.920092372Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":5}}
{"ts":"2024-10-03T23:14:11.354151361Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:14:17.353956108Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:14:21.914480638Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:21.914477Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:14:21.914755439Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:21.914477Z","key":"5_mem_usage_host","value":"29.6/251 GiB (12..."}}
{"ts":"2024-10-03T23:14:21.914896101Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:21.914477Z","key":"1_ram_usage","value":"0.192 GiB\n"}}
{"ts":"2024-10-03T23:14:21.915026182Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:21.914477Z","key":"0_cpu_usage","value":"0.038 cores\n"}}
{"ts":"2024-10-03T23:14:21.915157426Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:21.914477Z","key":"4_cpu_usage_host","value":"2.98/64 cores (5..."}}
{"ts":"2024-10-03T23:14:21.917273716Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:14:21.918095303Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:14:21.914477Z","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:14:21.919877468Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"],"num":5}}
{"ts":"2024-10-03T23:14:22.35368656Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:14:24.508648398Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:14:24.509221074Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:14:24.509322931Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:14:25.2830393Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"2.024553ms"}}
{"ts":"2024-10-03T23:14:25.309405634Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:14:25.309508523Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:14:25.337609509Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:14:25.34183792Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:14:25.343112043Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:14:27.354063422Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:14:27.932923495Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:14:27.934287932Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:14:28.511505861Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.125715ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:14:29.522164836Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/api/v2/deployment/stats","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:14:29.518438615Z","took":"3.723025ms","status_code":200,"latency_ms":3,"request_id":"c59f6099-d667-4c2a-96c6-f6dab9f7c42f"}}
{"ts":"2024-10-03T23:14:32.354130767Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:14:32.914134292Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:32.91413Z","key":"5_mem_usage_host","value":"30.5/251 GiB (12..."}}
{"ts":"2024-10-03T23:14:32.914598119Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:32.91413Z","key":"0_cpu_usage","value":"0.229 cores\n"}}
{"ts":"2024-10-03T23:14:32.914870064Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:32.91413Z","key":"4_cpu_usage_host","value":"2.48/64 cores (4..."}}
{"ts":"2024-10-03T23:14:32.91515257Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:32.91413Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:14:32.91540601Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:32.91413Z","key":"1_ram_usage","value":"0.197 GiB\n"}}
{"ts":"2024-10-03T23:14:32.917994823Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":134}}
{"ts":"2024-10-03T23:14:32.918626925Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:14:32.91413Z","keys":["5_mem_usage_host","0_cpu_usage","4_cpu_usage_host","7_swap_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:14:32.920489945Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host","0_cpu_usage","4_cpu_usage_host","7_swap_host","1_ram_usage"],"num":5}}
{"ts":"2024-10-03T23:14:33.353659688Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:14:38.354319665Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:14:39.508370185Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:14:39.50923206Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:14:39.50951154Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:14:40.337239013Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:14:42.914726795Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:42.914719Z","key":"1_ram_usage","value":"0.197 GiB\n"}}
{"ts":"2024-10-03T23:14:42.915171975Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:42.914719Z","key":"5_mem_usage_host","value":"30.3/251 GiB (12..."}}
{"ts":"2024-10-03T23:14:42.915446927Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:42.914719Z","key":"0_cpu_usage","value":"0.22 cores\n"}}
{"ts":"2024-10-03T23:14:42.915747357Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:42.914719Z","key":"4_cpu_usage_host","value":"3.44/64 cores (5..."}}
{"ts":"2024-10-03T23:14:42.916012059Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:42.914719Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:14:42.918159258Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:14:42.918805588Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:14:42.914719Z","keys":["1_ram_usage","5_mem_usage_host","0_cpu_usage","4_cpu_usage_host","7_swap_host"]}}}
{"ts":"2024-10-03T23:14:42.920922128Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage","5_mem_usage_host","0_cpu_usage","4_cpu_usage_host","7_swap_host"],"num":5}}
{"ts":"2024-10-03T23:14:43.354141592Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:14:48.354338355Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:14:53.914773371Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:53.914769Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:14:53.915222689Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:53.914769Z","key":"1_ram_usage","value":"0.198 GiB\n"}}
{"ts":"2024-10-03T23:14:53.915505827Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:53.914769Z","key":"5_mem_usage_host","value":"30/251 GiB (12%)..."}}
{"ts":"2024-10-03T23:14:53.915796118Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:53.914769Z","key":"0_cpu_usage","value":"0.2 cores\n"}}
{"ts":"2024-10-03T23:14:53.916052593Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:14:53.914769Z","key":"4_cpu_usage_host","value":"1.87/64 cores (3..."}}
{"ts":"2024-10-03T23:14:53.918021829Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:14:53.918724126Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:14:53.914769Z","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:14:53.920134362Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","0_cpu_usage","4_cpu_usage_host"],"num":5}}
{"ts":"2024-10-03T23:14:54.353804753Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:14:54.508045004Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:14:54.508702635Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:14:54.508879657Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:14:55.280876621Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:14:55.28337585Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"2.305275ms"}}
{"ts":"2024-10-03T23:14:55.290669506Z","level":"DEBUG","msg":"pruning inactive agents","caller":"/home/runner/work/coder/coder/coderd/tailnet.go:235","func":"github.com/coder/coder/v2/coderd.(*ServerTailnet).doExpireOldAgents","logger_names":["coderd","servertailnet"],"fields":{"agent_count":0}}
{"ts":"2024-10-03T23:14:55.290869012Z","level":"DEBUG","msg":"successfully pruned inactive agents","caller":"/home/runner/work/coder/coder/coderd/tailnet.go:251","func":"github.com/coder/coder/v2/coderd.(*ServerTailnet).doExpireOldAgents","logger_names":["coderd","servertailnet"],"fields":{"deleted":0,"took":"199.506µs"}}
{"ts":"2024-10-03T23:14:55.31015843Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:14:55.31038085Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:14:55.335110401Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:14:55.336185299Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:14:55.336197823Z","level":"DEBUG","msg":"syncing licensed entitlements","caller":"/home/runner/work/coder/coder/enterprise/coderd/coderd.go:1068","func":"github.com/coder/coder/v2/enterprise/coderd.(*API).runEntitlementsLoop","logger_names":["coderd"]}
{"ts":"2024-10-03T23:14:55.33724642Z","level":"DEBUG","msg":"synced licensed entitlements","caller":"/home/runner/work/coder/coder/enterprise/coderd/coderd.go:1076","func":"github.com/coder/coder/v2/enterprise/coderd.(*API).runEntitlementsLoop","logger_names":["coderd"]}
{"ts":"2024-10-03T23:14:55.337539927Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:14:55.341185943Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:14:55.34237427Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:14:55.34519971Z","level":"INFO","msg":"purged old database entries","caller":"/home/runner/work/coder/coder/coderd/database/dbpurge/dbpurge.go:66","func":"github.com/coder/coder/v2/coderd/database/dbpurge.New.func1.1","logger_names":["dbpurge"],"fields":{"duration":"4.467638ms"}}
{"ts":"2024-10-03T23:14:57.93287636Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:14:57.935124435Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:14:57.936993968Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending handshake initiation","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:14:57.938389705Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Received handshake response","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:14:57.938731686Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending keepalive packet","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:14:58.511914508Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.381239ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:15:00.000457991Z","level":"DEBUG","msg":"rolling up data","caller":"/home/runner/work/coder/coder/coderd/database/dbrollup/dbrollup.go:91","func":"github.com/coder/coder/v2/coderd/database/dbrollup.(*Rolluper).start.func1","logger_names":["coderd","dbrollup"]}
{"ts":"2024-10-03T23:15:00.007689827Z","level":"DEBUG","msg":"rolled up data","caller":"/home/runner/work/coder/coder/coderd/database/dbrollup/dbrollup.go:126","func":"github.com/coder/coder/v2/coderd/database/dbrollup.(*Rolluper).start.func1","logger_names":["coderd","dbrollup"],"fields":{"took":"6.942818ms","event":{"template_usage_stats":true}}}
{"ts":"2024-10-03T23:15:00.007970961Z","level":"DEBUG","msg":"next rollup at","caller":"/home/runner/work/coder/coder/coderd/database/dbrollup/dbrollup.go:174","func":"github.com/coder/coder/v2/coderd/database/dbrollup.(*Rolluper).start","logger_names":["coderd","dbrollup"],"fields":{"next":"2024-10-03T23:20:00Z"}}
{"ts":"2024-10-03T23:15:00.353844741Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:15:03.915751321Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:03.915747Z","key":"6_load_host","value":"0.04"}}
{"ts":"2024-10-03T23:15:03.917647395Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:15:03.91846222Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:15:03.915747Z","keys":["6_load_host"]}}}
{"ts":"2024-10-03T23:15:03.920779999Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host"],"num":1}}
{"ts":"2024-10-03T23:15:04.354432932Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:15:04.914059269Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:04.914054Z","key":"4_cpu_usage_host","value":"2.64/64 cores (4..."}}
{"ts":"2024-10-03T23:15:04.914500722Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:04.914054Z","key":"0_cpu_usage","value":"0.126 cores\n"}}
{"ts":"2024-10-03T23:15:04.914771846Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:04.914054Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:15:04.915028603Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:04.914054Z","key":"3_home_disk","value":"23.7/468 GiB (5%..."}}
{"ts":"2024-10-03T23:15:04.915277904Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:04.914054Z","key":"1_ram_usage","value":"0.199 GiB\n"}}
{"ts":"2024-10-03T23:15:04.915537817Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:04.914054Z","key":"5_mem_usage_host","value":"30.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:15:04.917157868Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":149}}
{"ts":"2024-10-03T23:15:04.917685818Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:15:04.914054Z","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host","3_home_disk","1_ram_usage","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:15:04.918910645Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host","3_home_disk","1_ram_usage","5_mem_usage_host"],"num":6}}
{"ts":"2024-10-03T23:15:05.353583759Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:15:09.508423809Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:15:09.509125796Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:15:09.509358406Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:15:10.336834181Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:15:10.354068628Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:15:15.915010095Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:15.915005Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:15:15.915296949Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:15.915005Z","key":"1_ram_usage","value":"0.197 GiB\n"}}
{"ts":"2024-10-03T23:15:15.915444083Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:15.915005Z","key":"5_mem_usage_host","value":"28.1/251 GiB (11..."}}
{"ts":"2024-10-03T23:15:15.915591599Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:15.915005Z","key":"4_cpu_usage_host","value":"1.79/64 cores (3..."}}
{"ts":"2024-10-03T23:15:15.91572698Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:15.915005Z","key":"0_cpu_usage","value":"0.085 cores\n"}}
{"ts":"2024-10-03T23:15:15.91842252Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:15:15.919019684Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:15:15.915005Z","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:15:15.922348056Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","4_cpu_usage_host","0_cpu_usage"],"num":5}}
{"ts":"2024-10-03T23:15:16.354080062Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:15:22.353675512Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:15:24.508693753Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:15:24.509472748Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:15:24.509705388Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:15:25.284353672Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"2.707473ms"}}
{"ts":"2024-10-03T23:15:25.310741799Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:15:25.310837294Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:15:25.336473299Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:15:25.341717483Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c37f3a0b-0952-4c61-bb4e-b2ec7eed4b7b","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:15:25.342786399Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c37f3a0b-0952-4c61-bb4e-b2ec7eed4b7b","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:15:25.913116176Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:25.913112Z","key":"0_cpu_usage","value":"0.284 cores\n"}}
{"ts":"2024-10-03T23:15:25.913403531Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:25.913112Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:15:25.913566566Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:25.913112Z","key":"5_mem_usage_host","value":"28.5/251 GiB (11..."}}
{"ts":"2024-10-03T23:15:25.913737316Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:25.913112Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:15:25.913877116Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:25.913112Z","key":"4_cpu_usage_host","value":"15.8/64 cores (2..."}}
{"ts":"2024-10-03T23:15:25.915190735Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:15:25.915646847Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:15:25.913112Z","keys":["0_cpu_usage","7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:15:25.916755028Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage","7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host"],"num":5}}
{"ts":"2024-10-03T23:15:26.353511229Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:15:27.933660097Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:15:27.935836403Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:15:28.510902645Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"817.68µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:15:31.353892456Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:15:36.354452656Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:15:36.914792091Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:36.914788Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:15:36.915218876Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:36.914788Z","key":"5_mem_usage_host","value":"30/251 GiB (12%)..."}}
{"ts":"2024-10-03T23:15:36.915485441Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:36.914788Z","key":"1_ram_usage","value":"0.192 GiB\n"}}
{"ts":"2024-10-03T23:15:36.915764591Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:36.914788Z","key":"0_cpu_usage","value":"0.237 cores\n"}}
{"ts":"2024-10-03T23:15:36.916016778Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:36.914788Z","key":"4_cpu_usage_host","value":"3.47/64 cores (5..."}}
{"ts":"2024-10-03T23:15:36.918068072Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:15:36.918742235Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:15:36.914788Z","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:15:36.920723514Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"],"num":5}}
{"ts":"2024-10-03T23:15:37.353436537Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:15:39.508754311Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:15:39.509547103Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:15:39.509728694Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:15:40.336592624Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:15:42.354363478Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:15:46.914690527Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:46.914684Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:15:46.915045563Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:46.914684Z","key":"1_ram_usage","value":"0.198 GiB\n"}}
{"ts":"2024-10-03T23:15:46.915252092Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:46.914684Z","key":"5_mem_usage_host","value":"30/251 GiB (12%)..."}}
{"ts":"2024-10-03T23:15:46.915436479Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:46.914684Z","key":"4_cpu_usage_host","value":"4.98/64 cores (8..."}}
{"ts":"2024-10-03T23:15:46.915692143Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:46.914684Z","key":"0_cpu_usage","value":"0.161 cores\n"}}
{"ts":"2024-10-03T23:15:46.917533942Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:15:46.918108563Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:15:46.914684Z","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:15:46.919666173Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","4_cpu_usage_host","0_cpu_usage"],"num":5}}
{"ts":"2024-10-03T23:15:47.353530845Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:15:52.354114086Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:15:54.508846423Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:15:54.509656058Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:15:54.509844382Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:15:55.28193039Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:15:55.284651749Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"2.767218ms"}}
{"ts":"2024-10-03T23:15:55.311484808Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:15:55.311653744Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:15:55.334729562Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:15:55.336728675Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:15:55.337627512Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:15:55.34137257Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:15:55.342587047Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:15:57.354370061Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:15:57.913571159Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:57.913563Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:15:57.914155308Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:57.913563Z","key":"1_ram_usage","value":"0.198 GiB\n"}}
{"ts":"2024-10-03T23:15:57.914540893Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:57.913563Z","key":"5_mem_usage_host","value":"29.7/251 GiB (12..."}}
{"ts":"2024-10-03T23:15:57.914952678Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:57.913563Z","key":"4_cpu_usage_host","value":"1.91/64 cores (3..."}}
{"ts":"2024-10-03T23:15:57.915374724Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:15:57.913563Z","key":"0_cpu_usage","value":"0.26 cores\n"}}
{"ts":"2024-10-03T23:15:57.917526212Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:15:57.918061667Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:15:57.913563Z","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:15:57.919499917Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","4_cpu_usage_host","0_cpu_usage"],"num":5}}
{"ts":"2024-10-03T23:15:57.930922934Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:15:57.932050924Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:15:58.353923234Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:15:58.5112081Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"834.132µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:16:03.353971939Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:16:03.91370547Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:03.913701Z","key":"6_load_host","value":"0.05"}}
{"ts":"2024-10-03T23:16:03.915206982Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:16:03.915720755Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:16:03.913701Z","keys":["6_load_host"]}}}
{"ts":"2024-10-03T23:16:03.916787837Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host"],"num":1}}
{"ts":"2024-10-03T23:16:04.353995528Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:16:05.914613123Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:05.914606Z","key":"3_home_disk","value":"23.7/468 GiB (5%..."}}
{"ts":"2024-10-03T23:16:05.916820429Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:16:05.917477479Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:16:05.914606Z","keys":["3_home_disk"]}}}
{"ts":"2024-10-03T23:16:05.919230888Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["3_home_disk"],"num":1}}
{"ts":"2024-10-03T23:16:06.35382566Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:16:07.914908377Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:07.914905Z","key":"0_cpu_usage","value":"0.236 cores\n"}}
{"ts":"2024-10-03T23:16:07.915253624Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:07.914905Z","key":"4_cpu_usage_host","value":"2.79/64 cores (4..."}}
{"ts":"2024-10-03T23:16:07.915464762Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:07.914905Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:16:07.91566554Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:07.914905Z","key":"5_mem_usage_host","value":"29.9/251 GiB (12..."}}
{"ts":"2024-10-03T23:16:07.915851068Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:07.914905Z","key":"1_ram_usage","value":"0.191 GiB\n"}}
{"ts":"2024-10-03T23:16:07.917728788Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:16:07.918313407Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:16:07.914905Z","keys":["0_cpu_usage","4_cpu_usage_host","7_swap_host","5_mem_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:16:07.919899443Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage","4_cpu_usage_host","7_swap_host","5_mem_usage_host","1_ram_usage"],"num":5}}
{"ts":"2024-10-03T23:16:08.354237449Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:16:09.508956547Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:16:09.509773827Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:16:09.510030723Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:16:10.336236838Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:16:14.354021077Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:16:17.916427909Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:17.916423Z","key":"4_cpu_usage_host","value":"2.61/64 cores (4..."}}
{"ts":"2024-10-03T23:16:17.916831308Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:17.916423Z","key":"0_cpu_usage","value":"0.166 cores\n"}}
{"ts":"2024-10-03T23:16:17.917196765Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:17.916423Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:16:17.91751027Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:17.916423Z","key":"1_ram_usage","value":"0.197 GiB\n"}}
{"ts":"2024-10-03T23:16:17.917812775Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:17.916423Z","key":"5_mem_usage_host","value":"29.9/251 GiB (12..."}}
{"ts":"2024-10-03T23:16:17.9216802Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:16:17.922442793Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:16:17.916423Z","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host","1_ram_usage","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:16:17.924831931Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host","1_ram_usage","5_mem_usage_host"],"num":5}}
{"ts":"2024-10-03T23:16:18.353558366Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:16:23.354064227Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:16:24.508735209Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:16:24.509406206Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:16:24.509524915Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:16:25.284558233Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.081456ms"}}
{"ts":"2024-10-03T23:16:25.312072619Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:16:25.312331018Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:16:25.337263615Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:16:25.341486536Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:16:25.342608104Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:16:27.932145662Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:16:27.933417109Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:16:28.512031354Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"994.592µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:16:28.913838669Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:28.913836Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:16:28.914111877Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:28.913836Z","key":"5_mem_usage_host","value":"29/251 GiB (12%)..."}}
{"ts":"2024-10-03T23:16:28.914249913Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:28.913836Z","key":"1_ram_usage","value":"0.192 GiB\n"}}
{"ts":"2024-10-03T23:16:28.914394583Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:28.913836Z","key":"4_cpu_usage_host","value":"4.83/64 cores (8..."}}
{"ts":"2024-10-03T23:16:28.914526328Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:28.913836Z","key":"0_cpu_usage","value":"0.385 cores\n"}}
{"ts":"2024-10-03T23:16:28.916028311Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:16:28.916461027Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:16:28.913836Z","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:16:28.917555191Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":5}}
{"ts":"2024-10-03T23:16:29.353763893Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:16:35.353847645Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:16:38.913833001Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:38.913829Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:16:38.914297219Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:38.913829Z","key":"5_mem_usage_host","value":"29.1/251 GiB (12..."}}
{"ts":"2024-10-03T23:16:38.914756727Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:38.913829Z","key":"1_ram_usage","value":"0.191 GiB\n"}}
{"ts":"2024-10-03T23:16:38.915183091Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:38.913829Z","key":"0_cpu_usage","value":"0.141 cores\n"}}
{"ts":"2024-10-03T23:16:38.915662788Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:38.913829Z","key":"4_cpu_usage_host","value":"1.18/64 cores (2..."}}
{"ts":"2024-10-03T23:16:38.917598048Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":135}}
{"ts":"2024-10-03T23:16:38.918209169Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:16:38.913829Z","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:16:38.919931969Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"],"num":5}}
{"ts":"2024-10-03T23:16:39.353905625Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:16:39.508331402Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:16:39.508880443Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:16:39.509105869Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:16:40.336641728Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:16:44.354189489Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:16:48.915098918Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:48.915096Z","key":"5_mem_usage_host","value":"29.1/251 GiB (12..."}}
{"ts":"2024-10-03T23:16:48.917055019Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:16:48.917757627Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:16:48.915096Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:16:48.919418036Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:16:49.354303909Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:16:49.94643007Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:49.946426Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:16:49.946721283Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:49.946426Z","key":"1_ram_usage","value":"0.191 GiB\n"}}
{"ts":"2024-10-03T23:16:49.946882915Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:49.946426Z","key":"4_cpu_usage_host","value":"2.08/64 cores (3..."}}
{"ts":"2024-10-03T23:16:49.947018988Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:49.946426Z","key":"0_cpu_usage","value":"0.201 cores\n"}}
{"ts":"2024-10-03T23:16:49.948780773Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:16:49.949576251Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:16:49.946426Z","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:16:49.951424443Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:16:50.354138869Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:16:54.508126365Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:16:54.508684033Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:16:54.508836748Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:16:55.280940635Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:16:55.28406315Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.067769ms"}}
{"ts":"2024-10-03T23:16:55.312539006Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:16:55.313314735Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:16:55.334803306Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:16:55.337070037Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:16:55.337234615Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:16:55.341437548Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:16:55.34257163Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:16:55.354430309Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:16:57.932875773Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:16:57.934975821Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:16:57.944724352Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending handshake initiation","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:16:57.945929602Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Received handshake response","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:16:57.946114399Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending keepalive packet","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:16:58.511047098Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"841.386µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:16:58.914179615Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:16:58.914176Z","key":"5_mem_usage_host","value":"29/251 GiB (12%)..."}}
{"ts":"2024-10-03T23:16:58.915745381Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:16:58.916246109Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:16:58.914176Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:16:58.917371213Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:16:59.353521464Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:17:00.914968646Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:00.914963Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:17:00.915475335Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:00.914963Z","key":"1_ram_usage","value":"0.191 GiB\n"}}
{"ts":"2024-10-03T23:17:00.915844128Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:00.914963Z","key":"0_cpu_usage","value":"0.121 cores\n"}}
{"ts":"2024-10-03T23:17:00.916137024Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:00.914963Z","key":"4_cpu_usage_host","value":"5.1/64 cores (8%..."}}
{"ts":"2024-10-03T23:17:00.918376763Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:17:00.919119949Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:17:00.914963Z","keys":["7_swap_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:17:00.920578568Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:17:01.353538143Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:17:04.914736369Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:04.91473Z","key":"6_load_host","value":"0.05"}}
{"ts":"2024-10-03T23:17:04.916970908Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":68}}
{"ts":"2024-10-03T23:17:04.917562642Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:17:04.91473Z","keys":["6_load_host"]}}}
{"ts":"2024-10-03T23:17:04.919327352Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host"],"num":1}}
{"ts":"2024-10-03T23:17:05.3539953Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:17:06.915226634Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:06.915221Z","key":"3_home_disk","value":"23.7/468 GiB (5%..."}}
{"ts":"2024-10-03T23:17:06.917562118Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:17:06.918168349Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:17:06.915221Z","keys":["3_home_disk"]}}}
{"ts":"2024-10-03T23:17:06.919786877Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["3_home_disk"],"num":1}}
{"ts":"2024-10-03T23:17:07.353741378Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:17:09.508018643Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:17:09.508805394Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:17:09.508991764Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:17:09.914147496Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:09.914144Z","key":"5_mem_usage_host","value":"29/251 GiB (12%)..."}}
{"ts":"2024-10-03T23:17:09.91611092Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:17:09.916569136Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:17:09.914144Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:17:09.918160482Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:17:10.336614224Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:17:10.353786574Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:17:11.914411472Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:11.914407Z","key":"4_cpu_usage_host","value":"4.49/64 cores (7..."}}
{"ts":"2024-10-03T23:17:11.914869597Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:11.914407Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:17:11.915147464Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:11.914407Z","key":"1_ram_usage","value":"0.193 GiB\n"}}
{"ts":"2024-10-03T23:17:11.915402748Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:11.914407Z","key":"0_cpu_usage","value":"0.199 cores\n"}}
{"ts":"2024-10-03T23:17:11.917736067Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:17:11.918408978Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:17:11.914407Z","keys":["4_cpu_usage_host","7_swap_host","1_ram_usage","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:17:11.91995696Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","7_swap_host","1_ram_usage","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:17:12.353639897Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:17:17.353955004Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:17:19.915728397Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:19.915723Z","key":"5_mem_usage_host","value":"29/251 GiB (12%)..."}}
{"ts":"2024-10-03T23:17:19.918753203Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:17:19.919400434Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:17:19.915723Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:17:19.921916788Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:17:20.353888621Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:17:21.914624688Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:21.91462Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:17:21.915061943Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:21.91462Z","key":"1_ram_usage","value":"0.191 GiB\n"}}
{"ts":"2024-10-03T23:17:21.915325272Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:21.91462Z","key":"4_cpu_usage_host","value":"3.69/64 cores (6..."}}
{"ts":"2024-10-03T23:17:21.915609221Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:21.91462Z","key":"0_cpu_usage","value":"0.279 cores\n"}}
{"ts":"2024-10-03T23:17:21.917395954Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":115}}
{"ts":"2024-10-03T23:17:21.91804073Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:17:21.91462Z","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:17:21.919605244Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:17:22.354317034Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:17:24.508454889Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:17:24.509437689Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:17:24.509629309Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:17:25.285696257Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.800004ms"}}
{"ts":"2024-10-03T23:17:25.314081598Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:17:25.314291484Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:17:25.337251149Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:17:25.341492867Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:17:25.342762451Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:17:27.933150206Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:17:27.93515469Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:17:28.353497646Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:17:28.512380434Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.519216ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:17:30.914154957Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:30.914151Z","key":"5_mem_usage_host","value":"28.7/251 GiB (11..."}}
{"ts":"2024-10-03T23:17:30.916573462Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:17:30.917206315Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:17:30.914151Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:17:30.919220958Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:17:31.354331352Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:17:32.915076822Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:32.915072Z","key":"0_cpu_usage","value":"0.146 cores\n"}}
{"ts":"2024-10-03T23:17:32.915557781Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:32.915072Z","key":"4_cpu_usage_host","value":"2.18/64 cores (3..."}}
{"ts":"2024-10-03T23:17:32.915868351Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:32.915072Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:17:32.916128735Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:32.915072Z","key":"1_ram_usage","value":"0.192 GiB\n"}}
{"ts":"2024-10-03T23:17:32.917687838Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:17:32.918303738Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:17:32.915072Z","keys":["0_cpu_usage","4_cpu_usage_host","7_swap_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:17:32.919837062Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage","4_cpu_usage_host","7_swap_host","1_ram_usage"],"num":4}}
{"ts":"2024-10-03T23:17:33.354001208Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:17:38.35405894Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:17:39.507987948Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:17:39.508805258Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:17:39.508989995Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:17:40.337215121Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:17:40.914632582Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:40.914626Z","key":"5_mem_usage_host","value":"28.6/251 GiB (11..."}}
{"ts":"2024-10-03T23:17:40.916802936Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:17:40.917379721Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:17:40.914626Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:17:40.9191434Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:17:41.354102104Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:17:42.916719766Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:42.916716Z","key":"1_ram_usage","value":"0.191 GiB\n"}}
{"ts":"2024-10-03T23:17:42.917167381Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:42.916716Z","key":"0_cpu_usage","value":"0.144 cores\n"}}
{"ts":"2024-10-03T23:17:42.917479164Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:42.916716Z","key":"4_cpu_usage_host","value":"1.69/64 cores (3..."}}
{"ts":"2024-10-03T23:17:42.917765377Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:42.916716Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:17:42.919889643Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:17:42.92050909Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:17:42.916716Z","keys":["1_ram_usage","0_cpu_usage","4_cpu_usage_host","7_swap_host"]}}}
{"ts":"2024-10-03T23:17:42.921908254Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage","0_cpu_usage","4_cpu_usage_host","7_swap_host"],"num":4}}
{"ts":"2024-10-03T23:17:43.353927097Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:17:44.109711316Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/cli-auth","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:17:44.075925908Z","took":"33.780389ms","status_code":200,"latency_ms":33,"request_id":"e4dfe5ec-fe31-419f-be33-c5eb03c7ea79"}}
{"ts":"2024-10-03T23:17:44.352454879Z","level":"DEBUG","msg":"check-auth","caller":"/home/runner/work/coder/coder/coderd/authorize.go:130","func":"github.com/coder/coder/v2/coderd.(*API).checkAuthorization","logger_names":["coderd"],"fields":{"request_id":"388941a6-a030-4a46-b26a-457ae8733127","my_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","got_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","name":"{FriendlyName:Help ID:45d2dc02-0d60-41da-8f83-b611c0a5728b Roles:[{Identifier:owner DisplayName:Owner Site:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:organization_member Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:user Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:workspace Action:start} {Negate:false ResourceType:workspace Action:stop} {Negate:false ResourceType:workspace Action:ssh} {Negate:false ResourceType:workspace Action:application_connect} {Negate:false ResourceType:workspace Action:create} {Negate:false ResourceType:workspace Action:read} {Negate:false ResourceType:workspace Action:update} {Negate:false ResourceType:workspace Action:delete} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] Org:map[] User:[] cachedRegoValue:0xc00069b380} {Identifier:member DisplayName:Member Site:[{Negate:false ResourceType:assign_role Action:read} {Negate:false ResourceType:oauth2_app Action:read} {Negate:false ResourceType:workspace_proxy Action:read}] Org:map[] User:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:workspace Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:create} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:update} {Negate:false ResourceType:user Action:read} {Negate:false ResourceType:user Action:read_personal} {Negate:false ResourceType:user Action:update_personal} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] cachedRegoValue:0xc00069bf40} {Identifier:organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11 DisplayName: Site:[] Org:map[6ed51444-d360-4b0c-aac1-6894bd4cbd11:[{Negate:false ResourceType:assign_org_role Action:read} {Negate:false ResourceType:organization Action:read} {Negate:false ResourceType:provisioner_daemon Action:read}]] User:[{Negate:false ResourceType:organization_member Action:read}] cachedRegoValue:\u003cnil\u003e}] Groups:[] Scope:all cachedASTValue:0xc01570c540}","roles":["owner","member","organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11"],"scope":"all"}}
{"ts":"2024-10-03T23:17:44.361316706Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/authcheck","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:17:44.34933564Z","took":"11.980064ms","status_code":200,"latency_ms":11,"request_id":"388941a6-a030-4a46-b26a-457ae8733127"}}
{"ts":"2024-10-03T23:17:44.419518706Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/organizations","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:17:44.416015125Z","took":"3.500846ms","status_code":200,"latency_ms":3,"request_id":"32c75eef-6905-483f-a150-5053afc082d4"}}
{"ts":"2024-10-03T23:17:44.463922617Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/users/me/keys","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:17:44.460507717Z","took":"3.412847ms","status_code":201,"latency_ms":3,"request_id":"b94761b8-2ce1-4d25-9777-4b6fc9d162b4"}}
{"ts":"2024-10-03T23:17:44.601891947Z","level":"DEBUG","msg":"CSP violation reported","caller":"/home/runner/work/coder/coder/coderd/csp.go:46","func":"github.com/coder/coder/v2/coderd.(*API).logReportCSPViolations","logger_names":["coderd"],"fields":{"request_id":"602a8a2d-7b6e-457b-838f-e3890de7e7a9","referrer":"http://localhost:8083/","original-policy":"manifest-src 'self' blob:; media-src 'self'; child-src 'self'; script-src 'self'; worker-src 'self' blob:; object-src 'self'; img-src 'self' https: data:; frame-ancestors 'none'; default-src 'self'; style-src 'self' 'unsafe-inline'; connect-src 'self' https://coder.com wss://localhost:3005 ws://localhost:3005; font-src 'self' data:; frame-src 'self'; form-action 'self'; report-uri /api/v2/csp/reports;","column-number":7449,"source-file":"http://localhost:3005/assets/index-2nv8Z01B.js","status-code":200,"script-sample":"","document-uri":"http://localhost:3005/cli-auth","violated-directive":"connect-src","effective-directive":"connect-src","disposition":"enforce","blocked-uri":"https://1ce8t8h51oihk.pit-1.try.coder.app/latency-check?cache_bust=V8ImdMXP","line-number":279}}
{"ts":"2024-10-03T23:17:44.602523929Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/csp/reports","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:17:44.60174345Z","took":"777.433µs","status_code":200,"latency_ms":0,"request_id":"602a8a2d-7b6e-457b-838f-e3890de7e7a9"}}
{"ts":"2024-10-03T23:17:44.603826857Z","level":"DEBUG","msg":"submitted snapshot","caller":"/home/runner/work/coder/coder/coderd/telemetry/telemetry.go:150","func":"github.com/coder/coder/v2/coderd/telemetry.(*remoteReporter).reportSync","logger_names":["telemetry"]}
{"ts":"2024-10-03T23:17:47.633003074Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:17:47.623546146Z","took":"9.454183ms","status_code":200,"latency_ms":9,"request_id":"d5c250f9-b2ff-421e-b9ea-18e8c895f5c4"}}
{"ts":"2024-10-03T23:17:47.717100864Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:17:47.695668941Z","took":"21.428777ms","status_code":200,"latency_ms":21,"request_id":"8ded0aa6-7211-4421-a6bb-fdfd75c76a02"}}
{"ts":"2024-10-03T23:17:47.720012241Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:17:47.695644774Z","took":"24.364641ms","status_code":200,"latency_ms":24,"request_id":"b46c0c12-4802-4c39-aabd-317273a9fb3a"}}
{"ts":"2024-10-03T23:17:48.353976836Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:17:50.914877091Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:50.914872Z","key":"5_mem_usage_host","value":"28.9/251 GiB (11..."}}
{"ts":"2024-10-03T23:17:50.917471765Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:17:50.918300537Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:17:50.914872Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:17:50.920190019Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:17:51.354151489Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:17:52.914191944Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:52.91419Z","key":"1_ram_usage","value":"0.177 GiB\n"}}
{"ts":"2024-10-03T23:17:52.915961534Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":68}}
{"ts":"2024-10-03T23:17:52.91641987Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:17:52.91419Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:17:52.917545094Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:17:53.354029221Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:17:53.913540179Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:53.913536Z","key":"4_cpu_usage_host","value":"2.07/64 cores (3..."}}
{"ts":"2024-10-03T23:17:53.913973316Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:53.913536Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:17:53.914243328Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:17:53.913536Z","key":"0_cpu_usage","value":"0.122 cores\n"}}
{"ts":"2024-10-03T23:17:53.915645858Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:17:53.916175312Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:17:53.913536Z","keys":["4_cpu_usage_host","7_swap_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:17:53.917411681Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","7_swap_host","0_cpu_usage"],"num":3}}
{"ts":"2024-10-03T23:17:54.354392649Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:17:54.508883903Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:17:54.509639583Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:17:54.509816325Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:17:55.281814179Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:17:55.284761385Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"2.947657ms"}}
{"ts":"2024-10-03T23:17:55.3152649Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:17:55.315370584Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:17:55.334942002Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:17:55.336893724Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:17:55.337033604Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:17:55.34121739Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:17:55.341937232Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:17:57.932917809Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:17:57.935335462Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:17:58.51177974Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"896.022µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:18:00.3540884Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:18:01.915123387Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:01.91512Z","key":"5_mem_usage_host","value":"28.9/251 GiB (11..."}}
{"ts":"2024-10-03T23:18:01.916952152Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":73}}
{"ts":"2024-10-03T23:18:01.917355953Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:18:01.91512Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:18:01.9183735Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:18:02.353992788Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:18:02.913649692Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:02.913635Z","key":"1_ram_usage","value":"0.177 GiB\n"}}
{"ts":"2024-10-03T23:18:02.915053675Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:18:02.915525647Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:18:02.913635Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:18:02.916585396Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:18:03.354153652Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:18:04.914273695Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:04.91427Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:18:04.914740537Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:04.91427Z","key":"4_cpu_usage_host","value":"2.39/64 cores (4..."}}
{"ts":"2024-10-03T23:18:04.915016751Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:04.91427Z","key":"0_cpu_usage","value":"0.221 cores\n"}}
{"ts":"2024-10-03T23:18:04.917216022Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":101}}
{"ts":"2024-10-03T23:18:04.917984637Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:18:04.91427Z","keys":["7_swap_host","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:18:04.919883427Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","4_cpu_usage_host","0_cpu_usage"],"num":3}}
{"ts":"2024-10-03T23:18:05.353831527Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:18:05.914356931Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:05.914354Z","key":"6_load_host","value":"0.04"}}
{"ts":"2024-10-03T23:18:05.915743761Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:18:05.916233929Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:18:05.914354Z","keys":["6_load_host"]}}}
{"ts":"2024-10-03T23:18:05.91724354Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host"],"num":1}}
{"ts":"2024-10-03T23:18:06.354287002Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:18:06.913790792Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:06.913786Z","key":"3_home_disk","value":"23.7/468 GiB (5%..."}}
{"ts":"2024-10-03T23:18:06.915308355Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:18:06.915806167Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:18:06.913786Z","keys":["3_home_disk"]}}}
{"ts":"2024-10-03T23:18:06.917080661Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["3_home_disk"],"num":1}}
{"ts":"2024-10-03T23:18:07.353676478Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:18:09.508264746Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:18:09.509026979Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:18:09.509302993Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:18:10.33710912Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:18:12.353833674Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:18:12.913994757Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:12.913992Z","key":"5_mem_usage_host","value":"28.7/251 GiB (11..."}}
{"ts":"2024-10-03T23:18:12.915948342Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:18:12.916458929Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:18:12.913992Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:18:12.917865307Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:18:13.353974707Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:18:13.914939223Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:13.914935Z","key":"1_ram_usage","value":"0.177 GiB\n"}}
{"ts":"2024-10-03T23:18:13.917368959Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:18:13.918024677Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:18:13.914935Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:18:13.919621663Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:18:14.353431639Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:18:15.914230809Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:15.914227Z","key":"0_cpu_usage","value":"0.022 cores\n"}}
{"ts":"2024-10-03T23:18:15.914717309Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:15.914227Z","key":"4_cpu_usage_host","value":"2.9/64 cores (5%..."}}
{"ts":"2024-10-03T23:18:15.915011387Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:15.914227Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:18:15.917162104Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:18:15.917824865Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:18:15.914227Z","keys":["0_cpu_usage","4_cpu_usage_host","7_swap_host"]}}}
{"ts":"2024-10-03T23:18:15.919909554Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage","4_cpu_usage_host","7_swap_host"],"num":3}}
{"ts":"2024-10-03T23:18:16.353719691Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:18:16.379291916Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/templates/devcontainers/workspace","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:16.345563126Z","took":"33.72349ms","status_code":200,"latency_ms":33,"request_id":"e3e158d9-95a5-47f2-b23e-cfae15f4f93a"}}
{"ts":"2024-10-03T23:18:16.644563666Z","level":"DEBUG","msg":"check-auth","caller":"/home/runner/work/coder/coder/coderd/authorize.go:130","func":"github.com/coder/coder/v2/coderd.(*API).checkAuthorization","logger_names":["coderd"],"fields":{"request_id":"c303e35d-5111-4e9a-a610-a986062b81fe","my_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","got_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","name":"{FriendlyName:Help ID:45d2dc02-0d60-41da-8f83-b611c0a5728b Roles:[{Identifier:owner DisplayName:Owner Site:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:organization_member Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:user Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:workspace Action:start} {Negate:false ResourceType:workspace Action:stop} {Negate:false ResourceType:workspace Action:ssh} {Negate:false ResourceType:workspace Action:application_connect} {Negate:false ResourceType:workspace Action:create} {Negate:false ResourceType:workspace Action:read} {Negate:false ResourceType:workspace Action:update} {Negate:false ResourceType:workspace Action:delete} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] Org:map[] User:[] cachedRegoValue:0xc00069b380} {Identifier:member DisplayName:Member Site:[{Negate:false ResourceType:assign_role Action:read} {Negate:false ResourceType:oauth2_app Action:read} {Negate:false ResourceType:workspace_proxy Action:read}] Org:map[] User:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:workspace Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:create} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:update} {Negate:false ResourceType:user Action:read} {Negate:false ResourceType:user Action:read_personal} {Negate:false ResourceType:user Action:update_personal} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] cachedRegoValue:0xc00069bf40} {Identifier:organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11 DisplayName: Site:[] Org:map[6ed51444-d360-4b0c-aac1-6894bd4cbd11:[{Negate:false ResourceType:assign_org_role Action:read} {Negate:false ResourceType:organization Action:read} {Negate:false ResourceType:provisioner_daemon Action:read}]] User:[{Negate:false ResourceType:organization_member Action:read}] cachedRegoValue:\u003cnil\u003e}] Groups:[] Scope:all cachedASTValue:0xc0030ca540}","roles":["owner","member","organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11"],"scope":"all"}}
{"ts":"2024-10-03T23:18:16.645505878Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/authcheck","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:16.642792283Z","took":"2.71133ms","status_code":200,"latency_ms":2,"request_id":"c303e35d-5111-4e9a-a610-a986062b81fe"}}
{"ts":"2024-10-03T23:18:16.680190375Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/organizations","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:16.678577848Z","took":"1.609822ms","status_code":200,"latency_ms":1,"request_id":"eed08e6a-ef65-47f4-994f-4a749715e014"}}
{"ts":"2024-10-03T23:18:16.758516281Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/richParameters-VJzlCIrY.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:16.728005Z","took":"30.507664ms","status_code":200,"latency_ms":30,"request_id":"155b6a43-a7f5-4e24-8929-4443405cc9ef"}}
{"ts":"2024-10-03T23:18:16.758704134Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/CreateWorkspacePage-BKx36-ss.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:16.727920677Z","took":"30.780071ms","status_code":200,"latency_ms":30,"request_id":"249cdfac-d8f1-47ff-96c5-c01eefe42694"}}
{"ts":"2024-10-03T23:18:16.798469702Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/deployment/stats","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:16.796418879Z","took":"2.047928ms","status_code":200,"latency_ms":2,"request_id":"90fb8eba-d1ea-485e-b1a6-1e58d2d554e0"}}
{"ts":"2024-10-03T23:18:16.834006397Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/healthz","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:18:16.833913848Z","took":"90.204µs","status_code":200,"latency_ms":0,"request_id":"e2b63750-9518-4c6a-957c-a7a6a362df8f"}}
{"ts":"2024-10-03T23:18:16.842262404Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/api/v2/debug/ws","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:18:16.83739701Z","took":"4.860424ms","status_code":101,"latency_ms":4,"request_id":"3185b69b-9318-4ada-b98f-b4f97342580e"}}
{"ts":"2024-10-03T23:18:16.845612859Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/derp","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:18:16.835936317Z","took":"9.674228ms","status_code":0,"latency_ms":9,"request_id":"f490b2e3-8149-41be-8ea2-218b348ee983"}}
{"ts":"2024-10-03T23:18:16.845720026Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/derp","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:18:16.842531363Z","took":"3.18678ms","status_code":0,"latency_ms":3,"request_id":"ec2af6ef-939c-4b2f-a4a5-0fa662c1fb82"}}
{"ts":"2024-10-03T23:18:16.868307092Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/updatecheck","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:16.867820221Z","took":"482.843µs","status_code":200,"latency_ms":0,"request_id":"0bf6cec2-dd04-4ae9-8caa-90252c3ed8a5"}}
{"ts":"2024-10-03T23:18:16.899821683Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/FormControlLabel-D-wNKbRZ.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:16.868777241Z","took":"31.037909ms","status_code":200,"latency_ms":31,"request_id":"ffbc47cf-7578-4cfb-b8ed-ab2605d3c297"}}
{"ts":"2024-10-03T23:18:16.904950185Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/UserAutocomplete-Byd9ztQk.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:16.904623313Z","took":"324.948µs","status_code":200,"latency_ms":0,"request_id":"51b2b94c-b5e7-4c2e-a25e-9dd1739bd5a6"}}
{"ts":"2024-10-03T23:18:16.914892802Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/FormGroup-GtksniLI.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:16.904531275Z","took":"10.358501ms","status_code":200,"latency_ms":10,"request_id":"d105999c-1060-48ef-a027-822410797b03"}}
{"ts":"2024-10-03T23:18:16.91500023Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/RadioGroup-D6P5bVrI.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:16.904631268Z","took":"10.365856ms","status_code":200,"latency_ms":10,"request_id":"e495b0aa-d1d3-49f6-8792-155b7d794fe4"}}
{"ts":"2024-10-03T23:18:16.918080383Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/derp/latency-check","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:18:16.918035576Z","took":"43.825µs","status_code":200,"latency_ms":0,"request_id":"86121b3c-9489-4bce-8a4a-70a62ab0efc6"}}
{"ts":"2024-10-03T23:18:16.919140922Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/debug/health","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:16.796583096Z","took":"122.555702ms","status_code":200,"latency_ms":122,"request_id":"30a659b1-ead9-43c4-ad49-9d22ada39527"}}
{"ts":"2024-10-03T23:18:16.930859021Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/emojis/1f3e1.png","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:16.93050655Z","took":"349.866µs","status_code":200,"latency_ms":0,"request_id":"a060d364-54c6-4f89-a36b-effe8b44e1a0"}}
{"ts":"2024-10-03T23:18:16.93960768Z","level":"DEBUG","msg":"CSP violation reported","caller":"/home/runner/work/coder/coder/coderd/csp.go:46","func":"github.com/coder/coder/v2/coderd.(*API).logReportCSPViolations","logger_names":["coderd"],"fields":{"request_id":"1d6f4e23-4928-4cca-af6a-3063ed46d0c3","source-file":"http://localhost:3005/assets/index-2nv8Z01B.js","script-sample":"","document-uri":"http://localhost:3005/templates/devcontainers/workspace?mode=auto\u0026param.repo=custom\u0026param.region=us-pittsburgh\u0026param.custom_repo=https%3A%2F%2Fgithub.com%2FParkreiner%2Fpython-project\u0026param.repo_url=https%3A%2F%2Fgithub.com%2FParkreiner%2Fpython-project","referrer":"http://localhost:8083/","violated-directive":"connect-src","original-policy":"connect-src 'self' https://coder.com wss://localhost:3005 ws://localhost:3005; script-src 'self'; style-src 'self' 'unsafe-inline'; manifest-src 'self' blob:; img-src 'self' https: data:; media-src 'self'; report-uri /api/v2/csp/reports; font-src 'self' data:; worker-src 'self' blob:; object-src 'self'; default-src 'self'; frame-src 'self'; form-action 'self'; child-src 'self'; frame-ancestors 'none';","line-number":279,"effective-directive":"connect-src","disposition":"enforce","blocked-uri":"https://1ce8t8h51oihk.pit-1.try.coder.app/latency-check?cache_bust=n6Pd45+Z","column-number":7449,"status-code":200}}
{"ts":"2024-10-03T23:18:16.940121203Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/csp/reports","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:16.93948358Z","took":"636.13µs","status_code":200,"latency_ms":0,"request_id":"1d6f4e23-4928-4cca-af6a-3063ed46d0c3"}}
{"ts":"2024-10-03T23:18:16.975430658Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/organizations/default/templates/devcontainers","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:16.970827992Z","took":"4.600291ms","status_code":404,"latency_ms":4,"request_id":"08a5dd8c-c1ab-4e31-8949-819bef411fc6"}}
{"ts":"2024-10-03T23:18:21.354058253Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:18:22.916815757Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:22.91681Z","key":"5_mem_usage_host","value":"29.1/251 GiB (12..."}}
{"ts":"2024-10-03T23:18:22.920498685Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":73}}
{"ts":"2024-10-03T23:18:22.921121929Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:18:22.91681Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:18:22.923501679Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:18:23.353623189Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:18:23.914009141Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:23.914005Z","key":"1_ram_usage","value":"0.177 GiB\n"}}
{"ts":"2024-10-03T23:18:23.916467783Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:18:23.917176052Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:18:23.914005Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:18:23.918998975Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:18:24.353707241Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:18:24.508084057Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:18:24.508768801Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:18:24.508943158Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:18:25.284507593Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.522869ms"}}
{"ts":"2024-10-03T23:18:25.31608232Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:18:25.316292467Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:18:25.337245133Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:18:25.341461713Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:18:25.342482767Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:18:25.914951363Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:25.914948Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:18:25.915398938Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:25.914948Z","key":"0_cpu_usage","value":"0.037 cores\n"}}
{"ts":"2024-10-03T23:18:25.915701272Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:25.914948Z","key":"4_cpu_usage_host","value":"2.98/64 cores (5..."}}
{"ts":"2024-10-03T23:18:25.917749792Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:18:25.918353448Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:18:25.914948Z","keys":["7_swap_host","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:18:25.920069575Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","0_cpu_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:18:26.353646916Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:18:27.93253389Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:18:27.934730886Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:18:28.06792419Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/index-Cm-RjfPf.css","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:28.064101792Z","took":"3.81835ms","status_code":200,"latency_ms":3,"request_id":"a35494a3-de5b-4c81-a5b9-098a990a9b8f"}}
{"ts":"2024-10-03T23:18:28.511060446Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"979.323µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:18:31.35410129Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:18:32.913975283Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:32.913971Z","key":"5_mem_usage_host","value":"29.1/251 GiB (12..."}}
{"ts":"2024-10-03T23:18:32.916112193Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:18:32.916804742Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:18:32.913971Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:18:32.918274432Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:18:33.353527925Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:18:34.914943088Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:34.91494Z","key":"1_ram_usage","value":"0.178 GiB\n"}}
{"ts":"2024-10-03T23:18:34.916737206Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":68}}
{"ts":"2024-10-03T23:18:34.9172825Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:18:34.91494Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:18:34.919410473Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:18:35.354038627Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:18:35.382452144Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/templates","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:35.371117427Z","took":"11.328445ms","status_code":200,"latency_ms":11,"request_id":"9d6ceb2a-075e-4f8d-ab57-91c356676ffc"}}
{"ts":"2024-10-03T23:18:35.460059663Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/index-Cm-RjfPf.css","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:35.451930571Z","took":"8.124223ms","status_code":200,"latency_ms":8,"request_id":"2808974b-87f4-4def-8d76-3c74e8ff30d4"}}
{"ts":"2024-10-03T23:18:35.665351058Z","level":"DEBUG","msg":"check-auth","caller":"/home/runner/work/coder/coder/coderd/authorize.go:130","func":"github.com/coder/coder/v2/coderd.(*API).checkAuthorization","logger_names":["coderd"],"fields":{"request_id":"48b4b976-8c7b-4cd0-bce7-27cdd5b170e2","my_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","got_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","name":"{FriendlyName:Help ID:45d2dc02-0d60-41da-8f83-b611c0a5728b Roles:[{Identifier:owner DisplayName:Owner Site:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:organization_member Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:user Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:workspace Action:start} {Negate:false ResourceType:workspace Action:stop} {Negate:false ResourceType:workspace Action:ssh} {Negate:false ResourceType:workspace Action:application_connect} {Negate:false ResourceType:workspace Action:create} {Negate:false ResourceType:workspace Action:read} {Negate:false ResourceType:workspace Action:update} {Negate:false ResourceType:workspace Action:delete} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] Org:map[] User:[] cachedRegoValue:0xc00069b380} {Identifier:member DisplayName:Member Site:[{Negate:false ResourceType:assign_role Action:read} {Negate:false ResourceType:oauth2_app Action:read} {Negate:false ResourceType:workspace_proxy Action:read}] Org:map[] User:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:workspace Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:create} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:update} {Negate:false ResourceType:user Action:read} {Negate:false ResourceType:user Action:read_personal} {Negate:false ResourceType:user Action:update_personal} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] cachedRegoValue:0xc00069bf40} {Identifier:organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11 DisplayName: Site:[] Org:map[6ed51444-d360-4b0c-aac1-6894bd4cbd11:[{Negate:false ResourceType:assign_org_role Action:read} {Negate:false ResourceType:organization Action:read} {Negate:false ResourceType:provisioner_daemon Action:read}]] User:[{Negate:false ResourceType:organization_member Action:read}] cachedRegoValue:\u003cnil\u003e}] Groups:[] Scope:all cachedASTValue:0xc00111ee00}","roles":["owner","member","organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11"],"scope":"all"}}
{"ts":"2024-10-03T23:18:35.666252931Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/authcheck","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:35.663321235Z","took":"2.930184ms","status_code":200,"latency_ms":2,"request_id":"48b4b976-8c7b-4cd0-bce7-27cdd5b170e2"}}
{"ts":"2024-10-03T23:18:35.734046582Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/organizations","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:35.73220886Z","took":"1.832392ms","status_code":200,"latency_ms":1,"request_id":"96b99c14-b424-4d89-846a-c0437d4bc2fd"}}
{"ts":"2024-10-03T23:18:35.832542754Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/updatecheck","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:35.832108224Z","took":"432.146µs","status_code":200,"latency_ms":0,"request_id":"d1d6bc9f-457a-45a3-a963-9e583a8847fb"}}
{"ts":"2024-10-03T23:18:35.835451967Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/users/me/organizations","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:35.832207256Z","took":"3.243209ms","status_code":200,"latency_ms":3,"request_id":"04f10be0-fb45-422b-830c-9541f0191da4"}}
{"ts":"2024-10-03T23:18:35.839088426Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/debug/health","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:35.832403595Z","took":"6.680813ms","status_code":200,"latency_ms":6,"request_id":"beb40edf-975f-49cf-b686-b967ffd6a59b"}}
{"ts":"2024-10-03T23:18:35.840485526Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/deployment/stats","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:35.832369609Z","took":"8.112049ms","status_code":200,"latency_ms":8,"request_id":"cd878fb7-a374-4796-846e-b67c61eabf55"}}
{"ts":"2024-10-03T23:18:35.841462915Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/templates/examples","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:35.832285086Z","took":"9.175905ms","status_code":200,"latency_ms":9,"request_id":"fefec5ae-bf26-4bd9-bd66-b963150a2743"}}
{"ts":"2024-10-03T23:18:35.849108563Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/templates","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:35.832217435Z","took":"16.889114ms","status_code":200,"latency_ms":16,"request_id":"719d995c-5785-481f-8f95-9266a10e0e64"}}
{"ts":"2024-10-03T23:18:35.913423029Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:35.913421Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:18:35.913629257Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:35.913421Z","key":"4_cpu_usage_host","value":"3/64 cores (5%)\n"}}
{"ts":"2024-10-03T23:18:35.913771662Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:35.913421Z","key":"0_cpu_usage","value":"0.188 cores\n"}}
{"ts":"2024-10-03T23:18:35.914871488Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:18:35.915166198Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:18:35.913421Z","keys":["7_swap_host","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:18:35.91614008Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","4_cpu_usage_host","0_cpu_usage"],"num":3}}
{"ts":"2024-10-03T23:18:36.354394935Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:18:39.508774428Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:18:39.509441087Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:18:39.509520681Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:18:40.337682866Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:18:42.353641506Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:18:42.913387089Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:42.913383Z","key":"5_mem_usage_host","value":"28.8/251 GiB (11..."}}
{"ts":"2024-10-03T23:18:42.914879904Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:18:42.915351666Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:18:42.913383Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:18:42.916439178Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:18:43.353643123Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:18:44.91409152Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:44.914086Z","key":"1_ram_usage","value":"0.177 GiB\n"}}
{"ts":"2024-10-03T23:18:44.916221648Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:18:44.916906371Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:18:44.914086Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:18:44.918254266Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:18:45.353818793Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:18:46.78459906Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:46.780777755Z","took":"3.81879ms","status_code":200,"latency_ms":3,"request_id":"689ac62a-9fde-41fd-93da-833e3b5a896e"}}
{"ts":"2024-10-03T23:18:46.801653593Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:46.780777584Z","took":"20.874537ms","status_code":200,"latency_ms":20,"request_id":"fa5ac0f7-d3b3-459f-8cae-f1796ca707fa"}}
{"ts":"2024-10-03T23:18:46.805249744Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:46.78070817Z","took":"24.540302ms","status_code":200,"latency_ms":24,"request_id":"d2ef5cf9-b273-44f5-9fae-3f529bde1e85"}}
{"ts":"2024-10-03T23:18:46.914277573Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:46.914272Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:18:46.914680932Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:46.914272Z","key":"0_cpu_usage","value":"0.121 cores\n"}}
{"ts":"2024-10-03T23:18:46.914950353Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:46.914272Z","key":"4_cpu_usage_host","value":"4.73/64 cores (7..."}}
{"ts":"2024-10-03T23:18:46.917175935Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:18:46.917904874Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:18:46.914272Z","keys":["7_swap_host","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:18:46.919811789Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","0_cpu_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:18:47.353626124Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:18:48.188055227Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/deployment/stats","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:18:48.184424399Z","took":"3.62695ms","status_code":200,"latency_ms":3,"request_id":"5a029c2a-47fe-41f5-9736-6a4121b2fe7e"}}
{"ts":"2024-10-03T23:18:52.354485011Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:18:53.915033091Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:53.915028Z","key":"5_mem_usage_host","value":"28.9/251 GiB (11..."}}
{"ts":"2024-10-03T23:18:53.917621554Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:18:53.91831758Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:18:53.915028Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:18:53.919975013Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:18:54.353533045Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:18:54.508723829Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:18:54.509368254Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:18:54.509457016Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:18:54.913547453Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:54.913543Z","key":"1_ram_usage","value":"0.179 GiB\n"}}
{"ts":"2024-10-03T23:18:54.915375927Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:18:54.916014501Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:18:54.913543Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:18:54.917653509Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:18:55.281459524Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:18:55.284542904Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.098569ms"}}
{"ts":"2024-10-03T23:18:55.317272644Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:18:55.317509391Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:18:55.33515659Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:18:55.337206272Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:18:55.338385381Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:18:55.341576158Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:18:55.342413356Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:18:55.353885239Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:18:56.914735967Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:56.914731Z","key":"4_cpu_usage_host","value":"3.09/64 cores (5..."}}
{"ts":"2024-10-03T23:18:56.915259189Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:56.914731Z","key":"0_cpu_usage","value":"0.201 cores\n"}}
{"ts":"2024-10-03T23:18:56.91553896Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:18:56.914731Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:18:56.917668185Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:18:56.91824538Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:18:56.914731Z","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host"]}}}
{"ts":"2024-10-03T23:18:56.920060689Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host"],"num":3}}
{"ts":"2024-10-03T23:18:57.354259811Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:18:57.932685525Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:18:57.934982956Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:18:57.950834063Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending handshake initiation","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:18:57.952273295Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Received handshake response","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:18:57.952469113Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending keepalive packet","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:18:58.511246301Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"820.325µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:19:03.353873407Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:19:04.914933931Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:04.91493Z","key":"5_mem_usage_host","value":"28.8/251 GiB (11..."}}
{"ts":"2024-10-03T23:19:04.917587389Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":73}}
{"ts":"2024-10-03T23:19:04.918367146Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:19:04.91493Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:19:04.920425735Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:19:05.35388496Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:19:05.91454498Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:05.914541Z","key":"6_load_host","value":"0.05"}}
{"ts":"2024-10-03T23:19:05.914982064Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:05.914541Z","key":"1_ram_usage","value":"0.177 GiB\n"}}
{"ts":"2024-10-03T23:19:05.916879051Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":83}}
{"ts":"2024-10-03T23:19:05.917329121Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:19:05.914541Z","keys":["6_load_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:19:05.918789633Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host","1_ram_usage"],"num":2}}
{"ts":"2024-10-03T23:19:06.353523342Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:19:07.913247005Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:07.913245Z","key":"0_cpu_usage","value":"0.112 cores\n"}}
{"ts":"2024-10-03T23:19:07.913509462Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:07.913245Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:19:07.913646677Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:07.913245Z","key":"3_home_disk","value":"23.7/468 GiB (5%..."}}
{"ts":"2024-10-03T23:19:07.913776558Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:07.913245Z","key":"4_cpu_usage_host","value":"4.85/64 cores (8..."}}
{"ts":"2024-10-03T23:19:07.91474494Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:19:07.915088975Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:19:07.913245Z","keys":["0_cpu_usage","7_swap_host","3_home_disk","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:19:07.916245239Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage","7_swap_host","3_home_disk","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:19:08.353452088Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:19:09.508726809Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:19:09.509244469Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:19:09.509324664Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:19:10.336975008Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:19:12.186177655Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/deployment/stats","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:19:12.184120669Z","took":"2.054752ms","status_code":200,"latency_ms":2,"request_id":"ad899b88-29f9-4ff4-8504-c895de056855"}}
{"ts":"2024-10-03T23:19:13.353652199Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:19:15.91514692Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:15.915142Z","key":"5_mem_usage_host","value":"28.7/251 GiB (11..."}}
{"ts":"2024-10-03T23:19:15.917542881Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:19:15.918224338Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:19:15.915142Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:19:15.920285161Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:19:16.353844372Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:19:16.91396811Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:16.913966Z","key":"1_ram_usage","value":"0.177 GiB\n"}}
{"ts":"2024-10-03T23:19:16.915171987Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:19:16.915645011Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:19:16.913966Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:19:16.916597973Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:19:17.353969884Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:19:17.913175899Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:17.913174Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:19:17.913439007Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:17.913174Z","key":"4_cpu_usage_host","value":"3.31/64 cores (5..."}}
{"ts":"2024-10-03T23:19:17.913671958Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:17.913174Z","key":"0_cpu_usage","value":"0.171 cores\n"}}
{"ts":"2024-10-03T23:19:17.914831739Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:19:17.915241131Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:19:17.913174Z","keys":["7_swap_host","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:19:17.916240933Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","4_cpu_usage_host","0_cpu_usage"],"num":3}}
{"ts":"2024-10-03T23:19:18.354412149Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:19:24.148337516Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/deployment/stats","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:19:24.146152823Z","took":"2.182899ms","status_code":200,"latency_ms":2,"request_id":"20e7bc49-decd-484c-8f84-0fbb693f1184"}}
{"ts":"2024-10-03T23:19:24.353539605Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:19:24.508673312Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:19:24.50916417Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:19:24.509282469Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:19:25.283110934Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"1.912988ms"}}
{"ts":"2024-10-03T23:19:25.31856994Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:19:25.31866837Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:19:25.335751919Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:19:25.341948346Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:19:25.342661003Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:19:25.914122318Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:25.91412Z","key":"5_mem_usage_host","value":"28.6/251 GiB (11..."}}
{"ts":"2024-10-03T23:19:25.915753992Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":73}}
{"ts":"2024-10-03T23:19:25.91624455Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:19:25.91412Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:19:25.918032205Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:19:26.354325043Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:19:27.914090378Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:27.914087Z","key":"1_ram_usage","value":"0.177 GiB\n"}}
{"ts":"2024-10-03T23:19:27.916288467Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:19:27.917000934Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:19:27.914087Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:19:27.918806133Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:19:27.931729662Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:19:27.934079965Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:19:28.354341227Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:19:28.511624509Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"882.606µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:19:28.913991955Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:28.91399Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:19:28.914243431Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:28.91399Z","key":"0_cpu_usage","value":"0.046 cores\n"}}
{"ts":"2024-10-03T23:19:28.914379615Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:28.91399Z","key":"4_cpu_usage_host","value":"1.91/64 cores (3..."}}
{"ts":"2024-10-03T23:19:28.915450795Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":101}}
{"ts":"2024-10-03T23:19:28.915858984Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:19:28.91399Z","keys":["7_swap_host","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:19:28.916822436Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","0_cpu_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:19:29.354045002Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:19:35.354244977Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:19:35.915155052Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:35.91515Z","key":"5_mem_usage_host","value":"28.7/251 GiB (11..."}}
{"ts":"2024-10-03T23:19:35.917589537Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":73}}
{"ts":"2024-10-03T23:19:35.91829448Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:19:35.91515Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:19:35.920344162Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:19:36.353882499Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:19:37.914001508Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:37.913998Z","key":"1_ram_usage","value":"0.177 GiB\n"}}
{"ts":"2024-10-03T23:19:37.916060798Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:19:37.91661548Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:19:37.913998Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:19:37.918094529Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:19:38.354237871Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:19:39.508411958Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:19:39.508937745Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:19:39.509017589Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:19:39.914055691Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:39.914053Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:19:39.914452398Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:39.914053Z","key":"4_cpu_usage_host","value":"1.69/64 cores (3..."}}
{"ts":"2024-10-03T23:19:39.914718281Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:39.914053Z","key":"0_cpu_usage","value":"0.099 cores\n"}}
{"ts":"2024-10-03T23:19:39.916793382Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:19:39.917417799Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:19:39.914053Z","keys":["7_swap_host","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:19:39.919408226Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","4_cpu_usage_host","0_cpu_usage"],"num":3}}
{"ts":"2024-10-03T23:19:40.336721814Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:19:40.353963299Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:19:45.354219589Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:19:46.91452585Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:46.914522Z","key":"5_mem_usage_host","value":"28.8/251 GiB (11..."}}
{"ts":"2024-10-03T23:19:46.916744298Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:19:46.917388072Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:19:46.914522Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:19:46.919214792Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:19:47.353844833Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:19:48.914993133Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:48.914988Z","key":"1_ram_usage","value":"0.177 GiB\n"}}
{"ts":"2024-10-03T23:19:48.917471794Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:19:48.918252563Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:19:48.914988Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:19:48.920126666Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:19:49.354064168Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:19:50.993581596Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:50.993578Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:19:50.994053858Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:50.993578Z","key":"0_cpu_usage","value":"0.035 cores\n"}}
{"ts":"2024-10-03T23:19:50.99432892Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:50.993578Z","key":"4_cpu_usage_host","value":"4.33/64 cores (7..."}}
{"ts":"2024-10-03T23:19:50.996444549Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:19:50.996875432Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:19:50.993578Z","keys":["7_swap_host","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:19:50.9981213Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","0_cpu_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:19:51.35431181Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:19:53.025898565Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/organizations/default/templates/docker","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:19:53.019114082Z","took":"6.782289ms","status_code":200,"latency_ms":6,"request_id":"0d7e49de-f005-4eb4-aa83-c84fcbc26f32"}}
{"ts":"2024-10-03T23:19:53.065398522Z","level":"DEBUG","msg":"check-auth","caller":"/home/runner/work/coder/coder/coderd/authorize.go:130","func":"github.com/coder/coder/v2/coderd.(*API).checkAuthorization","logger_names":["coderd"],"fields":{"request_id":"c8e09fe0-c051-4d33-9739-d2665458c064","my_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","got_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","name":"{FriendlyName:Help ID:45d2dc02-0d60-41da-8f83-b611c0a5728b Roles:[{Identifier:owner DisplayName:Owner Site:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:organization_member Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:user Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:workspace Action:start} {Negate:false ResourceType:workspace Action:stop} {Negate:false ResourceType:workspace Action:ssh} {Negate:false ResourceType:workspace Action:application_connect} {Negate:false ResourceType:workspace Action:create} {Negate:false ResourceType:workspace Action:read} {Negate:false ResourceType:workspace Action:update} {Negate:false ResourceType:workspace Action:delete} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] Org:map[] User:[] cachedRegoValue:0xc00069b380} {Identifier:member DisplayName:Member Site:[{Negate:false ResourceType:assign_role Action:read} {Negate:false ResourceType:oauth2_app Action:read} {Negate:false ResourceType:workspace_proxy Action:read}] Org:map[] User:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:workspace Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:create} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:update} {Negate:false ResourceType:user Action:read} {Negate:false ResourceType:user Action:read_personal} {Negate:false ResourceType:user Action:update_personal} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] cachedRegoValue:0xc00069bf40} {Identifier:organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11 DisplayName: Site:[] Org:map[6ed51444-d360-4b0c-aac1-6894bd4cbd11:[{Negate:false ResourceType:assign_org_role Action:read} {Negate:false ResourceType:organization Action:read} {Negate:false ResourceType:provisioner_daemon Action:read}]] User:[{Negate:false ResourceType:organization_member Action:read}] cachedRegoValue:\u003cnil\u003e}] Groups:[] Scope:all cachedASTValue:0xc00ea2ab00}","roles":["owner","member","organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11"],"scope":"all"}}
{"ts":"2024-10-03T23:19:53.069133562Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/authcheck","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:19:53.063947728Z","took":"5.18406ms","status_code":200,"latency_ms":5,"request_id":"c8e09fe0-c051-4d33-9739-d2665458c064"}}
{"ts":"2024-10-03T23:19:53.072358745Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/templateversions/d7d2138d-e118-41fe-8a87-e34dc7b262c4","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:19:53.064136022Z","took":"8.220759ms","status_code":200,"latency_ms":8,"request_id":"221f742a-1aad-46b9-b549-66fa6d4a1d8e"}}
{"ts":"2024-10-03T23:19:53.141488061Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/utils-BpNndWaR.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:19:53.14024029Z","took":"1.245006ms","status_code":200,"latency_ms":1,"request_id":"3f2b778f-e802-4475-bc5d-a299f0e21c7f"}}
{"ts":"2024-10-03T23:19:53.150160925Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/TemplateSummaryPage-Bh7OteVx.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:19:53.140707112Z","took":"9.448603ms","status_code":200,"latency_ms":9,"request_id":"573ea230-77ea-449d-afea-abd3c0352dcb"}}
{"ts":"2024-10-03T23:19:53.150552372Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/TemplateResourcesTable-Oz6XkdQi.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:19:53.149535266Z","took":"1.013208ms","status_code":200,"latency_ms":1,"request_id":"80028d81-7482-4b0a-9206-00e8066309c0"}}
{"ts":"2024-10-03T23:19:53.151625876Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/CopyableValue-CKn7Qond.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:19:53.149347412Z","took":"2.275979ms","status_code":200,"latency_ms":2,"request_id":"bfb41654-8db8-4d5e-b1c3-676474a9c77b"}}
{"ts":"2024-10-03T23:19:53.156357321Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/VisibilityOutlined-BVNF4QWc.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:19:53.149489898Z","took":"6.864498ms","status_code":200,"latency_ms":6,"request_id":"ff92c9d3-3a39-4b21-9ccb-2fd3d94e6c73"}}
{"ts":"2024-10-03T23:19:53.156575222Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/SensitiveValue-Cl4MG0aO.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:19:53.149489788Z","took":"7.083ms","status_code":200,"latency_ms":7,"request_id":"0f20ebef-e801-4463-9515-7fabb5024cc1"}}
{"ts":"2024-10-03T23:19:53.182744674Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/Stats-BEWlBgG2.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:19:53.182412372Z","took":"330.669µs","status_code":200,"latency_ms":0,"request_id":"6275e9e0-3b91-4bdb-917e-a223a19d9fa4"}}
{"ts":"2024-10-03T23:19:53.241823614Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:19:53.207227555Z","took":"34.594936ms","status_code":200,"latency_ms":34,"request_id":"43bceec0-3a80-41bd-8c59-e74f960b6517"}}
{"ts":"2024-10-03T23:19:53.299029535Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/templateversions/d7d2138d-e118-41fe-8a87-e34dc7b262c4/resources","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:19:53.287879794Z","took":"11.148288ms","status_code":200,"latency_ms":11,"request_id":"827d7dfe-bb44-42a2-bf75-b9adeba09904"}}
{"ts":"2024-10-03T23:19:53.370066949Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/icon/memory.svg","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:19:53.369623121Z","took":"441.333µs","status_code":200,"latency_ms":0,"request_id":"e405e3f9-0ef4-4370-aac4-13961f6701d5"}}
{"ts":"2024-10-03T23:19:53.370276474Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/icon/database.svg","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:19:53.369852604Z","took":"421.394µs","status_code":200,"latency_ms":0,"request_id":"d944a319-ea90-4bf1-8ef5-ad86d2ec93dc"}}
{"ts":"2024-10-03T23:19:53.370385695Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/icon/code.svg","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:19:53.36978829Z","took":"595.461µs","status_code":200,"latency_ms":0,"request_id":"8e6ed567-17e3-4b3a-b9a7-40b061ad18a4"}}
{"ts":"2024-10-03T23:19:53.37173865Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/icon/container.svg","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:19:53.369751349Z","took":"1.984315ms","status_code":200,"latency_ms":1,"request_id":"2521247a-824f-4905-b4dd-b760fec20014"}}
{"ts":"2024-10-03T23:19:54.491018564Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/deployment/stats","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:19:54.487578825Z","took":"3.436762ms","status_code":200,"latency_ms":3,"request_id":"fdc39e8f-b614-4bdd-8a04-f6c796f034c7"}}
{"ts":"2024-10-03T23:19:54.508853215Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:19:54.509237187Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:19:54.509378971Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:19:54.513618626Z","level":"DEBUG","msg":"check inactive user accounts","caller":"/home/runner/work/coder/coder/enterprise/coderd/dormancy/dormantusersjob.go:49","func":"github.com/coder/coder/v2/enterprise/coderd/dormancy.CheckInactiveUsersWithOptions.func1","logger_names":["coderd","dormancy"],"fields":{"dormancy_period":"2160h0m0s","last_seen_after":"2024-07-05T23:19:54.513616Z"}}
{"ts":"2024-10-03T23:19:54.514481684Z","level":"DEBUG","msg":"checking user accounts is done","caller":"/home/runner/work/coder/coder/enterprise/coderd/dormancy/dormantusersjob.go:63","func":"github.com/coder/coder/v2/enterprise/coderd/dormancy.CheckInactiveUsersWithOptions.func1","logger_names":["coderd","dormancy"],"fields":{"num_dormant_accounts":0,"execution_time":"864.912µs"}}
{"ts":"2024-10-03T23:19:55.281024693Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:19:55.284295385Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.315337ms"}}
{"ts":"2024-10-03T23:19:55.290650808Z","level":"DEBUG","msg":"pruning inactive agents","caller":"/home/runner/work/coder/coder/coderd/tailnet.go:235","func":"github.com/coder/coder/v2/coderd.(*ServerTailnet).doExpireOldAgents","logger_names":["coderd","servertailnet"],"fields":{"agent_count":0}}
{"ts":"2024-10-03T23:19:55.290859291Z","level":"DEBUG","msg":"successfully pruned inactive agents","caller":"/home/runner/work/coder/coder/coderd/tailnet.go:251","func":"github.com/coder/coder/v2/coderd.(*ServerTailnet).doExpireOldAgents","logger_names":["coderd","servertailnet"],"fields":{"deleted":0,"took":"208.493µs"}}
{"ts":"2024-10-03T23:19:55.318957211Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:19:55.319051122Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:19:55.335265632Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:19:55.336331081Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:19:55.337018019Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:19:55.337175133Z","level":"INFO","msg":"report generator finished","caller":"/home/runner/work/coder/coder/coderd/notifications/reports/generator.go:57","func":"github.com/coder/coder/v2/coderd/notifications/reports.NewReportGenerator.func1.1","logger_names":["notifications.report_generator"],"fields":{"duration":"832.211µs"}}
{"ts":"2024-10-03T23:19:55.341685591Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:19:55.342526557Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:19:57.209111116Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/deployment/stats","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:19:57.207003282Z","took":"2.104879ms","status_code":200,"latency_ms":2,"request_id":"824a68ea-d2c9-455a-9dfe-9d401e34476e"}}
{"ts":"2024-10-03T23:19:57.353662622Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:19:57.913080391Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:57.913077Z","key":"5_mem_usage_host","value":"28.7/251 GiB (11..."}}
{"ts":"2024-10-03T23:19:57.914473774Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:19:57.914870431Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:19:57.913077Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:19:57.916003291Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:19:57.932514754Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:19:57.934355643Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:19:58.354458738Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:19:58.511286382Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.146506ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:19:59.91307244Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:19:59.913069Z","key":"1_ram_usage","value":"0.177 GiB\n"}}
{"ts":"2024-10-03T23:19:59.914306977Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:19:59.914721027Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:19:59.913069Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:19:59.915684549Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:20:00.000291081Z","level":"DEBUG","msg":"rolling up data","caller":"/home/runner/work/coder/coder/coderd/database/dbrollup/dbrollup.go:91","func":"github.com/coder/coder/v2/coderd/database/dbrollup.(*Rolluper).start.func1","logger_names":["coderd","dbrollup"]}
{"ts":"2024-10-03T23:20:00.00475536Z","level":"DEBUG","msg":"rolled up data","caller":"/home/runner/work/coder/coder/coderd/database/dbrollup/dbrollup.go:126","func":"github.com/coder/coder/v2/coderd/database/dbrollup.(*Rolluper).start.func1","logger_names":["coderd","dbrollup"],"fields":{"took":"4.205608ms","event":{"template_usage_stats":true}}}
{"ts":"2024-10-03T23:20:00.004881223Z","level":"DEBUG","msg":"next rollup at","caller":"/home/runner/work/coder/coder/coderd/database/dbrollup/dbrollup.go:174","func":"github.com/coder/coder/v2/coderd/database/dbrollup.(*Rolluper).start","logger_names":["coderd","dbrollup"],"fields":{"next":"2024-10-03T23:25:00Z"}}
{"ts":"2024-10-03T23:20:00.353771736Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:20:01.914090646Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:01.914084Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:20:01.914593408Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:01.914084Z","key":"0_cpu_usage","value":"0.118 cores\n"}}
{"ts":"2024-10-03T23:20:01.914867828Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:01.914084Z","key":"4_cpu_usage_host","value":"3.73/64 cores (6..."}}
{"ts":"2024-10-03T23:20:01.916909334Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:20:01.917477162Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:20:01.914084Z","keys":["7_swap_host","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:20:01.91908499Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","0_cpu_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:20:02.353854784Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:20:03.114241046Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:03.108437629Z","took":"5.800992ms","status_code":200,"latency_ms":5,"request_id":"d91abb2e-0f68-403d-b697-3925597fd823"}}
{"ts":"2024-10-03T23:20:03.165502778Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:03.14439006Z","took":"21.100915ms","status_code":200,"latency_ms":21,"request_id":"a8521187-6800-460c-869f-05ca917c1bd9"}}
{"ts":"2024-10-03T23:20:03.16747009Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:03.144181948Z","took":"23.287111ms","status_code":200,"latency_ms":23,"request_id":"14f590fb-40b8-4d33-ac65-5f9e23db2a26"}}
{"ts":"2024-10-03T23:20:04.829881433Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:04.827699826Z","took":"2.180284ms","status_code":200,"latency_ms":2,"request_id":"99d796a1-25cf-4b02-8251-f3d5334c3b79"}}
{"ts":"2024-10-03T23:20:04.851441746Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:04.827902348Z","took":"23.537604ms","status_code":200,"latency_ms":23,"request_id":"3c2b2b7d-1505-4fd5-88a4-410d3a8dd1a4"}}
{"ts":"2024-10-03T23:20:04.853334344Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:04.827875355Z","took":"25.457035ms","status_code":200,"latency_ms":25,"request_id":"16c4315c-74ed-4003-a4db-29735926bb33"}}
{"ts":"2024-10-03T23:20:04.980173085Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/templates/devcontainers/workspace","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:04.974442428Z","took":"5.727681ms","status_code":200,"latency_ms":5,"request_id":"f486838d-f98c-49e3-9cce-738f143c7b21"}}
{"ts":"2024-10-03T23:20:05.333625846Z","level":"DEBUG","msg":"check-auth","caller":"/home/runner/work/coder/coder/coderd/authorize.go:130","func":"github.com/coder/coder/v2/coderd.(*API).checkAuthorization","logger_names":["coderd"],"fields":{"request_id":"639038de-ff04-42b0-b040-e7fdb4cdf048","my_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","got_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","name":"{FriendlyName:Help ID:45d2dc02-0d60-41da-8f83-b611c0a5728b Roles:[{Identifier:owner DisplayName:Owner Site:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:organization_member Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:user Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:workspace Action:start} {Negate:false ResourceType:workspace Action:stop} {Negate:false ResourceType:workspace Action:ssh} {Negate:false ResourceType:workspace Action:application_connect} {Negate:false ResourceType:workspace Action:create} {Negate:false ResourceType:workspace Action:read} {Negate:false ResourceType:workspace Action:update} {Negate:false ResourceType:workspace Action:delete} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] Org:map[] User:[] cachedRegoValue:0xc00069b380} {Identifier:member DisplayName:Member Site:[{Negate:false ResourceType:assign_role Action:read} {Negate:false ResourceType:oauth2_app Action:read} {Negate:false ResourceType:workspace_proxy Action:read}] Org:map[] User:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:workspace Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:create} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:update} {Negate:false ResourceType:user Action:read} {Negate:false ResourceType:user Action:read_personal} {Negate:false ResourceType:user Action:update_personal} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] cachedRegoValue:0xc00069bf40} {Identifier:organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11 DisplayName: Site:[] Org:map[6ed51444-d360-4b0c-aac1-6894bd4cbd11:[{Negate:false ResourceType:assign_org_role Action:read} {Negate:false ResourceType:organization Action:read} {Negate:false ResourceType:provisioner_daemon Action:read}]] User:[{Negate:false ResourceType:organization_member Action:read}] cachedRegoValue:\u003cnil\u003e}] Groups:[] Scope:all cachedASTValue:0xc01c64b9c0}","roles":["owner","member","organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11"],"scope":"all"}}
{"ts":"2024-10-03T23:20:05.341629556Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/authcheck","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:05.332428862Z","took":"9.19864ms","status_code":200,"latency_ms":9,"request_id":"639038de-ff04-42b0-b040-e7fdb4cdf048"}}
{"ts":"2024-10-03T23:20:05.417688106Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/organizations","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:05.415973632Z","took":"1.711558ms","status_code":200,"latency_ms":1,"request_id":"9f2b0fab-ad69-4be6-a226-92d95c8621ad"}}
{"ts":"2024-10-03T23:20:05.504858193Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/updatecheck","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:05.504362455Z","took":"492.712µs","status_code":200,"latency_ms":0,"request_id":"0aebe431-b6e1-49e8-9dc2-13b91b05e5a9"}}
{"ts":"2024-10-03T23:20:05.505624765Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/deployment/stats","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:05.504484491Z","took":"1.139091ms","status_code":200,"latency_ms":1,"request_id":"6ff18041-6c8a-401b-bd40-6b5275ea3943"}}
{"ts":"2024-10-03T23:20:05.509473754Z","level":"DEBUG","msg":"CSP violation reported","caller":"/home/runner/work/coder/coder/coderd/csp.go:46","func":"github.com/coder/coder/v2/coderd.(*API).logReportCSPViolations","logger_names":["coderd"],"fields":{"request_id":"a67476d3-24dc-4e32-88a1-88a032ded7e1","violated-directive":"connect-src","blocked-uri":"https://1ce8t8h51oihk.pit-1.try.coder.app/latency-check?cache_bust=w0uDeD/V","source-file":"http://localhost:3005/assets/index-2nv8Z01B.js","status-code":200,"column-number":7449,"script-sample":"","document-uri":"http://localhost:3005/templates/devcontainers/workspace?mode=auto\u0026param.repo=custom\u0026param.region=us-pittsburgh\u0026param.custom_repo=https%3A%2F%2Fgithub.com%2FParkreiner%2Fpython-project\u0026param.repo_url=https%3A%2F%2Fgithub.com%2FParkreiner%2Fpython-project","referrer":"http://localhost:8083/","effective-directive":"connect-src","original-policy":"connect-src 'self' https://coder.com wss://localhost:3005 ws://localhost:3005; child-src 'self'; style-src 'self' 'unsafe-inline'; object-src 'self'; frame-ancestors 'none'; report-uri /api/v2/csp/reports; script-src 'self'; worker-src 'self' blob:; img-src 'self' https: data:; form-action 'self'; media-src 'self'; manifest-src 'self' blob:; frame-src 'self'; default-src 'self'; font-src 'self' data:;","disposition":"enforce","line-number":279}}
{"ts":"2024-10-03T23:20:05.510034247Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/csp/reports","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:05.509347961Z","took":"684.804µs","status_code":200,"latency_ms":0,"request_id":"a67476d3-24dc-4e32-88a1-88a032ded7e1"}}
{"ts":"2024-10-03T23:20:05.513194886Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/debug/health","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:05.50948728Z","took":"3.705152ms","status_code":200,"latency_ms":3,"request_id":"1130d554-36c0-44fb-a4ec-7832dd76d600"}}
{"ts":"2024-10-03T23:20:05.547957577Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/organizations/default/templates/devcontainers","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:05.544791899Z","took":"3.163574ms","status_code":404,"latency_ms":3,"request_id":"2791d536-c4e1-4c04-b918-0f3bd3659331"}}
{"ts":"2024-10-03T23:20:06.914715889Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:06.914711Z","key":"6_load_host","value":"0.04"}}
{"ts":"2024-10-03T23:20:06.916876205Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:20:06.917440295Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:20:06.914711Z","keys":["6_load_host"]}}}
{"ts":"2024-10-03T23:20:06.918862284Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host"],"num":1}}
{"ts":"2024-10-03T23:20:07.354003868Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:20:07.914734939Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:07.91473Z","key":"3_home_disk","value":"23.7/468 GiB (5%..."}}
{"ts":"2024-10-03T23:20:07.917071315Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":68}}
{"ts":"2024-10-03T23:20:07.917762351Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:20:07.91473Z","keys":["3_home_disk"]}}}
{"ts":"2024-10-03T23:20:07.919282188Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["3_home_disk"],"num":1}}
{"ts":"2024-10-03T23:20:08.353428259Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:20:08.891201366Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:08.887830961Z","took":"3.36865ms","status_code":200,"latency_ms":3,"request_id":"c4f7e31c-1f34-428e-87cb-77b8cdfda8d9"}}
{"ts":"2024-10-03T23:20:08.907745423Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:08.887984007Z","took":"19.759583ms","status_code":200,"latency_ms":19,"request_id":"35f7125a-5ef0-4aa0-b1fc-dd46ddd58255"}}
{"ts":"2024-10-03T23:20:08.910638505Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:08.887863274Z","took":"22.774049ms","status_code":200,"latency_ms":22,"request_id":"4d59ddf2-72ea-48ba-b449-4e313f74891f"}}
{"ts":"2024-10-03T23:20:08.91324877Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:08.913247Z","key":"5_mem_usage_host","value":"29/251 GiB (12%)..."}}
{"ts":"2024-10-03T23:20:08.914222212Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:20:08.914601715Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:20:08.913247Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:20:08.915483209Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:20:09.354227518Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:20:09.508624234Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:20:09.509284951Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:20:09.509505247Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:20:09.914180225Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:09.914177Z","key":"1_ram_usage","value":"0.177 GiB\n"}}
{"ts":"2024-10-03T23:20:09.915392959Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:20:09.915779356Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:20:09.914177Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:20:09.916637184Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:20:10.336637814Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:20:10.353849362Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:20:11.914479684Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:11.914476Z","key":"4_cpu_usage_host","value":"7.68/64 cores (1..."}}
{"ts":"2024-10-03T23:20:11.914957748Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:11.914476Z","key":"0_cpu_usage","value":"0.161 cores\n"}}
{"ts":"2024-10-03T23:20:11.915247458Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:11.914476Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:20:11.917381403Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:20:11.918111293Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:20:11.914476Z","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host"]}}}
{"ts":"2024-10-03T23:20:11.919680436Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host"],"num":3}}
{"ts":"2024-10-03T23:20:12.354457307Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:20:12.9967776Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:12.99322305Z","took":"3.551705ms","status_code":200,"latency_ms":3,"request_id":"99828a63-d332-4cd4-a7b9-633b931dccff"}}
{"ts":"2024-10-03T23:20:13.145876537Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:13.125761387Z","took":"20.112034ms","status_code":200,"latency_ms":20,"request_id":"c8e0cedb-c62a-4d10-a259-253071607172"}}
{"ts":"2024-10-03T23:20:13.148225307Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:13.12576308Z","took":"22.460833ms","status_code":200,"latency_ms":22,"request_id":"c8853140-8ed2-4507-ab05-10d610498e5f"}}
{"ts":"2024-10-03T23:20:18.353657319Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:20:18.915060032Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:18.915056Z","key":"5_mem_usage_host","value":"29/251 GiB (12%)..."}}
{"ts":"2024-10-03T23:20:18.917285063Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:20:18.917843803Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:20:18.915056Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:20:18.919386995Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:20:19.354350639Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:20:19.914283431Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:19.914279Z","key":"1_ram_usage","value":"0.178 GiB\n"}}
{"ts":"2024-10-03T23:20:19.916794785Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:20:19.917477856Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:20:19.914279Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:20:19.919165678Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:20:20.354091439Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:20:21.915075024Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:21.915071Z","key":"0_cpu_usage","value":"0.232 cores\n"}}
{"ts":"2024-10-03T23:20:21.915562516Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:21.915071Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:20:21.915892143Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:21.915071Z","key":"4_cpu_usage_host","value":"3.67/64 cores (6..."}}
{"ts":"2024-10-03T23:20:21.91798037Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:20:21.918714288Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:20:21.915071Z","keys":["0_cpu_usage","7_swap_host","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:20:21.920744623Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage","7_swap_host","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:20:22.353440875Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:20:24.509050303Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:20:24.509887321Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:20:24.510086306Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:20:25.284003553Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.038383ms"}}
{"ts":"2024-10-03T23:20:25.319552705Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:20:25.319723845Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:20:25.335990346Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:20:25.341159437Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:20:25.342175601Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:20:27.35412585Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:20:27.932954247Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:20:27.936571179Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:20:27.999800713Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:27.996986062Z","took":"2.812857ms","status_code":200,"latency_ms":2,"request_id":"b0663086-2b7c-4064-b1bf-61a16ed3bb68"}}
{"ts":"2024-10-03T23:20:28.017862223Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:27.996880859Z","took":"20.979741ms","status_code":200,"latency_ms":20,"request_id":"1952b9b2-7be9-43f4-91f1-48979c674e5b"}}
{"ts":"2024-10-03T23:20:28.017933381Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:27.996921257Z","took":"21.010992ms","status_code":200,"latency_ms":21,"request_id":"111baff0-b433-4a63-a691-a8d6bd709942"}}
{"ts":"2024-10-03T23:20:28.511393503Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.296546ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:20:29.916777062Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:29.916773Z","key":"5_mem_usage_host","value":"28.9/251 GiB (11..."}}
{"ts":"2024-10-03T23:20:29.919299638Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:20:29.919940797Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:20:29.916773Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:20:29.922908303Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:20:30.353700858Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:20:30.914021113Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:30.914018Z","key":"1_ram_usage","value":"0.178 GiB\n"}}
{"ts":"2024-10-03T23:20:30.916274328Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:20:30.91689624Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:20:30.914018Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:20:30.918759382Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:20:31.353636692Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:20:32.196025047Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/deployment/stats","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:32.193374354Z","took":"2.648048ms","status_code":200,"latency_ms":2,"request_id":"61b2e1c5-3985-4b90-8e21-1954c0fdd56a"}}
{"ts":"2024-10-03T23:20:32.914255021Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:32.914251Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:20:32.91464223Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:32.914251Z","key":"4_cpu_usage_host","value":"1.78/64 cores (3..."}}
{"ts":"2024-10-03T23:20:32.914883967Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:32.914251Z","key":"0_cpu_usage","value":"0.108 cores\n"}}
{"ts":"2024-10-03T23:20:32.91694995Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:20:32.917604335Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:20:32.914251Z","keys":["7_swap_host","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:20:32.91905566Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","4_cpu_usage_host","0_cpu_usage"],"num":3}}
{"ts":"2024-10-03T23:20:33.354183676Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:20:38.354238886Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:20:39.190138834Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/deployment/stats","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:39.188713739Z","took":"1.423661ms","status_code":200,"latency_ms":1,"request_id":"8f71c6ad-8c79-47f4-85f4-b67d7eb5d1a2"}}
{"ts":"2024-10-03T23:20:39.507996903Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:20:39.508939144Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:20:39.509206521Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:20:39.915291141Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:39.915288Z","key":"5_mem_usage_host","value":"28.8/251 GiB (11..."}}
{"ts":"2024-10-03T23:20:39.917611165Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:20:39.918252775Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:20:39.915288Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:20:39.920202895Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:20:40.336242146Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:20:40.353445458Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:20:41.91439168Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:41.914387Z","key":"1_ram_usage","value":"0.177 GiB\n"}}
{"ts":"2024-10-03T23:20:41.916834461Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:20:41.917527872Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:20:41.914387Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:20:41.919358911Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:20:42.35365449Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:20:43.914969486Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:43.914966Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:20:43.915405359Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:43.914966Z","key":"4_cpu_usage_host","value":"3.21/64 cores (5..."}}
{"ts":"2024-10-03T23:20:43.915735888Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:43.914966Z","key":"0_cpu_usage","value":"0.176 cores\n"}}
{"ts":"2024-10-03T23:20:43.917864252Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:20:43.918540389Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:20:43.914966Z","keys":["7_swap_host","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:20:43.920422787Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","4_cpu_usage_host","0_cpu_usage"],"num":3}}
{"ts":"2024-10-03T23:20:44.353563294Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:20:47.399972036Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:47.396577164Z","took":"3.391706ms","status_code":200,"latency_ms":3,"request_id":"7ab6a8e8-5b02-4f72-8f7f-fd0d4daa20c2"}}
{"ts":"2024-10-03T23:20:47.419818888Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:47.396587164Z","took":"23.230091ms","status_code":200,"latency_ms":23,"request_id":"180a7de4-0159-4756-9fa1-1c0272a16097"}}
{"ts":"2024-10-03T23:20:47.421614609Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:47.399848838Z","took":"21.764518ms","status_code":200,"latency_ms":21,"request_id":"d91034a7-281d-49b2-8bb4-ba28d1b05ddb"}}
{"ts":"2024-10-03T23:20:49.91560087Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:49.915594Z","key":"5_mem_usage_host","value":"28.8/251 GiB (11..."}}
{"ts":"2024-10-03T23:20:49.918045796Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:20:49.918718616Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:20:49.915594Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:20:49.920592809Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:20:50.354007016Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:20:50.690561526Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/templates/examples","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:50.686142675Z","took":"4.416256ms","status_code":200,"latency_ms":4,"request_id":"8d3be874-d2fc-4f80-8446-c2ee0bea0d14"}}
{"ts":"2024-10-03T23:20:50.691175663Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/users/me/organizations","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:50.686144167Z","took":"5.02916ms","status_code":200,"latency_ms":5,"request_id":"0f16b111-6b7d-43af-9c3d-1b74999e198c"}}
{"ts":"2024-10-03T23:20:50.706013683Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/templates","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:50.686000901Z","took":"20.01157ms","status_code":200,"latency_ms":20,"request_id":"e889bba6-ee87-431c-8808-54a68884fef7"}}
{"ts":"2024-10-03T23:20:51.914241071Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:51.914238Z","key":"1_ram_usage","value":"0.177 GiB\n"}}
{"ts":"2024-10-03T23:20:51.916091187Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:20:51.91666174Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:20:51.914238Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:20:51.918310357Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:20:52.050600748Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/organizations/default/templates/docker","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:52.046806725Z","took":"3.791809ms","status_code":200,"latency_ms":3,"request_id":"0c747073-ed9c-4e1a-9bd6-6c6a03555856"}}
{"ts":"2024-10-03T23:20:52.088790695Z","level":"DEBUG","msg":"check-auth","caller":"/home/runner/work/coder/coder/coderd/authorize.go:130","func":"github.com/coder/coder/v2/coderd.(*API).checkAuthorization","logger_names":["coderd"],"fields":{"request_id":"f2731c0a-07c6-4bd5-9dc5-9d5ea0d573a4","my_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","got_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","name":"{FriendlyName:Help ID:45d2dc02-0d60-41da-8f83-b611c0a5728b Roles:[{Identifier:owner DisplayName:Owner Site:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:organization_member Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:user Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:workspace Action:start} {Negate:false ResourceType:workspace Action:stop} {Negate:false ResourceType:workspace Action:ssh} {Negate:false ResourceType:workspace Action:application_connect} {Negate:false ResourceType:workspace Action:create} {Negate:false ResourceType:workspace Action:read} {Negate:false ResourceType:workspace Action:update} {Negate:false ResourceType:workspace Action:delete} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] Org:map[] User:[] cachedRegoValue:0xc00069b380} {Identifier:member DisplayName:Member Site:[{Negate:false ResourceType:assign_role Action:read} {Negate:false ResourceType:oauth2_app Action:read} {Negate:false ResourceType:workspace_proxy Action:read}] Org:map[] User:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:workspace Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:create} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:update} {Negate:false ResourceType:user Action:read} {Negate:false ResourceType:user Action:read_personal} {Negate:false ResourceType:user Action:update_personal} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] cachedRegoValue:0xc00069bf40} {Identifier:organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11 DisplayName: Site:[] Org:map[6ed51444-d360-4b0c-aac1-6894bd4cbd11:[{Negate:false ResourceType:assign_org_role Action:read} {Negate:false ResourceType:organization Action:read} {Negate:false ResourceType:provisioner_daemon Action:read}]] User:[{Negate:false ResourceType:organization_member Action:read}] cachedRegoValue:\u003cnil\u003e}] Groups:[] Scope:all cachedASTValue:0xc0035e89c0}","roles":["owner","member","organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11"],"scope":"all"}}
{"ts":"2024-10-03T23:20:52.091704286Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/authcheck","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:52.087159602Z","took":"4.542028ms","status_code":200,"latency_ms":4,"request_id":"f2731c0a-07c6-4bd5-9dc5-9d5ea0d573a4"}}
{"ts":"2024-10-03T23:20:52.095942188Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/templateversions/d7d2138d-e118-41fe-8a87-e34dc7b262c4","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:52.087394587Z","took":"8.544886ms","status_code":200,"latency_ms":8,"request_id":"82ff9bed-76f4-4088-a791-a7fbdd0800aa"}}
{"ts":"2024-10-03T23:20:52.177504929Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/templateversions/d7d2138d-e118-41fe-8a87-e34dc7b262c4/resources","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:52.164993526Z","took":"12.509439ms","status_code":200,"latency_ms":12,"request_id":"77d8fd56-9f44-48b7-95b0-837a884d727b"}}
{"ts":"2024-10-03T23:20:52.191559885Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:52.159264272Z","took":"32.294341ms","status_code":200,"latency_ms":32,"request_id":"fcd49836-7e2a-4845-9001-23f4b8edff5c"}}
{"ts":"2024-10-03T23:20:52.353790478Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:20:53.914842966Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:53.914838Z","key":"0_cpu_usage","value":"0.106 cores\n"}}
{"ts":"2024-10-03T23:20:53.915314047Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:53.914838Z","key":"4_cpu_usage_host","value":"3.35/64 cores (5..."}}
{"ts":"2024-10-03T23:20:53.917782588Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":88}}
{"ts":"2024-10-03T23:20:53.918469696Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:20:53.914838Z","keys":["0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:20:53.920480182Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage","4_cpu_usage_host"],"num":2}}
{"ts":"2024-10-03T23:20:54.17221732Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/organizations/default/templates/docker","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:54.164773572Z","took":"7.441284ms","status_code":200,"latency_ms":7,"request_id":"9aaf5a78-2945-45f4-aeda-ece366fc38a8"}}
{"ts":"2024-10-03T23:20:54.216023542Z","level":"DEBUG","msg":"check-auth","caller":"/home/runner/work/coder/coder/coderd/authorize.go:130","func":"github.com/coder/coder/v2/coderd.(*API).checkAuthorization","logger_names":["coderd"],"fields":{"request_id":"56053c02-3be8-4faa-850d-c9616373c853","my_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","got_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","name":"{FriendlyName:Help ID:45d2dc02-0d60-41da-8f83-b611c0a5728b Roles:[{Identifier:owner DisplayName:Owner Site:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:organization_member Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:user Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:workspace Action:start} {Negate:false ResourceType:workspace Action:stop} {Negate:false ResourceType:workspace Action:ssh} {Negate:false ResourceType:workspace Action:application_connect} {Negate:false ResourceType:workspace Action:create} {Negate:false ResourceType:workspace Action:read} {Negate:false ResourceType:workspace Action:update} {Negate:false ResourceType:workspace Action:delete} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] Org:map[] User:[] cachedRegoValue:0xc00069b380} {Identifier:member DisplayName:Member Site:[{Negate:false ResourceType:assign_role Action:read} {Negate:false ResourceType:oauth2_app Action:read} {Negate:false ResourceType:workspace_proxy Action:read}] Org:map[] User:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:workspace Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:create} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:update} {Negate:false ResourceType:user Action:read} {Negate:false ResourceType:user Action:read_personal} {Negate:false ResourceType:user Action:update_personal} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] cachedRegoValue:0xc00069bf40} {Identifier:organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11 DisplayName: Site:[] Org:map[6ed51444-d360-4b0c-aac1-6894bd4cbd11:[{Negate:false ResourceType:assign_org_role Action:read} {Negate:false ResourceType:organization Action:read} {Negate:false ResourceType:provisioner_daemon Action:read}]] User:[{Negate:false ResourceType:organization_member Action:read}] cachedRegoValue:\u003cnil\u003e}] Groups:[] Scope:all cachedASTValue:0xc003a19500}","roles":["owner","member","organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11"],"scope":"all"}}
{"ts":"2024-10-03T23:20:54.219058178Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/authcheck","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:54.21418546Z","took":"4.870594ms","status_code":200,"latency_ms":4,"request_id":"56053c02-3be8-4faa-850d-c9616373c853"}}
{"ts":"2024-10-03T23:20:54.298112481Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/TemplateSettingsPage-BHbgtpWZ.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:54.295007689Z","took":"3.102476ms","status_code":200,"latency_ms":3,"request_id":"8cd1a0b6-331a-48b0-b871-55460bad07e1"}}
{"ts":"2024-10-03T23:20:54.304897055Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/StackLabel-DIJxB-YH.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:54.295273343Z","took":"9.620756ms","status_code":200,"latency_ms":9,"request_id":"26b0567d-dceb-476f-a124-f1259e02e54b"}}
{"ts":"2024-10-03T23:20:54.305394436Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/IconField-Dw69yaUO.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:54.295260027Z","took":"10.129089ms","status_code":200,"latency_ms":10,"request_id":"5dac27e8-39db-4842-8a8c-ad53d573debb"}}
{"ts":"2024-10-03T23:20:54.354438202Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:20:54.361793158Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/icons-CxRjpADa.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:54.361474222Z","took":"316.892µs","status_code":200,"latency_ms":0,"request_id":"de4ed499-a7b6-4e34-b7ad-a2a424825697"}}
{"ts":"2024-10-03T23:20:54.375248205Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/EmojiPicker-DLipxx-y.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:20:54.361541331Z","took":"13.704559ms","status_code":200,"latency_ms":13,"request_id":"a2e042b7-2f13-4256-821a-9e84779de6d3"}}
{"ts":"2024-10-03T23:20:54.508919265Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:20:54.509833653Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:20:54.510083325Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:20:54.914155679Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:20:54.914152Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:20:54.916360471Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:20:54.916843595Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:20:54.914152Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:20:54.91860025Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:20:55.281470976Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:20:55.284310465Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"2.855369ms"}}
{"ts":"2024-10-03T23:20:55.32092165Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:20:55.321090206Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:20:55.335691248Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:20:55.336523306Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:20:55.337198842Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:20:55.341396115Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:20:55.342071981Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:20:55.354331438Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:20:57.932887545Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:20:57.934976362Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:20:57.958277881Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending handshake initiation","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:20:57.959632159Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Received handshake response","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:20:57.959857825Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending keepalive packet","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:20:58.512031352Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.258944ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:21:00.310977227Z","level":"INFO","msg":"audit_log","caller":"/home/runner/work/coder/coder/enterprise/audit/backends/slog.go:42","func":"github.com/coder/coder/v2/enterprise/audit/backends.(*slogBackend).Export","logger_names":["coderd"],"fields":{"ID":"7fb97867-2b88-4a1c-a437-8d3f6167b232","Time":"2024-10-03T23:21:00.309715Z","UserID":"45d2dc02-0d60-41da-8f83-b611c0a5728b","OrganizationID":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","Ip":"127.0.0.1","UserAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36","ResourceType":"template","ResourceID":"95988f7b-bca7-4ed5-8861-343284f7457a","ResourceTarget":"devcontainers","Action":"write","Diff":{"name":{"Old":"docker","New":"devcontainers","Secret":false}},"StatusCode":200,"AdditionalFields":{},"RequestID":"e2a1b9e3-ead8-4d2e-8d4c-86c8a45fb27b","ResourceIcon":"","actor":{"id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","email":"admin@coder.com","username":"Help"}}}
{"ts":"2024-10-03T23:21:00.31138774Z","level":"DEBUG","msg":"PATCH","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/templates/95988f7b-bca7-4ed5-8861-343284f7457a","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:00.301111949Z","took":"10.273868ms","status_code":200,"latency_ms":10,"request_id":"e2a1b9e3-ead8-4d2e-8d4c-86c8a45fb27b"}}
{"ts":"2024-10-03T23:21:00.368763631Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/organizations/default/templates/devcontainers","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:00.365221826Z","took":"3.538699ms","status_code":200,"latency_ms":3,"request_id":"585a90e2-fc07-4055-b385-bf3604e62145"}}
{"ts":"2024-10-03T23:21:00.443525347Z","level":"DEBUG","msg":"check-auth","caller":"/home/runner/work/coder/coder/coderd/authorize.go:130","func":"github.com/coder/coder/v2/coderd.(*API).checkAuthorization","logger_names":["coderd"],"fields":{"request_id":"488cfd0c-f9b1-4cf0-a90b-6c7f2c4ce403","my_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","got_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","name":"{FriendlyName:Help ID:45d2dc02-0d60-41da-8f83-b611c0a5728b Roles:[{Identifier:owner DisplayName:Owner Site:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:organization_member Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:user Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:workspace Action:start} {Negate:false ResourceType:workspace Action:stop} {Negate:false ResourceType:workspace Action:ssh} {Negate:false ResourceType:workspace Action:application_connect} {Negate:false ResourceType:workspace Action:create} {Negate:false ResourceType:workspace Action:read} {Negate:false ResourceType:workspace Action:update} {Negate:false ResourceType:workspace Action:delete} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] Org:map[] User:[] cachedRegoValue:0xc00069b380} {Identifier:member DisplayName:Member Site:[{Negate:false ResourceType:assign_role Action:read} {Negate:false ResourceType:oauth2_app Action:read} {Negate:false ResourceType:workspace_proxy Action:read}] Org:map[] User:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:workspace Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:create} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:update} {Negate:false ResourceType:user Action:read} {Negate:false ResourceType:user Action:read_personal} {Negate:false ResourceType:user Action:update_personal} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] cachedRegoValue:0xc00069bf40} {Identifier:organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11 DisplayName: Site:[] Org:map[6ed51444-d360-4b0c-aac1-6894bd4cbd11:[{Negate:false ResourceType:assign_org_role Action:read} {Negate:false ResourceType:organization Action:read} {Negate:false ResourceType:provisioner_daemon Action:read}]] User:[{Negate:false ResourceType:organization_member Action:read}] cachedRegoValue:\u003cnil\u003e}] Groups:[] Scope:all cachedASTValue:0xc008546880}","roles":["owner","member","organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11"],"scope":"all"}}
{"ts":"2024-10-03T23:21:00.44840037Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/authcheck","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:00.441617339Z","took":"6.781017ms","status_code":200,"latency_ms":6,"request_id":"488cfd0c-f9b1-4cf0-a90b-6c7f2c4ce403"}}
{"ts":"2024-10-03T23:21:00.449767202Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/templateversions/d7d2138d-e118-41fe-8a87-e34dc7b262c4","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:00.441561652Z","took":"8.203787ms","status_code":200,"latency_ms":8,"request_id":"4332a28c-f178-4870-b680-4accac7afeb9"}}
{"ts":"2024-10-03T23:21:00.537043778Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/templateversions/d7d2138d-e118-41fe-8a87-e34dc7b262c4/resources","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:00.527953257Z","took":"9.089178ms","status_code":200,"latency_ms":9,"request_id":"1f58e353-ef2c-4a1e-823c-0b14da094591"}}
{"ts":"2024-10-03T23:21:00.561037134Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:00.528056777Z","took":"32.978824ms","status_code":200,"latency_ms":32,"request_id":"5c44cd73-d74c-4e5c-89f3-0f5e7107d05a"}}
{"ts":"2024-10-03T23:21:00.913176088Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:00.913171Z","key":"5_mem_usage_host","value":"28.8/251 GiB (11..."}}
{"ts":"2024-10-03T23:21:00.915835789Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:21:00.916520222Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:21:00.913171Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:21:00.918246819Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:21:01.354119652Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:21:01.942688929Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:01.939785807Z","took":"2.900736ms","status_code":200,"latency_ms":2,"request_id":"9359c4ae-e1ac-4f1e-ae4d-c47576acad14"}}
{"ts":"2024-10-03T23:21:01.963450168Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:01.947638316Z","took":"15.810399ms","status_code":200,"latency_ms":15,"request_id":"99851fe0-2c41-467a-9930-b29f1fbc1c1d"}}
{"ts":"2024-10-03T23:21:01.967677749Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:01.947560145Z","took":"20.113627ms","status_code":200,"latency_ms":20,"request_id":"10b35977-40dc-4b07-8466-153f9aec5a0a"}}
{"ts":"2024-10-03T23:21:02.913260714Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:02.913257Z","key":"1_ram_usage","value":"0.178 GiB\n"}}
{"ts":"2024-10-03T23:21:02.91463995Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:21:02.915255399Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:21:02.913257Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:21:02.916494084Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:21:02.997946802Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:02.994815961Z","took":"3.128517ms","status_code":200,"latency_ms":3,"request_id":"cba27f04-7789-4023-8a69-18942f41cba7"}}
{"ts":"2024-10-03T23:21:03.013109089Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:02.994789169Z","took":"18.318317ms","status_code":200,"latency_ms":18,"request_id":"79f0d4d8-367d-4075-8a9e-9f89bb3cf856"}}
{"ts":"2024-10-03T23:21:03.017699683Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:02.994861218Z","took":"22.837052ms","status_code":200,"latency_ms":22,"request_id":"c39e4879-8a1c-4a1e-8944-9ca62cf651ea"}}
{"ts":"2024-10-03T23:21:03.124902934Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/templates/devcontainers/workspace","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.121938404Z","took":"2.962576ms","status_code":200,"latency_ms":2,"request_id":"16637029-329f-47d7-b4e3-5145a859a980"}}
{"ts":"2024-10-03T23:21:03.354108763Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:21:03.472338899Z","level":"DEBUG","msg":"check-auth","caller":"/home/runner/work/coder/coder/coderd/authorize.go:130","func":"github.com/coder/coder/v2/coderd.(*API).checkAuthorization","logger_names":["coderd"],"fields":{"request_id":"9d0df2fa-c51c-4d5b-8d13-bb153c508530","my_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","got_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","name":"{FriendlyName:Help ID:45d2dc02-0d60-41da-8f83-b611c0a5728b Roles:[{Identifier:owner DisplayName:Owner Site:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:organization_member Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:user Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:workspace Action:start} {Negate:false ResourceType:workspace Action:stop} {Negate:false ResourceType:workspace Action:ssh} {Negate:false ResourceType:workspace Action:application_connect} {Negate:false ResourceType:workspace Action:create} {Negate:false ResourceType:workspace Action:read} {Negate:false ResourceType:workspace Action:update} {Negate:false ResourceType:workspace Action:delete} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] Org:map[] User:[] cachedRegoValue:0xc00069b380} {Identifier:member DisplayName:Member Site:[{Negate:false ResourceType:assign_role Action:read} {Negate:false ResourceType:oauth2_app Action:read} {Negate:false ResourceType:workspace_proxy Action:read}] Org:map[] User:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:workspace Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:create} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:update} {Negate:false ResourceType:user Action:read} {Negate:false ResourceType:user Action:read_personal} {Negate:false ResourceType:user Action:update_personal} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] cachedRegoValue:0xc00069bf40} {Identifier:organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11 DisplayName: Site:[] Org:map[6ed51444-d360-4b0c-aac1-6894bd4cbd11:[{Negate:false ResourceType:assign_org_role Action:read} {Negate:false ResourceType:organization Action:read} {Negate:false ResourceType:provisioner_daemon Action:read}]] User:[{Negate:false ResourceType:organization_member Action:read}] cachedRegoValue:\u003cnil\u003e}] Groups:[] Scope:all cachedASTValue:0xc01bb57800}","roles":["owner","member","organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11"],"scope":"all"}}
{"ts":"2024-10-03T23:21:03.475007777Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/authcheck","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.470542246Z","took":"4.462716ms","status_code":200,"latency_ms":4,"request_id":"9d0df2fa-c51c-4d5b-8d13-bb153c508530"}}
{"ts":"2024-10-03T23:21:03.507826993Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/organizations","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.506292096Z","took":"1.532583ms","status_code":200,"latency_ms":1,"request_id":"373e005e-e4ac-45c9-a683-3aa7944e8ada"}}
{"ts":"2024-10-03T23:21:03.560759626Z","level":"DEBUG","msg":"CSP violation reported","caller":"/home/runner/work/coder/coder/coderd/csp.go:46","func":"github.com/coder/coder/v2/coderd.(*API).logReportCSPViolations","logger_names":["coderd"],"fields":{"request_id":"11072255-6f03-4214-8c62-ffd28e2f3be5","source-file":"http://localhost:3005/assets/index-2nv8Z01B.js","status-code":200,"script-sample":"","referrer":"http://localhost:8083/","effective-directive":"connect-src","original-policy":"img-src 'self' https: data:; script-src 'self'; style-src 'self' 'unsafe-inline'; object-src 'self'; manifest-src 'self' blob:; default-src 'self'; worker-src 'self' blob:; media-src 'self'; frame-ancestors 'none'; connect-src 'self' https://coder.com wss://localhost:3005 ws://localhost:3005; font-src 'self' data:; frame-src 'self'; form-action 'self'; child-src 'self'; report-uri /api/v2/csp/reports;","blocked-uri":"https://1ce8t8h51oihk.pit-1.try.coder.app/latency-check?cache_bust=1WIwgCbX","line-number":279,"document-uri":"http://localhost:3005/templates/devcontainers/workspace?mode=auto\u0026param.repo=custom\u0026param.region=us-pittsburgh\u0026param.custom_repo=https%3A%2F%2Fgithub.com%2FParkreiner%2Fpython-project\u0026param.repo_url=https%3A%2F%2Fgithub.com%2FParkreiner%2Fpython-project","violated-directive":"connect-src","disposition":"enforce","column-number":7449}}
{"ts":"2024-10-03T23:21:03.561260334Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/updatecheck","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.560640014Z","took":"617.523µs","status_code":200,"latency_ms":0,"request_id":"ccf5af8b-81fd-443e-9d73-4021e671a5cd"}}
{"ts":"2024-10-03T23:21:03.561285803Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/csp/reports","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.560656276Z","took":"627.834µs","status_code":200,"latency_ms":0,"request_id":"11072255-6f03-4214-8c62-ffd28e2f3be5"}}
{"ts":"2024-10-03T23:21:03.562472286Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/debug/health","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.560485035Z","took":"1.984816ms","status_code":200,"latency_ms":1,"request_id":"025b1750-81e7-4540-a83c-0c15be992ce1"}}
{"ts":"2024-10-03T23:21:03.562540849Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/deployment/stats","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.560653651Z","took":"1.884733ms","status_code":200,"latency_ms":1,"request_id":"8600519b-b45d-40cd-be17-01a7f766ef00"}}
{"ts":"2024-10-03T23:21:03.604356694Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/organizations/default/templates/devcontainers","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.600791022Z","took":"3.563137ms","status_code":200,"latency_ms":3,"request_id":"7c6aee93-8434-4c4a-9a02-0fdb1bdd0f9c"}}
{"ts":"2024-10-03T23:21:03.65669619Z","level":"DEBUG","msg":"check-auth","caller":"/home/runner/work/coder/coder/coderd/authorize.go:130","func":"github.com/coder/coder/v2/coderd.(*API).checkAuthorization","logger_names":["coderd"],"fields":{"request_id":"50930e3b-33b8-4f60-bbfe-0d89b0b73c48","my_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","got_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","name":"{FriendlyName:Help ID:45d2dc02-0d60-41da-8f83-b611c0a5728b Roles:[{Identifier:owner DisplayName:Owner Site:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:organization_member Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:user Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:workspace Action:start} {Negate:false ResourceType:workspace Action:stop} {Negate:false ResourceType:workspace Action:ssh} {Negate:false ResourceType:workspace Action:application_connect} {Negate:false ResourceType:workspace Action:create} {Negate:false ResourceType:workspace Action:read} {Negate:false ResourceType:workspace Action:update} {Negate:false ResourceType:workspace Action:delete} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] Org:map[] User:[] cachedRegoValue:0xc00069b380} {Identifier:member DisplayName:Member Site:[{Negate:false ResourceType:assign_role Action:read} {Negate:false ResourceType:oauth2_app Action:read} {Negate:false ResourceType:workspace_proxy Action:read}] Org:map[] User:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:workspace Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:create} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:update} {Negate:false ResourceType:user Action:read} {Negate:false ResourceType:user Action:read_personal} {Negate:false ResourceType:user Action:update_personal} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] cachedRegoValue:0xc00069bf40} {Identifier:organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11 DisplayName: Site:[] Org:map[6ed51444-d360-4b0c-aac1-6894bd4cbd11:[{Negate:false ResourceType:assign_org_role Action:read} {Negate:false ResourceType:organization Action:read} {Negate:false ResourceType:provisioner_daemon Action:read}]] User:[{Negate:false ResourceType:organization_member Action:read}] cachedRegoValue:\u003cnil\u003e}] Groups:[] Scope:all cachedASTValue:0xc00e708840}","roles":["owner","member","organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11"],"scope":"all"}}
{"ts":"2024-10-03T23:21:03.6580618Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/templateversions/d7d2138d-e118-41fe-8a87-e34dc7b262c4/external-auth","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.655131566Z","took":"2.928681ms","status_code":200,"latency_ms":2,"request_id":"ef4e7edd-132c-4a58-85e2-cb540f4bc9d7"}}
{"ts":"2024-10-03T23:21:03.658763286Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/authcheck","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.655240937Z","took":"3.519824ms","status_code":200,"latency_ms":3,"request_id":"50930e3b-33b8-4f60-bbfe-0d89b0b73c48"}}
{"ts":"2024-10-03T23:21:03.664168503Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/templateversions/d7d2138d-e118-41fe-8a87-e34dc7b262c4/rich-parameters","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.65523692Z","took":"8.930191ms","status_code":200,"latency_ms":8,"request_id":"c5ac129c-413e-4885-b365-c68941b49892"}}
{"ts":"2024-10-03T23:21:03.714568341Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"provisioner_job_posted","message_len":120}}
{"ts":"2024-10-03T23:21:03.714979616Z","level":"DEBUG","msg":"got job posting","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:347","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).jobPosted","logger_names":["coderd","acquirer"],"fields":{"posting":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","type":"terraform","tags":{"owner":"","scope":"organization"}}}}
{"ts":"2024-10-03T23:21:03.715117282Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:21:03.715681232Z","level":"INFO","msg":"audit_log","caller":"/home/runner/work/coder/coder/enterprise/audit/backends/slog.go:42","func":"github.com/coder/coder/v2/enterprise/audit/backends.(*slogBackend).Export","logger_names":["coderd"],"fields":{"ID":"a29613ee-0c56-4f6b-9689-00f506eef5ef","Time":"2024-10-03T23:21:03.714956Z","UserID":"45d2dc02-0d60-41da-8f83-b611c0a5728b","OrganizationID":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","Ip":"127.0.0.1","UserAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/129.0.0.0 Safari/537.36","ResourceType":"workspace","ResourceID":"ae875178-00fb-4cad-bea6-560ab2739bb8","ResourceTarget":"turquoise-meadowlark-45","Action":"create","Diff":{"automatic_updates":{"Old":"","New":"never","Secret":false},"id":{"Old":"","New":"ae875178-00fb-4cad-bea6-560ab2739bb8","Secret":false},"name":{"Old":"","New":"turquoise-meadowlark-45","Secret":false},"owner_id":{"Old":"","New":"45d2dc02-0d60-41da-8f83-b611c0a5728b","Secret":false},"template_id":{"Old":"","New":"95988f7b-bca7-4ed5-8861-343284f7457a","Secret":false},"ttl":{"Old":0,"New":86400000000000,"Secret":false}},"StatusCode":201,"AdditionalFields":{"workspace_name":"","build_number":"","build_reason":"","workspace_owner":"Help","workspace_id":"00000000-0000-0000-0000-000000000000"},"RequestID":"ed557178-c88a-4000-8cbc-1e8630aabd7c","ResourceIcon":"","actor":{"id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","email":"admin@coder.com","username":"Help"}}}
{"ts":"2024-10-03T23:21:03.716041468Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/users/me/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.69498084Z","took":"21.059216ms","status_code":201,"latency_ms":21,"request_id":"ed557178-c88a-4000-8cbc-1e8630aabd7c"}}
{"ts":"2024-10-03T23:21:03.716310508Z","level":"DEBUG","msg":"successfully acquired job","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:150","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:21:03.716433807Z","level":"DEBUG","msg":"locked job from database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:361","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).AcquireJobWithCancel","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:03.716379522Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c37f3a0b-0952-4c61-bb4e-b2ec7eed4b7b","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:21:03.716957038Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c37f3a0b-0952-4c61-bb4e-b2ec7eed4b7b","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:21:03.723017953Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:21:03.726542485Z","level":"DEBUG","msg":"closed stream","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:322","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).AcquireJobWithCancel.func1","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"error":null}}
{"ts":"2024-10-03T23:21:03.72659683Z","level":"DEBUG","msg":"graceful acquire done","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:284","func":"github.com/coder/coder/v2/provisionerd.(*Server).acquireAndRunOne","logger_names":["provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","error":null}}
{"ts":"2024-10-03T23:21:03.726743684Z","level":"DEBUG","msg":"acquired job","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:341","func":"github.com/coder/coder/v2/provisionerd.(*Server).acquireAndRunOne","logger_names":["provisionerd-backstage-jr-0"],"fields":{"initiator_username":"Help","provisioner":"terraform","job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","workspace_transition":"START","workspace_owner":"Help","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45"}}
{"ts":"2024-10-03T23:21:03.727026561Z","level":"DEBUG","msg":"acquired job is workspace provision","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:430","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).do","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","workspace_name":"turquoise-meadowlark-45","state_length":0,"rich_parameter_values":null,"variable_values":null}}
{"ts":"2024-10-03T23:21:03.727650587Z","level":"INFO","msg":"unpacking template source archive","caller":"/home/runner/work/coder/coder/provisionersdk/session.go:205","func":"github.com/coder/coder/v2/provisionersdk.(*Session).extractArchive","logger_names":["provisionerd-backstage-jr-0"],"fields":{"session_id":"4f201a34-bd79-465d-8bde-0f6e91fadebe","size_bytes":11264}}
{"ts":"2024-10-03T23:21:03.727788063Z","level":"DEBUG","msg":"read archive entry","caller":"/home/runner/work/coder/coder/provisionersdk/session.go:220","func":"github.com/coder/coder/v2/provisionersdk.(*Session).extractArchive","logger_names":["provisionerd-backstage-jr-0"],"fields":{"session_id":"4f201a34-bd79-465d-8bde-0f6e91fadebe","name":"README.md","mod_time":"1970-01-01T00:00:00Z","size":1464}}
{"ts":"2024-10-03T23:21:03.727935678Z","level":"DEBUG","msg":"extracted file","caller":"/home/runner/work/coder/coder/provisionersdk/session.go:278","func":"github.com/coder/coder/v2/provisionersdk.(*Session).extractArchive","logger_names":["provisionerd-backstage-jr-0"],"fields":{"session_id":"4f201a34-bd79-465d-8bde-0f6e91fadebe","size_bytes":1464,"path":"/home/coder/.cache/coder/provisioner-0/work/Session4f201a34-bd79-465d-8bde-0f6e91fadebe/README.md","mode":"-rw-r--r--","checksum":"9aa8f62c"}}
{"ts":"2024-10-03T23:21:03.728072573Z","level":"DEBUG","msg":"read archive entry","caller":"/home/runner/work/coder/coder/provisionersdk/session.go:220","func":"github.com/coder/coder/v2/provisionersdk.(*Session).extractArchive","logger_names":["provisionerd-backstage-jr-0"],"fields":{"session_id":"4f201a34-bd79-465d-8bde-0f6e91fadebe","name":"build","mod_time":"1970-01-01T00:00:00Z","size":0}}
{"ts":"2024-10-03T23:21:03.728240798Z","level":"DEBUG","msg":"extracted directory","caller":"/home/runner/work/coder/coder/provisionersdk/session.go:254","func":"github.com/coder/coder/v2/provisionersdk.(*Session).extractArchive","logger_names":["provisionerd-backstage-jr-0"],"fields":{"session_id":"4f201a34-bd79-465d-8bde-0f6e91fadebe","path":"/home/coder/.cache/coder/provisioner-0/work/Session4f201a34-bd79-465d-8bde-0f6e91fadebe/build","mode":"0o20000000755"}}
{"ts":"2024-10-03T23:21:03.728340621Z","level":"DEBUG","msg":"read archive entry","caller":"/home/runner/work/coder/coder/provisionersdk/session.go:220","func":"github.com/coder/coder/v2/provisionersdk.(*Session).extractArchive","logger_names":["provisionerd-backstage-jr-0"],"fields":{"session_id":"4f201a34-bd79-465d-8bde-0f6e91fadebe","name":"build/Dockerfile","mod_time":"1970-01-01T00:00:00Z","size":367}}
{"ts":"2024-10-03T23:21:03.728480441Z","level":"DEBUG","msg":"extracted file","caller":"/home/runner/work/coder/coder/provisionersdk/session.go:278","func":"github.com/coder/coder/v2/provisionersdk.(*Session).extractArchive","logger_names":["provisionerd-backstage-jr-0"],"fields":{"session_id":"4f201a34-bd79-465d-8bde-0f6e91fadebe","size_bytes":367,"path":"/home/coder/.cache/coder/provisioner-0/work/Session4f201a34-bd79-465d-8bde-0f6e91fadebe/build/Dockerfile","mode":"-rw-r--r--","checksum":"01f3640c"}}
{"ts":"2024-10-03T23:21:03.728602277Z","level":"DEBUG","msg":"read archive entry","caller":"/home/runner/work/coder/coder/provisionersdk/session.go:220","func":"github.com/coder/coder/v2/provisionersdk.(*Session).extractArchive","logger_names":["provisionerd-backstage-jr-0"],"fields":{"session_id":"4f201a34-bd79-465d-8bde-0f6e91fadebe","name":"main.tf","mod_time":"1970-01-01T00:00:00Z","size":6143}}
{"ts":"2024-10-03T23:21:03.728733781Z","level":"DEBUG","msg":"extracted file","caller":"/home/runner/work/coder/coder/provisionersdk/session.go:278","func":"github.com/coder/coder/v2/provisionersdk.(*Session).extractArchive","logger_names":["provisionerd-backstage-jr-0"],"fields":{"session_id":"4f201a34-bd79-465d-8bde-0f6e91fadebe","size_bytes":6143,"path":"/home/coder/.cache/coder/provisioner-0/work/Session4f201a34-bd79-465d-8bde-0f6e91fadebe/main.tf","mode":"-rw-r--r--","checksum":"487d5f33"}}
{"ts":"2024-10-03T23:21:03.754255952Z","level":"INFO","msg":"clean stale Terraform plugins","caller":"/home/runner/work/coder/coder/provisioner/terraform/cleanup.go:38","func":"github.com/coder/coder/v2/provisioner/terraform.CleanStaleTerraformPlugins","logger_names":["provisionerd-backstage-jr-0"],"fields":{"cache_path":"/home/coder/.cache/coder/provisioner-0/tf"}}
{"ts":"2024-10-03T23:21:03.754695612Z","level":"DEBUG","msg":"plugin directory discovered","caller":"/home/runner/work/coder/coder/provisioner/terraform/cleanup.go:67","func":"github.com/coder/coder/v2/provisioner/terraform.CleanStaleTerraformPlugins.func2","logger_names":["provisionerd-backstage-jr-0"],"fields":{"path":"/home/coder/.cache/coder/provisioner-0/tf/registry.terraform.io/coder/coder/1.0.3/linux_amd64"}}
{"ts":"2024-10-03T23:21:03.755054746Z","level":"DEBUG","msg":"plugin directory discovered","caller":"/home/runner/work/coder/coder/provisioner/terraform/cleanup.go:67","func":"github.com/coder/coder/v2/provisioner/terraform.CleanStaleTerraformPlugins.func2","logger_names":["provisionerd-backstage-jr-0"],"fields":{"path":"/home/coder/.cache/coder/provisioner-0/tf/registry.terraform.io/kreuzwerker/docker/3.0.2/linux_amd64"}}
{"ts":"2024-10-03T23:21:03.755364986Z","level":"DEBUG","msg":"plugin directory is not stale","caller":"/home/runner/work/coder/coder/provisioner/terraform/cleanup.go:87","func":"github.com/coder/coder/v2/provisioner/terraform.CleanStaleTerraformPlugins","logger_names":["provisionerd-backstage-jr-0"],"fields":{"plugin_path":"/home/coder/.cache/coder/provisioner-0/tf/registry.terraform.io/coder/coder/1.0.3/linux_amd64","mtime":"2024-10-03T22:48:06.471447487Z"}}
{"ts":"2024-10-03T23:21:03.755618816Z","level":"DEBUG","msg":"plugin directory is not stale","caller":"/home/runner/work/coder/coder/provisioner/terraform/cleanup.go:87","func":"github.com/coder/coder/v2/provisioner/terraform.CleanStaleTerraformPlugins","logger_names":["provisionerd-backstage-jr-0"],"fields":{"plugin_path":"/home/coder/.cache/coder/provisioner-0/tf/registry.terraform.io/kreuzwerker/docker/3.0.2/linux_amd64","mtime":"2024-10-03T22:48:05.53939292Z"}}
{"ts":"2024-10-03T23:21:03.75576017Z","level":"DEBUG","msg":"running initialization","caller":"/home/runner/work/coder/coder/provisioner/terraform/provision.go:104","func":"github.com/coder/coder/v2/provisioner/terraform.(*server).Plan","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:21:03.755883949Z","level":"DEBUG","msg":"starting command","caller":"/home/runner/work/coder/coder/provisioner/terraform/executor.go:61","func":"github.com/coder/coder/v2/provisioner/terraform.(*executor).execWriteOutput","logger_names":["provisionerd-backstage-jr-0","executor"],"fields":{"args":["init","-no-color","-input=false"]}}
{"ts":"2024-10-03T23:21:03.756058707Z","level":"DEBUG","msg":"executing terraform command","caller":"/home/runner/work/coder/coder/provisioner/terraform/executor.go:98","func":"github.com/coder/coder/v2/provisioner/terraform.(*executor).execWriteOutput","logger_names":["provisionerd-backstage-jr-0"],"fields":{"binary_path":"/usr/local/bin/terraform","args":["init","-no-color","-input=false"]}}
{"ts":"2024-10-03T23:21:03.782625718Z","level":"DEBUG","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1148","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"DEBUG","output":"Initializing the backend...","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:03.783213835Z","level":"DEBUG","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1148","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"DEBUG","output":"Initializing provider plugins...","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:03.783473457Z","level":"DEBUG","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1148","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"DEBUG","output":"- Finding latest version of coder/coder...","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:03.784110147Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/getValidReactChildren-C8rcHN96.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.783952082Z","took":"156.713µs","status_code":200,"latency_ms":0,"request_id":"a7c0658d-c433-4089-88e8-2709151ebc38"}}
{"ts":"2024-10-03T23:21:03.784266429Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/TemplateUpdateMessage-Cn69H05o.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.784082053Z","took":"182.663µs","status_code":200,"latency_ms":0,"request_id":"b7631851-07f0-438e-ac8e-c2e6ee44e5d3"}}
{"ts":"2024-10-03T23:21:03.79499711Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/WorkspacePage-BAy94vyG.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.78413208Z","took":"10.861594ms","status_code":200,"latency_ms":10,"request_id":"8e198f2f-6099-4691-ab64-ef384448dd16"}}
{"ts":"2024-10-03T23:21:03.804472525Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/WorkspaceBuildLogs-aA4PX9Rj.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.7842978Z","took":"20.168433ms","status_code":200,"latency_ms":20,"request_id":"bf0bd400-4395-447f-8347-6f1b91c9f982"}}
{"ts":"2024-10-03T23:21:03.807813714Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/Sidebar-BnFoE1NM.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.784098485Z","took":"23.711872ms","status_code":200,"latency_ms":23,"request_id":"2ff3a2f0-979e-4df7-ab62-af86e2c1afd5"}}
{"ts":"2024-10-03T23:21:03.808362043Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/WorkspaceBuildData-Dn3R6pew.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.784113925Z","took":"24.243169ms","status_code":200,"latency_ms":24,"request_id":"5a09a942-93b7-405f-a1b0-d20a7a0ecaad"}}
{"ts":"2024-10-03T23:21:03.840430378Z","level":"DEBUG","msg":"submitted snapshot","caller":"/home/runner/work/coder/coder/coderd/telemetry/telemetry.go:150","func":"github.com/coder/coder/v2/coderd/telemetry.(*remoteReporter).reportSync","logger_names":["telemetry"]}
{"ts":"2024-10-03T23:21:03.847331247Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/ArrowBackOutlined-BRZpWKsf.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.847165126Z","took":"164.648µs","status_code":200,"latency_ms":0,"request_id":"928e43a7-492b-41e6-a97c-bbe0afd93b0f"}}
{"ts":"2024-10-03T23:21:03.847931397Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/LinearProgress-DkdwqVQc.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.847404258Z","took":"523.872µs","status_code":200,"latency_ms":0,"request_id":"ec0b378f-638c-4665-a0fd-44518a1c39a1"}}
{"ts":"2024-10-03T23:21:03.854080873Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/DeleteOutline-6ofTZ2Pw.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.847330375Z","took":"6.748043ms","status_code":200,"latency_ms":6,"request_id":"ada200af-6b27-4ed5-a17c-d929c91c7f71"}}
{"ts":"2024-10-03T23:21:03.857262753Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/FileSaver.min-CE4GnzyV.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.847376915Z","took":"9.881219ms","status_code":200,"latency_ms":9,"request_id":"367d2d5a-c796-45fb-aae3-12b5538f1ed8"}}
{"ts":"2024-10-03T23:21:03.857474883Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/ExpandMoreOutlined-CGkiViqM.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.847372887Z","took":"10.099411ms","status_code":200,"latency_ms":10,"request_id":"ad34aed7-9da0-49ae-8e40-35c9fd764458"}}
{"ts":"2024-10-03T23:21:03.858967788Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/schedule-DEWKJ__9.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.855715001Z","took":"3.250633ms","status_code":200,"latency_ms":3,"request_id":"767806dc-9de1-492c-9179-7f7f1388f477"}}
{"ts":"2024-10-03T23:21:03.865553287Z","level":"DEBUG","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1148","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"DEBUG","output":"- Finding latest version of kreuzwerker/docker...","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:03.891942505Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/permissions-CGnysLEg.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.891763529Z","took":"177.463µs","status_code":200,"latency_ms":0,"request_id":"85a6baa4-67cb-4d74-9aef-c4f1759c859e"}}
{"ts":"2024-10-03T23:21:03.892057287Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/portForward-DfjfG9_U.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.891894702Z","took":"161.382µs","status_code":200,"latency_ms":0,"request_id":"82b90ee3-5eee-4140-897b-a8aa91ee0788"}}
{"ts":"2024-10-03T23:21:03.892053519Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/assets/_commonjs-dynamic-modules-TDtrdbi3.js","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.891865065Z","took":"185.449µs","status_code":200,"latency_ms":0,"request_id":"65c51634-cac8-49b8-a6bd-df2ef5eb5f53"}}
{"ts":"2024-10-03T23:21:03.998443529Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/users/Help/workspace/turquoise-meadowlark-45","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:03.983103068Z","took":"15.338668ms","status_code":200,"latency_ms":15,"request_id":"73069d34-f79c-4792-8efd-8fabebfae459"}}
{"ts":"2024-10-03T23:21:04.02573985Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/templates/95988f7b-bca7-4ed5-8861-343284f7457a","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:04.023441948Z","took":"2.296389ms","status_code":200,"latency_ms":2,"request_id":"c3a1ab2f-13f7-40d7-9f17-d8f2b748bd3f"}}
{"ts":"2024-10-03T23:21:04.034309234Z","level":"DEBUG","msg":"started listening to event channel","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:252","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).subscribeQueue","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8"}}
{"ts":"2024-10-03T23:21:04.034660964Z","level":"DEBUG","msg":"started listening to event channel","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:252","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).subscribeQueue","logger_names":["pubsub"],"fields":{"event":"template:95988f7b-bca7-4ed5-8861-343284f7457a"}}
{"ts":"2024-10-03T23:21:04.065089749Z","level":"DEBUG","msg":"check-auth","caller":"/home/runner/work/coder/coder/coderd/authorize.go:130","func":"github.com/coder/coder/v2/coderd.(*API).checkAuthorization","logger_names":["coderd"],"fields":{"request_id":"c104edef-7ecc-425a-8373-f6a401661cab","my_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","got_id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","name":"{FriendlyName:Help ID:45d2dc02-0d60-41da-8f83-b611c0a5728b Roles:[{Identifier:owner DisplayName:Owner Site:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:organization_member Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:user Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:workspace Action:start} {Negate:false ResourceType:workspace Action:stop} {Negate:false ResourceType:workspace Action:ssh} {Negate:false ResourceType:workspace Action:application_connect} {Negate:false ResourceType:workspace Action:create} {Negate:false ResourceType:workspace Action:read} {Negate:false ResourceType:workspace Action:update} {Negate:false ResourceType:workspace Action:delete} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] Org:map[] User:[] cachedRegoValue:0xc00069b380} {Identifier:member DisplayName:Member Site:[{Negate:false ResourceType:assign_role Action:read} {Negate:false ResourceType:oauth2_app Action:read} {Negate:false ResourceType:workspace_proxy Action:read}] Org:map[] User:[{Negate:false ResourceType:api_key Action:*} {Negate:false ResourceType:assign_org_role Action:*} {Negate:false ResourceType:assign_role Action:*} {Negate:false ResourceType:audit_log Action:*} {Negate:false ResourceType:crypto_key Action:*} {Negate:false ResourceType:debug_info Action:*} {Negate:false ResourceType:deployment_config Action:*} {Negate:false ResourceType:deployment_stats Action:*} {Negate:false ResourceType:file Action:*} {Negate:false ResourceType:group Action:*} {Negate:false ResourceType:group_member Action:*} {Negate:false ResourceType:idpsync_settings Action:*} {Negate:false ResourceType:license Action:*} {Negate:false ResourceType:notification_preference Action:*} {Negate:false ResourceType:notification_template Action:*} {Negate:false ResourceType:oauth2_app Action:*} {Negate:false ResourceType:oauth2_app_code_token Action:*} {Negate:false ResourceType:oauth2_app_secret Action:*} {Negate:false ResourceType:organization Action:*} {Negate:false ResourceType:provisioner_daemon Action:*} {Negate:false ResourceType:provisioner_keys Action:*} {Negate:false ResourceType:replicas Action:*} {Negate:false ResourceType:system Action:*} {Negate:false ResourceType:tailnet_coordinator Action:*} {Negate:false ResourceType:template Action:*} {Negate:false ResourceType:workspace Action:*} {Negate:false ResourceType:workspace_proxy Action:*} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:create} {Negate:false ResourceType:provisioner_daemon Action:read} {Negate:false ResourceType:provisioner_daemon Action:update} {Negate:false ResourceType:user Action:read} {Negate:false ResourceType:user Action:read_personal} {Negate:false ResourceType:user Action:update_personal} {Negate:false ResourceType:workspace_dormant Action:read} {Negate:false ResourceType:workspace_dormant Action:delete} {Negate:false ResourceType:workspace_dormant Action:create} {Negate:false ResourceType:workspace_dormant Action:update} {Negate:false ResourceType:workspace_dormant Action:stop}] cachedRegoValue:0xc00069bf40} {Identifier:organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11 DisplayName: Site:[] Org:map[6ed51444-d360-4b0c-aac1-6894bd4cbd11:[{Negate:false ResourceType:assign_org_role Action:read} {Negate:false ResourceType:organization Action:read} {Negate:false ResourceType:provisioner_daemon Action:read}]] User:[{Negate:false ResourceType:organization_member Action:read}] cachedRegoValue:\u003cnil\u003e}] Groups:[] Scope:all cachedASTValue:0xc013579500}","roles":["owner","member","organization-member:6ed51444-d360-4b0c-aac1-6894bd4cbd11"],"scope":"all"}}
{"ts":"2024-10-03T23:21:04.068108384Z","level":"DEBUG","msg":"POST","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/authcheck","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:04.063729089Z","took":"4.377431ms","status_code":200,"latency_ms":4,"request_id":"c104edef-7ecc-425a-8373-f6a401661cab"}}
{"ts":"2024-10-03T23:21:04.116545457Z","level":"DEBUG","msg":"stage UpdateJob starting","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:772","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:04.119385537Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Setting up","output":""}}
{"ts":"2024-10-03T23:21:04.119540176Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"Initializing the backend..."}}
{"ts":"2024-10-03T23:21:04.119702219Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"Initializing provider plugins..."}}
{"ts":"2024-10-03T23:21:04.119822431Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"- Finding latest version of coder/coder..."}}
{"ts":"2024-10-03T23:21:04.119941051Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"- Finding latest version of kreuzwerker/docker..."}}
{"ts":"2024-10-03T23:21:04.121928472Z","level":"DEBUG","msg":"inserted job logs","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:824","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:04.122043364Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"provisioner-log-logs:4fbca7f6-0fce-478e-b026-818260f13c1a","message_len":21}}
{"ts":"2024-10-03T23:21:04.122371318Z","level":"DEBUG","msg":"published job logs","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:836","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:04.138117564Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces/ae875178-00fb-4cad-bea6-560ab2739bb8/resolve-autostart","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:04.135853237Z","took":"2.261211ms","status_code":200,"latency_ms":2,"request_id":"2f80f086-30b8-4a13-b63b-b62b8317ebed"}}
{"ts":"2024-10-03T23:21:04.138606268Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspacebuilds/3f6b9017-5543-4db5-8310-60f4c542e34c/parameters","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:04.135835733Z","took":"2.768892ms","status_code":200,"latency_ms":2,"request_id":"072b1a64-c2cf-44b8-ad83-1fc037b8a4d8"}}
{"ts":"2024-10-03T23:21:04.142358982Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/templateversions/d7d2138d-e118-41fe-8a87-e34dc7b262c4/rich-parameters","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:04.135795255Z","took":"6.562184ms","status_code":200,"latency_ms":6,"request_id":"2e4fb3e4-a079-4f86-aa60-e2437133baac"}}
{"ts":"2024-10-03T23:21:04.145785986Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/deployment/ssh","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:04.144813196Z","took":"971.768µs","status_code":200,"latency_ms":0,"request_id":"e1393200-0bf5-4b88-8243-45e997d3f8d2"}}
{"ts":"2024-10-03T23:21:04.14654861Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/deployment/config","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:04.144601076Z","took":"1.945771ms","status_code":200,"latency_ms":1,"request_id":"e2986ef8-860e-47a3-8df0-aa9576f0eae0"}}
{"ts":"2024-10-03T23:21:04.224962485Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/favicons/favicon-running-light.svg","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:04.224632588Z","took":"328.174µs","status_code":200,"latency_ms":0,"request_id":"9de62a80-5dae-46c8-9617-a3beef072f8d"}}
{"ts":"2024-10-03T23:21:04.237956842Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspacebuilds/3f6b9017-5543-4db5-8310-60f4c542e34c/parameters","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:04.233560183Z","took":"4.395266ms","status_code":200,"latency_ms":4,"request_id":"cae26737-09ad-4089-8217-2606a0fb517a"}}
{"ts":"2024-10-03T23:21:04.265747227Z","level":"DEBUG","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1148","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"DEBUG","output":"- Installing coder/coder v1.0.3...","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:04.269849316Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/favicons/favicon-running-light.png","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:04.269633359Z","took":"214.254µs","status_code":200,"latency_ms":0,"request_id":"59f7eb2a-ec04-4253-9611-ef4a46cddfb5"}}
{"ts":"2024-10-03T23:21:04.311734205Z","level":"DEBUG","msg":"started listening to event channel","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:252","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).subscribeQueue","logger_names":["pubsub"],"fields":{"event":"provisioner-log-logs:4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:04.313427147Z","level":"DEBUG","msg":"queried job after subscribe","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:380","func":"github.com/coder/coder/v2/coderd.(*logFollower).follow","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","complete":false}}
{"ts":"2024-10-03T23:21:04.313791892Z","level":"DEBUG","msg":"querying logs","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:482","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","after":-1}}
{"ts":"2024-10-03T23:21:04.315809001Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":125}}
{"ts":"2024-10-03T23:21:04.316006313Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":126}}
{"ts":"2024-10-03T23:21:04.316177213Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":127}}
{"ts":"2024-10-03T23:21:04.316342683Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":128}}
{"ts":"2024-10-03T23:21:04.316502512Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":129}}
{"ts":"2024-10-03T23:21:04.516798812Z","level":"DEBUG","msg":"stage UpdateJob starting","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:772","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:04.51874825Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"- Installing coder/coder v1.0.3..."}}
{"ts":"2024-10-03T23:21:04.51949305Z","level":"DEBUG","msg":"inserted job logs","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:824","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:04.51967435Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"provisioner-log-logs:4fbca7f6-0fce-478e-b026-818260f13c1a","message_len":21}}
{"ts":"2024-10-03T23:21:04.519947077Z","level":"DEBUG","msg":"published job logs","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:836","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:04.520177492Z","level":"DEBUG","msg":"querying logs","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:482","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","after":129}}
{"ts":"2024-10-03T23:21:04.521569683Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":130}}
{"ts":"2024-10-03T23:21:04.777832921Z","level":"DEBUG","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1148","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"DEBUG","output":"- Installed coder/coder v1.0.3 (signed by a HashiCorp partner, key ID 93C75807601AA0EC)","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:04.913573202Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:04.913569Z","key":"0_cpu_usage","value":"0.036 cores\n"}}
{"ts":"2024-10-03T23:21:04.913954549Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:04.913569Z","key":"4_cpu_usage_host","value":"3.38/64 cores (5..."}}
{"ts":"2024-10-03T23:21:04.915195628Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":88}}
{"ts":"2024-10-03T23:21:04.915757574Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:21:04.913569Z","keys":["0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:21:04.916963996Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage","4_cpu_usage_host"],"num":2}}
{"ts":"2024-10-03T23:21:05.028814891Z","level":"DEBUG","msg":"stage UpdateJob starting","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:772","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:05.030781963Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"- Installed coder/coder v1.0.3 (signed by a HashiCorp partner, key ID 93C75807601AA0EC)"}}
{"ts":"2024-10-03T23:21:05.031404657Z","level":"DEBUG","msg":"inserted job logs","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:824","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:05.031577752Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"provisioner-log-logs:4fbca7f6-0fce-478e-b026-818260f13c1a","message_len":21}}
{"ts":"2024-10-03T23:21:05.031853254Z","level":"DEBUG","msg":"published job logs","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:836","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:05.032173714Z","level":"DEBUG","msg":"querying logs","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:482","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","after":130}}
{"ts":"2024-10-03T23:21:05.033419161Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":131}}
{"ts":"2024-10-03T23:21:05.166650763Z","level":"DEBUG","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1148","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"DEBUG","output":"- Installing kreuzwerker/docker v3.0.2...","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:05.353606868Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:21:05.418052113Z","level":"DEBUG","msg":"stage UpdateJob starting","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:772","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:05.420074472Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"- Installing kreuzwerker/docker v3.0.2..."}}
{"ts":"2024-10-03T23:21:05.420886572Z","level":"DEBUG","msg":"inserted job logs","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:824","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:05.421061951Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"provisioner-log-logs:4fbca7f6-0fce-478e-b026-818260f13c1a","message_len":21}}
{"ts":"2024-10-03T23:21:05.421400836Z","level":"DEBUG","msg":"published job logs","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:836","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:05.421621793Z","level":"DEBUG","msg":"querying logs","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:482","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","after":131}}
{"ts":"2024-10-03T23:21:05.423357197Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":132}}
{"ts":"2024-10-03T23:21:05.738193461Z","level":"DEBUG","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1148","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"DEBUG","output":"- Installed kreuzwerker/docker v3.0.2 (self-signed, key ID BD080C4571C6104C)","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:05.738854238Z","level":"DEBUG","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1148","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"DEBUG","output":"Partner and community providers are signed by their developers.","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:05.739370646Z","level":"DEBUG","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1148","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"DEBUG","output":"If you'd like to know more about provider signing, you can read about it here:","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:05.739811228Z","level":"DEBUG","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1148","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"DEBUG","output":"https://www.terraform.io/docs/cli/plugins/signing.html","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:05.740193657Z","level":"DEBUG","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1148","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"DEBUG","output":"Terraform has created a lock file .terraform.lock.hcl to record the provider","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:05.740565255Z","level":"DEBUG","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1148","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"DEBUG","output":"selections it made above. Include this file in your version control repository","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:05.740925862Z","level":"DEBUG","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1148","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"DEBUG","output":"so that Terraform can guarantee to make the same selections by default when","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:05.741290858Z","level":"DEBUG","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1148","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"DEBUG","output":"you run \"terraform init\" in the future.","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:05.74163846Z","level":"DEBUG","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1148","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"DEBUG","output":"Terraform has been successfully initialized!","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:05.741853305Z","level":"DEBUG","msg":"command done","caller":"/home/runner/work/coder/coder/provisioner/terraform/executor.go:110","func":"github.com/coder/coder/v2/provisioner/terraform.(*executor).execWriteOutput","logger_names":["provisionerd-backstage-jr-0","executor"],"fields":{"args":["init","-no-color","-input=false"],"error":null}}
{"ts":"2024-10-03T23:21:05.741956835Z","level":"DEBUG","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1148","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"DEBUG","output":"You may now begin working with Terraform. Try running \"terraform plan\" to see","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:05.742175417Z","level":"DEBUG","msg":"closing writers","caller":"/home/runner/work/coder/coder/provisioner/terraform/executor.go:64","func":"github.com/coder/coder/v2/provisioner/terraform.(*executor).execWriteOutput.func1","logger_names":["provisionerd-backstage-jr-0","executor"],"fields":{"error":null}}
{"ts":"2024-10-03T23:21:05.742345296Z","level":"DEBUG","msg":"ran initialization","caller":"/home/runner/work/coder/coder/provisioner/terraform/provision.go:121","func":"github.com/coder/coder/v2/provisioner/terraform.(*server).Plan","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:21:05.742283827Z","level":"DEBUG","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1148","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"DEBUG","output":"any changes that are required for your infrastructure. All Terraform commands","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:05.742589197Z","level":"DEBUG","msg":"starting command","caller":"/home/runner/work/coder/coder/provisioner/terraform/executor.go:61","func":"github.com/coder/coder/v2/provisioner/terraform.(*executor).execWriteOutput","logger_names":["provisionerd-backstage-jr-0","executor"],"fields":{"args":["plan","-no-color","-input=false","-json","-refresh=true","-out=/home/coder/.cache/coder/provisioner-0/work/Session4f201a34-bd79-465d-8bde-0f6e91fadebe/terraform.tfplan"]}}
{"ts":"2024-10-03T23:21:05.74274577Z","level":"DEBUG","msg":"executing terraform command","caller":"/home/runner/work/coder/coder/provisioner/terraform/executor.go:98","func":"github.com/coder/coder/v2/provisioner/terraform.(*executor).execWriteOutput","logger_names":["provisionerd-backstage-jr-0"],"fields":{"binary_path":"/usr/local/bin/terraform","args":["plan","-no-color","-input=false","-json","-refresh=true","-out=/home/coder/.cache/coder/provisioner-0/work/Session4f201a34-bd79-465d-8bde-0f6e91fadebe/terraform.tfplan"]}}
{"ts":"2024-10-03T23:21:05.742613995Z","level":"DEBUG","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1148","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"DEBUG","output":"should now work.","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:05.743100496Z","level":"DEBUG","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1148","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"DEBUG","output":"If you ever set or change modules or backend configuration for Terraform,","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:05.743441054Z","level":"DEBUG","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1148","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"DEBUG","output":"rerun this command to reinitialize your working directory. If you forget, other","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:05.743922615Z","level":"DEBUG","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1148","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"DEBUG","output":"commands will detect it and remind you to do so if necessary.","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:05.767076338Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"Terraform 1.5.7","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:05.914185874Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:05.914181Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:21:05.916497903Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:21:05.917029601Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:21:05.914181Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:21:05.918408747Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:21:06.01825066Z","level":"DEBUG","msg":"stage UpdateJob starting","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:772","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:06.020154981Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"- Installed kreuzwerker/docker v3.0.2 (self-signed, key ID BD080C4571C6104C)"}}
{"ts":"2024-10-03T23:21:06.020326843Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"Partner and community providers are signed by their developers."}}
{"ts":"2024-10-03T23:21:06.020474448Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"If you'd like to know more about provider signing, you can read about it here:"}}
{"ts":"2024-10-03T23:21:06.020604389Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"https://www.terraform.io/docs/cli/plugins/signing.html"}}
{"ts":"2024-10-03T23:21:06.020728569Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"Terraform has created a lock file .terraform.lock.hcl to record the provider"}}
{"ts":"2024-10-03T23:21:06.020848621Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"selections it made above. Include this file in your version control repository"}}
{"ts":"2024-10-03T23:21:06.020969696Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"so that Terraform can guarantee to make the same selections by default when"}}
{"ts":"2024-10-03T23:21:06.021065541Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"you run \"terraform init\" in the future."}}
{"ts":"2024-10-03T23:21:06.021145646Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"Terraform has been successfully initialized!"}}
{"ts":"2024-10-03T23:21:06.021221342Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"You may now begin working with Terraform. Try running \"terraform plan\" to see"}}
{"ts":"2024-10-03T23:21:06.021298591Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"any changes that are required for your infrastructure. All Terraform commands"}}
{"ts":"2024-10-03T23:21:06.021381041Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"should now work."}}
{"ts":"2024-10-03T23:21:06.021459482Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"If you ever set or change modules or backend configuration for Terraform,"}}
{"ts":"2024-10-03T23:21:06.021537152Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"rerun this command to reinitialize your working directory. If you forget, other"}}
{"ts":"2024-10-03T23:21:06.021614161Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"commands will detect it and remind you to do so if necessary."}}
{"ts":"2024-10-03T23:21:06.021689096Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"Terraform 1.5.7"}}
{"ts":"2024-10-03T23:21:06.022491627Z","level":"DEBUG","msg":"inserted job logs","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:824","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:06.022600528Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"provisioner-log-logs:4fbca7f6-0fce-478e-b026-818260f13c1a","message_len":21}}
{"ts":"2024-10-03T23:21:06.022813229Z","level":"DEBUG","msg":"published job logs","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:836","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:06.022950144Z","level":"DEBUG","msg":"querying logs","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:482","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","after":132}}
{"ts":"2024-10-03T23:21:06.024410486Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":133}}
{"ts":"2024-10-03T23:21:06.02470229Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":134}}
{"ts":"2024-10-03T23:21:06.024869814Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":135}}
{"ts":"2024-10-03T23:21:06.025037288Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":136}}
{"ts":"2024-10-03T23:21:06.025200103Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":137}}
{"ts":"2024-10-03T23:21:06.02537492Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":138}}
{"ts":"2024-10-03T23:21:06.025540961Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":139}}
{"ts":"2024-10-03T23:21:06.025715338Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":140}}
{"ts":"2024-10-03T23:21:06.025862272Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":141}}
{"ts":"2024-10-03T23:21:06.025978196Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":142}}
{"ts":"2024-10-03T23:21:06.026100162Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":143}}
{"ts":"2024-10-03T23:21:06.026213551Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":144}}
{"ts":"2024-10-03T23:21:06.026367038Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":145}}
{"ts":"2024-10-03T23:21:06.026485467Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":146}}
{"ts":"2024-10-03T23:21:06.026598345Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":147}}
{"ts":"2024-10-03T23:21:06.026712315Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":148}}
{"ts":"2024-10-03T23:21:06.200344938Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"data.coder_workspace.me: Refreshing...","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:06.200639447Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"data.coder_provisioner.me: Refreshing...","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:06.200839193Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"data.coder_workspace_owner.me: Refreshing...","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:06.202541884Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"data.coder_provisioner.me: Refresh complete after 0s [id=1ad16fc7-ef82-4578-a154-779fe77adc9b]","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:06.202956967Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"data.coder_workspace_owner.me: Refresh complete after 0s [id=45d2dc02-0d60-41da-8f83-b611c0a5728b]","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:06.203442866Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"data.coder_workspace.me: Refresh complete after 0s [id=ae875178-00fb-4cad-bea6-560ab2739bb8]","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:06.235681509Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"docker_volume.home_volume: Plan to create","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:06.236004333Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"docker_image.main: Plan to create","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:06.236265248Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"coder_agent.main: Plan to create","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:06.236529929Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"coder_app.code-server: Plan to create","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:06.236786415Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"docker_container.workspace[0]: Plan to create","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:06.237038803Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"Plan: 5 to add, 0 to change, 0 to destroy.","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:06.240334203Z","level":"DEBUG","msg":"command done","caller":"/home/runner/work/coder/coder/provisioner/terraform/executor.go:110","func":"github.com/coder/coder/v2/provisioner/terraform.(*executor).execWriteOutput","logger_names":["provisionerd-backstage-jr-0","executor"],"fields":{"args":["plan","-no-color","-input=false","-json","-refresh=true","-out=/home/coder/.cache/coder/provisioner-0/work/Session4f201a34-bd79-465d-8bde-0f6e91fadebe/terraform.tfplan"],"error":null}}
{"ts":"2024-10-03T23:21:06.240468152Z","level":"DEBUG","msg":"closing writers","caller":"/home/runner/work/coder/coder/provisioner/terraform/executor.go:64","func":"github.com/coder/coder/v2/provisioner/terraform.(*executor).execWriteOutput.func1","logger_names":["provisionerd-backstage-jr-0","executor"],"fields":{"error":null}}
{"ts":"2024-10-03T23:21:06.240611238Z","level":"DEBUG","msg":"executing terraform command with JSON result","caller":"/home/runner/work/coder/coder/provisioner/terraform/executor.go:133","func":"github.com/coder/coder/v2/provisioner/terraform.(*executor).execParseJSON","logger_names":["provisionerd-backstage-jr-0"],"fields":{"binary_path":"/usr/local/bin/terraform","args":["show","-json","-no-color","/home/coder/.cache/coder/provisioner-0/work/Session4f201a34-bd79-465d-8bde-0f6e91fadebe/terraform.tfplan"]}}
{"ts":"2024-10-03T23:21:06.35399172Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:21:06.48799332Z","level":"DEBUG","msg":"stage UpdateJob starting","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:772","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:06.489815532Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"data.coder_workspace.me: Refreshing..."}}
{"ts":"2024-10-03T23:21:06.489992264Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"data.coder_provisioner.me: Refreshing..."}}
{"ts":"2024-10-03T23:21:06.490089933Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"data.coder_workspace_owner.me: Refreshing..."}}
{"ts":"2024-10-03T23:21:06.490173083Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"data.coder_provisioner.me: Refresh complete after 0s [id=1ad16fc7-ef82-4578-a154-779fe77adc9b]"}}
{"ts":"2024-10-03T23:21:06.490262296Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"data.coder_workspace_owner.me: Refresh complete after 0s [id=45d2dc02-0d60-41da-8f83-b611c0a5728b]"}}
{"ts":"2024-10-03T23:21:06.490347981Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"data.coder_workspace.me: Refresh complete after 0s [id=ae875178-00fb-4cad-bea6-560ab2739bb8]"}}
{"ts":"2024-10-03T23:21:06.490428517Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"docker_volume.home_volume: Plan to create"}}
{"ts":"2024-10-03T23:21:06.490516217Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"docker_image.main: Plan to create"}}
{"ts":"2024-10-03T23:21:06.49059574Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"coder_agent.main: Plan to create"}}
{"ts":"2024-10-03T23:21:06.490675935Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"coder_app.code-server: Plan to create"}}
{"ts":"2024-10-03T23:21:06.490751952Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"docker_container.workspace[0]: Plan to create"}}
{"ts":"2024-10-03T23:21:06.490834261Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Planning infrastructure","output":"Plan: 5 to add, 0 to change, 0 to destroy."}}
{"ts":"2024-10-03T23:21:06.491482885Z","level":"DEBUG","msg":"inserted job logs","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:824","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:06.491588269Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"provisioner-log-logs:4fbca7f6-0fce-478e-b026-818260f13c1a","message_len":21}}
{"ts":"2024-10-03T23:21:06.491819656Z","level":"DEBUG","msg":"published job logs","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:836","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:06.492005034Z","level":"DEBUG","msg":"querying logs","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:482","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","after":148}}
{"ts":"2024-10-03T23:21:06.493431221Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":149}}
{"ts":"2024-10-03T23:21:06.493836404Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":150}}
{"ts":"2024-10-03T23:21:06.494097579Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":151}}
{"ts":"2024-10-03T23:21:06.494330169Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":152}}
{"ts":"2024-10-03T23:21:06.49456345Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":153}}
{"ts":"2024-10-03T23:21:06.494788675Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":154}}
{"ts":"2024-10-03T23:21:06.494984553Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":155}}
{"ts":"2024-10-03T23:21:06.495098744Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":156}}
{"ts":"2024-10-03T23:21:06.49521538Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":157}}
{"ts":"2024-10-03T23:21:06.49532961Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":158}}
{"ts":"2024-10-03T23:21:06.495443731Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":159}}
{"ts":"2024-10-03T23:21:06.495553844Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":160}}
{"ts":"2024-10-03T23:21:06.512571407Z","level":"DEBUG","msg":"executing terraform command graph","caller":"/home/runner/work/coder/coder/provisioner/terraform/executor.go:380","func":"github.com/coder/coder/v2/provisioner/terraform.(*executor).graph","logger_names":["provisionerd-backstage-jr-0"],"fields":{"binary_path":"/usr/local/bin/terraform","args":"graph"}}
{"ts":"2024-10-03T23:21:06.748658537Z","level":"DEBUG","msg":"kill context ended","caller":"/home/runner/work/coder/coder/provisioner/terraform/executor.go:505","func":"github.com/coder/coder/v2/provisioner/terraform.interruptCommandOnCancel.func1","logger_names":["provisionerd-backstage-jr-0","executor"],"fields":{"args":["/usr/local/bin/terraform","plan","-no-color","-input=false","-json","-refresh=true","-out=/home/coder/.cache/coder/provisioner-0/work/Session4f201a34-bd79-465d-8bde-0f6e91fadebe/terraform.tfplan"]}}
{"ts":"2024-10-03T23:21:06.748713784Z","level":"DEBUG","msg":"kill context ended","caller":"/home/runner/work/coder/coder/provisioner/terraform/executor.go:505","func":"github.com/coder/coder/v2/provisioner/terraform.interruptCommandOnCancel.func1","logger_names":["provisionerd-backstage-jr-0","executor"],"fields":{"args":["/usr/local/bin/terraform","show","-json","-no-color","/home/coder/.cache/coder/provisioner-0/work/Session4f201a34-bd79-465d-8bde-0f6e91fadebe/terraform.tfplan"]}}
{"ts":"2024-10-03T23:21:06.748690379Z","level":"DEBUG","msg":"graceful context done","caller":"/home/runner/work/coder/coder/provisioner/terraform/provision.go:41","func":"github.com/coder/coder/v2/provisioner/terraform.(*server).setupContexts.func1","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:21:06.748787266Z","level":"DEBUG","msg":"canceledOrComplete closed","caller":"/home/runner/work/coder/coder/provisioner/terraform/provision.go:60","func":"github.com/coder/coder/v2/provisioner/terraform.(*server).setupContexts.func2","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:21:06.748673386Z","level":"DEBUG","msg":"kill context ended","caller":"/home/runner/work/coder/coder/provisioner/terraform/executor.go:505","func":"github.com/coder/coder/v2/provisioner/terraform.interruptCommandOnCancel.func1","logger_names":["provisionerd-backstage-jr-0","executor"],"fields":{"args":["/usr/local/bin/terraform","graph"]}}
{"ts":"2024-10-03T23:21:06.748695899Z","level":"DEBUG","msg":"kill context ended","caller":"/home/runner/work/coder/coder/provisioner/terraform/executor.go:505","func":"github.com/coder/coder/v2/provisioner/terraform.interruptCommandOnCancel.func1","logger_names":["provisionerd-backstage-jr-0","executor"],"fields":{"args":["/usr/local/bin/terraform","init","-no-color","-input=false"]}}
{"ts":"2024-10-03T23:21:06.748894473Z","level":"DEBUG","msg":"kill context done","caller":"/home/runner/work/coder/coder/provisioner/terraform/provision.go:53","func":"github.com/coder/coder/v2/provisioner/terraform.(*server).setupContexts.func1","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:21:06.749041267Z","level":"INFO","msg":"plan request successful","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:966","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).runWorkspaceBuild","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","resource_count":3,"resources":["docker_container.workspace","docker_image.main","docker_volume.home_volume"]}}
{"ts":"2024-10-03T23:21:06.749397816Z","level":"DEBUG","msg":"stage UpdateJob starting","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:772","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:06.75171781Z","level":"DEBUG","msg":"committing quota","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:856","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).commitQuota","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","resources":["docker_container.workspace","docker_image.main","docker_volume.home_volume"],"cost":0}}
{"ts":"2024-10-03T23:21:06.752227205Z","level":"DEBUG","msg":"stage UpdateJob starting","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:772","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:06.786619992Z","level":"DEBUG","msg":"starting command","caller":"/home/runner/work/coder/coder/provisioner/terraform/executor.go:61","func":"github.com/coder/coder/v2/provisioner/terraform.(*executor).execWriteOutput","logger_names":["provisionerd-backstage-jr-0","executor"],"fields":{"args":["apply","-no-color","-auto-approve","-input=false","-json","/home/coder/.cache/coder/provisioner-0/work/Session4f201a34-bd79-465d-8bde-0f6e91fadebe/terraform.tfplan"]}}
{"ts":"2024-10-03T23:21:06.786855477Z","level":"DEBUG","msg":"executing terraform command","caller":"/home/runner/work/coder/coder/provisioner/terraform/executor.go:98","func":"github.com/coder/coder/v2/provisioner/terraform.(*executor).execWriteOutput","logger_names":["provisionerd-backstage-jr-0"],"fields":{"binary_path":"/usr/local/bin/terraform","args":["apply","-no-color","-auto-approve","-input=false","-json","/home/coder/.cache/coder/provisioner-0/work/Session4f201a34-bd79-465d-8bde-0f6e91fadebe/terraform.tfplan"]}}
{"ts":"2024-10-03T23:21:06.811773461Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"Terraform 1.5.7","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:06.91304631Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:06.913044Z","key":"6_load_host","value":"0.06"}}
{"ts":"2024-10-03T23:21:06.914211693Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:21:06.91455174Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:21:06.913044Z","keys":["6_load_host"]}}}
{"ts":"2024-10-03T23:21:06.915505854Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host"],"num":1}}
{"ts":"2024-10-03T23:21:07.019691554Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"docker_volume.home_volume: Plan to create","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:07.019954071Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"docker_image.main: Plan to create","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:07.020150832Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"coder_agent.main: Plan to create","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:07.020374073Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"coder_app.code-server: Plan to create","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:07.020564992Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"docker_container.workspace[0]: Plan to create","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:07.141811067Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"docker_volume.home_volume: Creating...","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:07.142931012Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"docker_image.main: Creating...","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:07.144294076Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"coder_agent.main: Creating...","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:07.146692863Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"docker_volume.home_volume: Creation complete after 0s [id=coder-ae875178-00fb-4cad-bea6-560ab2739bb8-home]","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:07.151183864Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"coder_agent.main: Creation complete after 0s [id=8c5eff12-24c8-4728-a735-f597ecaff804]","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:07.155912614Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"coder_app.code-server: Creating...","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:07.158019146Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"coder_app.code-server: Creation complete after 0s [id=749f17f9-ec67-40ed-a476-32f0fe9cb975]","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:07.353621343Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:21:07.40923621Z","level":"DEBUG","msg":"stage UpdateJob starting","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:772","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:07.412332555Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Starting workspace","output":""}}
{"ts":"2024-10-03T23:21:07.412503616Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Starting workspace","output":"Terraform 1.5.7"}}
{"ts":"2024-10-03T23:21:07.412634559Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Starting workspace","output":"docker_volume.home_volume: Plan to create"}}
{"ts":"2024-10-03T23:21:07.412810128Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Starting workspace","output":"docker_image.main: Plan to create"}}
{"ts":"2024-10-03T23:21:07.41295586Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Starting workspace","output":"coder_agent.main: Plan to create"}}
{"ts":"2024-10-03T23:21:07.413072816Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Starting workspace","output":"coder_app.code-server: Plan to create"}}
{"ts":"2024-10-03T23:21:07.413189301Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Starting workspace","output":"docker_container.workspace[0]: Plan to create"}}
{"ts":"2024-10-03T23:21:07.413321657Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Starting workspace","output":"docker_volume.home_volume: Creating..."}}
{"ts":"2024-10-03T23:21:07.413470174Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Starting workspace","output":"docker_image.main: Creating..."}}
{"ts":"2024-10-03T23:21:07.413587902Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Starting workspace","output":"coder_agent.main: Creating..."}}
{"ts":"2024-10-03T23:21:07.413698065Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Starting workspace","output":"docker_volume.home_volume: Creation complete after 0s [id=coder-ae875178-00fb-4cad-bea6-560ab2739bb8-home]"}}
{"ts":"2024-10-03T23:21:07.413832054Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Starting workspace","output":"coder_agent.main: Creation complete after 0s [id=8c5eff12-24c8-4728-a735-f597ecaff804]"}}
{"ts":"2024-10-03T23:21:07.413967465Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Starting workspace","output":"coder_app.code-server: Creating..."}}
{"ts":"2024-10-03T23:21:07.414081746Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Starting workspace","output":"coder_app.code-server: Creation complete after 0s [id=749f17f9-ec67-40ed-a476-32f0fe9cb975]"}}
{"ts":"2024-10-03T23:21:07.415371549Z","level":"DEBUG","msg":"inserted job logs","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:824","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:07.415541999Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"provisioner-log-logs:4fbca7f6-0fce-478e-b026-818260f13c1a","message_len":21}}
{"ts":"2024-10-03T23:21:07.416012318Z","level":"DEBUG","msg":"published job logs","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:836","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:07.41630859Z","level":"DEBUG","msg":"querying logs","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:482","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","after":160}}
{"ts":"2024-10-03T23:21:07.418155961Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":161}}
{"ts":"2024-10-03T23:21:07.418321832Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":162}}
{"ts":"2024-10-03T23:21:07.418772794Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":163}}
{"ts":"2024-10-03T23:21:07.419019651Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":164}}
{"ts":"2024-10-03T23:21:07.419282258Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":165}}
{"ts":"2024-10-03T23:21:07.419516611Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":166}}
{"ts":"2024-10-03T23:21:07.419773638Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":167}}
{"ts":"2024-10-03T23:21:07.419995126Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":168}}
{"ts":"2024-10-03T23:21:07.420222025Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":169}}
{"ts":"2024-10-03T23:21:07.42044701Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":170}}
{"ts":"2024-10-03T23:21:07.420667796Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":171}}
{"ts":"2024-10-03T23:21:07.420888784Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":172}}
{"ts":"2024-10-03T23:21:07.421108659Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":173}}
{"ts":"2024-10-03T23:21:07.421323674Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":174}}
{"ts":"2024-10-03T23:21:07.461126138Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"docker_image.main: Creation complete after 0s [id=sha256:4e7d7eb0697b0d519130a2def2310cb3f87bb6156900b103e74a82540c302d28coder-ae875178-00fb-4cad-bea6-560ab2739bb8]","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:07.482351644Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"docker_container.workspace[0]: Creating...","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:07.733414862Z","level":"DEBUG","msg":"stage UpdateJob starting","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:772","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:07.736610208Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Starting workspace","output":"docker_image.main: Creation complete after 0s [id=sha256:4e7d7eb0697b0d519130a2def2310cb3f87bb6156900b103e74a82540c302d28coder-ae875178-00fb-4cad-bea6-560ab2739bb8]"}}
{"ts":"2024-10-03T23:21:07.736860662Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Starting workspace","output":"docker_container.workspace[0]: Creating..."}}
{"ts":"2024-10-03T23:21:07.737931041Z","level":"DEBUG","msg":"inserted job logs","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:824","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:07.738102482Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"provisioner-log-logs:4fbca7f6-0fce-478e-b026-818260f13c1a","message_len":21}}
{"ts":"2024-10-03T23:21:07.738591578Z","level":"DEBUG","msg":"published job logs","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:836","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:07.738957826Z","level":"DEBUG","msg":"querying logs","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:482","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","after":174}}
{"ts":"2024-10-03T23:21:07.741686089Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":175}}
{"ts":"2024-10-03T23:21:07.742015516Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":176}}
{"ts":"2024-10-03T23:21:08.015899383Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"docker_container.workspace[0]: Creation complete after 1s [id=ed54397a3a916d30c7b7bd0df1b76d051e896761746e39964c5537613748a00e]","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:08.022309363Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"Apply complete! Resources: 5 added, 0 changed, 0 destroyed.","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:08.022581689Z","level":"INFO","msg":"workspace provisioner job logged","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1150","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).logProvisionerJobLog","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","level":"INFO","output":"Outputs: 0","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c"}}
{"ts":"2024-10-03T23:21:08.027707677Z","level":"DEBUG","msg":"command done","caller":"/home/runner/work/coder/coder/provisioner/terraform/executor.go:110","func":"github.com/coder/coder/v2/provisioner/terraform.(*executor).execWriteOutput","logger_names":["provisionerd-backstage-jr-0","executor"],"fields":{"args":["apply","-no-color","-auto-approve","-input=false","-json","/home/coder/.cache/coder/provisioner-0/work/Session4f201a34-bd79-465d-8bde-0f6e91fadebe/terraform.tfplan"],"error":null}}
{"ts":"2024-10-03T23:21:08.027873518Z","level":"DEBUG","msg":"closing writers","caller":"/home/runner/work/coder/coder/provisioner/terraform/executor.go:64","func":"github.com/coder/coder/v2/provisioner/terraform.(*executor).execWriteOutput.func1","logger_names":["provisionerd-backstage-jr-0","executor"],"fields":{"error":null}}
{"ts":"2024-10-03T23:21:08.02798833Z","level":"DEBUG","msg":"executing terraform command with JSON result","caller":"/home/runner/work/coder/coder/provisioner/terraform/executor.go:133","func":"github.com/coder/coder/v2/provisioner/terraform.(*executor).execParseJSON","logger_names":["provisionerd-backstage-jr-0"],"fields":{"binary_path":"/usr/local/bin/terraform","args":["show","-json","-no-color"]}}
{"ts":"2024-10-03T23:21:08.273056309Z","level":"DEBUG","msg":"stage UpdateJob starting","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:772","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:08.27563868Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Starting workspace","output":"docker_container.workspace[0]: Creation complete after 1s [id=ed54397a3a916d30c7b7bd0df1b76d051e896761746e39964c5537613748a00e]"}}
{"ts":"2024-10-03T23:21:08.275794371Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Starting workspace","output":"Apply complete! Resources: 5 added, 0 changed, 0 destroyed."}}
{"ts":"2024-10-03T23:21:08.275905977Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Starting workspace","output":"Outputs: 0"}}
{"ts":"2024-10-03T23:21:08.276604337Z","level":"DEBUG","msg":"inserted job logs","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:824","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:08.276703729Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"provisioner-log-logs:4fbca7f6-0fce-478e-b026-818260f13c1a","message_len":21}}
{"ts":"2024-10-03T23:21:08.276977668Z","level":"DEBUG","msg":"published job logs","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:836","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:08.27711809Z","level":"DEBUG","msg":"querying logs","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:482","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","after":176}}
{"ts":"2024-10-03T23:21:08.278728783Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":177}}
{"ts":"2024-10-03T23:21:08.278921896Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":178}}
{"ts":"2024-10-03T23:21:08.2793947Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":179}}
{"ts":"2024-10-03T23:21:08.362760317Z","level":"DEBUG","msg":"executing terraform command graph","caller":"/home/runner/work/coder/coder/provisioner/terraform/executor.go:380","func":"github.com/coder/coder/v2/provisioner/terraform.(*executor).graph","logger_names":["provisionerd-backstage-jr-0"],"fields":{"binary_path":"/usr/local/bin/terraform","args":"graph"}}
{"ts":"2024-10-03T23:21:08.374915842Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/bin/coder-linux-amd64","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:21:07.947808351Z","took":"427.104476ms","status_code":200,"latency_ms":427,"request_id":"7ca59bd5-c58d-4e09-bc97-e05d048c24e9"}}
{"ts":"2024-10-03T23:21:08.58837213Z","level":"DEBUG","msg":"graceful context done","caller":"/home/runner/work/coder/coder/provisioner/terraform/provision.go:41","func":"github.com/coder/coder/v2/provisioner/terraform.(*server).setupContexts.func1","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:21:08.588358052Z","level":"DEBUG","msg":"kill context ended","caller":"/home/runner/work/coder/coder/provisioner/terraform/executor.go:505","func":"github.com/coder/coder/v2/provisioner/terraform.interruptCommandOnCancel.func1","logger_names":["provisionerd-backstage-jr-0","executor"],"fields":{"args":["/usr/local/bin/terraform","show","-json","-no-color"]}}
{"ts":"2024-10-03T23:21:08.588401236Z","level":"DEBUG","msg":"kill context ended","caller":"/home/runner/work/coder/coder/provisioner/terraform/executor.go:505","func":"github.com/coder/coder/v2/provisioner/terraform.interruptCommandOnCancel.func1","logger_names":["provisionerd-backstage-jr-0","executor"],"fields":{"args":["/usr/local/bin/terraform","apply","-no-color","-auto-approve","-input=false","-json","/home/coder/.cache/coder/provisioner-0/work/Session4f201a34-bd79-465d-8bde-0f6e91fadebe/terraform.tfplan"]}}
{"ts":"2024-10-03T23:21:08.588540816Z","level":"DEBUG","msg":"kill context done","caller":"/home/runner/work/coder/coder/provisioner/terraform/provision.go:53","func":"github.com/coder/coder/v2/provisioner/terraform.(*server).setupContexts.func1","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:21:08.588500147Z","level":"DEBUG","msg":"canceledOrComplete closed","caller":"/home/runner/work/coder/coder/provisioner/terraform/provision.go:60","func":"github.com/coder/coder/v2/provisioner/terraform.(*server).setupContexts.func2","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:21:08.588358062Z","level":"DEBUG","msg":"kill context ended","caller":"/home/runner/work/coder/coder/provisioner/terraform/executor.go:505","func":"github.com/coder/coder/v2/provisioner/terraform.interruptCommandOnCancel.func1","logger_names":["provisionerd-backstage-jr-0","executor"],"fields":{"args":["/usr/local/bin/terraform","graph"]}}
{"ts":"2024-10-03T23:21:08.588515126Z","level":"INFO","msg":"apply successful","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:1022","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).runWorkspaceBuild","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start","resource_count":3,"resources":["docker_container.workspace","docker_image.main","docker_volume.home_volume"],"state_len":24142}}
{"ts":"2024-10-03T23:21:08.589052575Z","level":"DEBUG","msg":"stage UpdateJob starting","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:772","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:08.591969954Z","level":"DEBUG","msg":"stage UpdateJob starting","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:772","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:08.594158093Z","level":"DEBUG","msg":"job log","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:810","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","stage":"Cleaning Up","output":""}}
{"ts":"2024-10-03T23:21:08.595090926Z","level":"DEBUG","msg":"inserted job logs","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:824","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:08.595314198Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"provisioner-log-logs:4fbca7f6-0fce-478e-b026-818260f13c1a","message_len":21}}
{"ts":"2024-10-03T23:21:08.595812762Z","level":"DEBUG","msg":"published job logs","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:836","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).UpdateJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:08.59600833Z","level":"INFO","msg":"recv done on Session","caller":"/home/runner/work/coder/coder/provisionersdk/session.go:103","func":"github.com/coder/coder/v2/provisionersdk.(*Session).requestReader.func1","logger_names":["provisionerd-backstage-jr-0"],"fields":{"session_id":"4f201a34-bd79-465d-8bde-0f6e91fadebe","error":"EOF"}}
{"ts":"2024-10-03T23:21:08.596019561Z","level":"DEBUG","msg":"querying logs","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:482","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","after":179}}
{"ts":"2024-10-03T23:21:08.595993681Z","level":"DEBUG","msg":"sending CompletedJob","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:221","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).Run","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start"}}
{"ts":"2024-10-03T23:21:08.596492806Z","level":"DEBUG","msg":"stage CompleteJob starting","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:1209","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).CompleteJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:08.596644449Z","level":"DEBUG","msg":"cleaned up work directory","caller":"/home/runner/work/coder/coder/provisionersdk/session.go:70","func":"github.com/coder/coder/v2/provisionersdk.(*protoServer).Session.func1","logger_names":["provisionerd-backstage-jr-0"],"fields":{"session_id":"4f201a34-bd79-465d-8bde-0f6e91fadebe"}}
{"ts":"2024-10-03T23:21:08.59741031Z","level":"DEBUG","msg":"wrote log to websocket","caller":"/home/runner/work/coder/coder/coderd/provisionerjobs.go:500","func":"github.com/coder/coder/v2/coderd.(*logFollower).query","logger_names":["coderd"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","request_id":"5df590d4-f943-478a-88f1-c04e947ca04a","id":180}}
{"ts":"2024-10-03T23:21:08.599371901Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/api/v2/workspaceagents/me/rpc","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:21:08.598258629Z","took":"1.11195ms","status_code":401,"latency_ms":1,"request_id":"8d1b1b7e-9ef1-43ed-b7c6-471d8652e6e5"}}
{"ts":"2024-10-03T23:21:08.608680424Z","level":"DEBUG","msg":"triggering workspace notification after agent timeout","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:1469","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).CompleteJob.func1","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","timeout":"2m0s"}}
{"ts":"2024-10-03T23:21:08.610966502Z","level":"INFO","msg":"audit_log","caller":"/home/runner/work/coder/coder/enterprise/audit/backends/slog.go:42","func":"github.com/coder/coder/v2/enterprise/audit/backends.(*slogBackend).Export","logger_names":["coderd"],"fields":{"ID":"0e725628-c46a-4200-8b87-b8a92e674bb5","Time":"2024-10-03T23:21:08.610378Z","UserID":"45d2dc02-0d60-41da-8f83-b611c0a5728b","OrganizationID":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","Ip":"127.0.0.1","UserAgent":"","ResourceType":"workspace_build","ResourceID":"3f6b9017-5543-4db5-8310-60f4c542e34c","ResourceTarget":"","Action":"start","Diff":{"template_version_id":{"Old":"","New":"d7d2138d-e118-41fe-8a87-e34dc7b262c4","Secret":false}},"StatusCode":200,"AdditionalFields":{"workspace_name":"turquoise-meadowlark-45","build_number":"1","build_reason":"initiator","workspace_owner":"","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8"},"RequestID":"4fbca7f6-0fce-478e-b026-818260f13c1a","ResourceIcon":"","actor":{"id":"45d2dc02-0d60-41da-8f83-b611c0a5728b","email":"admin@coder.com","username":"Help"}}}
{"ts":"2024-10-03T23:21:08.611237817Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:21:08.611478262Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"provisioner-log-logs:4fbca7f6-0fce-478e-b026-818260f13c1a","message_len":38}}
{"ts":"2024-10-03T23:21:08.61184987Z","level":"DEBUG","msg":"stage CompleteJob done","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:1658","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).CompleteJob","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:08.612194847Z","level":"DEBUG","msg":"sent CompletedJob","caller":"/home/runner/work/coder/coder/provisionerd/runner/runner.go:230","func":"github.com/coder/coder/v2/provisionerd/runner.(*Runner).Run","logger_names":["provisionerd-backstage-jr-0","runner"],"fields":{"job_id":"4fbca7f6-0fce-478e-b026-818260f13c1a","template_name":"devcontainers","template_version":"tender_snyder6","workspace_build_id":"3f6b9017-5543-4db5-8310-60f4c542e34c","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","workspace_name":"turquoise-meadowlark-45","workspace_owner":"Help","workspace_transition":"start"}}
{"ts":"2024-10-03T23:21:08.612508773Z","level":"DEBUG","msg":"start of acquireAndRunOne","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:282","func":"github.com/coder/coder/v2/provisionerd.(*Server).acquireAndRunOne","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:21:08.612681738Z","level":"DEBUG","msg":"acquiring job","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:101","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:21:08.646738235Z","level":"DEBUG","msg":"stopped listening to event channel","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:291","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).subscribeQueue.func2","logger_names":["pubsub"],"fields":{"event":"provisioner-log-logs:4fbca7f6-0fce-478e-b026-818260f13c1a"}}
{"ts":"2024-10-03T23:21:08.646887123Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspacebuilds/3f6b9017-5543-4db5-8310-60f4c542e34c/logs","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:04.306453638Z","took":"4.340431822s","status_code":101,"latency_ms":4340,"request_id":"5df590d4-f943-478a-88f1-c04e947ca04a"}}
{"ts":"2024-10-03T23:21:08.669741868Z","level":"DEBUG","msg":"submitted snapshot","caller":"/home/runner/work/coder/coder/coderd/telemetry/telemetry.go:150","func":"github.com/coder/coder/v2/coderd/telemetry.(*remoteReporter).reportSync","logger_names":["telemetry"]}
{"ts":"2024-10-03T23:21:08.678994383Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspacebuilds/3f6b9017-5543-4db5-8310-60f4c542e34c/parameters","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:08.673655824Z","took":"5.336394ms","status_code":200,"latency_ms":5,"request_id":"aac4111f-11ec-4798-8c89-cca1d8509dbb"}}
{"ts":"2024-10-03T23:21:08.679607638Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/templateversions/d7d2138d-e118-41fe-8a87-e34dc7b262c4/rich-parameters","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:08.673737952Z","took":"5.867611ms","status_code":200,"latency_ms":5,"request_id":"21fc8ec7-3f10-4cc9-b3f0-e9561920e231"}}
{"ts":"2024-10-03T23:21:08.692131596Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/favicons/favicon-success-light.svg","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:08.691801558Z","took":"328.635µs","status_code":200,"latency_ms":0,"request_id":"8b302ac1-616e-4925-98bd-fe9b4696c487"}}
{"ts":"2024-10-03T23:21:08.693311596Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/integrations/jfrog/xray-scan","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:08.691827538Z","took":"1.482145ms","status_code":404,"latency_ms":1,"request_id":"27cd3b22-d5a0-4b0b-a7a3-dddb8dd118f1"}}
{"ts":"2024-10-03T23:21:08.696497885Z","level":"DEBUG","msg":"started listening to event channel","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:252","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).subscribeQueue","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27"}}
{"ts":"2024-10-03T23:21:08.697657607Z","level":"DEBUG","msg":"got initial metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1051","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:21:08.697904624Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:21:08.755054559Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/favicons/favicon-success-light.png","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:08.754664615Z","took":"386.858µs","status_code":200,"latency_ms":0,"request_id":"95fd3c0f-9fb6-4bc0-9752-c20f55ff028a"}}
{"ts":"2024-10-03T23:21:08.768243602Z","level":"DEBUG","msg":"accepting agent RPC connection","caller":"/home/runner/work/coder/coder/coderd/workspaceagentsrpc.go:119","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentRPC","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","agent_created_at":"2024-10-03T23:21:08.603987Z","agent_updated_at":"2024-10-03T23:21:08.603987Z","agent_name":"main","agent_first_connected_at":"0001-01-01T00:00:00Z","agent_last_connected_at":"0001-01-01T00:00:00Z","agent_disconnected_at":"0001-01-01T00:00:00Z","agent_version":"","agent_last_connected_replica_id":null,"agent_connection_timeout_seconds":120,"agent_api_version":"","agent_resource_id":"1f6f884f-f62b-4c28-8bb6-1755d22ccfe9"}}
{"ts":"2024-10-03T23:21:08.769203056Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:21:08.778828711Z","level":"DEBUG","msg":"post workspace agent version","caller":"/home/runner/work/coder/coder/coderd/agentapi/lifecycle.go:148","func":"github.com/coder/coder/v2/coderd/agentapi.(*LifecycleAPI).UpdateStartup","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","agent_version":"v2.16.0+683a720"}}
{"ts":"2024-10-03T23:21:08.78328764Z","level":"DEBUG","msg":"workspace agent state report","caller":"/home/runner/work/coder/coder/coderd/agentapi/lifecycle.go:57","func":"github.com/coder/coder/v2/coderd/agentapi.(*LifecycleAPI).UpdateLifecycle","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"lifecycle":{"state":2,"changed_at":{"seconds":1727997668,"nanos":781439000}}},"request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6"}}
{"ts":"2024-10-03T23:21:08.784466378Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:21:08.788376957Z","level":"DEBUG","msg":"starting tailnet Coordinate","caller":"/home/runner/work/coder/coder/tailnet/service.go:195","func":"github.com/coder/coder/v2/tailnet.(*DRPCService).Coordinate","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","peer_id":"{Name:Help-turquoise-meadowlark-45-main ID:b1f1200e-d38f-4dfd-a1c6-598f3df62c27 Auth:{ID:b1f1200e-d38f-4dfd-a1c6-598f3df62c27}}","name":"Help-turquoise-meadowlark-45-main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6"}}
{"ts":"2024-10-03T23:21:08.788621269Z","level":"DEBUG","msg":"initPeer","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:757","func":"github.com/coder/coder/v2/tailnet.(*core).initPeer","logger_names":["coderd","coord"],"fields":{"peer_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","peer_name":"Help-turquoise-meadowlark-45-main"}}
{"ts":"2024-10-03T23:21:08.788701665Z","level":"DEBUG","msg":"initial tunnel peers","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:776","func":"github.com/coder/coder/v2/tailnet.(*core).initPeer","logger_names":["coderd","coord"],"fields":{"peer_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","peer_name":"Help-turquoise-meadowlark-45-main","tunnel_peers":[]}}
{"ts":"2024-10-03T23:21:08.825965221Z","level":"DEBUG","msg":"acquiring agent","caller":"/home/runner/work/coder/coder/coderd/tailnet.go:476","func":"github.com/coder/coder/v2/coderd.(*ServerTailnet).AgentConn","logger_names":["coderd","servertailnet"],"fields":{"agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27"}}
{"ts":"2024-10-03T23:21:08.826081826Z","level":"DEBUG","msg":"subscribing to agent","caller":"/home/runner/work/coder/coder/coderd/tailnet.go:445","func":"github.com/coder/coder/v2/coderd.(*ServerTailnet).ensureAgent","logger_names":["coderd","servertailnet"],"fields":{"agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27"}}
{"ts":"2024-10-03T23:21:08.826230924Z","level":"DEBUG","msg":"ping(fd7a:115c:a1e0:4dfd:a1c6:598f:3df6:2c27): no matching peer","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:1238","func":"tailscale.com/wgengine.(*userspaceEngine).Ping","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.826287203Z","level":"DEBUG","msg":"ping(fd7a:115c:a1e0:4dfd:a1c6:598f:3df6:2c27): no matching peer","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:1238","func":"tailscale.com/wgengine.(*userspaceEngine).Ping","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.826237928Z","level":"DEBUG","msg":"peerReadLoop got request","caller":"/home/runner/work/coder/coder/tailnet/peer.go:135","func":"github.com/coder/coder/v2/tailnet.(*peer).reqLoop","logger_names":["coderd","coord"],"fields":{"peer_id":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","peer_name":"08c6a77c-80ad-4fd2-a89c-738973cd7a13"}}
{"ts":"2024-10-03T23:21:08.826453415Z","level":"DEBUG","msg":"adding tunnel","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:705","func":"github.com/coder/coder/v2/tailnet.(*core).addTunnelLocked","logger_names":["coderd","coord"],"fields":{"src_id":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","dst_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27"}}
{"ts":"2024-10-03T23:21:08.826596291Z","level":"DEBUG","msg":"got updated mapping","caller":"/home/runner/work/coder/coder/tailnet/peer.go:92","func":"github.com/coder/coder/v2/tailnet.(*peer).storeMappingLocked","logger_names":["coderd","coord"],"fields":{"peer_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","peer_name":"Help-turquoise-meadowlark-45-main","from_id":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","kind":"NODE","reason":"add tunnel"}}
{"ts":"2024-10-03T23:21:08.826792049Z","level":"DEBUG","msg":"wrote peer update","caller":"/home/runner/work/coder/coder/tailnet/peer.go:48","func":"github.com/coder/coder/v2/tailnet.(*peer).updateMappingLocked","logger_names":["coderd","coord"],"fields":{"peer_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","peer_name":"Help-turquoise-meadowlark-45-main","from_id":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","kind":"NODE","reason":"add tunnel"}}
{"ts":"2024-10-03T23:21:08.828650121Z","level":"DEBUG","msg":"peerReadLoop got request","caller":"/home/runner/work/coder/coder/tailnet/peer.go:135","func":"github.com/coder/coder/v2/tailnet.(*peer).reqLoop","logger_names":["coderd","coord"],"fields":{"peer_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","peer_name":"Help-turquoise-meadowlark-45-main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6"}}
{"ts":"2024-10-03T23:21:08.828814388Z","level":"DEBUG","msg":"qRespLoop got response","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:985","func":"github.com/coder/coder/v2/tailnet.qRespLoop","logger_names":["coderd","coord","multiagent"],"fields":{"client_id":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","resp":{"peer_updates":[{"id":"sfEgDtOPTf2hxlmPPfYsJw==","kind":4}]}}}
{"ts":"2024-10-03T23:21:08.829160207Z","level":"DEBUG","msg":"got peer ready for handshake for unknown peer","caller":"/home/runner/work/coder/coder/tailnet/configmaps.go:461","func":"github.com/coder/coder/v2/tailnet.(*configMaps).updatePeerLocked","logger_names":["coderd","servertailnet"],"fields":{"peer_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27"}}
{"ts":"2024-10-03T23:21:08.849374048Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/derp/latency-check","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:21:08.849345643Z","took":"26.972µs","status_code":200,"latency_ms":0,"request_id":"96239bb1-9c82-4498-982c-cedb33cbe32d"}}
{"ts":"2024-10-03T23:21:08.851161192Z","level":"DEBUG","msg":"peerReadLoop got request","caller":"/home/runner/work/coder/coder/tailnet/peer.go:135","func":"github.com/coder/coder/v2/tailnet.(*peer).reqLoop","logger_names":["coderd","coord"],"fields":{"peer_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","peer_name":"Help-turquoise-meadowlark-45-main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6"}}
{"ts":"2024-10-03T23:21:08.851329187Z","level":"DEBUG","msg":"processing node update","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:678","func":"github.com/coder/coder/v2/tailnet.(*core).nodeUpdateLocked","logger_names":["coderd","coord"],"fields":{"peer_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","node":"id:6789640916459705305  as_of:{seconds:1727997668  nanos:850468000}  key:\"npOE\\xd6\\xcd1\\x92\\xd1M\\xe2ɿ\\x87!\\xe8\\xa6aE\\x86Y$\\xf4\\xb4\\xb0Z_Ƶ\\xb8\\xf9\\xf1\\xa7\\x05\"  disco:\"discokey:d07225f2039f44bfb13b20cb287c967c040ce4db4c20c0f95e35c328c6ea4c78\"  preferred_derp:999  derp_latency:{key:\"999-v4\"  value:0.001449462}  addresses:\"fd7a:115c:a1e0:4dfd:a1c6:598f:3df6:2c27/128\"  allowed_ips:\"fd7a:115c:a1e0:4dfd:a1c6:598f:3df6:2c27/128\""}}
{"ts":"2024-10-03T23:21:08.851455481Z","level":"DEBUG","msg":"got tunnel peers","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:689","func":"github.com/coder/coder/v2/tailnet.(*core).updateTunnelPeersLocked","logger_names":["coderd","coord"],"fields":{"peer_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","tunnel_peers":["08c6a77c-80ad-4fd2-a89c-738973cd7a13"]}}
{"ts":"2024-10-03T23:21:08.851615831Z","level":"DEBUG","msg":"got updated mapping","caller":"/home/runner/work/coder/coder/tailnet/peer.go:92","func":"github.com/coder/coder/v2/tailnet.(*peer).storeMappingLocked","logger_names":["coderd","coord"],"fields":{"peer_id":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","peer_name":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","from_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","kind":"NODE","reason":"node update"}}
{"ts":"2024-10-03T23:21:08.851792653Z","level":"DEBUG","msg":"wrote peer update","caller":"/home/runner/work/coder/coder/tailnet/peer.go:48","func":"github.com/coder/coder/v2/tailnet.(*peer).updateMappingLocked","logger_names":["coderd","coord"],"fields":{"peer_id":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","peer_name":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","from_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","kind":"NODE","reason":"node update"}}
{"ts":"2024-10-03T23:21:08.851918496Z","level":"DEBUG","msg":"peerReadLoop got request","caller":"/home/runner/work/coder/coder/tailnet/peer.go:135","func":"github.com/coder/coder/v2/tailnet.(*peer).reqLoop","logger_names":["coderd","coord"],"fields":{"peer_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","peer_name":"Help-turquoise-meadowlark-45-main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6"}}
{"ts":"2024-10-03T23:21:08.851861326Z","level":"DEBUG","msg":"qRespLoop got response","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:985","func":"github.com/coder/coder/v2/tailnet.qRespLoop","logger_names":["coderd","coord","multiagent"],"fields":{"client_id":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","resp":{"peer_updates":[{"id":"sfEgDtOPTf2hxlmPPfYsJw==","node":{"id":6789640916459705305,"as_of":{"seconds":1727997668,"nanos":850468000},"key":"bnBPRdbNMZLRTeLJv4ch6KZhRYZZJPS0sFpfxrW4+fGnBQ==","disco":"discokey:d07225f2039f44bfb13b20cb287c967c040ce4db4c20c0f95e35c328c6ea4c78","preferred_derp":999,"derp_latency":{"999-v4":0.001449462},"addresses":["fd7a:115c:a1e0:4dfd:a1c6:598f:3df6:2c27/128"],"allowed_ips":["fd7a:115c:a1e0:4dfd:a1c6:598f:3df6:2c27/128"]},"kind":1,"reason":"node update"}]}}}
{"ts":"2024-10-03T23:21:08.852036865Z","level":"DEBUG","msg":"processing node update","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:678","func":"github.com/coder/coder/v2/tailnet.(*core).nodeUpdateLocked","logger_names":["coderd","coord"],"fields":{"peer_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","node":"id:6789640916459705305  as_of:{seconds:1727997668  nanos:850801000}  key:\"npOE\\xd6\\xcd1\\x92\\xd1M\\xe2ɿ\\x87!\\xe8\\xa6aE\\x86Y$\\xf4\\xb4\\xb0Z_Ƶ\\xb8\\xf9\\xf1\\xa7\\x05\"  disco:\"discokey:d07225f2039f44bfb13b20cb287c967c040ce4db4c20c0f95e35c328c6ea4c78\"  preferred_derp:999  derp_latency:{key:\"999-v4\"  value:0.001449462}  addresses:\"fd7a:115c:a1e0:4dfd:a1c6:598f:3df6:2c27/128\"  allowed_ips:\"fd7a:115c:a1e0:4dfd:a1c6:598f:3df6:2c27/128\"  endpoints:\"204.16.241.141:58431\"  endpoints:\"172.17.0.4:58431\""}}
{"ts":"2024-10-03T23:21:08.852133261Z","level":"DEBUG","msg":"got tunnel peers","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:689","func":"github.com/coder/coder/v2/tailnet.(*core).updateTunnelPeersLocked","logger_names":["coderd","coord"],"fields":{"peer_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","tunnel_peers":["08c6a77c-80ad-4fd2-a89c-738973cd7a13"]}}
{"ts":"2024-10-03T23:21:08.852208887Z","level":"DEBUG","msg":"got updated mapping","caller":"/home/runner/work/coder/coder/tailnet/peer.go:92","func":"github.com/coder/coder/v2/tailnet.(*peer).storeMappingLocked","logger_names":["coderd","coord"],"fields":{"peer_id":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","peer_name":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","from_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","kind":"NODE","reason":"node update"}}
{"ts":"2024-10-03T23:21:08.852327587Z","level":"DEBUG","msg":"wrote peer update","caller":"/home/runner/work/coder/coder/tailnet/peer.go:48","func":"github.com/coder/coder/v2/tailnet.(*peer).updateMappingLocked","logger_names":["coderd","coord"],"fields":{"peer_id":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","peer_name":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","from_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","kind":"NODE","reason":"node update"}}
{"ts":"2024-10-03T23:21:08.852402441Z","level":"DEBUG","msg":"qRespLoop got response","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:985","func":"github.com/coder/coder/v2/tailnet.qRespLoop","logger_names":["coderd","coord","multiagent"],"fields":{"client_id":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","resp":{"peer_updates":[{"id":"sfEgDtOPTf2hxlmPPfYsJw==","node":{"id":6789640916459705305,"as_of":{"seconds":1727997668,"nanos":850801000},"key":"bnBPRdbNMZLRTeLJv4ch6KZhRYZZJPS0sFpfxrW4+fGnBQ==","disco":"discokey:d07225f2039f44bfb13b20cb287c967c040ce4db4c20c0f95e35c328c6ea4c78","preferred_derp":999,"derp_latency":{"999-v4":0.001449462},"addresses":["fd7a:115c:a1e0:4dfd:a1c6:598f:3df6:2c27/128"],"allowed_ips":["fd7a:115c:a1e0:4dfd:a1c6:598f:3df6:2c27/128"],"endpoints":["204.16.241.141:58431","172.17.0.4:58431"]},"kind":1,"reason":"node update"}]}}}
{"ts":"2024-10-03T23:21:08.852157658Z","level":"DEBUG","msg":"node update to existing peer","caller":"/home/runner/work/coder/coder/tailnet/configmaps.go:440","func":"github.com/coder/coder/v2/tailnet.(*configMaps).updatePeerLocked","logger_names":["coderd","servertailnet"],"fields":{"peer_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","key_id":"[T0XWz]","node":{"ID":6789640916459705305,"StableID":"","Name":"","User":0,"Key":"nodekey:4f45d6cd3192d14de2c9bf8721e8a66145865924f4b4b05a5fc6b5b8f9f1a705","KeyExpiry":"0001-01-01T00:00:00Z","Machine":"mkey:0000000000000000000000000000000000000000000000000000000000000000","DiscoKey":"discokey:d07225f2039f44bfb13b20cb287c967c040ce4db4c20c0f95e35c328c6ea4c78","Addresses":["fd7a:115c:a1e0:4dfd:a1c6:598f:3df6:2c27/128"],"AllowedIPs":["fd7a:115c:a1e0:4dfd:a1c6:598f:3df6:2c27/128"],"DERP":"127.3.3.40:999","Hostinfo":{},"Created":"2024-10-03T23:21:08.852150725Z"},"dirty":true}}
{"ts":"2024-10-03T23:21:08.852656132Z","level":"DEBUG","msg":"updating engine network map","caller":"/home/runner/work/coder/coder/tailnet/configmaps.go:157","func":"github.com/coder/coder/v2/tailnet.(*configMaps).configLoop.func3","logger_names":["coderd","servertailnet"],"fields":{"network_map":"netmap: self: [D+E0H] auth=machine-unknown u=? [fd7a:115c:a1e0:47d3:a6eb:7bea:2a88:57fc/128]\n [T0XWz] d:d07225f2039f44bf D999 fd7a:115c:a1e0:4dfd:a1c6:598f:3df6:2c27/128 : \n"}}
{"ts":"2024-10-03T23:21:08.852884152Z","level":"DEBUG","msg":"[v1] magicsock: got updated network map; 1 peers","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/magicsock/magicsock.go:1903","func":"tailscale.com/wgengine/magicsock.(*Conn).SetNetworkMap","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.852764672Z","level":"DEBUG","msg":"node update to existing peer","caller":"/home/runner/work/coder/coder/tailnet/configmaps.go:440","func":"github.com/coder/coder/v2/tailnet.(*configMaps).updatePeerLocked","logger_names":["coderd","servertailnet"],"fields":{"peer_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","key_id":"[T0XWz]","node":{"ID":6789640916459705305,"StableID":"","Name":"","User":0,"Key":"nodekey:4f45d6cd3192d14de2c9bf8721e8a66145865924f4b4b05a5fc6b5b8f9f1a705","KeyExpiry":"0001-01-01T00:00:00Z","Machine":"mkey:0000000000000000000000000000000000000000000000000000000000000000","DiscoKey":"discokey:d07225f2039f44bfb13b20cb287c967c040ce4db4c20c0f95e35c328c6ea4c78","Addresses":["fd7a:115c:a1e0:4dfd:a1c6:598f:3df6:2c27/128"],"AllowedIPs":["fd7a:115c:a1e0:4dfd:a1c6:598f:3df6:2c27/128"],"Endpoints":["204.16.241.141:58431","172.17.0.4:58431"],"DERP":"127.3.3.40:999","Hostinfo":{},"Created":"2024-10-03T23:21:08.852150725Z"},"dirty":true}}
{"ts":"2024-10-03T23:21:08.853101032Z","level":"DEBUG","msg":"wgengine: Reconfig: configuring userspace WireGuard config (with 1/1 peers)","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:696","func":"tailscale.com/wgengine.(*userspaceEngine).maybeReconfigWireguardLocked","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.853362577Z","level":"DEBUG","msg":"wg: [v2] [T0XWz] - UAPI: Created","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/wglog/wglog.go:81","func":"tailscale.com/wgengine/wglog.NewLogger.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.853520132Z","level":"DEBUG","msg":"wg: [v2] [T0XWz] - UAPI: Updating endpoint","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/wglog/wglog.go:81","func":"tailscale.com/wgengine/wglog.NewLogger.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.853621007Z","level":"DEBUG","msg":"wg: [v2] [T0XWz] - UAPI: Removing all allowedips","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/wglog/wglog.go:81","func":"tailscale.com/wgengine/wglog.NewLogger.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.853729827Z","level":"DEBUG","msg":"wg: [v2] [T0XWz] - UAPI: Adding allowedip","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/wglog/wglog.go:81","func":"tailscale.com/wgengine/wglog.NewLogger.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.853810302Z","level":"DEBUG","msg":"wg: [v2] [T0XWz] - UAPI: Updating persistent keepalive interval","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/wglog/wglog.go:81","func":"tailscale.com/wgengine/wglog.NewLogger.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.8538709Z","level":"DEBUG","msg":"wg: [v2] [T0XWz] - Starting","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/wglog/wglog.go:81","func":"tailscale.com/wgengine/wglog.NewLogger.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.853925385Z","level":"DEBUG","msg":"[v1] wgengine: Reconfig done","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:958","func":"tailscale.com/wgengine.(*userspaceEngine).Reconfig","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.853978818Z","level":"DEBUG","msg":"updating engine network map","caller":"/home/runner/work/coder/coder/tailnet/configmaps.go:157","func":"github.com/coder/coder/v2/tailnet.(*configMaps).configLoop.func3","logger_names":["coderd","servertailnet"],"fields":{"network_map":"netmap: self: [D+E0H] auth=machine-unknown u=? [fd7a:115c:a1e0:47d3:a6eb:7bea:2a88:57fc/128]\n [T0XWz] d:d07225f2039f44bf D999 fd7a:115c:a1e0:4dfd:a1c6:598f:3df6:2c27/128 :  204.16.241.141:58431      172.17.0.4:58431\n"}}
{"ts":"2024-10-03T23:21:08.854088961Z","level":"DEBUG","msg":"[v1] magicsock: got updated network map; 1 peers","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/magicsock/magicsock.go:1903","func":"tailscale.com/wgengine/magicsock.(*Conn).SetNetworkMap","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.854231206Z","level":"DEBUG","msg":"[v1] wgengine: Reconfig done","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:958","func":"tailscale.com/wgengine.(*userspaceEngine).Reconfig","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.860499712Z","level":"DEBUG","msg":"ping(fd7a:115c:a1e0:4dfd:a1c6:598f:3df6:2c27): sending TSMP ping to [T0XWz]  ...","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:1251","func":"tailscale.com/wgengine.(*userspaceEngine).Ping","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.860703847Z","level":"DEBUG","msg":"wg: [v2] [T0XWz] - Sending handshake initiation","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/wglog/wglog.go:81","func":"tailscale.com/wgengine/wglog.NewLogger.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.860984018Z","level":"DEBUG","msg":"[v1] magicsock: derp route for [T0XWz] set to derp-999 (shared home)","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/magicsock/derp.go:434","func":"tailscale.com/wgengine/magicsock.(*Conn).setPeerLastDerpLocked","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.86164177Z","level":"DEBUG","msg":"magicsock: disco: node [T0XWz] d:d07225f2039f44bf now using 172.17.0.4:58431","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/magicsock/endpoint.go:912","func":"tailscale.com/wgengine/magicsock.(*endpoint).handlePongConnLocked","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.86258885Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1000stun0 from 204.16.241.141:54187 (478295ad0e47bc3d51350e07) in 8.390929ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.862715395Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1000stun0 from 204.16.241.141:54187 (a326cd3e0d97b041338c88e3) in 8.513876ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.862823664Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1000stun0 from 204.16.241.141:54187 (b348e2eef4473cf3f437b779) in 8.612127ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.862969266Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1002stun0 from 204.16.241.141:54187 (a9caef62e68c401ac34997b8) in 8.668675ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.863063498Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1002stun0 from 204.16.241.141:54187 (bb14f158097e3a3ff9f56afa) in 8.780912ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.863171577Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1002stun0 from 204.16.241.141:54187 (210b44f4c201fa6b43ef9d79) in 8.875826ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.863299143Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1003stun0 from 204.16.241.141:54187 (9468cdbe823c0e09ad239aa7) in 8.762187ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.863411721Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1003stun0 from 204.16.241.141:54187 (937654598fd745da8254161e) in 8.874152ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.863507606Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1003stun0 from 204.16.241.141:54187 (67666815eaaf0e21fffa3dfc) in 8.963025ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.863642407Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1004stun0 from 204.16.241.141:54187 (634d6ef752606e8587e304d1) in 8.818124ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.86373705Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1004stun0 from 204.16.241.141:54187 (3436d1f9f0725ef3fa2fd863) in 8.902849ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.8638406Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1004stun0 from 204.16.241.141:54187 (115abbf7109a764f06cbaf49) in 8.998053ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.863940874Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1001stun0 from 204.16.241.141:54187 (1a4cfcddc9c67c63da5661e9) in 9.093457ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.864041638Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1001stun0 from 204.16.241.141:54187 (9f90cfe0655bab08c395dcab) in 9.185014ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.864129588Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1001stun0 from 204.16.241.141:54187 (4f78444d3394211fac3f1223) in 9.281009ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.8655996Z","level":"DEBUG","msg":"wg: [v2] [T0XWz] - Received handshake response","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/wglog/wglog.go:81","func":"tailscale.com/wgengine/wglog.NewLogger.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.866035242Z","level":"DEBUG","msg":"wgengine: got TSMP pong 42fc9490056996a7, peerAPIPort=0; cb=true","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:362","func":"tailscale.com/wgengine.NewUserspaceEngine.func3","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.866350211Z","level":"DEBUG","msg":"ping(fd7a:115c:a1e0:4dfd:a1c6:598f:3df6:2c27): sending TSMP ping to [T0XWz]  ...","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:1251","func":"tailscale.com/wgengine.(*userspaceEngine).Ping","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.866350231Z","level":"DEBUG","msg":"ping(fd7a:115c:a1e0:4dfd:a1c6:598f:3df6:2c27): sending TSMP ping to [T0XWz]  ...","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:1251","func":"tailscale.com/wgengine.(*userspaceEngine).Ping","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.866748821Z","level":"DEBUG","msg":"wgengine: got TSMP pong 5da39e4a4dfc0994, peerAPIPort=0; cb=true","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:362","func":"tailscale.com/wgengine.NewUserspaceEngine.func3","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.86685703Z","level":"DEBUG","msg":"wgengine: got TSMP pong 5ed73f5961a5c7d2, peerAPIPort=0; cb=true","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:362","func":"tailscale.com/wgengine.NewUserspaceEngine.func3","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.866966221Z","level":"DEBUG","msg":"dial tcp","caller":"/home/runner/work/coder/coder/tailnet/conn.go:669","func":"github.com/coder/coder/v2/tailnet.(*Conn).DialContextTCP","logger_names":["coderd","servertailnet"],"fields":{"request_id":"638ca838-22c6-4acc-9ae4-59b8d4726fb9","addr_port":"[fd7a:115c:a1e0:4dfd:a1c6:598f:3df6:2c27]:4"}}
{"ts":"2024-10-03T23:21:08.87474137Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaceagents/b1f1200e-d38f-4dfd-a1c6-598f3df62c27/listening-ports","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:08.818783159Z","took":"55.956367ms","status_code":200,"latency_ms":55,"request_id":"638ca838-22c6-4acc-9ae4-59b8d4726fb9"}}
{"ts":"2024-10-03T23:21:08.903993621Z","level":"DEBUG","msg":"netcheck: [v1] measuring ICMP latency of coder (999): no address for node 999b","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.911892028Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/derp/latency-check","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:21:08.91180495Z","took":"85.114µs","status_code":200,"latency_ms":0,"request_id":"5a02d423-b105-488f-a895-f1555f15e59c"}}
{"ts":"2024-10-03T23:21:08.913101957Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/derp/latency-check","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:21:08.913078401Z","took":"22.504µs","status_code":200,"latency_ms":0,"request_id":"4c5993c0-fbbf-4d62-b83c-f52d7f564727"}}
{"ts":"2024-10-03T23:21:08.914005513Z","level":"DEBUG","msg":"netcheck: [v1] report: udp=true v6=false v6os=false mapvarydest=false hair= portmap= v4a=204.16.241.141:54187 derp=999 derpdist=999v4:4ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.913944796Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:08.91394Z","key":"3_home_disk","value":"23.7/468 GiB (5%..."}}
{"ts":"2024-10-03T23:21:08.915970341Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":68}}
{"ts":"2024-10-03T23:21:08.916428667Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:21:08.91394Z","keys":["3_home_disk"]}}}
{"ts":"2024-10-03T23:21:08.917991448Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["3_home_disk"],"num":1}}
{"ts":"2024-10-03T23:21:08.92353333Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1000stun0 from 204.16.241.141:54187 (12a0f658b522875fd52767dc) in 8.334049ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.923684301Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1003stun0 from 204.16.241.141:54187 (9b43d6b86b2df4c00e0e6078) in 8.469881ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.923793883Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1004stun0 from 204.16.241.141:54187 (180863154d2d480eb50127b9) in 8.555377ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.966299893Z","level":"DEBUG","msg":"netcheck: [v1] measuring ICMP latency of coder (999): no address for node 999b","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:08.97210305Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/derp/latency-check","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:21:08.972045709Z","took":"54.756µs","status_code":200,"latency_ms":0,"request_id":"3e3ec14e-51a4-4164-9598-5fe69c77faf7"}}
{"ts":"2024-10-03T23:21:08.973238194Z","level":"DEBUG","msg":"netcheck: [v1] report: udp=true v6=false v6os=false mapvarydest=false hair= portmap= v4a=204.16.241.141:54187 derp=999 derpdist=999v4:2ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:09.354036815Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:21:09.380108419Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"agent-logs:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":20}}
{"ts":"2024-10-03T23:21:09.38058488Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:21:09.469831845Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaceagents/b1f1200e-d38f-4dfd-a1c6-598f3df62c27/logs","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:09.460442806Z","took":"9.387826ms","status_code":200,"latency_ms":9,"request_id":"35f497c9-ccbd-43ba-b54b-723a3060c54b"}}
{"ts":"2024-10-03T23:21:09.509032776Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:21:09.509584712Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:21:09.509745313Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:21:09.51511911Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/emojis/25b6.png","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:09.514611278Z","took":"504.255µs","status_code":200,"latency_ms":0,"request_id":"eeb8e4f1-74e6-46f3-bd8e-6ddac91a9a49"}}
{"ts":"2024-10-03T23:21:09.641768139Z","level":"DEBUG","msg":"started listening to event channel","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:252","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).subscribeQueue","logger_names":["pubsub"],"fields":{"event":"agent-logs:b1f1200e-d38f-4dfd-a1c6-598f3df62c27"}}
{"ts":"2024-10-03T23:21:09.642067026Z","level":"DEBUG","msg":"start log streaming loop","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:472","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","last_sent_log_id":22}}
{"ts":"2024-10-03T23:21:09.643227359Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"log","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":22,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:21:09.698468424Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:21:10.33680555Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:21:10.523685378Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"agent-logs:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":20}}
{"ts":"2024-10-03T23:21:10.525146412Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"log","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":22,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:21:10.772925302Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:21:10.772921Z","key":"6_load_host","value":"0.07"}}
{"ts":"2024-10-03T23:21:10.773349522Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:21:10.772921Z","key":"3_home_disk","value":"23.7/468 GiB (5%..."}}
{"ts":"2024-10-03T23:21:10.773593002Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:21:10.772921Z","key":"1_ram_usage","value":"0.099 GiB\n"}}
{"ts":"2024-10-03T23:21:10.773843907Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:21:10.772921Z","key":"5_mem_usage_host","value":"29.4/251 GiB (12..."}}
{"ts":"2024-10-03T23:21:10.77407291Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:21:10.772921Z","key":"4_cpu_usage_host","value":"5.68/64 cores (9..."}}
{"ts":"2024-10-03T23:21:10.774306341Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:21:10.772921Z","key":"0_cpu_usage","value":"0.676 cores\n"}}
{"ts":"2024-10-03T23:21:10.774565983Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:21:10.772921Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:21:10.776769462Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":163}}
{"ts":"2024-10-03T23:21:10.777364622Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:21:10.772921Z","keys":["6_load_host","3_home_disk","1_ram_usage","5_mem_usage_host","4_cpu_usage_host","0_cpu_usage","7_swap_host"]}}}
{"ts":"2024-10-03T23:21:10.77890013Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["6_load_host","3_home_disk","1_ram_usage","5_mem_usage_host","4_cpu_usage_host","0_cpu_usage","7_swap_host"],"num":7}}
{"ts":"2024-10-03T23:21:10.913641491Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:10.913638Z","key":"5_mem_usage_host","value":"29.4/251 GiB (12..."}}
{"ts":"2024-10-03T23:21:10.915526524Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:21:10.916054886Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:21:10.913638Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:21:10.917573441Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:21:11.354338561Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:21:11.698442256Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:21:12.267199552Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"agent-logs:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":20}}
{"ts":"2024-10-03T23:21:12.268924296Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"log","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":31,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:21:12.278659853Z","level":"DEBUG","msg":"workspace agent state report","caller":"/home/runner/work/coder/coder/coderd/agentapi/lifecycle.go:57","func":"github.com/coder/coder/v2/coderd/agentapi.(*LifecycleAPI).UpdateLifecycle","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"lifecycle":{"state":5,"changed_at":{"seconds":1727997672,"nanos":276489000}}},"request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6"}}
{"ts":"2024-10-03T23:21:12.280307347Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:21:12.281389499Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"agent-logs:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":20}}
{"ts":"2024-10-03T23:21:12.2820726Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":32,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:21:12.283592056Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"log","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":32,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:21:12.516717834Z","level":"DEBUG","msg":"start log streaming loop","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:472","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","last_sent_log_id":42}}
{"ts":"2024-10-03T23:21:12.51780785Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"log","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:21:12.914167591Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:12.914166Z","key":"1_ram_usage","value":"0.177 GiB\n"}}
{"ts":"2024-10-03T23:21:12.916131848Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:21:12.916641453Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:21:12.914166Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:21:12.917597511Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:21:13.354127246Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:21:13.923702313Z","level":"DEBUG","msg":"acquiring agent","caller":"/home/runner/work/coder/coder/coderd/tailnet.go:476","func":"github.com/coder/coder/v2/coderd.(*ServerTailnet).AgentConn","logger_names":["coderd","servertailnet"],"fields":{"agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27"}}
{"ts":"2024-10-03T23:21:13.9239286Z","level":"DEBUG","msg":"ping(fd7a:115c:a1e0:4dfd:a1c6:598f:3df6:2c27): sending TSMP ping to [T0XWz]  ...","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:1251","func":"tailscale.com/wgengine.(*userspaceEngine).Ping","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:13.923928821Z","level":"DEBUG","msg":"ping(fd7a:115c:a1e0:4dfd:a1c6:598f:3df6:2c27): sending TSMP ping to [T0XWz]  ...","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:1251","func":"tailscale.com/wgengine.(*userspaceEngine).Ping","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:13.9244509Z","level":"DEBUG","msg":"wgengine: got TSMP pong 77f5b28cebf6ce39, peerAPIPort=0; cb=true","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:362","func":"tailscale.com/wgengine.NewUserspaceEngine.func3","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:13.924547887Z","level":"DEBUG","msg":"wgengine: got TSMP pong 8b61f092f494e5e1, peerAPIPort=0; cb=true","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:362","func":"tailscale.com/wgengine.NewUserspaceEngine.func3","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:13.924812178Z","level":"DEBUG","msg":"ping(fd7a:115c:a1e0:4dfd:a1c6:598f:3df6:2c27): sending TSMP ping to [T0XWz]  ...","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:1251","func":"tailscale.com/wgengine.(*userspaceEngine).Ping","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:13.924835313Z","level":"DEBUG","msg":"ping(fd7a:115c:a1e0:4dfd:a1c6:598f:3df6:2c27): sending TSMP ping to [T0XWz]  ...","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:1251","func":"tailscale.com/wgengine.(*userspaceEngine).Ping","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:13.925131365Z","level":"DEBUG","msg":"wgengine: got TSMP pong 0a1904b23c1e31f0, peerAPIPort=0; cb=true","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:362","func":"tailscale.com/wgengine.NewUserspaceEngine.func3","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:13.925248973Z","level":"DEBUG","msg":"dial tcp","caller":"/home/runner/work/coder/coder/tailnet/conn.go:669","func":"github.com/coder/coder/v2/tailnet.(*Conn).DialContextTCP","logger_names":["coderd","servertailnet"],"fields":{"request_id":"51fb70f5-0f9b-4a8c-b48d-1a8f6f3b788b","addr_port":"[fd7a:115c:a1e0:4dfd:a1c6:598f:3df6:2c27]:4"}}
{"ts":"2024-10-03T23:21:13.92534061Z","level":"DEBUG","msg":"wgengine: got TSMP pong 76bb57b4dc584cd3, peerAPIPort=0; cb=true","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:362","func":"tailscale.com/wgengine.NewUserspaceEngine.func3","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:13.931549571Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaceagents/b1f1200e-d38f-4dfd-a1c6-598f3df62c27/listening-ports","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:13.918903908Z","took":"12.644491ms","status_code":200,"latency_ms":12,"request_id":"51fb70f5-0f9b-4a8c-b48d-1a8f6f3b788b"}}
{"ts":"2024-10-03T23:21:14.785447084Z","level":"DEBUG","msg":"got batch app health update","caller":"/home/runner/work/coder/coder/coderd/agentapi/apps.go:27","func":"github.com/coder/coder/v2/coderd/agentapi.(*AppsAPI).BatchUpdateAppHealths","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","updates":[{"id":"Og/QX5QLS7OtJ9WFHCIbBQ==","health":3}]}}
{"ts":"2024-10-03T23:21:14.789041681Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:21:14.791269077Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:21:14.791630576Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:21:14.88000778Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:14.876301676Z","took":"3.703128ms","status_code":200,"latency_ms":3,"request_id":"c44b7dfa-c42a-413d-9c44-0e25f0e4b9a2"}}
{"ts":"2024-10-03T23:21:14.897683044Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:14.876269855Z","took":"21.409632ms","status_code":200,"latency_ms":21,"request_id":"c643883b-8e98-480a-9f13-82f1e6253aae"}}
{"ts":"2024-10-03T23:21:14.900475241Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:14.876307347Z","took":"24.16583ms","status_code":200,"latency_ms":24,"request_id":"59cc998d-747f-4afd-a6f6-1b9c3736d465"}}
{"ts":"2024-10-03T23:21:15.9138415Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:15.913839Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:21:15.91415692Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:15.913839Z","key":"4_cpu_usage_host","value":"6.65/64 cores (1..."}}
{"ts":"2024-10-03T23:21:15.914342749Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:15.913839Z","key":"0_cpu_usage","value":"0.184 cores\n"}}
{"ts":"2024-10-03T23:21:15.916466304Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:21:15.917231873Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:21:15.913839Z","keys":["7_swap_host","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:21:15.9191289Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","4_cpu_usage_host","0_cpu_usage"],"num":3}}
{"ts":"2024-10-03T23:21:16.353742432Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:21:16.698451949Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:21:17.184279332Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/deployment/stats","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:17.18288104Z","took":"1.395166ms","status_code":200,"latency_ms":1,"request_id":"70e0905c-cdc2-433a-a85a-40830cef17c2"}}
{"ts":"2024-10-03T23:21:18.081438517Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:18.077815023Z","took":"3.62152ms","status_code":200,"latency_ms":3,"request_id":"87db2004-9df3-4bd5-9546-14630651a233"}}
{"ts":"2024-10-03T23:21:18.098187591Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:18.077673179Z","took":"20.510464ms","status_code":200,"latency_ms":20,"request_id":"3c172d13-0920-491b-9c77-e77c76206907"}}
{"ts":"2024-10-03T23:21:18.102110062Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:18.077882864Z","took":"24.224273ms","status_code":200,"latency_ms":24,"request_id":"e4186556-f0a5-4cea-ba9c-37e64f31842e"}}
{"ts":"2024-10-03T23:21:20.773738382Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:21:20.773734Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:21:20.774244961Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:21:20.773734Z","key":"1_ram_usage","value":"0.209 GiB\n"}}
{"ts":"2024-10-03T23:21:20.774527658Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:21:20.773734Z","key":"5_mem_usage_host","value":"29.4/251 GiB (12..."}}
{"ts":"2024-10-03T23:21:20.774794363Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:21:20.773734Z","key":"0_cpu_usage","value":"0.104 cores\n"}}
{"ts":"2024-10-03T23:21:20.775063143Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:21:20.773734Z","key":"4_cpu_usage_host","value":"0.495/64 cores (..."}}
{"ts":"2024-10-03T23:21:20.777485996Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":135}}
{"ts":"2024-10-03T23:21:20.7783832Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:21:20.773734Z","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:21:20.78048369Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","0_cpu_usage","4_cpu_usage_host"],"num":5}}
{"ts":"2024-10-03T23:21:21.3543995Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:21:21.698800101Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:21:21.914564101Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:21.914553Z","key":"5_mem_usage_host","value":"29.3/251 GiB (12..."}}
{"ts":"2024-10-03T23:21:21.916712904Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:21:21.917456331Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:21:21.914553Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:21:21.919475875Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:21:22.354089458Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:21:23.914293083Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:23.914287Z","key":"1_ram_usage","value":"0.178 GiB\n"}}
{"ts":"2024-10-03T23:21:23.916897457Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:21:23.91773201Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:21:23.914287Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:21:23.919731384Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:21:23.932023424Z","level":"DEBUG","msg":"wg: [v2] [T0XWz] - Sending keepalive packet","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/wglog/wglog.go:81","func":"tailscale.com/wgengine/wglog.NewLogger.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:24.354360709Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:21:24.50899947Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:21:24.509663253Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:21:24.509848671Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:21:25.284588174Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.234322ms"}}
{"ts":"2024-10-03T23:21:25.322248558Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:21:25.322576652Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:21:25.337105365Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:21:25.341435435Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:21:25.342750997Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:21:26.914042606Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:26.914038Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:21:26.914540478Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:26.914038Z","key":"0_cpu_usage","value":"0.103 cores\n"}}
{"ts":"2024-10-03T23:21:26.914837352Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:26.914038Z","key":"4_cpu_usage_host","value":"3.97/64 cores (6..."}}
{"ts":"2024-10-03T23:21:26.917544044Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:21:26.918292821Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:21:26.914038Z","keys":["7_swap_host","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:21:26.920460621Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","0_cpu_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:21:27.354232038Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:21:27.69868421Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:21:27.933037922Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:21:27.93431478Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:21:28.511089619Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"933.916µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:21:31.555938432Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/derp/latency-check","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:21:31.555890139Z","took":"46.31µs","status_code":200,"latency_ms":0,"request_id":"e0179c95-286a-44d4-8478-514f8f8f059e"}}
{"ts":"2024-10-03T23:21:31.77311815Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:21:31.773115Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:21:31.773390276Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:21:31.773115Z","key":"1_ram_usage","value":"0.191 GiB\n"}}
{"ts":"2024-10-03T23:21:31.773545306Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:21:31.773115Z","key":"5_mem_usage_host","value":"29.5/251 GiB (12..."}}
{"ts":"2024-10-03T23:21:31.773690095Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:21:31.773115Z","key":"0_cpu_usage","value":"0.252 cores\n"}}
{"ts":"2024-10-03T23:21:31.773836368Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:21:31.773115Z","key":"4_cpu_usage_host","value":"5.5/64 cores (9%..."}}
{"ts":"2024-10-03T23:21:31.776135232Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":135}}
{"ts":"2024-10-03T23:21:31.776798474Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:21:31.773115Z","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:21:31.778661415Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","0_cpu_usage","4_cpu_usage_host"],"num":5}}
{"ts":"2024-10-03T23:21:32.697969839Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:21:32.914050682Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:32.914046Z","key":"5_mem_usage_host","value":"29.8/251 GiB (12..."}}
{"ts":"2024-10-03T23:21:32.917023949Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:21:32.917777185Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:21:32.914046Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:21:32.920085767Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:21:33.353938833Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:21:33.388623094Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1003stun0 from 204.16.241.141:54187 (7ee5ce062cf5f6863ba7cefb) in 8.36532ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:33.388730542Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1001stun0 from 204.16.241.141:54187 (94433b5c019a06d8d306a7f3) in 8.461996ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:33.388798182Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1002stun0 from 204.16.241.141:54187 (d89d443d63e6f71969739169) in 8.52086ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:33.431095309Z","level":"DEBUG","msg":"netcheck: [v1] measuring ICMP latency of coder (999): no address for node 999b","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:33.437721086Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/derp/latency-check","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:21:33.437673614Z","took":"45.859µs","status_code":200,"latency_ms":0,"request_id":"b7dad03c-8226-4963-9eed-c5ca5bebfd9e"}}
{"ts":"2024-10-03T23:21:33.43847856Z","level":"DEBUG","msg":"netcheck: [v1] report: udp=true v6=false v6os=false mapvarydest=false hair= portmap= v4a=204.16.241.141:54187 derp=999 derpdist=999v4:1ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:33.914556182Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:33.914553Z","key":"1_ram_usage","value":"0.177 GiB\n"}}
{"ts":"2024-10-03T23:21:33.916532311Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:21:33.916898539Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:21:33.914553Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:21:33.917720328Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:21:34.353959125Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:21:36.913183312Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:36.913181Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:21:36.913462732Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:36.913181Z","key":"0_cpu_usage","value":"0.023 cores\n"}}
{"ts":"2024-10-03T23:21:36.913636398Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:36.913181Z","key":"4_cpu_usage_host","value":"4.92/64 cores (8..."}}
{"ts":"2024-10-03T23:21:36.914742466Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:21:36.915127059Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:21:36.913181Z","keys":["7_swap_host","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:21:36.916129647Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","0_cpu_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:21:37.35408306Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:21:37.698894107Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:21:38.794626846Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connections_by_proto":{"TCP":2,"TSMP":1},"connection_count":3,"connection_median_latency_ms":0.186,"rx_packets":10,"rx_bytes":1066,"tx_packets":17,"tx_bytes":1455,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":11},{"name":"magicsock_disco_recv_pong","type":1,"value":14},{"name":"magicsock_disco_recv_udp","type":1,"value":25},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":27},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":16},{"name":"magicsock_disco_sent_pong","type":1,"value":11},{"name":"magicsock_disco_sent_udp","type":1,"value":27},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":4},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":27},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":4},{"name":"netcheck_https_measure","type":1,"value":3},{"name":"netcheck_report","type":1,"value":3},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":21},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":21},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":3},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":3},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":3},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:21:38.796655678Z","level":"DEBUG","msg":"bumped deadline from activity","caller":"/home/runner/work/coder/coder/coderd/workspacestats/activitybump.go:58","func":"github.com/coder/coder/v2/coderd/workspacestats.ActivityBumpWorkspace","logger_names":["coderd","workspacestats","activity_bump"],"fields":{"request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8"}}
{"ts":"2024-10-03T23:21:38.797404264Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:21:38.798992825Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:21:38.799130381Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:21:39.508327683Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:21:39.50895768Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:21:39.509099294Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:21:39.510987143Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"770.84µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:21:40.335868634Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:21:41.773379078Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:21:41.773376Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:21:41.773859196Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:21:41.773376Z","key":"5_mem_usage_host","value":"30.9/251 GiB (12..."}}
{"ts":"2024-10-03T23:21:41.774143035Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:21:41.773376Z","key":"1_ram_usage","value":"0.186 GiB\n"}}
{"ts":"2024-10-03T23:21:41.774444327Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:21:41.773376Z","key":"4_cpu_usage_host","value":"9.78/64 cores (1..."}}
{"ts":"2024-10-03T23:21:41.774939414Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:21:41.773376Z","key":"0_cpu_usage","value":"0.219 cores\n"}}
{"ts":"2024-10-03T23:21:41.77641687Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":135}}
{"ts":"2024-10-03T23:21:41.777001189Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:21:41.773376Z","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:21:41.778424551Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":5}}
{"ts":"2024-10-03T23:21:42.698681573Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:21:43.353549774Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:21:43.962839064Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:43.962837Z","key":"5_mem_usage_host","value":"31.1/251 GiB (12..."}}
{"ts":"2024-10-03T23:21:43.964237067Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:21:43.964663361Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:21:43.962837Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:21:43.96573899Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:21:44.3533877Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:21:44.913265272Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:44.913264Z","key":"1_ram_usage","value":"0.177 GiB\n"}}
{"ts":"2024-10-03T23:21:44.914424724Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:21:44.914743139Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:21:44.913264Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:21:44.915701351Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:21:45.354228354Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:21:46.913745391Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:46.913743Z","key":"4_cpu_usage_host","value":"34.3/64 cores (5..."}}
{"ts":"2024-10-03T23:21:46.914023909Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:46.913743Z","key":"0_cpu_usage","value":"0.153 cores\n"}}
{"ts":"2024-10-03T23:21:46.914165824Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:46.913743Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:21:46.915264487Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:21:46.915613151Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:21:46.913743Z","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host"]}}}
{"ts":"2024-10-03T23:21:46.916591001Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host"],"num":3}}
{"ts":"2024-10-03T23:21:47.353857218Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:21:48.697988815Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:21:52.354326687Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:21:52.772663206Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:21:52.772659Z","key":"5_mem_usage_host","value":"32/251 GiB (13%)..."}}
{"ts":"2024-10-03T23:21:52.773039864Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:21:52.772659Z","key":"4_cpu_usage_host","value":"1.79/64 cores (3..."}}
{"ts":"2024-10-03T23:21:52.773237225Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:21:52.772659Z","key":"0_cpu_usage","value":"0.316 cores\n"}}
{"ts":"2024-10-03T23:21:52.773428785Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:21:52.772659Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:21:52.773625826Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:21:52.772659Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:21:52.77519023Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":135}}
{"ts":"2024-10-03T23:21:52.775776573Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:21:52.772659Z","keys":["5_mem_usage_host","4_cpu_usage_host","0_cpu_usage","7_swap_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:21:52.777322912Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","4_cpu_usage_host","0_cpu_usage","7_swap_host","1_ram_usage"],"num":5}}
{"ts":"2024-10-03T23:21:53.698392831Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:21:53.901897198Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:53.897292067Z","took":"4.603227ms","status_code":200,"latency_ms":4,"request_id":"53338ae0-f37d-4e0c-ae07-799304a844a0"}}
{"ts":"2024-10-03T23:21:53.913334475Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:53.913332Z","key":"5_mem_usage_host","value":"32/251 GiB (13%)..."}}
{"ts":"2024-10-03T23:21:53.914543011Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:21:53.914883189Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:21:53.913332Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:21:53.916107555Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:21:53.921108321Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:53.897397721Z","took":"23.708707ms","status_code":200,"latency_ms":23,"request_id":"9141f2cf-a1f6-45a2-a1b2-9f1d954ecde8"}}
{"ts":"2024-10-03T23:21:53.921219646Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:53.897396689Z","took":"23.81927ms","status_code":200,"latency_ms":23,"request_id":"4f09a9de-2f30-4078-8c10-2d77456aefce"}}
{"ts":"2024-10-03T23:21:54.021124083Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1003stun0 from 204.16.241.141:54187 (61363cebf67b071632941e5c) in 8.358456ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:54.021269083Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1000stun0 from 204.16.241.141:54187 (280d9632d51a5595468f6703) in 8.511181ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:54.021368796Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1004stun0 from 204.16.241.141:54187 (21b2c0feadc4f91d05b17ebc) in 8.605153ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:54.063706722Z","level":"DEBUG","msg":"netcheck: [v1] measuring ICMP latency of coder (999): no address for node 999b","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:54.074536665Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/derp/latency-check","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:21:54.07448246Z","took":"52.021µs","status_code":200,"latency_ms":0,"request_id":"2bd25be8-7741-4084-8406-68deac9544a4"}}
{"ts":"2024-10-03T23:21:54.075667631Z","level":"DEBUG","msg":"netcheck: [v1] report: udp=true v6=false v6os=false mapvarydest=false hair= portmap= v4a=204.16.241.141:54187 derp=999 derpdist=999v4:2ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:21:54.354340933Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:21:54.475674771Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:54.470866708Z","took":"4.804927ms","status_code":200,"latency_ms":4,"request_id":"8e487bbc-3877-4bf4-abde-703530a8363b"}}
{"ts":"2024-10-03T23:21:54.494062022Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:54.470838764Z","took":"23.215974ms","status_code":200,"latency_ms":23,"request_id":"6c3e211d-4c7f-43c2-b485-fa1b25543be9"}}
{"ts":"2024-10-03T23:21:54.497233933Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:54.47924394Z","took":"17.988981ms","status_code":200,"latency_ms":17,"request_id":"23f6de88-cb0c-4550-b94d-4864e1c20cb1"}}
{"ts":"2024-10-03T23:21:54.508492014Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:21:54.50903844Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:21:54.50921934Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:21:54.91431746Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:54.914314Z","key":"1_ram_usage","value":"0.178 GiB\n"}}
{"ts":"2024-10-03T23:21:54.916967502Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:21:54.917775764Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:21:54.914314Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:21:54.919682961Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:21:55.281446769Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:21:55.284438051Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.052681ms"}}
{"ts":"2024-10-03T23:21:55.323013525Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:21:55.323239792Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:21:55.334740863Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:21:55.33700047Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:21:55.33815401Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:21:55.34144954Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:21:55.342811252Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:21:55.353584526Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:21:56.791157623Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/derp/latency-check","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:21:56.791101805Z","took":"53.524µs","status_code":200,"latency_ms":0,"request_id":"2d6e8cbf-28f4-4b2a-b590-3c1f4881661c"}}
{"ts":"2024-10-03T23:21:57.914183759Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:57.91418Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:21:57.914673014Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:57.91418Z","key":"0_cpu_usage","value":"0.033 cores\n"}}
{"ts":"2024-10-03T23:21:57.915012992Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:21:57.91418Z","key":"4_cpu_usage_host","value":"2.49/64 cores (4..."}}
{"ts":"2024-10-03T23:21:57.917328808Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":101}}
{"ts":"2024-10-03T23:21:57.918025635Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:21:57.91418Z","keys":["7_swap_host","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:21:57.91999432Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","0_cpu_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:21:57.932554738Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:21:57.934466283Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:21:58.354004676Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:21:58.51223914Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.311846ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:21:58.698663132Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:21:59.201073399Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/deployment/stats","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:59.197597481Z","took":"3.473734ms","status_code":200,"latency_ms":3,"request_id":"a8a8bb22-c907-4d72-8755-9b76ad99b9f0"}}
{"ts":"2024-10-03T23:22:02.142402006Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:22:02.137311837Z","took":"5.087423ms","status_code":200,"latency_ms":5,"request_id":"08caa573-da5b-4954-9c2d-6ef443f329ae"}}
{"ts":"2024-10-03T23:22:02.156482513Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:22:02.137465224Z","took":"19.013541ms","status_code":200,"latency_ms":19,"request_id":"7a7a0f4a-4b92-47b3-8181-72b73368ed91"}}
{"ts":"2024-10-03T23:22:02.15861253Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:22:02.137431308Z","took":"21.178196ms","status_code":200,"latency_ms":21,"request_id":"d6f0912b-463b-49d5-b48d-c522a486c311"}}
{"ts":"2024-10-03T23:22:03.698663123Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:22:03.773479447Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:03.773476Z","key":"0_cpu_usage","value":"0.2 cores\n"}}
{"ts":"2024-10-03T23:22:03.773974454Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:03.773476Z","key":"4_cpu_usage_host","value":"2.1/64 cores (3%..."}}
{"ts":"2024-10-03T23:22:03.774288361Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:03.773476Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:22:03.774550167Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:03.773476Z","key":"5_mem_usage_host","value":"31.8/251 GiB (13..."}}
{"ts":"2024-10-03T23:22:03.774798176Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:03.773476Z","key":"1_ram_usage","value":"0.188 GiB\n"}}
{"ts":"2024-10-03T23:22:03.777375919Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":135}}
{"ts":"2024-10-03T23:22:03.777944217Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:22:03.773476Z","keys":["0_cpu_usage","4_cpu_usage_host","7_swap_host","5_mem_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:22:03.780495669Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage","4_cpu_usage_host","7_swap_host","5_mem_usage_host","1_ram_usage"],"num":5}}
{"ts":"2024-10-03T23:22:04.353506893Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:22:04.697956828Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:22:04.914657533Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:04.914654Z","key":"5_mem_usage_host","value":"31.8/251 GiB (13..."}}
{"ts":"2024-10-03T23:22:04.916919505Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:22:04.917519384Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:22:04.914654Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:22:04.918912738Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:22:05.353670009Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:22:05.915027708Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:05.915024Z","key":"1_ram_usage","value":"0.177 GiB\n"}}
{"ts":"2024-10-03T23:22:05.917440382Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:22:05.918051273Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:22:05.915024Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:22:05.919992144Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:22:06.353662164Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:22:06.914832402Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:06.914829Z","key":"6_load_host","value":"0.10"}}
{"ts":"2024-10-03T23:22:06.916930407Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:22:06.917519055Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:22:06.914829Z","keys":["6_load_host"]}}}
{"ts":"2024-10-03T23:22:06.919280339Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host"],"num":1}}
{"ts":"2024-10-03T23:22:07.354215004Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:22:07.914400248Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:07.914397Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:22:07.914891878Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:07.914397Z","key":"4_cpu_usage_host","value":"3.59/64 cores (6..."}}
{"ts":"2024-10-03T23:22:07.915192459Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:07.914397Z","key":"0_cpu_usage","value":"0.096 cores\n"}}
{"ts":"2024-10-03T23:22:07.917337836Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:22:07.917835318Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:22:07.914397Z","keys":["7_swap_host","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:22:07.919293346Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","4_cpu_usage_host","0_cpu_usage"],"num":3}}
{"ts":"2024-10-03T23:22:08.353464114Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:22:08.794880828Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.286,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":21},{"name":"magicsock_disco_recv_pong","type":1,"value":25},{"name":"magicsock_disco_recv_udp","type":1,"value":46},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":48},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":27},{"name":"magicsock_disco_sent_pong","type":1,"value":21},{"name":"magicsock_disco_sent_udp","type":1,"value":48},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":5},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":48},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":5},{"name":"netcheck_https_measure","type":1,"value":4},{"name":"netcheck_report","type":1,"value":4},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":24},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":24},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":4},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":4},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":4},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:22:08.798491457Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:22:08.800018058Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:22:08.801177379Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:22:09.509004985Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:22:09.509693415Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:22:09.509803408Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:22:09.511964325Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.094846ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:22:09.698389691Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:22:09.913799151Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:09.913797Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:22:09.915259594Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:22:09.915632695Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:22:09.913797Z","keys":["3_home_disk"]}}}
{"ts":"2024-10-03T23:22:09.916803788Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["3_home_disk"],"num":1}}
{"ts":"2024-10-03T23:22:10.336041062Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:22:10.354283452Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:22:10.771670329Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:10.771668Z","key":"6_load_host","value":"0.10"}}
{"ts":"2024-10-03T23:22:10.77196054Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:10.771668Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:22:10.773151071Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":83}}
{"ts":"2024-10-03T23:22:10.773566354Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:22:10.771668Z","keys":["6_load_host","3_home_disk"]}}}
{"ts":"2024-10-03T23:22:10.774574553Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["6_load_host","3_home_disk"],"num":2}}
{"ts":"2024-10-03T23:22:11.698395859Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:22:12.28568301Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:22:12.519082523Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:22:13.773668293Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:13.773664Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:22:13.774183679Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:13.773664Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:22:13.774465123Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:13.773664Z","key":"5_mem_usage_host","value":"32/251 GiB (13%)..."}}
{"ts":"2024-10-03T23:22:13.774736528Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:13.773664Z","key":"4_cpu_usage_host","value":"4.02/64 cores (6..."}}
{"ts":"2024-10-03T23:22:13.77501709Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:13.773664Z","key":"0_cpu_usage","value":"0.259 cores\n"}}
{"ts":"2024-10-03T23:22:13.777243874Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":135}}
{"ts":"2024-10-03T23:22:13.778028431Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:22:13.773664Z","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:22:13.780072502Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","4_cpu_usage_host","0_cpu_usage"],"num":5}}
{"ts":"2024-10-03T23:22:14.698545261Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:22:15.354376303Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:22:15.914732319Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:15.914726Z","key":"5_mem_usage_host","value":"31.8/251 GiB (13..."}}
{"ts":"2024-10-03T23:22:15.917077382Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:22:15.917729442Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:22:15.914726Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:22:15.919407395Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:22:16.354152356Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:22:16.91480234Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:16.914798Z","key":"1_ram_usage","value":"0.177 GiB\n"}}
{"ts":"2024-10-03T23:22:16.91710441Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:22:16.917661567Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:22:16.914798Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:22:16.919355602Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:22:17.354238779Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:22:17.913552541Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:17.913548Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:22:17.91406413Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:17.913548Z","key":"4_cpu_usage_host","value":"2.57/64 cores (4..."}}
{"ts":"2024-10-03T23:22:17.914449224Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:17.913548Z","key":"0_cpu_usage","value":"0.208 cores\n"}}
{"ts":"2024-10-03T23:22:17.91582352Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:22:17.916283319Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:22:17.913548Z","keys":["7_swap_host","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:22:17.917268944Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","4_cpu_usage_host","0_cpu_usage"],"num":3}}
{"ts":"2024-10-03T23:22:18.353731545Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:22:18.982664246Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1000stun0 from 204.16.241.141:54187 (4d219fb8fba89dce72723627) in 8.372673ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:22:18.982895583Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1002stun0 from 204.16.241.141:54187 (0c1ea3dae23e77dc0c660b94) in 8.606886ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:22:18.983051354Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: got STUN response for 1001stun0 from 204.16.241.141:54187 (5ed6ad60643028c8bc39ff49) in 8.744522ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:22:19.025304777Z","level":"DEBUG","msg":"netcheck: [v1] measuring ICMP latency of coder (999): no address for node 999b","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:22:19.033751824Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/derp/latency-check","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:22:19.033695546Z","took":"53.613µs","status_code":200,"latency_ms":0,"request_id":"e48761f0-2ba8-4130-bf57-734d750130bf"}}
{"ts":"2024-10-03T23:22:19.034912488Z","level":"DEBUG","msg":"netcheck: [v1] report: udp=true v6=false v6os=false mapvarydest=false hair= portmap= v4a=204.16.241.141:54187 derp=999 derpdist=999v4:2ms","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:22:20.649494788Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/derp/latency-check","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:22:20.649436957Z","took":"55.247µs","status_code":200,"latency_ms":0,"request_id":"c4b8012b-1472-4177-87bb-0eb582c3d476"}}
{"ts":"2024-10-03T23:22:20.698807797Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:22:23.353722308Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:22:24.508247153Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:22:24.509044113Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:22:24.50928067Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:22:24.773799116Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:24.773795Z","key":"4_cpu_usage_host","value":"3.46/64 cores (5..."}}
{"ts":"2024-10-03T23:22:24.774133973Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:24.773795Z","key":"0_cpu_usage","value":"0.306 cores\n"}}
{"ts":"2024-10-03T23:22:24.774289173Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:24.773795Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:22:24.774430707Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:24.773795Z","key":"1_ram_usage","value":"0.195 GiB\n"}}
{"ts":"2024-10-03T23:22:24.774574144Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:24.773795Z","key":"5_mem_usage_host","value":"31.9/251 GiB (13..."}}
{"ts":"2024-10-03T23:22:24.777332566Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":135}}
{"ts":"2024-10-03T23:22:24.777984957Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:22:24.773795Z","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host","1_ram_usage","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:22:24.779955496Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host","1_ram_usage","5_mem_usage_host"],"num":5}}
{"ts":"2024-10-03T23:22:25.285201872Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.377819ms"}}
{"ts":"2024-10-03T23:22:25.323678304Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:22:25.323886096Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:22:25.336436375Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:22:25.341642648Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:22:25.342560171Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:22:25.698061561Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:22:25.914011126Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:25.914007Z","key":"5_mem_usage_host","value":"31.9/251 GiB (13..."}}
{"ts":"2024-10-03T23:22:25.916180039Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:22:25.916702659Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:22:25.914007Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:22:25.918206165Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:22:26.353539464Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:22:26.915240744Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:26.915236Z","key":"1_ram_usage","value":"0.177 GiB\n"}}
{"ts":"2024-10-03T23:22:26.917594323Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:22:26.918320226Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:22:26.915236Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:22:26.920370479Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:22:27.354190564Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:22:27.914691594Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:27.914688Z","key":"4_cpu_usage_host","value":"2.39/64 cores (4..."}}
{"ts":"2024-10-03T23:22:27.915146423Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:27.914688Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:22:27.915419731Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:27.914688Z","key":"0_cpu_usage","value":"0.028 cores\n"}}
{"ts":"2024-10-03T23:22:27.917197337Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:22:27.91786088Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:22:27.914688Z","keys":["4_cpu_usage_host","7_swap_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:22:27.919337544Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","7_swap_host","0_cpu_usage"],"num":3}}
{"ts":"2024-10-03T23:22:27.931626228Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:22:27.933279874Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:22:28.353397342Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:22:28.512212942Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.389616ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:22:31.698589573Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:22:33.353920879Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:22:34.773904153Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:34.773901Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:22:34.776475564Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:22:34.777293335Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:22:34.773901Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:22:34.779268633Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:22:35.698049887Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:22:35.773073814Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:35.773069Z","key":"4_cpu_usage_host","value":"1.19/64 cores (2..."}}
{"ts":"2024-10-03T23:22:35.773580614Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:35.773069Z","key":"5_mem_usage_host","value":"31.9/251 GiB (13..."}}
{"ts":"2024-10-03T23:22:35.773853341Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:35.773069Z","key":"1_ram_usage","value":"0.189 GiB\n"}}
{"ts":"2024-10-03T23:22:35.774206994Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:35.773069Z","key":"0_cpu_usage","value":"0.133 cores\n"}}
{"ts":"2024-10-03T23:22:35.776526528Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":121}}
{"ts":"2024-10-03T23:22:35.777376881Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:22:35.773069Z","keys":["4_cpu_usage_host","5_mem_usage_host","1_ram_usage","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:22:35.779164597Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["4_cpu_usage_host","5_mem_usage_host","1_ram_usage","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:22:36.698881801Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:22:36.9154588Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:36.915455Z","key":"5_mem_usage_host","value":"31.9/251 GiB (13..."}}
{"ts":"2024-10-03T23:22:36.917488093Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:22:36.91806113Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:22:36.915455Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:22:36.920000068Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:22:37.214617585Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:22:37.210009047Z","took":"4.606314ms","status_code":200,"latency_ms":4,"request_id":"88db5510-407c-401d-8eda-65c138691bb1"}}
{"ts":"2024-10-03T23:22:37.234427276Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:22:37.210012865Z","took":"24.411846ms","status_code":200,"latency_ms":24,"request_id":"275c0a82-7ff6-48b9-98dd-f224fd684207"}}
{"ts":"2024-10-03T23:22:37.237258088Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:22:37.210086036Z","took":"27.170359ms","status_code":200,"latency_ms":27,"request_id":"adf0ec89-7c5f-430b-9c48-97921b4c0372"}}
{"ts":"2024-10-03T23:22:37.353881533Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:22:37.914011699Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:37.914008Z","key":"1_ram_usage","value":"0.177 GiB\n"}}
{"ts":"2024-10-03T23:22:37.916476464Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:22:37.91713689Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:22:37.914008Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:22:37.918825173Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:22:38.254537534Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:22:38.250713242Z","took":"3.821447ms","status_code":200,"latency_ms":3,"request_id":"3249b154-e278-41d0-9246-94b9bf9649da"}}
{"ts":"2024-10-03T23:22:38.272340566Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:22:38.250620643Z","took":"21.716397ms","status_code":200,"latency_ms":21,"request_id":"dc0aa6fc-3402-4a9c-8153-d5e1d2bac5e8"}}
{"ts":"2024-10-03T23:22:38.272609897Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:22:38.250597268Z","took":"22.011587ms","status_code":200,"latency_ms":22,"request_id":"dddcdc0b-f3ae-4b85-9f5d-49db3a11b59f"}}
{"ts":"2024-10-03T23:22:38.353889104Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:22:38.795186845Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.199,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":36},{"name":"magicsock_disco_recv_udp","type":1,"value":58},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":60},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":38},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":60},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":60},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:22:38.797148296Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:22:38.798978925Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:22:38.799652627Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:22:38.914576147Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:38.914573Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:22:38.914961171Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:38.914573Z","key":"4_cpu_usage_host","value":"1.98/64 cores (3..."}}
{"ts":"2024-10-03T23:22:38.915157621Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:38.914573Z","key":"0_cpu_usage","value":"0.081 cores\n"}}
{"ts":"2024-10-03T23:22:38.917457927Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:22:38.918169994Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:22:38.914573Z","keys":["7_swap_host","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:22:38.920130123Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","4_cpu_usage_host","0_cpu_usage"],"num":3}}
{"ts":"2024-10-03T23:22:39.354198379Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:22:39.508928723Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:22:39.509628826Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:22:39.509804376Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:22:39.511749746Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"865.382µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:22:40.336303777Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:22:41.699011676Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:22:44.354335706Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:22:44.772889905Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:44.772886Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:22:44.775143331Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:22:44.775759893Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:22:44.772886Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:22:44.777561125Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:22:45.698880339Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:22:46.773096134Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:46.773091Z","key":"5_mem_usage_host","value":"32.1/251 GiB (13..."}}
{"ts":"2024-10-03T23:22:46.773620548Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:46.773091Z","key":"1_ram_usage","value":"0.19 GiB\n"}}
{"ts":"2024-10-03T23:22:46.77390131Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:46.773091Z","key":"4_cpu_usage_host","value":"2.89/64 cores (5..."}}
{"ts":"2024-10-03T23:22:46.774157325Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:46.773091Z","key":"0_cpu_usage","value":"0.302 cores\n"}}
{"ts":"2024-10-03T23:22:46.77627552Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":121}}
{"ts":"2024-10-03T23:22:46.777209906Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:22:46.773091Z","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:22:46.779335404Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:22:46.914251669Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:46.914247Z","key":"5_mem_usage_host","value":"32.1/251 GiB (13..."}}
{"ts":"2024-10-03T23:22:46.916823461Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:22:46.917669205Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:22:46.914247Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:22:46.919584328Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:22:47.354126742Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:22:47.698047891Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:22:47.914183739Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:47.91418Z","key":"1_ram_usage","value":"0.177 GiB\n"}}
{"ts":"2024-10-03T23:22:47.916508262Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":68}}
{"ts":"2024-10-03T23:22:47.917173528Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:22:47.91418Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:22:47.919106835Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:22:48.353831683Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:22:48.918172731Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:48.918155Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:22:48.918677907Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:48.918155Z","key":"4_cpu_usage_host","value":"5.36/64 cores (8..."}}
{"ts":"2024-10-03T23:22:48.919019958Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:48.918155Z","key":"0_cpu_usage","value":"0.14 cores\n"}}
{"ts":"2024-10-03T23:22:48.92120396Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:22:48.921930515Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:22:48.918155Z","keys":["7_swap_host","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:22:48.923527031Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","4_cpu_usage_host","0_cpu_usage"],"num":3}}
{"ts":"2024-10-03T23:22:49.353681644Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:22:52.698477693Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:22:54.353918878Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:22:54.508533208Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:22:54.509223553Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:22:54.50938277Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:22:55.281796243Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:22:55.284819787Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.084592ms"}}
{"ts":"2024-10-03T23:22:55.324448848Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:22:55.32471366Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:22:55.334876845Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:22:55.336551241Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:22:55.340696403Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:22:55.341700444Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:22:55.343019364Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:22:55.772956138Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:55.772952Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:22:55.775224823Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:22:55.775855211Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:22:55.772952Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:22:55.777421809Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:22:56.698163483Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:22:56.914565485Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:56.914562Z","key":"5_mem_usage_host","value":"32/251 GiB (13%)..."}}
{"ts":"2024-10-03T23:22:56.916895179Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:22:56.917618427Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:22:56.914562Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:22:56.919661817Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:22:57.353424607Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:22:57.773002868Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:57.772998Z","key":"5_mem_usage_host","value":"32/251 GiB (13%)..."}}
{"ts":"2024-10-03T23:22:57.773470893Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:57.772998Z","key":"0_cpu_usage","value":"0.372 cores\n"}}
{"ts":"2024-10-03T23:22:57.773796602Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:57.772998Z","key":"4_cpu_usage_host","value":"2.85/64 cores (4..."}}
{"ts":"2024-10-03T23:22:57.774081663Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:22:57.772998Z","key":"1_ram_usage","value":"0.197 GiB\n"}}
{"ts":"2024-10-03T23:22:57.776220728Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":121}}
{"ts":"2024-10-03T23:22:57.777048378Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:22:57.772998Z","keys":["5_mem_usage_host","0_cpu_usage","4_cpu_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:22:57.77870002Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","0_cpu_usage","4_cpu_usage_host","1_ram_usage"],"num":4}}
{"ts":"2024-10-03T23:22:57.931439868Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:22:57.932479017Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:22:57.965333282Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending handshake initiation","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:22:57.966854703Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Received handshake response","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:22:57.967115567Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending keepalive packet","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:22:58.512250454Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.537712ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:22:58.698730079Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:22:58.914285316Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:58.914282Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:22:58.914838835Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:58.914282Z","key":"1_ram_usage","value":"0.192 GiB\n"}}
{"ts":"2024-10-03T23:22:58.915112975Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:58.914282Z","key":"4_cpu_usage_host","value":"4.06/64 cores (6..."}}
{"ts":"2024-10-03T23:22:58.915408066Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:22:58.914282Z","key":"0_cpu_usage","value":"0.087 cores\n"}}
{"ts":"2024-10-03T23:22:58.917445905Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:22:58.917988273Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:22:58.914282Z","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:22:58.919644314Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:22:59.353752021Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:23:04.698386209Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:23:05.354142382Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:23:05.773028468Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:05.773025Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:23:05.774746959Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:23:05.77532672Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:23:05.773025Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:23:05.778009155Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:23:06.6986772Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:23:07.915492593Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:23:07.915489Z","key":"6_load_host","value":"0.07"}}
{"ts":"2024-10-03T23:23:07.915961279Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:23:07.915489Z","key":"5_mem_usage_host","value":"31.9/251 GiB (13..."}}
{"ts":"2024-10-03T23:23:07.918219494Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":88}}
{"ts":"2024-10-03T23:23:07.918904217Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:23:07.915489Z","keys":["6_load_host","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:23:07.920843847Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host","5_mem_usage_host"],"num":2}}
{"ts":"2024-10-03T23:23:08.353866098Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:23:08.609330838Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:23:08.612105832Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:23:08.612536414Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:23:08.772206419Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:08.772204Z","key":"4_cpu_usage_host","value":"1.78/64 cores (3..."}}
{"ts":"2024-10-03T23:23:08.772488323Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:08.772204Z","key":"0_cpu_usage","value":"0.213 cores\n"}}
{"ts":"2024-10-03T23:23:08.772630148Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:08.772204Z","key":"5_mem_usage_host","value":"31.9/251 GiB (13..."}}
{"ts":"2024-10-03T23:23:08.772795818Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:08.772204Z","key":"1_ram_usage","value":"0.191 GiB\n"}}
{"ts":"2024-10-03T23:23:08.774154955Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":121}}
{"ts":"2024-10-03T23:23:08.774595397Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:23:08.772204Z","keys":["4_cpu_usage_host","0_cpu_usage","5_mem_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:23:08.775706164Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["4_cpu_usage_host","0_cpu_usage","5_mem_usage_host","1_ram_usage"],"num":4}}
{"ts":"2024-10-03T23:23:08.796586965Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.22,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":47},{"name":"magicsock_disco_recv_udp","type":1,"value":69},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":71},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":49},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":71},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":71},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:23:08.797791453Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:23:08.799206609Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:23:08.800172155Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:23:08.913436539Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:23:08.913435Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:23:08.91369058Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:23:08.913435Z","key":"1_ram_usage","value":"0.192 GiB\n"}}
{"ts":"2024-10-03T23:23:08.913836062Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:23:08.913435Z","key":"4_cpu_usage_host","value":"2.57/64 cores (4..."}}
{"ts":"2024-10-03T23:23:08.913972415Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:23:08.913435Z","key":"0_cpu_usage","value":"0.187 cores\n"}}
{"ts":"2024-10-03T23:23:08.91600287Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:23:08.916669138Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:23:08.913435Z","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:23:08.91844992Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:23:09.354416572Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:23:09.508719973Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:23:09.509475003Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:23:09.509650512Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:23:09.511784036Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.066231ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:23:09.698351241Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:23:10.336008471Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:23:10.914233452Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:23:10.914229Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:23:10.916690802Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:23:10.917443457Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:23:10.914229Z","keys":["3_home_disk"]}}}
{"ts":"2024-10-03T23:23:10.919293433Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["3_home_disk"],"num":1}}
{"ts":"2024-10-03T23:23:11.354104592Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:23:11.772393945Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:11.772392Z","key":"6_load_host","value":"0.07"}}
{"ts":"2024-10-03T23:23:11.772648117Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:11.772392Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:23:11.775211151Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":83}}
{"ts":"2024-10-03T23:23:11.775864123Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:23:11.772392Z","keys":["6_load_host","3_home_disk"]}}}
{"ts":"2024-10-03T23:23:11.777608835Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["6_load_host","3_home_disk"],"num":2}}
{"ts":"2024-10-03T23:23:12.286072862Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:23:12.519134108Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:23:12.698649964Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:23:16.773886035Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:16.773882Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:23:16.77651182Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:23:16.77731884Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:23:16.773882Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:23:16.77929997Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:23:17.354291873Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:23:17.698163922Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:23:18.77324763Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:18.773245Z","key":"1_ram_usage","value":"0.191 GiB\n"}}
{"ts":"2024-10-03T23:23:18.773575073Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:18.773245Z","key":"5_mem_usage_host","value":"32.1/251 GiB (13..."}}
{"ts":"2024-10-03T23:23:18.773761113Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:18.773245Z","key":"4_cpu_usage_host","value":"4.02/64 cores (6..."}}
{"ts":"2024-10-03T23:23:18.77528049Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:23:18.775743635Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:23:18.773245Z","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:23:18.777011085Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:23:18.913800783Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:23:18.913796Z","key":"5_mem_usage_host","value":"32.1/251 GiB (13..."}}
{"ts":"2024-10-03T23:23:18.915183977Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:23:18.915690215Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:23:18.913796Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:23:18.916705949Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:23:19.35440444Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:23:19.698260619Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:23:19.771649737Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:19.771648Z","key":"0_cpu_usage","value":"0.006 cores\n"}}
{"ts":"2024-10-03T23:23:19.772633919Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:23:19.77299662Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:23:19.771648Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:23:19.774085595Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:23:19.912963981Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:23:19.91296Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:23:19.913183525Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:23:19.91296Z","key":"1_ram_usage","value":"0.191 GiB\n"}}
{"ts":"2024-10-03T23:23:19.913359255Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:23:19.91296Z","key":"4_cpu_usage_host","value":"3.98/64 cores (6..."}}
{"ts":"2024-10-03T23:23:19.913569371Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:23:19.91296Z","key":"0_cpu_usage","value":"0.204 cores\n"}}
{"ts":"2024-10-03T23:23:19.914893531Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":115}}
{"ts":"2024-10-03T23:23:19.915276741Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:23:19.91296Z","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:23:19.916659504Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:23:20.353984985Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:23:20.6992415Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:23:24.508681734Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:23:24.5095387Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:23:24.509804404Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:23:25.284306674Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.128187ms"}}
{"ts":"2024-10-03T23:23:25.325695647Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:23:25.325884011Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:23:25.337256133Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:23:25.341487913Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:23:25.342550387Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:23:26.354031557Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:23:26.698601797Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:23:27.773851952Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:27.773847Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:23:27.776545799Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:23:27.777216816Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:23:27.773847Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:23:27.778943533Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:23:27.932047247Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:23:27.933775868Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:23:28.511440269Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"973.822µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:23:28.698872789Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:23:28.772773917Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:28.772769Z","key":"1_ram_usage","value":"0.193 GiB\n"}}
{"ts":"2024-10-03T23:23:28.773221021Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:28.772769Z","key":"5_mem_usage_host","value":"32.1/251 GiB (13..."}}
{"ts":"2024-10-03T23:23:28.77349968Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:28.772769Z","key":"4_cpu_usage_host","value":"1.39/64 cores (2..."}}
{"ts":"2024-10-03T23:23:28.775848139Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:23:28.776570846Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:23:28.772769Z","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:23:28.778019557Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:23:29.698572378Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:23:29.914542059Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:23:29.914537Z","key":"5_mem_usage_host","value":"31.9/251 GiB (13..."}}
{"ts":"2024-10-03T23:23:29.916849589Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:23:29.91755362Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:23:29.914537Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:23:29.919238176Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:23:30.353979634Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:23:30.771797599Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:30.771795Z","key":"0_cpu_usage","value":"0.018 cores\n"}}
{"ts":"2024-10-03T23:23:30.773038388Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:23:30.773454112Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:23:30.771795Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:23:30.774360363Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:23:30.913224232Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:23:30.91322Z","key":"4_cpu_usage_host","value":"2.36/64 cores (4..."}}
{"ts":"2024-10-03T23:23:30.913503682Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:23:30.91322Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:23:30.913644665Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:23:30.91322Z","key":"1_ram_usage","value":"0.192 GiB\n"}}
{"ts":"2024-10-03T23:23:30.913774536Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:23:30.91322Z","key":"0_cpu_usage","value":"0.048 cores\n"}}
{"ts":"2024-10-03T23:23:30.914903448Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":115}}
{"ts":"2024-10-03T23:23:30.915320023Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:23:30.91322Z","keys":["4_cpu_usage_host","7_swap_host","1_ram_usage","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:23:30.916354773Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","7_swap_host","1_ram_usage","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:23:31.353986037Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:23:31.697996295Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:23:36.354248893Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:23:36.698585924Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:23:37.773642278Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:37.773639Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:23:37.775956852Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:23:37.776629262Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:23:37.773639Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:23:37.778488005Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:23:38.359213877Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:23:38.337247527Z","took":"21.963234ms","status_code":200,"latency_ms":21,"request_id":"8ea2d111-4fb5-448b-9783-d2f6710a1ce5"}}
{"ts":"2024-10-03T23:23:38.359630682Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:23:38.337414048Z","took":"22.214409ms","status_code":200,"latency_ms":22,"request_id":"118e1afd-9b0c-40ba-8005-a16034a33527"}}
{"ts":"2024-10-03T23:23:38.69843543Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:23:38.793591302Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.162,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":58},{"name":"magicsock_disco_recv_udp","type":1,"value":80},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":82},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":60},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":82},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":82},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:23:38.794735384Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:23:38.796269309Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:23:38.796708458Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:23:39.508603866Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:23:39.509329779Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:23:39.509467926Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:23:39.511601881Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.040652ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:23:39.772654256Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:39.772649Z","key":"5_mem_usage_host","value":"32/251 GiB (13%)..."}}
{"ts":"2024-10-03T23:23:39.772912325Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:39.772649Z","key":"4_cpu_usage_host","value":"5.01/64 cores (8..."}}
{"ts":"2024-10-03T23:23:39.773068316Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:39.772649Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:23:39.775118228Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:23:39.775720112Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:23:39.772649Z","keys":["5_mem_usage_host","4_cpu_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:23:39.77737473Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","4_cpu_usage_host","1_ram_usage"],"num":3}}
{"ts":"2024-10-03T23:23:39.916654974Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:23:39.916651Z","key":"5_mem_usage_host","value":"32/251 GiB (13%)..."}}
{"ts":"2024-10-03T23:23:39.919650354Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:23:39.920167183Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:23:39.916651Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:23:39.922442902Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:23:40.336078294Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:23:40.354316068Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:23:40.698718004Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:23:40.913011486Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:23:40.913009Z","key":"4_cpu_usage_host","value":"6.32/64 cores (1..."}}
{"ts":"2024-10-03T23:23:40.913288902Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:23:40.913009Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:23:40.913433391Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:23:40.913009Z","key":"1_ram_usage","value":"0.192 GiB\n"}}
{"ts":"2024-10-03T23:23:40.913563603Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:23:40.913009Z","key":"0_cpu_usage","value":"0.14 cores\n"}}
{"ts":"2024-10-03T23:23:40.914682195Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:23:40.915078371Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:23:40.913009Z","keys":["4_cpu_usage_host","7_swap_host","1_ram_usage","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:23:40.916203876Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","7_swap_host","1_ram_usage","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:23:41.354327163Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:23:41.773749582Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:41.773744Z","key":"0_cpu_usage","value":"0.012 cores\n"}}
{"ts":"2024-10-03T23:23:41.775967069Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:23:41.776609751Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:23:41.773744Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:23:41.778319826Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:23:42.698500504Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:23:46.35435677Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:23:47.698854349Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:23:47.78030452Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:47.7803Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:23:47.782419829Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":67}}
{"ts":"2024-10-03T23:23:47.783037533Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:23:47.7803Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:23:47.784586988Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:23:48.698150357Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:23:49.775341563Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:49.775336Z","key":"5_mem_usage_host","value":"32/251 GiB (13%)..."}}
{"ts":"2024-10-03T23:23:49.775818505Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:49.775336Z","key":"1_ram_usage","value":"0.186 GiB\n"}}
{"ts":"2024-10-03T23:23:49.77614168Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:49.775336Z","key":"4_cpu_usage_host","value":"4.79/64 cores (7..."}}
{"ts":"2024-10-03T23:23:49.778425183Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:23:49.77913726Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:23:49.775336Z","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:23:49.780974832Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:23:50.6984702Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:23:50.915308592Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:23:50.915305Z","key":"5_mem_usage_host","value":"32/251 GiB (13%)..."}}
{"ts":"2024-10-03T23:23:50.91744442Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:23:50.91820002Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:23:50.915305Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:23:50.920201199Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:23:51.354032912Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:23:51.772371608Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:51.772368Z","key":"0_cpu_usage","value":"0.021 cores\n"}}
{"ts":"2024-10-03T23:23:51.773832371Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:23:51.774324693Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:23:51.772368Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:23:51.775442033Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:23:51.913943201Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:23:51.913941Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:23:51.914336702Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:23:51.913941Z","key":"1_ram_usage","value":"0.192 GiB\n"}}
{"ts":"2024-10-03T23:23:51.914625029Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:23:51.913941Z","key":"4_cpu_usage_host","value":"6.31/64 cores (1..."}}
{"ts":"2024-10-03T23:23:51.914883829Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:23:51.913941Z","key":"0_cpu_usage","value":"0.177 cores\n"}}
{"ts":"2024-10-03T23:23:51.916484894Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:23:51.917077319Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:23:51.913941Z","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:23:51.918491142Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:23:52.354298425Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:23:52.698965175Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:23:54.508778869Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:23:54.509664011Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:23:54.509946978Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:23:55.281293738Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:23:55.28443507Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.208192ms"}}
{"ts":"2024-10-03T23:23:55.326240588Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:23:55.326430134Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:23:55.334827076Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:23:55.337946125Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:23:55.338057701Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:23:55.342163657Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:23:55.343324551Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:23:57.933058693Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:23:57.935290116Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:23:58.353774294Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:23:58.511551764Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.180592ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:23:58.697934376Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:23:58.773471367Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:23:58.773469Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:23:58.776010655Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:23:58.776664098Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:23:58.773469Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:23:58.778570143Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:23:59.698769643Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:24:00.773966369Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:00.77396Z","key":"4_cpu_usage_host","value":"4.35/64 cores (7..."}}
{"ts":"2024-10-03T23:24:00.77443779Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:00.77396Z","key":"5_mem_usage_host","value":"32/251 GiB (13%)..."}}
{"ts":"2024-10-03T23:24:00.774809338Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:00.77396Z","key":"1_ram_usage","value":"0.186 GiB\n"}}
{"ts":"2024-10-03T23:24:00.777128631Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":106}}
{"ts":"2024-10-03T23:24:00.777753409Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:24:00.77396Z","keys":["4_cpu_usage_host","5_mem_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:24:00.779531466Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["4_cpu_usage_host","5_mem_usage_host","1_ram_usage"],"num":3}}
{"ts":"2024-10-03T23:24:00.913314675Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:00.913311Z","key":"5_mem_usage_host","value":"32/251 GiB (13%)..."}}
{"ts":"2024-10-03T23:24:00.914715343Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:24:00.915118943Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:24:00.913311Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:24:00.916148282Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:24:01.353610676Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:24:01.698580503Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:24:02.773293314Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:02.773289Z","key":"0_cpu_usage","value":"0.01 cores\n"}}
{"ts":"2024-10-03T23:24:02.775534486Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:24:02.776152611Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:24:02.773289Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:24:02.778004651Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:24:02.914169915Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:02.914164Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:24:02.914587842Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:02.914164Z","key":"1_ram_usage","value":"0.192 GiB\n"}}
{"ts":"2024-10-03T23:24:02.914861712Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:02.914164Z","key":"4_cpu_usage_host","value":"3.07/64 cores (5..."}}
{"ts":"2024-10-03T23:24:02.915123247Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:02.914164Z","key":"0_cpu_usage","value":"0.181 cores\n"}}
{"ts":"2024-10-03T23:24:02.917268304Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:24:02.9178973Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:24:02.914164Z","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:24:02.919972902Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:24:03.353990917Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:24:03.698752312Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:24:07.91520028Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:07.915197Z","key":"6_load_host","value":"0.06"}}
{"ts":"2024-10-03T23:24:07.91763171Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:24:07.918542751Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:24:07.915197Z","keys":["6_load_host"]}}}
{"ts":"2024-10-03T23:24:07.920368921Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host"],"num":1}}
{"ts":"2024-10-03T23:24:08.354320338Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:24:08.794779866Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.264,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":69},{"name":"magicsock_disco_recv_udp","type":1,"value":91},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":93},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":71},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":93},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":93},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:24:08.79635431Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:24:08.798887256Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:24:08.799664197Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:24:09.508007739Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:24:09.508835519Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:24:09.509015346Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:24:09.511194288Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.040181ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:24:09.698706425Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:24:09.773611945Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:09.773608Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:24:09.775549521Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:24:09.776032564Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:24:09.773608Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:24:09.777559726Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:24:10.336387166Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:24:10.6981884Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:24:11.773254097Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:11.77325Z","key":"6_load_host","value":"0.06"}}
{"ts":"2024-10-03T23:24:11.773706963Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:11.77325Z","key":"1_ram_usage","value":"0.193 GiB\n"}}
{"ts":"2024-10-03T23:24:11.774007854Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:11.77325Z","key":"5_mem_usage_host","value":"32.1/251 GiB (13..."}}
{"ts":"2024-10-03T23:24:11.774269871Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:11.77325Z","key":"4_cpu_usage_host","value":"6.57/64 cores (1..."}}
{"ts":"2024-10-03T23:24:11.777331479Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":120}}
{"ts":"2024-10-03T23:24:11.778049637Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:24:11.77325Z","keys":["6_load_host","1_ram_usage","5_mem_usage_host","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:24:11.779940172Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["6_load_host","1_ram_usage","5_mem_usage_host","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:24:11.914451829Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:11.914448Z","key":"5_mem_usage_host","value":"32.1/251 GiB (13..."}}
{"ts":"2024-10-03T23:24:11.914757611Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:11.914448Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:24:11.916663725Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":88}}
{"ts":"2024-10-03T23:24:11.917181446Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:24:11.914448Z","keys":["5_mem_usage_host","3_home_disk"]}}}
{"ts":"2024-10-03T23:24:11.918609185Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host","3_home_disk"],"num":2}}
{"ts":"2024-10-03T23:24:12.285771051Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:24:12.354282763Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:24:12.519010928Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:24:12.69802558Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:24:12.77864758Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:12.778644Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:24:12.780338118Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:24:12.780693926Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:24:12.778644Z","keys":["3_home_disk"]}}}
{"ts":"2024-10-03T23:24:12.781609375Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["3_home_disk"],"num":1}}
{"ts":"2024-10-03T23:24:12.91298916Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:12.912984Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:24:12.913223994Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:12.912984Z","key":"1_ram_usage","value":"0.193 GiB\n"}}
{"ts":"2024-10-03T23:24:12.913365036Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:12.912984Z","key":"4_cpu_usage_host","value":"4.9/64 cores (8%..."}}
{"ts":"2024-10-03T23:24:12.913502191Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:12.912984Z","key":"0_cpu_usage","value":"0.119 cores\n"}}
{"ts":"2024-10-03T23:24:12.914654909Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:24:12.915104298Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:24:12.912984Z","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:24:12.916176891Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:24:13.353448077Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:24:13.698464787Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:24:13.772700593Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:13.772698Z","key":"0_cpu_usage","value":"0.012 cores\n"}}
{"ts":"2024-10-03T23:24:13.774084919Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:24:13.774481004Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:24:13.772698Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:24:13.775478252Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:24:14.698359511Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:24:18.354458024Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:24:19.773811776Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:19.773808Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:24:19.776283825Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:24:19.77699529Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:24:19.773808Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:24:19.778801311Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:24:20.698899102Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:24:22.773013085Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:22.77301Z","key":"5_mem_usage_host","value":"32.1/251 GiB (13..."}}
{"ts":"2024-10-03T23:24:22.773298658Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:22.77301Z","key":"1_ram_usage","value":"0.187 GiB\n"}}
{"ts":"2024-10-03T23:24:22.773441313Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:22.77301Z","key":"4_cpu_usage_host","value":"2.69/64 cores (4..."}}
{"ts":"2024-10-03T23:24:22.774865637Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":106}}
{"ts":"2024-10-03T23:24:22.775257364Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:24:22.77301Z","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:24:22.776260142Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:24:22.913436571Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:22.913434Z","key":"5_mem_usage_host","value":"32.1/251 GiB (13..."}}
{"ts":"2024-10-03T23:24:22.914620139Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:24:22.914992689Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:24:22.913434Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:24:22.916067878Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:24:23.354169801Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:24:23.698137985Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:24:23.772562977Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:23.772561Z","key":"0_cpu_usage","value":"0.017 cores\n"}}
{"ts":"2024-10-03T23:24:23.773696017Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:24:23.774066944Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:24:23.772561Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:24:23.77505271Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:24:23.913688721Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:23.913684Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:24:23.914114444Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:23.913684Z","key":"1_ram_usage","value":"0.192 GiB\n"}}
{"ts":"2024-10-03T23:24:23.914380177Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:23.913684Z","key":"4_cpu_usage_host","value":"4.54/64 cores (7..."}}
{"ts":"2024-10-03T23:24:23.914637926Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:23.913684Z","key":"0_cpu_usage","value":"0.197 cores\n"}}
{"ts":"2024-10-03T23:24:23.916597193Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:24:23.916972248Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:24:23.913684Z","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:24:23.9182356Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:24:24.35402868Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:24:24.508552331Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:24:24.509388979Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:24:24.509606439Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:24:24.698155882Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:24:25.28396993Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.020709ms"}}
{"ts":"2024-10-03T23:24:25.32738983Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:24:25.327506235Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:24:25.336868783Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:24:25.342105946Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:24:25.343378917Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:24:27.933510427Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:24:27.936070846Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:24:28.51135441Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.000404ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:24:29.698593013Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:24:30.353995065Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:24:30.772942043Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:30.77294Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:24:30.774890419Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":68}}
{"ts":"2024-10-03T23:24:30.775343635Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:24:30.77294Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:24:30.777061135Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:24:31.698263466Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:24:32.914657037Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:32.914653Z","key":"5_mem_usage_host","value":"32.2/251 GiB (13..."}}
{"ts":"2024-10-03T23:24:32.916943206Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:24:32.917575648Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:24:32.914653Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:24:32.919292877Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:24:33.354268549Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:24:33.773665928Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:33.77366Z","key":"5_mem_usage_host","value":"32.2/251 GiB (13..."}}
{"ts":"2024-10-03T23:24:33.774138131Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:33.77366Z","key":"1_ram_usage","value":"0.188 GiB\n"}}
{"ts":"2024-10-03T23:24:33.774414485Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:33.77366Z","key":"4_cpu_usage_host","value":"1.39/64 cores (2..."}}
{"ts":"2024-10-03T23:24:33.776819214Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":106}}
{"ts":"2024-10-03T23:24:33.77728303Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:24:33.77366Z","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:24:33.778468241Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:24:33.914240898Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:33.914238Z","key":"1_ram_usage","value":"0.179 GiB\n"}}
{"ts":"2024-10-03T23:24:33.916484154Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:24:33.917050178Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:24:33.914238Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:24:33.918440035Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:24:34.354447902Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:24:34.698444532Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:24:34.773263306Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:34.773257Z","key":"0_cpu_usage","value":"0.011 cores\n"}}
{"ts":"2024-10-03T23:24:34.775163229Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:24:34.775781484Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:24:34.773257Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:24:34.777298306Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:24:34.91414618Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:34.914142Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:24:34.914596691Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:34.914142Z","key":"0_cpu_usage","value":"0.047 cores\n"}}
{"ts":"2024-10-03T23:24:34.914947439Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:34.914142Z","key":"4_cpu_usage_host","value":"0.889/64 cores (..."}}
{"ts":"2024-10-03T23:24:34.916692222Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:24:34.917238839Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:24:34.914142Z","keys":["7_swap_host","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:24:34.918774808Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","0_cpu_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:24:35.35399347Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:24:35.69897795Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:24:38.421409595Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:24:38.395084038Z","took":"26.323242ms","status_code":200,"latency_ms":26,"request_id":"dfd21fd7-2b2c-44e9-88e7-f4ccc45ac190"}}
{"ts":"2024-10-03T23:24:38.421538925Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:24:38.402851883Z","took":"18.685579ms","status_code":200,"latency_ms":18,"request_id":"38b6f718-418f-455a-804b-2b41b0300d1c"}}
{"ts":"2024-10-03T23:24:38.794240022Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.275,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":80},{"name":"magicsock_disco_recv_udp","type":1,"value":102},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":104},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":82},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":104},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":104},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:24:38.795556437Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:24:38.797166479Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:24:38.797962187Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:24:39.508788996Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:24:39.509708704Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:24:39.509977884Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:24:39.511361008Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.21031ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:24:40.337456511Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:24:40.773428319Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:40.773423Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:24:40.776022964Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:24:40.776871294Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:24:40.773423Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:24:40.778690531Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:24:41.353960721Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:24:41.697966401Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:24:43.773567084Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:43.773561Z","key":"1_ram_usage","value":"0.195 GiB\n"}}
{"ts":"2024-10-03T23:24:43.774034949Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:43.773561Z","key":"5_mem_usage_host","value":"31.9/251 GiB (13..."}}
{"ts":"2024-10-03T23:24:43.774333867Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:43.773561Z","key":"4_cpu_usage_host","value":"5.23/64 cores (8..."}}
{"ts":"2024-10-03T23:24:43.776559098Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:24:43.777142305Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:24:43.773561Z","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:24:43.778503526Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:24:43.914147044Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:43.914144Z","key":"5_mem_usage_host","value":"31.9/251 GiB (13..."}}
{"ts":"2024-10-03T23:24:43.91712473Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:24:43.918050038Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:24:43.914144Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:24:43.92093777Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:24:44.353575304Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:24:44.698553013Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:24:44.914112808Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:44.914109Z","key":"1_ram_usage","value":"0.179 GiB\n"}}
{"ts":"2024-10-03T23:24:44.916462349Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:24:44.917108138Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:24:44.914109Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:24:44.918753608Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:24:45.354528517Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:24:45.773972959Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:45.773969Z","key":"0_cpu_usage","value":"0.011 cores\n"}}
{"ts":"2024-10-03T23:24:45.776292893Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:24:45.777080936Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:24:45.773969Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:24:45.778965569Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:24:45.913976534Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:45.913973Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:24:45.914385976Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:45.913973Z","key":"4_cpu_usage_host","value":"1.89/64 cores (3..."}}
{"ts":"2024-10-03T23:24:45.914655847Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:45.913973Z","key":"0_cpu_usage","value":"0.093 cores\n"}}
{"ts":"2024-10-03T23:24:45.916834499Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:24:45.917495677Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:24:45.913973Z","keys":["7_swap_host","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:24:45.919409516Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","4_cpu_usage_host","0_cpu_usage"],"num":3}}
{"ts":"2024-10-03T23:24:46.354144004Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:24:46.69835484Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:24:51.773533017Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:51.773529Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:24:51.776107363Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:24:51.776851091Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:24:51.773529Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:24:51.77866159Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:24:52.354016367Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:24:52.699036098Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:24:53.913691639Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:53.913688Z","key":"5_mem_usage_host","value":"31.9/251 GiB (13..."}}
{"ts":"2024-10-03T23:24:53.915420531Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:24:53.916050949Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:24:53.913688Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:24:53.917682663Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:24:54.353636719Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:24:54.507986687Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:24:54.508680238Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:24:54.508845036Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:24:54.772336964Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:54.772334Z","key":"4_cpu_usage_host","value":"1.09/64 cores (2..."}}
{"ts":"2024-10-03T23:24:54.772595875Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:54.772334Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:24:54.77286223Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:54.772334Z","key":"5_mem_usage_host","value":"31.9/251 GiB (13..."}}
{"ts":"2024-10-03T23:24:54.774042531Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:24:54.774412767Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:24:54.772334Z","keys":["4_cpu_usage_host","1_ram_usage","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:24:54.775415676Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["4_cpu_usage_host","1_ram_usage","5_mem_usage_host"],"num":3}}
{"ts":"2024-10-03T23:24:55.281461238Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:24:55.283227623Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"1.771103ms"}}
{"ts":"2024-10-03T23:24:55.290466425Z","level":"DEBUG","msg":"pruning inactive agents","caller":"/home/runner/work/coder/coder/coderd/tailnet.go:235","func":"github.com/coder/coder/v2/coderd.(*ServerTailnet).doExpireOldAgents","logger_names":["coderd","servertailnet"],"fields":{"agent_count":1}}
{"ts":"2024-10-03T23:24:55.29059285Z","level":"DEBUG","msg":"successfully pruned inactive agents","caller":"/home/runner/work/coder/coder/coderd/tailnet.go:251","func":"github.com/coder/coder/v2/coderd.(*ServerTailnet).doExpireOldAgents","logger_names":["coderd","servertailnet"],"fields":{"deleted":0,"took":"126.685µs"}}
{"ts":"2024-10-03T23:24:55.327767819Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:24:55.327874605Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:24:55.335065756Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:24:55.336206391Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:24:55.33660461Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:24:55.337685249Z","level":"DEBUG","msg":"syncing licensed entitlements","caller":"/home/runner/work/coder/coder/enterprise/coderd/coderd.go:1068","func":"github.com/coder/coder/v2/enterprise/coderd.(*API).runEntitlementsLoop","logger_names":["coderd"]}
{"ts":"2024-10-03T23:24:55.338262214Z","level":"DEBUG","msg":"synced licensed entitlements","caller":"/home/runner/work/coder/coder/enterprise/coderd/coderd.go:1076","func":"github.com/coder/coder/v2/enterprise/coderd.(*API).runEntitlementsLoop","logger_names":["coderd"]}
{"ts":"2024-10-03T23:24:55.341453904Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:24:55.342477212Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:24:55.348758453Z","level":"INFO","msg":"purged old database entries","caller":"/home/runner/work/coder/coder/coderd/database/dbpurge/dbpurge.go:66","func":"github.com/coder/coder/v2/coderd/database/dbpurge.New.func1.1","logger_names":["dbpurge"],"fields":{"duration":"3.095832ms"}}
{"ts":"2024-10-03T23:24:55.698819118Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:24:55.781642035Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:24:55.78164Z","key":"0_cpu_usage","value":"0.014 cores\n"}}
{"ts":"2024-10-03T23:24:55.783654655Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":68}}
{"ts":"2024-10-03T23:24:55.784218465Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:24:55.78164Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:24:55.785833577Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:24:55.912994639Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:55.912993Z","key":"0_cpu_usage","value":"0.225 cores\n"}}
{"ts":"2024-10-03T23:24:55.913231517Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:55.912993Z","key":"4_cpu_usage_host","value":"4.18/64 cores (7..."}}
{"ts":"2024-10-03T23:24:55.913370786Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:55.912993Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:24:55.913501669Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:24:55.912993Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:24:55.915236863Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:24:55.915709927Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:24:55.912993Z","keys":["0_cpu_usage","4_cpu_usage_host","7_swap_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:24:55.917370337Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage","4_cpu_usage_host","7_swap_host","1_ram_usage"],"num":4}}
{"ts":"2024-10-03T23:24:56.353993948Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:24:56.698586583Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:24:57.933372638Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:24:57.935829707Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:24:57.972537694Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending handshake initiation","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:24:57.974061409Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Received handshake response","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:24:57.974240846Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending keepalive packet","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:24:58.511478344Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.345941ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:25:00.000500534Z","level":"DEBUG","msg":"rolling up data","caller":"/home/runner/work/coder/coder/coderd/database/dbrollup/dbrollup.go:91","func":"github.com/coder/coder/v2/coderd/database/dbrollup.(*Rolluper).start.func1","logger_names":["coderd","dbrollup"]}
{"ts":"2024-10-03T23:25:00.005808744Z","level":"DEBUG","msg":"rolled up data","caller":"/home/runner/work/coder/coder/coderd/database/dbrollup/dbrollup.go:126","func":"github.com/coder/coder/v2/coderd/database/dbrollup.(*Rolluper).start.func1","logger_names":["coderd","dbrollup"],"fields":{"took":"5.006838ms","event":{"template_usage_stats":true}}}
{"ts":"2024-10-03T23:25:00.006011807Z","level":"DEBUG","msg":"next rollup at","caller":"/home/runner/work/coder/coder/coderd/database/dbrollup/dbrollup.go:174","func":"github.com/coder/coder/v2/coderd/database/dbrollup.(*Rolluper).start","logger_names":["coderd","dbrollup"],"fields":{"next":"2024-10-03T23:30:00Z"}}
{"ts":"2024-10-03T23:25:02.354059003Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:25:02.697996482Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:25:02.77357214Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:02.773569Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:25:02.775749299Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:25:02.776292919Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:25:02.773569Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:25:02.777829209Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:25:03.69799718Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:25:04.915145705Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:04.91514Z","key":"5_mem_usage_host","value":"31.9/251 GiB (13..."}}
{"ts":"2024-10-03T23:25:04.917748957Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":73}}
{"ts":"2024-10-03T23:25:04.918485761Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:25:04.91514Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:25:04.920439398Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:25:05.354254481Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:25:05.773572953Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:05.773571Z","key":"1_ram_usage","value":"0.193 GiB\n"}}
{"ts":"2024-10-03T23:25:05.773824389Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:05.773571Z","key":"5_mem_usage_host","value":"31.6/251 GiB (13..."}}
{"ts":"2024-10-03T23:25:05.774034595Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:05.773571Z","key":"4_cpu_usage_host","value":"2/64 cores (3%)\n"}}
{"ts":"2024-10-03T23:25:05.775743738Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:25:05.77627193Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:25:05.773571Z","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:25:05.778318546Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:25:06.698516877Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:25:06.773183437Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:06.77318Z","key":"0_cpu_usage","value":"0.011 cores\n"}}
{"ts":"2024-10-03T23:25:06.775253138Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":68}}
{"ts":"2024-10-03T23:25:06.775855543Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:25:06.77318Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:25:06.777526593Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:25:06.914099398Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:06.914096Z","key":"1_ram_usage","value":"0.193 GiB\n"}}
{"ts":"2024-10-03T23:25:06.914494271Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:06.914096Z","key":"0_cpu_usage","value":"0.143 cores\n"}}
{"ts":"2024-10-03T23:25:06.914763942Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:06.914096Z","key":"4_cpu_usage_host","value":"4.47/64 cores (7..."}}
{"ts":"2024-10-03T23:25:06.915022512Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:06.914096Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:25:06.917445987Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:25:06.918129408Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:25:06.914096Z","keys":["1_ram_usage","0_cpu_usage","4_cpu_usage_host","7_swap_host"]}}}
{"ts":"2024-10-03T23:25:06.920232062Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage","0_cpu_usage","4_cpu_usage_host","7_swap_host"],"num":4}}
{"ts":"2024-10-03T23:25:07.354170935Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:25:07.698072607Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:25:07.917002026Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:07.916999Z","key":"6_load_host","value":"0.04"}}
{"ts":"2024-10-03T23:25:07.918717573Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:25:07.919227539Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:25:07.916999Z","keys":["6_load_host"]}}}
{"ts":"2024-10-03T23:25:07.920739812Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host"],"num":1}}
{"ts":"2024-10-03T23:25:08.354027356Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:25:08.796862886Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.329,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":91},{"name":"magicsock_disco_recv_udp","type":1,"value":113},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":115},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":93},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":115},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":115},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:25:08.798895656Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:25:08.802039683Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:25:08.802223508Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:25:09.508591447Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:25:09.509414869Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:25:09.509660564Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:25:09.511672082Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"894.338µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:25:10.3362708Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:25:11.773578245Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:11.773575Z","key":"6_load_host","value":"0.04"}}
{"ts":"2024-10-03T23:25:11.774826658Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:25:11.77517956Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:25:11.773575Z","keys":["6_load_host"]}}}
{"ts":"2024-10-03T23:25:11.776237395Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["6_load_host"],"num":1}}
{"ts":"2024-10-03T23:25:12.285146005Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:25:12.520175888Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:25:12.697942521Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:25:12.914369785Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:12.914363Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:25:12.916683217Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:25:12.917322893Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:25:12.914363Z","keys":["3_home_disk"]}}}
{"ts":"2024-10-03T23:25:12.91901282Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["3_home_disk"],"num":1}}
{"ts":"2024-10-03T23:25:13.354297785Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:25:13.774446874Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:13.774443Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:25:13.774905741Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:13.774443Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:25:13.778340811Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":83}}
{"ts":"2024-10-03T23:25:13.779045182Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:25:13.774443Z","keys":["7_swap_host","3_home_disk"]}}}
{"ts":"2024-10-03T23:25:13.780655275Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host","3_home_disk"],"num":2}}
{"ts":"2024-10-03T23:25:14.698087111Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:25:15.772606719Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:15.772603Z","key":"1_ram_usage","value":"0.195 GiB\n"}}
{"ts":"2024-10-03T23:25:15.772944431Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:15.772603Z","key":"5_mem_usage_host","value":"31.6/251 GiB (13..."}}
{"ts":"2024-10-03T23:25:15.773138547Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:15.772603Z","key":"4_cpu_usage_host","value":"5.6/64 cores (9%..."}}
{"ts":"2024-10-03T23:25:15.774752827Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:25:15.775246201Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:25:15.772603Z","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:25:15.77666309Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:25:15.914465662Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:15.914462Z","key":"5_mem_usage_host","value":"31.6/251 GiB (13..."}}
{"ts":"2024-10-03T23:25:15.916997386Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:25:15.917645178Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:25:15.914462Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:25:15.919081264Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:25:16.354132679Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:25:16.698813688Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:25:16.914901115Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:16.914898Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:25:16.915345725Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:16.914898Z","key":"1_ram_usage","value":"0.192 GiB\n"}}
{"ts":"2024-10-03T23:25:16.915630646Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:16.914898Z","key":"0_cpu_usage","value":"0.034 cores\n"}}
{"ts":"2024-10-03T23:25:16.915897081Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:16.914898Z","key":"4_cpu_usage_host","value":"6.32/64 cores (1..."}}
{"ts":"2024-10-03T23:25:16.918605075Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:25:16.919231967Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:25:16.914898Z","keys":["7_swap_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:25:16.921073747Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:25:17.353902385Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:25:17.773028627Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:17.773024Z","key":"0_cpu_usage","value":"0.004 cores\n"}}
{"ts":"2024-10-03T23:25:17.775454606Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:25:17.776130603Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:25:17.773024Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:25:17.777999756Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:25:18.697955643Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:25:22.354386644Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:25:23.698491494Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:25:23.772535531Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:23.772532Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:25:23.775151678Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:25:23.77584559Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:25:23.772532Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:25:23.777228423Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:25:24.5090672Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:25:24.698752092Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:25:25.284601722Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.143496ms"}}
{"ts":"2024-10-03T23:25:25.336410679Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:25:25.328979755Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:25:25.91405129Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:25.914047Z","key":"5_mem_usage_host","value":"28.8/251 GiB (11..."}}
{"ts":"2024-10-03T23:25:25.341617503Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:25:29.186609994Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:25:26.773302207Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:26.773297Z","key":"1_ram_usage","value":"0.195 GiB\n"}}
{"ts":"2024-10-03T23:25:28.354137209Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:25:27.933137665Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:25:29.187043141Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:26.773297Z","key":"5_mem_usage_host","value":"28.8/251 GiB (11..."}}
{"ts":"2024-10-03T23:25:29.187384861Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:25:29.187434467Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:25:29.187425831Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:26.773297Z","key":"4_cpu_usage_host","value":"3.45/64 cores (5..."}}
{"ts":"2024-10-03T23:25:29.187795305Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:25:29.189135626Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:25:29.189700287Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:25:25.914047Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:25:29.190106963Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:25:29.190706132Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:25:26.773297Z","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:25:29.192064287Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:25:29.192742318Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:25:29.193372245Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:25:29.354024958Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:25:29.511521409Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.032265ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:25:29.698982803Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:25:29.773743175Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:29.77374Z","key":"0_cpu_usage","value":"0.017 cores\n"}}
{"ts":"2024-10-03T23:25:29.776028833Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":68}}
{"ts":"2024-10-03T23:25:29.776726262Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:25:29.77374Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:25:29.778796764Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:25:29.914561428Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:29.914557Z","key":"4_cpu_usage_host","value":"1.97/64 cores (3..."}}
{"ts":"2024-10-03T23:25:29.915016077Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:29.914557Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:25:29.915318772Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:29.914557Z","key":"1_ram_usage","value":"0.192 GiB\n"}}
{"ts":"2024-10-03T23:25:29.91559705Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:29.914557Z","key":"0_cpu_usage","value":"0.153 cores\n"}}
{"ts":"2024-10-03T23:25:29.917703452Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:25:29.918381853Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:25:29.914557Z","keys":["4_cpu_usage_host","7_swap_host","1_ram_usage","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:25:29.920350468Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","7_swap_host","1_ram_usage","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:25:30.353813355Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:25:30.699004872Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:25:33.77337468Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:33.773371Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:25:33.775745212Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:25:33.776567061Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:25:33.773371Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:25:33.777886341Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:25:34.698995101Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:25:36.353686172Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:25:36.772295998Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:36.772292Z","key":"5_mem_usage_host","value":"28.8/251 GiB (11..."}}
{"ts":"2024-10-03T23:25:36.772587873Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:36.772292Z","key":"1_ram_usage","value":"0.188 GiB\n"}}
{"ts":"2024-10-03T23:25:36.772812136Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:36.772292Z","key":"4_cpu_usage_host","value":"3.68/64 cores (6..."}}
{"ts":"2024-10-03T23:25:36.774609501Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:25:36.775148422Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:25:36.772292Z","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:25:36.777130403Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:25:36.914440495Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:36.914436Z","key":"5_mem_usage_host","value":"28.8/251 GiB (11..."}}
{"ts":"2024-10-03T23:25:36.916665606Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:25:36.917318919Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:25:36.914436Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:25:36.918878374Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:25:37.353894523Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:25:37.698886476Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:25:38.494489734Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:25:38.472414813Z","took":"22.071955ms","status_code":200,"latency_ms":22,"request_id":"91ac69bd-198f-4759-99a3-3ad114f3aebf"}}
{"ts":"2024-10-03T23:25:38.495600852Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:25:38.472495709Z","took":"23.101796ms","status_code":200,"latency_ms":23,"request_id":"52b50482-6d98-44f0-a8cb-15f7867c108c"}}
{"ts":"2024-10-03T23:25:38.84961314Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:38.849611Z","key":"0_cpu_usage","value":"0.007 cores\n"}}
{"ts":"2024-10-03T23:25:38.850818751Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:25:38.851276365Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:25:38.849611Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:25:38.851540836Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.282,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":102},{"name":"magicsock_disco_recv_udp","type":1,"value":124},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":126},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":104},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":126},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":126},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:25:38.852912298Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:25:38.853277614Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:25:38.854354345Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:25:38.855548433Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:25:38.913698187Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:38.913693Z","key":"1_ram_usage","value":"0.192 GiB\n"}}
{"ts":"2024-10-03T23:25:38.914087149Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:38.913693Z","key":"0_cpu_usage","value":"0.04 cores\n"}}
{"ts":"2024-10-03T23:25:38.914350488Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:38.913693Z","key":"4_cpu_usage_host","value":"0.595/64 cores (..."}}
{"ts":"2024-10-03T23:25:38.91462576Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:38.913693Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:25:38.916763192Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:25:38.917388982Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:25:38.913693Z","keys":["1_ram_usage","0_cpu_usage","4_cpu_usage_host","7_swap_host"]}}}
{"ts":"2024-10-03T23:25:38.919275198Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage","0_cpu_usage","4_cpu_usage_host","7_swap_host"],"num":4}}
{"ts":"2024-10-03T23:25:39.354014433Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:25:39.508562295Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:25:39.509245265Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:25:39.509354707Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:25:39.511329003Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"916.461µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:25:39.69879648Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:25:40.336269962Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:25:44.773259398Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:44.773255Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:25:44.774955136Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:25:44.775504948Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:25:44.773255Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:25:44.776718384Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:25:45.353602397Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:25:45.69849069Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:25:46.77259169Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:46.772588Z","key":"1_ram_usage","value":"0.195 GiB\n"}}
{"ts":"2024-10-03T23:25:46.773023124Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:46.772588Z","key":"5_mem_usage_host","value":"28.8/251 GiB (11..."}}
{"ts":"2024-10-03T23:25:46.773292755Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:46.772588Z","key":"4_cpu_usage_host","value":"1.18/64 cores (2..."}}
{"ts":"2024-10-03T23:25:46.774796341Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:25:46.775485784Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:25:46.772588Z","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:25:46.776874809Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:25:46.915392165Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:46.915388Z","key":"5_mem_usage_host","value":"28.8/251 GiB (11..."}}
{"ts":"2024-10-03T23:25:46.9179815Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:25:46.918532174Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:25:46.915388Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:25:46.920871146Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:25:47.35368492Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:25:47.698164032Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:25:49.773322519Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:49.773317Z","key":"0_cpu_usage","value":"0.011 cores\n"}}
{"ts":"2024-10-03T23:25:49.775294882Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:25:49.775911924Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:25:49.773317Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:25:49.777524612Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:25:49.914130673Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:49.914128Z","key":"0_cpu_usage","value":"0.188 cores\n"}}
{"ts":"2024-10-03T23:25:49.914476421Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:49.914128Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:25:49.914742005Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:49.914128Z","key":"1_ram_usage","value":"0.193 GiB\n"}}
{"ts":"2024-10-03T23:25:49.914993521Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:49.914128Z","key":"4_cpu_usage_host","value":"2.27/64 cores (4..."}}
{"ts":"2024-10-03T23:25:49.917285351Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:25:49.917980735Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:25:49.914128Z","keys":["0_cpu_usage","7_swap_host","1_ram_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:25:49.91978882Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage","7_swap_host","1_ram_usage","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:25:50.354171979Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:25:50.698549455Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:25:53.496966743Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/users/me","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:25:53.493350573Z","took":"3.613825ms","status_code":200,"latency_ms":3,"request_id":"ca2a7944-388e-464b-9fa0-91deafebc505"}}
{"ts":"2024-10-03T23:25:53.516426288Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:25:53.493311758Z","took":"23.113058ms","status_code":200,"latency_ms":23,"request_id":"7fd94b0a-30a2-4452-9354-79517cabb4fe"}}
{"ts":"2024-10-03T23:25:53.610436481Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:25:53.585982411Z","took":"24.451584ms","status_code":200,"latency_ms":24,"request_id":"f44ad99c-16fe-4f26-b096-03448ab8ecb7"}}
{"ts":"2024-10-03T23:25:54.50905332Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:25:54.509970383Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:25:54.510156483Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:25:54.773633798Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:54.773631Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:25:54.776048466Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:25:54.776613428Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:25:54.773631Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:25:54.778098869Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:25:55.281041364Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:25:55.284061572Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.072339ms"}}
{"ts":"2024-10-03T23:25:55.334730767Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:25:55.336788284Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:25:55.338036447Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:25:55.341648048Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:25:55.34268379Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:25:55.698978863Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:25:56.353759494Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:25:57.772228756Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:57.772223Z","key":"5_mem_usage_host","value":"28.8/251 GiB (11..."}}
{"ts":"2024-10-03T23:25:57.772491675Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:57.772223Z","key":"1_ram_usage","value":"0.188 GiB\n"}}
{"ts":"2024-10-03T23:25:57.772627758Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:57.772223Z","key":"4_cpu_usage_host","value":"1.87/64 cores (3..."}}
{"ts":"2024-10-03T23:25:57.774512241Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:25:57.775075139Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:25:57.772223Z","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:25:57.776575549Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:25:57.914139352Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:57.914135Z","key":"5_mem_usage_host","value":"28.8/251 GiB (11..."}}
{"ts":"2024-10-03T23:25:57.91643049Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:25:57.917060919Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:25:57.914135Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:25:57.918826983Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:25:57.93251921Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:25:57.93454703Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:25:58.354462844Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:25:58.511561258Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.450444ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:25:58.697945421Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:25:59.188112241Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:25:59.188362685Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:25:59.773404691Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:25:59.773399Z","key":"0_cpu_usage","value":"0.015 cores\n"}}
{"ts":"2024-10-03T23:25:59.775879214Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:25:59.776685502Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:25:59.773399Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:25:59.778233354Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:25:59.913965096Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:59.913959Z","key":"0_cpu_usage","value":"0.174 cores\n"}}
{"ts":"2024-10-03T23:25:59.914380429Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:59.913959Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:25:59.914733762Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:59.913959Z","key":"1_ram_usage","value":"0.193 GiB\n"}}
{"ts":"2024-10-03T23:25:59.915050604Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:25:59.913959Z","key":"4_cpu_usage_host","value":"2.87/64 cores (4..."}}
{"ts":"2024-10-03T23:25:59.917238764Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:25:59.918041867Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:25:59.913959Z","keys":["0_cpu_usage","7_swap_host","1_ram_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:25:59.920181693Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage","7_swap_host","1_ram_usage","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:26:00.354322404Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:26:00.698038963Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:26:05.698111519Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:26:05.773861374Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:26:05.773856Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:26:05.77585067Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:26:05.776566583Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:26:05.773856Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:26:05.778121149Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:26:06.354312838Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:26:06.698579211Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:26:07.772759751Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:26:07.772755Z","key":"1_ram_usage","value":"0.195 GiB\n"}}
{"ts":"2024-10-03T23:26:07.773119136Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:26:07.772755Z","key":"5_mem_usage_host","value":"28.8/251 GiB (11..."}}
{"ts":"2024-10-03T23:26:07.773322389Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:26:07.772755Z","key":"4_cpu_usage_host","value":"1.47/64 cores (2..."}}
{"ts":"2024-10-03T23:26:07.775391298Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:26:07.776053448Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:26:07.772755Z","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:26:07.777902983Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:26:08.698077667Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:26:08.913823388Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:26:08.91382Z","key":"6_load_host","value":"0.03"}}
{"ts":"2024-10-03T23:26:09.508358465Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:26:10.337751418Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:26:10.773196642Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:26:10.773193Z","key":"0_cpu_usage","value":"0.002 cores\n"}}
{"ts":"2024-10-03T23:26:11.354434045Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:26:08.795837509Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.22,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":113},{"name":"magicsock_disco_recv_udp","type":1,"value":135},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":137},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":115},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":137},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":137},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:26:12.519221872Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:26:13.698625243Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:26:29.325285239Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:26:08.91382Z","key":"5_mem_usage_host","value":"28.8/251 GiB (11..."}}
{"ts":"2024-10-03T23:26:23.071124306Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending keepalive packet","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:26:25.284303242Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.230315ms"}}
{"ts":"2024-10-03T23:26:12.287321965Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:26:25.341386115Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:26:29.325833629Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:26:29.326008808Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:26:29.326119181Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:26:29.189563095Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:26:27.933405281Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:26:29.326289691Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:26:29.325960996Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:26:29.326457335Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:26:29.328000268Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:26:29.32940338Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:26:29.3297447Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:26:29.32979136Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:26:29.329834453Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:26:10.773193Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:26:29.33090347Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:26:29.332335658Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:26:29.33275569Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:26:29.332934215Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:26:29.333130324Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:26:29.33475811Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":87}}
{"ts":"2024-10-03T23:26:29.335284167Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:26:08.91382Z","keys":["6_load_host","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:26:29.337618069Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host","5_mem_usage_host"],"num":2}}
{"ts":"2024-10-03T23:26:29.337797646Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:26:29.354176938Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:26:29.512389597Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":2,"elapsed":"1.874343ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:26:29.699114671Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:26:29.772598557Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:26:29.772593Z","key":"1_ram_usage","value":"0.196 GiB\n"}}
{"ts":"2024-10-03T23:26:29.772878288Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:26:29.772593Z","key":"4_cpu_usage_host","value":"1.49/64 cores (2..."}}
{"ts":"2024-10-03T23:26:29.77302916Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:26:29.772593Z","key":"0_cpu_usage","value":"0.019 cores\n"}}
{"ts":"2024-10-03T23:26:29.773168028Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:26:29.772593Z","key":"6_load_host","value":"0.03"}}
{"ts":"2024-10-03T23:26:29.773303781Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:26:29.772593Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:26:29.773435235Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:26:29.772593Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:26:29.773567941Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:26:29.772593Z","key":"5_mem_usage_host","value":"28.9/251 GiB (11..."}}
{"ts":"2024-10-03T23:26:29.775360847Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":163}}
{"ts":"2024-10-03T23:26:29.776120225Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:26:29.772593Z","keys":["1_ram_usage","4_cpu_usage_host","0_cpu_usage","6_load_host","3_home_disk","7_swap_host","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:26:29.777899264Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","4_cpu_usage_host","0_cpu_usage","6_load_host","3_home_disk","7_swap_host","5_mem_usage_host"],"num":7}}
{"ts":"2024-10-03T23:26:29.915853773Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:26:29.915849Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:26:29.916255169Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:26:29.915849Z","key":"1_ram_usage","value":"0.193 GiB\n"}}
{"ts":"2024-10-03T23:26:29.916527666Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:26:29.915849Z","key":"4_cpu_usage_host","value":"2.47/64 cores (4..."}}
{"ts":"2024-10-03T23:26:29.916786166Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:26:29.915849Z","key":"0_cpu_usage","value":"0.218 cores\n"}}
{"ts":"2024-10-03T23:26:29.917050968Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:26:29.915849Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:26:29.917365836Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:26:29.915849Z","key":"5_mem_usage_host","value":"28.8/251 GiB (11..."}}
{"ts":"2024-10-03T23:26:29.919408114Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":149}}
{"ts":"2024-10-03T23:26:29.919994237Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:26:29.915849Z","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage","3_home_disk","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:26:29.921844744Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage","3_home_disk","5_mem_usage_host"],"num":6}}
{"ts":"2024-10-03T23:26:30.35419634Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:26:30.69796273Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:26:32.772962428Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:26:32.772958Z","key":"0_cpu_usage","value":"0.01 cores\n"}}
{"ts":"2024-10-03T23:26:32.774513176Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:26:32.775059372Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:26:32.772958Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:26:32.776447324Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:26:32.913911496Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:26:32.913907Z","key":"4_cpu_usage_host","value":"1.49/64 cores (2..."}}
{"ts":"2024-10-03T23:26:32.914201527Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:26:32.913907Z","key":"0_cpu_usage","value":"0.113 cores\n"}}
{"ts":"2024-10-03T23:26:32.914339514Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:26:32.913907Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:26:32.914473282Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:26:32.913907Z","key":"1_ram_usage","value":"0.193 GiB\n"}}
{"ts":"2024-10-03T23:26:32.915847058Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:26:32.916382523Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:26:32.913907Z","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:26:32.917672666Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host","1_ram_usage"],"num":4}}
{"ts":"2024-10-03T23:26:33.353632849Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:26:33.698533652Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:26:38.353950358Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:26:38.772837639Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:26:38.772833Z","key":"4_cpu_usage_host","value":"1.38/64 cores (2..."}}
{"ts":"2024-10-03T23:26:38.77325712Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:26:38.772833Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:26:38.773524677Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:26:38.772833Z","key":"1_ram_usage","value":"0.197 GiB\n"}}
{"ts":"2024-10-03T23:26:38.773792795Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:26:38.772833Z","key":"5_mem_usage_host","value":"28.8/251 GiB (11..."}}
{"ts":"2024-10-03T23:26:38.775796589Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":121}}
{"ts":"2024-10-03T23:26:38.776444271Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:26:38.772833Z","keys":["4_cpu_usage_host","7_swap_host","1_ram_usage","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:26:38.778478112Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["4_cpu_usage_host","7_swap_host","1_ram_usage","5_mem_usage_host"],"num":4}}
{"ts":"2024-10-03T23:26:38.7950781Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.222,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":124},{"name":"magicsock_disco_recv_udp","type":1,"value":146},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":148},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":126},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":148},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":148},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:26:38.797204661Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:26:38.800197035Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:26:38.800289744Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:26:38.914616431Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:26:38.914613Z","key":"5_mem_usage_host","value":"28.8/251 GiB (11..."}}
{"ts":"2024-10-03T23:26:38.916734054Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:26:38.917340717Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:26:38.914613Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:26:38.919092974Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:26:39.353561404Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:26:39.50894234Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:26:39.509522361Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:26:39.509699594Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:26:39.51151863Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"746.854µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:26:39.697994753Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:26:40.336432993Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:26:42.914559105Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:26:42.914555Z","key":"1_ram_usage","value":"0.185 GiB\n"}}
{"ts":"2024-10-03T23:26:42.91497573Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:26:42.914555Z","key":"0_cpu_usage","value":"0.014 cores\n"}}
{"ts":"2024-10-03T23:26:42.915219662Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:26:42.914555Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:26:42.917345942Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":97}}
{"ts":"2024-10-03T23:26:42.917994065Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:26:42.914555Z","keys":["1_ram_usage","0_cpu_usage","7_swap_host"]}}}
{"ts":"2024-10-03T23:26:42.919886803Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage","0_cpu_usage","7_swap_host"],"num":3}}
{"ts":"2024-10-03T23:26:43.354324093Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:26:43.773020175Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:26:43.773017Z","key":"0_cpu_usage","value":"0.017 cores\n"}}
{"ts":"2024-10-03T23:26:43.775094746Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:26:43.775662523Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:26:43.773017Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:26:43.777400372Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:26:43.914681491Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:26:43.914675Z","key":"4_cpu_usage_host","value":"3.61/64 cores (6..."}}
{"ts":"2024-10-03T23:26:43.9167968Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:26:43.917408702Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:26:43.914675Z","keys":["4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:26:43.91915065Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host"],"num":1}}
{"ts":"2024-10-03T23:26:44.353931434Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:26:44.698809613Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:26:48.772631976Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:26:48.772627Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:26:48.773079641Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:26:48.772627Z","key":"1_ram_usage","value":"0.196 GiB\n"}}
{"ts":"2024-10-03T23:26:48.773351867Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:26:48.772627Z","key":"5_mem_usage_host","value":"28.8/251 GiB (11..."}}
{"ts":"2024-10-03T23:26:48.773702595Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:26:48.772627Z","key":"4_cpu_usage_host","value":"1.58/64 cores (2..."}}
{"ts":"2024-10-03T23:26:48.775132078Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":121}}
{"ts":"2024-10-03T23:26:48.775630933Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:26:48.772627Z","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:26:48.777050346Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:26:49.698601243Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:26:49.915616971Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:26:49.915612Z","key":"5_mem_usage_host","value":"28.8/251 GiB (11..."}}
{"ts":"2024-10-03T23:26:49.918395422Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:26:49.919027474Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:26:49.915612Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:26:49.921127183Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:26:50.35440367Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:26:52.914778505Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:26:52.914774Z","key":"0_cpu_usage","value":"0.093 cores\n"}}
{"ts":"2024-10-03T23:26:52.915258062Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:26:52.914774Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:26:52.91568137Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:26:52.914774Z","key":"1_ram_usage","value":"0.186 GiB\n"}}
{"ts":"2024-10-03T23:26:52.917803192Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":97}}
{"ts":"2024-10-03T23:26:52.918391118Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:26:52.914774Z","keys":["0_cpu_usage","7_swap_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:26:52.920106995Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage","7_swap_host","1_ram_usage"],"num":3}}
{"ts":"2024-10-03T23:26:53.354254366Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:26:53.914285244Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:26:53.91428Z","key":"4_cpu_usage_host","value":"1.49/64 cores (2..."}}
{"ts":"2024-10-03T23:26:53.916810565Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":73}}
{"ts":"2024-10-03T23:26:53.917459079Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:26:53.91428Z","keys":["4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:26:53.919497248Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host"],"num":1}}
{"ts":"2024-10-03T23:26:54.354381194Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:26:54.508966422Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:26:54.509748213Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:26:54.509945264Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:26:54.775414755Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:26:54.77541Z","key":"0_cpu_usage","value":"0.018 cores\n"}}
{"ts":"2024-10-03T23:26:54.777654565Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":68}}
{"ts":"2024-10-03T23:26:54.778268151Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:26:54.77541Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:26:54.7801248Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:26:55.280996381Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:26:55.28414614Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.175248ms"}}
{"ts":"2024-10-03T23:26:55.334748335Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:26:55.336180123Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:26:55.3378497Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:26:55.341506389Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:26:55.342707581Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:26:55.698364948Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:26:57.933242972Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:26:57.935277034Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:26:57.979192604Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending handshake initiation","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:26:57.98055094Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Received handshake response","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:26:57.980713143Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending keepalive packet","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:26:58.511823478Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.503787ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:26:59.327006844Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:26:59.327179518Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:26:59.7733132Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:26:59.773309Z","key":"5_mem_usage_host","value":"28.8/251 GiB (11..."}}
{"ts":"2024-10-03T23:26:59.773746077Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:26:59.773309Z","key":"4_cpu_usage_host","value":"0.197/64 cores (..."}}
{"ts":"2024-10-03T23:26:59.774027751Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:26:59.773309Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:26:59.774277093Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:26:59.773309Z","key":"1_ram_usage","value":"0.196 GiB\n"}}
{"ts":"2024-10-03T23:26:59.776530599Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":121}}
{"ts":"2024-10-03T23:26:59.777313082Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:26:59.773309Z","keys":["5_mem_usage_host","4_cpu_usage_host","7_swap_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:26:59.779506271Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","4_cpu_usage_host","7_swap_host","1_ram_usage"],"num":4}}
{"ts":"2024-10-03T23:26:59.913857908Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:26:59.913853Z","key":"5_mem_usage_host","value":"28.8/251 GiB (11..."}}
{"ts":"2024-10-03T23:26:59.916045015Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:26:59.916691435Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:26:59.913853Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:26:59.918538956Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:27:00.353692302Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:27:00.698383442Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:27:02.914411631Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:27:02.914409Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:27:02.914682695Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:27:02.914409Z","key":"1_ram_usage","value":"0.186 GiB\n"}}
{"ts":"2024-10-03T23:27:02.914826423Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:27:02.914409Z","key":"0_cpu_usage","value":"0.015 cores\n"}}
{"ts":"2024-10-03T23:27:02.916626523Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":97}}
{"ts":"2024-10-03T23:27:02.917107192Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:27:02.914409Z","keys":["7_swap_host","1_ram_usage","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:27:02.91869934Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","0_cpu_usage"],"num":3}}
{"ts":"2024-10-03T23:27:03.354026182Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:27:04.914280399Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:27:04.914275Z","key":"4_cpu_usage_host","value":"0.79/64 cores (1..."}}
{"ts":"2024-10-03T23:27:04.916380899Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:27:04.917056284Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:27:04.914275Z","keys":["4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:27:04.918685574Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host"],"num":1}}
{"ts":"2024-10-03T23:27:05.353832228Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:27:05.698862994Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:27:05.772788014Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:27:05.772785Z","key":"0_cpu_usage","value":"0.008 cores\n"}}
{"ts":"2024-10-03T23:27:05.774925195Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:27:05.775471431Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:27:05.772785Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:27:05.777202377Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:27:06.698572639Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:27:08.914430463Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:27:08.914427Z","key":"6_load_host","value":"0.03"}}
{"ts":"2024-10-03T23:27:09.507995476Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:27:08.794692725Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.246,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":135},{"name":"magicsock_disco_recv_udp","type":1,"value":157},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":159},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":137},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":159},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":159},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:27:11.35363735Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:27:09.774239145Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:27:09.774236Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:27:10.336340668Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:27:12.520505661Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:27:12.286108031Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:27:12.698981802Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:27:29.172863953Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:27:09.774236Z","key":"1_ram_usage","value":"0.196 GiB\n"}}
{"ts":"2024-10-03T23:27:25.285840305Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"4.337675ms"}}
{"ts":"2024-10-03T23:27:25.341868209Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:27:29.173299676Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:27:29.173370773Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:27:29.173262594Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:27:09.774236Z","key":"5_mem_usage_host","value":"28.5/251 GiB (11..."}}
{"ts":"2024-10-03T23:27:29.173542655Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:27:29.17302782Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:27:29.173649361Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:27:27.933334551Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:27:29.173722663Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:27:09.774236Z","key":"4_cpu_usage_host","value":"1.98/64 cores (3..."}}
{"ts":"2024-10-03T23:27:29.174330127Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:27:29.174948793Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:27:29.175491623Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:27:29.176332809Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:27:08.914427Z","keys":["6_load_host"]}}}
{"ts":"2024-10-03T23:27:29.176720558Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":121}}
{"ts":"2024-10-03T23:27:29.177605579Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:27:09.774236Z","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:27:29.178819576Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host"],"num":1}}
{"ts":"2024-10-03T23:27:29.17915289Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:27:29.179151327Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:27:29.179659409Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:27:29.180043492Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:27:29.182335442Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:27:29.183202829Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:27:29.1848123Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:27:29.327998796Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:27:29.328227728Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:27:29.354408867Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:27:29.511968376Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":2,"elapsed":"888.828µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:27:29.698359529Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:27:29.773038636Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:27:29.773032Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:27:29.773313227Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:27:29.773032Z","key":"0_cpu_usage","value":"0.012 cores\n"}}
{"ts":"2024-10-03T23:27:29.773483306Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:27:29.773032Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:27:29.773646191Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:27:29.773032Z","key":"5_mem_usage_host","value":"28.5/251 GiB (11..."}}
{"ts":"2024-10-03T23:27:29.773836468Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:27:29.773032Z","key":"1_ram_usage","value":"0.19 GiB\n"}}
{"ts":"2024-10-03T23:27:29.773990426Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:27:29.773032Z","key":"4_cpu_usage_host","value":"0.692/64 cores (..."}}
{"ts":"2024-10-03T23:27:29.774144314Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:27:29.773032Z","key":"6_load_host","value":"0.04"}}
{"ts":"2024-10-03T23:27:29.776269682Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":163}}
{"ts":"2024-10-03T23:27:29.776748007Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:27:29.773032Z","keys":["3_home_disk","0_cpu_usage","7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host","6_load_host"]}}}
{"ts":"2024-10-03T23:27:29.778170526Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["3_home_disk","0_cpu_usage","7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host","6_load_host"],"num":7}}
{"ts":"2024-10-03T23:27:29.914326522Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:27:29.914322Z","key":"4_cpu_usage_host","value":"2.58/64 cores (4..."}}
{"ts":"2024-10-03T23:27:29.914631191Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:27:29.914322Z","key":"5_mem_usage_host","value":"28.5/251 GiB (11..."}}
{"ts":"2024-10-03T23:27:29.914772284Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:27:29.914322Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:27:29.914903016Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:27:29.914322Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:27:29.915031194Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:27:29.914322Z","key":"1_ram_usage","value":"0.193 GiB\n"}}
{"ts":"2024-10-03T23:27:29.915169572Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:27:29.914322Z","key":"0_cpu_usage","value":"0.116 cores\n"}}
{"ts":"2024-10-03T23:27:29.917305711Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":149}}
{"ts":"2024-10-03T23:27:29.918037064Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:27:29.914322Z","keys":["4_cpu_usage_host","5_mem_usage_host","7_swap_host","3_home_disk","1_ram_usage","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:27:29.919693897Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","5_mem_usage_host","7_swap_host","3_home_disk","1_ram_usage","0_cpu_usage"],"num":6}}
{"ts":"2024-10-03T23:27:30.354182051Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:27:30.698139285Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:27:30.914155835Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:27:30.914151Z","key":"5_mem_usage_host","value":"28.5/251 GiB (11..."}}
{"ts":"2024-10-03T23:27:30.916588487Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:27:30.917167977Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:27:30.914151Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:27:30.918884475Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:27:31.353911842Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:27:31.772878883Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:27:31.772876Z","key":"1_ram_usage","value":"0.19 GiB\n"}}
{"ts":"2024-10-03T23:27:31.773161349Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:27:31.772876Z","key":"4_cpu_usage_host","value":"3.67/64 cores (6..."}}
{"ts":"2024-10-03T23:27:31.773307912Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:27:31.772876Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:27:31.773444035Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:27:31.772876Z","key":"5_mem_usage_host","value":"28.5/251 GiB (11..."}}
{"ts":"2024-10-03T23:27:31.775411939Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":121}}
{"ts":"2024-10-03T23:27:31.775916605Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:27:31.772876Z","keys":["1_ram_usage","4_cpu_usage_host","7_swap_host","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:27:31.777621751Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","4_cpu_usage_host","7_swap_host","5_mem_usage_host"],"num":4}}
{"ts":"2024-10-03T23:27:32.698161444Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:27:35.913693818Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:27:35.913689Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:27:35.914132116Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:27:35.913689Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:27:35.914394854Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:27:35.913689Z","key":"4_cpu_usage_host","value":"3.62/64 cores (6..."}}
{"ts":"2024-10-03T23:27:35.914665467Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:27:35.913689Z","key":"0_cpu_usage","value":"0.276 cores\n"}}
{"ts":"2024-10-03T23:27:35.916177359Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:27:35.91678278Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:27:35.913689Z","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:27:35.918137188Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:27:36.353606599Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:27:38.699083891Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:27:38.773144504Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:27:38.77314Z","key":"0_cpu_usage","value":"0.082 cores\n"}}
{"ts":"2024-10-03T23:27:38.775488224Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":68}}
{"ts":"2024-10-03T23:27:38.776279163Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:27:38.77314Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:27:38.778255233Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:27:38.795024418Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.244,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":146},{"name":"magicsock_disco_recv_udp","type":1,"value":168},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":170},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":148},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":170},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":170},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:27:38.797254399Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:27:38.799671962Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:27:38.80038489Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:27:39.508550586Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:27:39.509475174Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:27:39.509745757Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:27:39.512030834Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.19507ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:27:39.698530967Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:27:40.337233327Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:27:41.353970186Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:27:41.914165709Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:27:41.914159Z","key":"5_mem_usage_host","value":"28.5/251 GiB (11..."}}
{"ts":"2024-10-03T23:27:41.91611663Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:27:41.916766577Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:27:41.914159Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:27:41.918243782Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:27:42.354121995Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:27:42.7737474Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:27:42.773743Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:27:42.774192551Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:27:42.773743Z","key":"5_mem_usage_host","value":"28.5/251 GiB (11..."}}
{"ts":"2024-10-03T23:27:42.774467933Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:27:42.773743Z","key":"1_ram_usage","value":"0.191 GiB\n"}}
{"ts":"2024-10-03T23:27:42.774725621Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:27:42.773743Z","key":"4_cpu_usage_host","value":"1.17/64 cores (2..."}}
{"ts":"2024-10-03T23:27:42.777040666Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":121}}
{"ts":"2024-10-03T23:27:42.777693438Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:27:42.773743Z","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:27:42.779756717Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:27:43.698317316Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:27:46.914926131Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:27:46.91492Z","key":"4_cpu_usage_host","value":"1.89/64 cores (3..."}}
{"ts":"2024-10-03T23:27:46.915393915Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:27:46.91492Z","key":"0_cpu_usage","value":"0.212 cores\n"}}
{"ts":"2024-10-03T23:27:46.91569123Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:27:46.91492Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:27:46.915955301Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:27:46.91492Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:27:46.918011505Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":115}}
{"ts":"2024-10-03T23:27:46.918775512Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:27:46.91492Z","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:27:46.920781159Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host","1_ram_usage"],"num":4}}
{"ts":"2024-10-03T23:27:47.353583566Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:27:48.698409959Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:27:48.772362764Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:27:48.77236Z","key":"0_cpu_usage","value":"0.023 cores\n"}}
{"ts":"2024-10-03T23:27:48.774544511Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":68}}
{"ts":"2024-10-03T23:27:48.775142136Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:27:48.77236Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:27:48.777160017Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:27:49.69817343Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:27:52.353793762Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:27:52.914438806Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:27:52.914436Z","key":"5_mem_usage_host","value":"28.4/251 GiB (11..."}}
{"ts":"2024-10-03T23:27:52.917680181Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:27:52.91823314Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:27:52.914436Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:27:52.921104641Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:27:53.353852935Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:27:53.772448019Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:27:53.772445Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:27:53.772851048Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:27:53.772445Z","key":"5_mem_usage_host","value":"28.4/251 GiB (11..."}}
{"ts":"2024-10-03T23:27:53.773089519Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:27:53.772445Z","key":"1_ram_usage","value":"0.19 GiB\n"}}
{"ts":"2024-10-03T23:27:53.773329924Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:27:53.772445Z","key":"4_cpu_usage_host","value":"1.29/64 cores (2..."}}
{"ts":"2024-10-03T23:27:53.774590771Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":121}}
{"ts":"2024-10-03T23:27:53.775039819Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:27:53.772445Z","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:27:53.776598051Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:27:54.508044764Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:27:54.508843839Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:27:54.508940766Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:27:54.698673849Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:27:55.281436999Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:27:55.286180738Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"4.782595ms"}}
{"ts":"2024-10-03T23:27:55.334734025Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:27:55.337055662Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:27:55.339240986Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:27:55.341175897Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:27:55.342451573Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:27:56.914416068Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:27:56.914414Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:27:56.914673425Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:27:56.914414Z","key":"1_ram_usage","value":"0.195 GiB\n"}}
{"ts":"2024-10-03T23:27:56.914807064Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:27:56.914414Z","key":"0_cpu_usage","value":"0.15 cores\n"}}
{"ts":"2024-10-03T23:27:56.914937766Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:27:56.914414Z","key":"4_cpu_usage_host","value":"3.48/64 cores (5..."}}
{"ts":"2024-10-03T23:27:56.917836149Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:27:56.918450657Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:27:56.914414Z","keys":["7_swap_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:27:56.92063547Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:27:57.354429155Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:27:57.933534074Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:27:57.935716683Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:27:58.511814699Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.39644ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:27:59.328372005Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:27:59.328598182Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:27:59.772881965Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:27:59.772877Z","key":"0_cpu_usage","value":"0.005 cores\n"}}
{"ts":"2024-10-03T23:27:59.775253449Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:27:59.776023217Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:27:59.772877Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:27:59.777993867Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:28:00.698357265Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:28:03.354107425Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:28:03.914142452Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:28:03.914138Z","key":"5_mem_usage_host","value":"28.5/251 GiB (11..."}}
{"ts":"2024-10-03T23:28:03.91640202Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:28:03.917045834Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:28:03.914138Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:28:03.918778784Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:28:04.353587651Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:28:04.773171579Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:28:04.773168Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:28:04.773572013Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:28:04.773168Z","key":"1_ram_usage","value":"0.197 GiB\n"}}
{"ts":"2024-10-03T23:28:04.773863998Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:28:04.773168Z","key":"5_mem_usage_host","value":"28.5/251 GiB (11..."}}
{"ts":"2024-10-03T23:28:04.774133328Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:28:04.773168Z","key":"4_cpu_usage_host","value":"0.597/64 cores (..."}}
{"ts":"2024-10-03T23:28:04.776506586Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":121}}
{"ts":"2024-10-03T23:28:06.698022175Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:28:04.777209435Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:28:04.773168Z","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:28:07.914472106Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:28:07.914468Z","key":"4_cpu_usage_host","value":"2.09/64 cores (3..."}}
{"ts":"2024-10-03T23:28:09.35368475Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:28:29.314185839Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:28:09.5090608Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:28:08.794723709Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.255,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":157},{"name":"magicsock_disco_recv_udp","type":1,"value":179},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":181},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":159},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":181},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":181},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:28:29.314197181Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:28:07.914468Z","key":"0_cpu_usage","value":"0.136 cores\n"}}
{"ts":"2024-10-03T23:28:29.31435694Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:28:10.337041861Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:28:10.77289062Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:28:10.772886Z","key":"0_cpu_usage","value":"0.002 cores\n"}}
{"ts":"2024-10-03T23:28:12.285959322Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:28:12.520300897Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:28:29.314487883Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:28:07.914468Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:28:25.341304613Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:28:25.283468692Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"2.349632ms"}}
{"ts":"2024-10-03T23:28:29.314987208Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:28:29.314987749Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:28:29.314868649Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:28:07.914468Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:28:27.933078559Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:28:29.315120516Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:28:29.31575902Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:28:29.315901095Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:28:29.316430408Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:28:29.316728584Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host","1_ram_usage","5_mem_usage_host","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:28:29.316746269Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:28:07.914468Z","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:28:29.317677148Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host","1_ram_usage"],"num":4}}
{"ts":"2024-10-03T23:28:29.319030274Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:28:29.319836903Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:28:29.319835881Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:28:29.320526967Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:28:29.32097846Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:28:10.772886Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:28:29.321725163Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:28:29.322385951Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:28:29.323007562Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:28:29.323548317Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:28:29.328729132Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:28:29.328792735Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:28:29.353775699Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:28:29.511760973Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":2,"elapsed":"1.671841ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:28:29.562525414Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/deployment/stats","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:28:29.556121334Z","took":"6.400884ms","status_code":200,"latency_ms":6,"request_id":"8ea11e9e-08bf-4b98-b32e-aa20ed3cbe4f"}}
{"ts":"2024-10-03T23:28:29.698480733Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:28:29.775907183Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:28:29.775902Z","key":"4_cpu_usage_host","value":"12.9/64 cores (2..."}}
{"ts":"2024-10-03T23:28:29.776275906Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:28:29.775902Z","key":"0_cpu_usage","value":"0.011 cores\n"}}
{"ts":"2024-10-03T23:28:29.776545677Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:28:29.775902Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:28:29.77679532Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:28:29.775902Z","key":"6_load_host","value":"0.04"}}
{"ts":"2024-10-03T23:28:29.777110389Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:28:29.775902Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:28:29.777358128Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:28:29.775902Z","key":"1_ram_usage","value":"0.191 GiB\n"}}
{"ts":"2024-10-03T23:28:29.777595877Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:28:29.775902Z","key":"5_mem_usage_host","value":"28.7/251 GiB (11..."}}
{"ts":"2024-10-03T23:28:29.780382464Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":163}}
{"ts":"2024-10-03T23:28:29.780988546Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:28:29.775902Z","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host","6_load_host","3_home_disk","1_ram_usage","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:28:29.782497112Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["4_cpu_usage_host","0_cpu_usage","7_swap_host","6_load_host","3_home_disk","1_ram_usage","5_mem_usage_host"],"num":7}}
{"ts":"2024-10-03T23:28:29.790666885Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/deployment/stats","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:28:29.789264333Z","took":"1.400127ms","status_code":200,"latency_ms":1,"request_id":"4495a202-5ad9-4577-bea3-190347a3ab07"}}
{"ts":"2024-10-03T23:28:29.914277651Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:28:29.914272Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:28:29.914683396Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:28:29.914272Z","key":"0_cpu_usage","value":"0.045 cores\n"}}
{"ts":"2024-10-03T23:28:29.914921586Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:28:29.914272Z","key":"4_cpu_usage_host","value":"3.37/64 cores (5..."}}
{"ts":"2024-10-03T23:28:29.915144036Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:28:29.914272Z","key":"6_load_host","value":"0.04"}}
{"ts":"2024-10-03T23:28:29.915376305Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:28:29.914272Z","key":"5_mem_usage_host","value":"28.7/251 GiB (11..."}}
{"ts":"2024-10-03T23:28:29.915691314Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:28:29.914272Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:28:29.915924966Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:28:29.914272Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:28:29.917352104Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":163}}
{"ts":"2024-10-03T23:28:29.917693424Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:28:29.914272Z","keys":["1_ram_usage","0_cpu_usage","4_cpu_usage_host","6_load_host","5_mem_usage_host","3_home_disk","7_swap_host"]}}}
{"ts":"2024-10-03T23:28:29.918653891Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage","0_cpu_usage","4_cpu_usage_host","6_load_host","5_mem_usage_host","3_home_disk","7_swap_host"],"num":7}}
{"ts":"2024-10-03T23:28:30.35382433Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:28:30.698363715Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:28:32.772312629Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:28:32.772308Z","key":"0_cpu_usage","value":"0.016 cores\n"}}
{"ts":"2024-10-03T23:28:32.773680212Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:28:32.774100264Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:28:32.772308Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:28:32.775255658Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:28:33.698519981Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:28:34.772551357Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:28:34.772549Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:28:34.773928109Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:28:34.77424424Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:28:34.772549Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:28:34.775352252Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:28:35.354090848Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:28:35.698824127Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:28:35.914051555Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:28:35.914047Z","key":"5_mem_usage_host","value":"29.7/251 GiB (12..."}}
{"ts":"2024-10-03T23:28:35.916513023Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:28:35.917171776Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:28:35.914047Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:28:35.919269712Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:28:36.354428218Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:28:36.773261518Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:28:36.773258Z","key":"1_ram_usage","value":"0.198 GiB\n"}}
{"ts":"2024-10-03T23:28:36.773656131Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:28:36.773258Z","key":"5_mem_usage_host","value":"29.9/251 GiB (12..."}}
{"ts":"2024-10-03T23:28:36.773877309Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:28:36.773258Z","key":"4_cpu_usage_host","value":"5.91/64 cores (9..."}}
{"ts":"2024-10-03T23:28:36.77511944Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:28:36.775492351Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:28:36.773258Z","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:28:36.776539655Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:28:37.698426427Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:28:38.794904574Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.21,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":168},{"name":"magicsock_disco_recv_udp","type":1,"value":190},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":192},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":170},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":192},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":192},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:28:38.79725588Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:28:38.799506941Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:28:38.800047586Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:28:39.508538492Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:28:39.509110417Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:28:39.509207405Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:28:39.511304569Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.034209ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:28:39.914093183Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:28:39.914087Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:28:39.914382082Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:28:39.914087Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:28:39.914517574Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:28:39.914087Z","key":"4_cpu_usage_host","value":"3.18/64 cores (5..."}}
{"ts":"2024-10-03T23:28:39.914686069Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:28:39.914087Z","key":"0_cpu_usage","value":"0.085 cores\n"}}
{"ts":"2024-10-03T23:28:39.916022182Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:28:39.916426874Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:28:39.914087Z","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:28:39.917577088Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:28:40.336055582Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:28:40.354415694Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:28:42.698953286Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:28:42.772185117Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:28:42.772182Z","key":"0_cpu_usage","value":"0.01 cores\n"}}
{"ts":"2024-10-03T23:28:42.773819096Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:28:42.774344341Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:28:42.772182Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:28:42.775702527Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:28:43.69832917Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:28:45.772612467Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:28:45.772608Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:28:45.774085054Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:28:45.774579499Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:28:45.772608Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:28:45.775800971Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:28:46.354102393Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:28:46.698671426Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:28:46.772950102Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:28:46.772947Z","key":"5_mem_usage_host","value":"27.7/251 GiB (11..."}}
{"ts":"2024-10-03T23:28:46.773204664Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:28:46.772947Z","key":"4_cpu_usage_host","value":"1.6/64 cores (2%..."}}
{"ts":"2024-10-03T23:28:46.773358561Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:28:46.772947Z","key":"1_ram_usage","value":"0.198 GiB\n"}}
{"ts":"2024-10-03T23:28:46.77559293Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:28:46.776341848Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:28:46.772947Z","keys":["5_mem_usage_host","4_cpu_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:28:46.778143891Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","4_cpu_usage_host","1_ram_usage"],"num":3}}
{"ts":"2024-10-03T23:28:46.913531894Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:28:46.913528Z","key":"5_mem_usage_host","value":"27.5/251 GiB (11..."}}
{"ts":"2024-10-03T23:28:46.915741636Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:28:46.916465064Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:28:46.913528Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:28:46.918301815Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:28:47.353640131Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:28:47.698572597Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:28:50.914248198Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:28:50.914243Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:28:50.914701835Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:28:50.914243Z","key":"1_ram_usage","value":"0.196 GiB\n"}}
{"ts":"2024-10-03T23:28:50.914967889Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:28:50.914243Z","key":"0_cpu_usage","value":"0.227 cores\n"}}
{"ts":"2024-10-03T23:28:50.91522201Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:28:50.914243Z","key":"4_cpu_usage_host","value":"0.692/64 cores (..."}}
{"ts":"2024-10-03T23:28:50.917571161Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:28:50.918322935Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:28:50.914243Z","keys":["7_swap_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:28:50.920292542Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:28:51.353855085Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:28:53.698413935Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:28:53.772675017Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:28:53.772668Z","key":"0_cpu_usage","value":"0.016 cores\n"}}
{"ts":"2024-10-03T23:28:53.774903945Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:28:53.77552726Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:28:53.772668Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:28:53.777396824Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:28:54.508059101Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:28:54.508718746Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:28:54.508968128Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:28:54.698574279Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:28:55.281232113Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:28:55.284382012Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.167152ms"}}
{"ts":"2024-10-03T23:28:55.334740258Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:28:55.336214017Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:28:55.337046085Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:28:55.341826566Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:28:55.342530597Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:28:56.772551469Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:28:56.772547Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:28:56.7740419Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:28:56.774714781Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:28:56.772547Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:28:56.776894194Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:28:57.354217927Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:28:57.698881995Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:28:57.772756019Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:28:57.772753Z","key":"5_mem_usage_host","value":"27.5/251 GiB (11..."}}
{"ts":"2024-10-03T23:28:57.773031221Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:28:57.772753Z","key":"4_cpu_usage_host","value":"1.46/64 cores (2..."}}
{"ts":"2024-10-03T23:28:57.773167294Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:28:57.772753Z","key":"1_ram_usage","value":"0.198 GiB\n"}}
{"ts":"2024-10-03T23:28:57.774611455Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:28:57.775308823Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:28:57.772753Z","keys":["5_mem_usage_host","4_cpu_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:28:57.776750881Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","4_cpu_usage_host","1_ram_usage"],"num":3}}
{"ts":"2024-10-03T23:28:57.914529195Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:28:57.914526Z","key":"5_mem_usage_host","value":"27.5/251 GiB (11..."}}
{"ts":"2024-10-03T23:28:57.916346929Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:28:57.91675603Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:28:57.914526Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:28:57.918415848Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:28:57.931197245Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:28:57.932346517Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:28:57.986632075Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending handshake initiation","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:28:57.987681042Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Received handshake response","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:28:57.987854448Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending keepalive packet","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:28:58.35442416Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:28:58.512226132Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.204799ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:28:58.698653107Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:28:59.329473263Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:28:59.329638643Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:29:01.914241187Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:01.914236Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:29:01.91469799Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:01.914236Z","key":"1_ram_usage","value":"0.197 GiB\n"}}
{"ts":"2024-10-03T23:29:01.914965167Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:01.914236Z","key":"0_cpu_usage","value":"0.213 cores\n"}}
{"ts":"2024-10-03T23:29:01.91522056Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:01.914236Z","key":"4_cpu_usage_host","value":"1.5/64 cores (2%..."}}
{"ts":"2024-10-03T23:29:01.917318646Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:29:01.917742035Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:29:01.914236Z","keys":["7_swap_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:29:01.919108045Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:29:02.353995841Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:29:03.698847979Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:29:03.774161485Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:03.774146Z","key":"0_cpu_usage","value":"0.002 cores\n"}}
{"ts":"2024-10-03T23:29:03.776603054Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:29:03.777248482Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:29:03.774146Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:29:03.779183993Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:29:04.699319966Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:29:06.772676852Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:06.772672Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:29:06.774203584Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:29:06.774804766Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:29:06.772672Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:29:06.776200464Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:29:07.35428006Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:29:07.698009261Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:29:08.771526451Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:08.771522Z","key":"5_mem_usage_host","value":"27.6/251 GiB (11..."}}
{"ts":"2024-10-03T23:29:08.772009335Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:08.771522Z","key":"4_cpu_usage_host","value":"3.29/64 cores (5..."}}
{"ts":"2024-10-03T23:29:08.772371745Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:08.771522Z","key":"1_ram_usage","value":"0.197 GiB\n"}}
{"ts":"2024-10-03T23:29:08.773792512Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:29:08.774315643Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:29:08.771522Z","keys":["5_mem_usage_host","4_cpu_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:29:08.77545703Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","4_cpu_usage_host","1_ram_usage"],"num":3}}
{"ts":"2024-10-03T23:29:08.792987247Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.148,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":179},{"name":"magicsock_disco_recv_udp","type":1,"value":201},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":203},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":181},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":203},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":203},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:29:08.794355442Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:29:08.795909736Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:29:08.796652542Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:29:08.913563709Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:08.913561Z","key":"5_mem_usage_host","value":"27.6/251 GiB (11..."}}
{"ts":"2024-10-03T23:29:08.91470221Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:29:08.915071073Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:29:08.913561Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:29:08.916099852Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:29:09.353405993Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:29:09.508607358Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:29:09.50922396Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:29:09.509320587Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:29:09.511131097Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"682.99µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:29:09.698586681Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:29:09.913703977Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:09.913701Z","key":"6_load_host","value":"0.13"}}
{"ts":"2024-10-03T23:29:09.915035741Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:29:09.915450994Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:29:09.913701Z","keys":["6_load_host"]}}}
{"ts":"2024-10-03T23:29:09.916669289Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host"],"num":1}}
{"ts":"2024-10-03T23:29:10.336389115Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:29:10.353756969Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:29:11.913742666Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:11.913739Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:29:11.914026815Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:11.913739Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:29:11.914167968Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:11.913739Z","key":"4_cpu_usage_host","value":"4.54/64 cores (7..."}}
{"ts":"2024-10-03T23:29:11.914302208Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:11.913739Z","key":"0_cpu_usage","value":"0.222 cores\n"}}
{"ts":"2024-10-03T23:29:11.915479043Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:29:11.916112607Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:29:11.913739Z","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:29:11.917300423Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:29:12.285584031Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:29:12.354190912Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:29:12.51930027Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:29:13.772823244Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:13.772819Z","key":"0_cpu_usage","value":"0.013 cores\n"}}
{"ts":"2024-10-03T23:29:13.775072953Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:29:13.775720585Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:29:13.772819Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:29:13.777475207Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:29:14.698293401Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:29:14.91715775Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:14.917154Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:29:14.919602015Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:29:14.920334421Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:29:14.917154Z","keys":["3_home_disk"]}}}
{"ts":"2024-10-03T23:29:14.922140132Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["3_home_disk"],"num":1}}
{"ts":"2024-10-03T23:29:15.354326127Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:29:15.772346138Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:15.772342Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:29:15.77268346Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:15.772342Z","key":"6_load_host","value":"0.12"}}
{"ts":"2024-10-03T23:29:15.774078747Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":83}}
{"ts":"2024-10-03T23:29:15.774474082Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:29:15.772342Z","keys":["3_home_disk","6_load_host"]}}}
{"ts":"2024-10-03T23:29:15.775647169Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["3_home_disk","6_load_host"],"num":2}}
{"ts":"2024-10-03T23:29:16.69900328Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:29:17.772442461Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:17.772439Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:29:17.774054688Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:29:17.774605112Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:29:17.772439Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:29:17.775844838Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:29:18.698475857Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:29:18.914376729Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:18.914373Z","key":"5_mem_usage_host","value":"27.7/251 GiB (11..."}}
{"ts":"2024-10-03T23:29:18.915879483Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:29:18.916464685Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:29:18.914373Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:29:18.917731023Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:29:19.353957428Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:29:19.773080633Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:19.773077Z","key":"1_ram_usage","value":"0.198 GiB\n"}}
{"ts":"2024-10-03T23:29:19.773489764Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:19.773077Z","key":"5_mem_usage_host","value":"27.5/251 GiB (11..."}}
{"ts":"2024-10-03T23:29:19.773726451Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:19.773077Z","key":"4_cpu_usage_host","value":"3.27/64 cores (5..."}}
{"ts":"2024-10-03T23:29:19.775082262Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:29:19.775632816Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:29:19.773077Z","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:29:19.776900387Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:29:20.698873584Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:29:22.914599837Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:22.914596Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:29:22.915060197Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:22.914596Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:29:22.915329898Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:22.914596Z","key":"0_cpu_usage","value":"0.036 cores\n"}}
{"ts":"2024-10-03T23:29:22.915614238Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:22.914596Z","key":"4_cpu_usage_host","value":"2.08/64 cores (3..."}}
{"ts":"2024-10-03T23:29:22.918095414Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:29:22.918829463Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:29:22.914596Z","keys":["7_swap_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:29:22.92085024Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:29:23.353949501Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:29:24.508570534Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:29:24.509512875Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:29:24.509716329Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:29:24.772154059Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:24.77215Z","key":"0_cpu_usage","value":"0.022 cores\n"}}
{"ts":"2024-10-03T23:29:24.773396641Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":68}}
{"ts":"2024-10-03T23:29:24.77383535Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:29:24.77215Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:29:24.774845282Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:29:25.28446352Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.187251ms"}}
{"ts":"2024-10-03T23:29:25.336898971Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:29:25.342135203Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:29:25.342812553Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:29:25.698291618Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:29:27.772133712Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:27.77213Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:29:27.77342112Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":68}}
{"ts":"2024-10-03T23:29:27.773842385Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:29:27.77213Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:29:27.774924707Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:29:27.931481833Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:29:27.932491043Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:29:28.354095996Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:29:28.511463148Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.037576ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:29:28.698928862Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:29:29.329832544Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:29:29.330087307Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:29:29.771750443Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:29.771748Z","key":"1_ram_usage","value":"0.197 GiB\n"}}
{"ts":"2024-10-03T23:29:29.772025154Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:29.771748Z","key":"5_mem_usage_host","value":"28.3/251 GiB (11..."}}
{"ts":"2024-10-03T23:29:29.772167279Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:29.771748Z","key":"4_cpu_usage_host","value":"13.1/64 cores (2..."}}
{"ts":"2024-10-03T23:29:29.773273718Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:29:29.773603706Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:29:29.771748Z","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:29:29.775487447Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:29:29.913079181Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:29.913077Z","key":"5_mem_usage_host","value":"28.4/251 GiB (11..."}}
{"ts":"2024-10-03T23:29:29.914198485Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:29:29.914596765Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:29:29.913077Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:29:29.915923189Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:29:30.353854351Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:29:30.698336209Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:29:32.913844916Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:32.91384Z","key":"4_cpu_usage_host","value":"2.94/64 cores (5..."}}
{"ts":"2024-10-03T23:29:32.914251412Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:32.91384Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:29:32.914490965Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:32.91384Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:29:32.914720338Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:32.91384Z","key":"0_cpu_usage","value":"0.202 cores\n"}}
{"ts":"2024-10-03T23:29:32.91609194Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":115}}
{"ts":"2024-10-03T23:29:32.916540557Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:29:32.91384Z","keys":["4_cpu_usage_host","7_swap_host","1_ram_usage","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:29:32.91806284Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","7_swap_host","1_ram_usage","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:29:33.353823556Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:29:34.773564168Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:34.773561Z","key":"0_cpu_usage","value":"0.01 cores\n"}}
{"ts":"2024-10-03T23:29:34.77581565Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:29:34.776225212Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:29:34.773561Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:29:34.777217329Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:29:35.698430441Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:29:38.354182453Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:29:38.77189901Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:38.771896Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:29:38.773259189Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:29:38.773643733Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:29:38.771896Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:29:38.774680126Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:29:38.793409762Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.199,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":190},{"name":"magicsock_disco_recv_udp","type":1,"value":212},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":214},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":192},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":214},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":214},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:29:38.794649408Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:29:38.796353202Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:29:38.796482412Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:29:39.508541815Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:29:39.509204947Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:29:39.509383853Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:29:39.511367087Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"911.623µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:29:39.698753478Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:29:39.913351021Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:39.913348Z","key":"5_mem_usage_host","value":"29/251 GiB (12%)..."}}
{"ts":"2024-10-03T23:29:39.914598543Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:29:39.915036679Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:29:39.913348Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:29:39.916027916Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:29:40.33620579Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:29:40.353558795Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:29:40.772265125Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:40.772263Z","key":"4_cpu_usage_host","value":"4.77/64 cores (7..."}}
{"ts":"2024-10-03T23:29:40.772519226Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:40.772263Z","key":"1_ram_usage","value":"0.198 GiB\n"}}
{"ts":"2024-10-03T23:29:40.772670779Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:40.772263Z","key":"5_mem_usage_host","value":"29.1/251 GiB (12..."}}
{"ts":"2024-10-03T23:29:40.773593132Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:29:40.773950252Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:29:40.772263Z","keys":["4_cpu_usage_host","1_ram_usage","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:29:40.77480781Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["4_cpu_usage_host","1_ram_usage","5_mem_usage_host"],"num":3}}
{"ts":"2024-10-03T23:29:41.698084121Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:29:43.915371873Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:43.915368Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:29:43.915852191Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:43.915368Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:29:43.916123506Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:43.915368Z","key":"0_cpu_usage","value":"0.214 cores\n"}}
{"ts":"2024-10-03T23:29:43.916414969Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:43.915368Z","key":"4_cpu_usage_host","value":"4.01/64 cores (6..."}}
{"ts":"2024-10-03T23:29:43.918606385Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:29:43.919201606Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:29:43.915368Z","keys":["7_swap_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:29:43.921012396Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:29:44.353641881Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:29:44.772179836Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:44.772177Z","key":"0_cpu_usage","value":"0.002 cores\n"}}
{"ts":"2024-10-03T23:29:44.773391999Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:29:44.773825126Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:29:44.772177Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:29:44.774815831Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:29:45.698597601Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:29:49.77391809Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:49.773914Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:29:49.776202456Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:29:49.776860869Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:29:49.773914Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:29:49.778791361Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:29:50.354095437Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:29:50.697939023Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:29:50.772959924Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:50.772956Z","key":"1_ram_usage","value":"0.197 GiB\n"}}
{"ts":"2024-10-03T23:29:50.773364837Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:50.772956Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:29:50.773729492Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:50.772956Z","key":"4_cpu_usage_host","value":"1.49/64 cores (2..."}}
{"ts":"2024-10-03T23:29:50.775961556Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:29:50.776714863Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:29:50.772956Z","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:29:50.778002652Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:29:50.913208445Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:50.913199Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:29:50.914670872Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:29:50.915165187Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:29:50.913199Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:29:50.916236699Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:29:51.354002393Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:29:51.698525863Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:29:53.914785321Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:53.91478Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:29:53.915225893Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:53.91478Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:29:53.915492949Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:53.91478Z","key":"0_cpu_usage","value":"0.129 cores\n"}}
{"ts":"2024-10-03T23:29:53.915780054Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:29:53.91478Z","key":"4_cpu_usage_host","value":"2.09/64 cores (3..."}}
{"ts":"2024-10-03T23:29:53.9180179Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":115}}
{"ts":"2024-10-03T23:29:53.918668347Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:29:53.91478Z","keys":["7_swap_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:29:53.920514566Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:29:54.354143233Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:29:54.508673072Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:29:54.509611726Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:29:54.509885135Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:29:55.281115141Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:29:55.282989434Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"1.885575ms"}}
{"ts":"2024-10-03T23:29:55.290268545Z","level":"DEBUG","msg":"pruning inactive agents","caller":"/home/runner/work/coder/coder/coderd/tailnet.go:235","func":"github.com/coder/coder/v2/coderd.(*ServerTailnet).doExpireOldAgents","logger_names":["coderd","servertailnet"],"fields":{"agent_count":1}}
{"ts":"2024-10-03T23:29:55.290468993Z","level":"DEBUG","msg":"successfully pruned inactive agents","caller":"/home/runner/work/coder/coder/coderd/tailnet.go:251","func":"github.com/coder/coder/v2/coderd.(*ServerTailnet).doExpireOldAgents","logger_names":["coderd","servertailnet"],"fields":{"deleted":0,"took":"200.367µs"}}
{"ts":"2024-10-03T23:29:55.334992169Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:29:55.336112615Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:29:55.336914025Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:29:55.342081323Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:29:55.34272641Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:29:55.773416948Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:29:55.773412Z","key":"0_cpu_usage","value":"0.075 cores\n"}}
{"ts":"2024-10-03T23:29:55.775632801Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:29:55.776212933Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:29:55.773412Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:29:55.77783044Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:29:56.698614275Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:29:57.934740843Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:29:57.938350992Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:29:58.511414819Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.353706ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:29:59.330675202Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:29:59.330930125Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:29:59.354159259Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:30:00.00049185Z","level":"DEBUG","msg":"rolling up data","caller":"/home/runner/work/coder/coder/coderd/database/dbrollup/dbrollup.go:91","func":"github.com/coder/coder/v2/coderd/database/dbrollup.(*Rolluper).start.func1","logger_names":["coderd","dbrollup"]}
{"ts":"2024-10-03T23:30:00.008211733Z","level":"DEBUG","msg":"rolled up data","caller":"/home/runner/work/coder/coder/coderd/database/dbrollup/dbrollup.go:126","func":"github.com/coder/coder/v2/coderd/database/dbrollup.(*Rolluper).start.func1","logger_names":["coderd","dbrollup"],"fields":{"took":"7.356421ms","event":{"template_usage_stats":true}}}
{"ts":"2024-10-03T23:30:00.008428422Z","level":"DEBUG","msg":"next rollup at","caller":"/home/runner/work/coder/coder/coderd/database/dbrollup/dbrollup.go:174","func":"github.com/coder/coder/v2/coderd/database/dbrollup.(*Rolluper).start","logger_names":["coderd","dbrollup"],"fields":{"next":"2024-10-03T23:35:00Z"}}
{"ts":"2024-10-03T23:30:00.772430757Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:00.772429Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:30:00.773633532Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:30:00.774026723Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:30:00.772429Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:30:00.775031625Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:30:00.914214977Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:00.914211Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:30:00.916350055Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:30:00.917006914Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:30:00.914211Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:30:00.92010325Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:30:01.353919971Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:30:01.699002733Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:30:01.77267622Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:01.772673Z","key":"4_cpu_usage_host","value":"2.2/64 cores (3%..."}}
{"ts":"2024-10-03T23:30:01.772912386Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:01.772673Z","key":"5_mem_usage_host","value":"29/251 GiB (12%)..."}}
{"ts":"2024-10-03T23:30:01.773031416Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:01.772673Z","key":"1_ram_usage","value":"0.193 GiB\n"}}
{"ts":"2024-10-03T23:30:01.774031449Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:30:01.774466831Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:30:01.772673Z","keys":["4_cpu_usage_host","5_mem_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:30:01.775439381Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["4_cpu_usage_host","5_mem_usage_host","1_ram_usage"],"num":3}}
{"ts":"2024-10-03T23:30:02.698906986Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:30:03.915028724Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:03.915026Z","key":"0_cpu_usage","value":"0.13 cores\n"}}
{"ts":"2024-10-03T23:30:03.91548143Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:03.915026Z","key":"4_cpu_usage_host","value":"4.03/64 cores (6..."}}
{"ts":"2024-10-03T23:30:03.915789174Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:03.915026Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:30:03.916054668Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:03.915026Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:30:03.918259109Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:30:03.918922461Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:30:03.915026Z","keys":["0_cpu_usage","4_cpu_usage_host","7_swap_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:30:03.921360063Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage","4_cpu_usage_host","7_swap_host","1_ram_usage"],"num":4}}
{"ts":"2024-10-03T23:30:04.35412915Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:30:06.773444276Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:06.77344Z","key":"0_cpu_usage","value":"0.015 cores\n"}}
{"ts":"2024-10-03T23:30:06.775680429Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":68}}
{"ts":"2024-10-03T23:30:06.776271762Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:30:06.77344Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:30:06.777868058Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:30:07.698857493Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:30:08.795226651Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.264,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":201},{"name":"magicsock_disco_recv_udp","type":1,"value":223},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":225},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":203},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":225},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":225},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:30:08.797223161Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:30:08.799501284Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:30:08.799650363Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:30:08.866649207Z","level":"DEBUG","msg":"wg: [v2] [T0XWz] - Removing all keys, since we haven't received a new one in 540 seconds","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/wglog/wglog.go:81","func":"tailscale.com/wgengine/wglog.NewLogger.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:30:09.508656317Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:30:09.509139571Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:30:09.509282027Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:30:09.510987664Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"633.465µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:30:10.33786346Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:30:10.354314221Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:30:10.914400773Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:10.914396Z","key":"6_load_host","value":"0.07"}}
{"ts":"2024-10-03T23:30:10.916729044Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:30:10.917503471Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:30:10.914396Z","keys":["6_load_host"]}}}
{"ts":"2024-10-03T23:30:10.919016275Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host"],"num":1}}
{"ts":"2024-10-03T23:30:11.354068506Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:30:11.773863503Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:11.773859Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:30:11.776341874Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:30:11.77710049Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:30:11.773859Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:30:11.778940708Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:30:11.913593653Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:11.913589Z","key":"5_mem_usage_host","value":"28.9/251 GiB (12..."}}
{"ts":"2024-10-03T23:30:11.9159977Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:30:11.916627157Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:30:11.913589Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:30:11.918261817Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:30:12.285015782Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:30:12.353591143Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:30:12.519194838Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:30:12.698662674Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:30:12.772270263Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:12.772266Z","key":"5_mem_usage_host","value":"28.9/251 GiB (12..."}}
{"ts":"2024-10-03T23:30:12.772561406Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:12.772266Z","key":"4_cpu_usage_host","value":"1.97/64 cores (3..."}}
{"ts":"2024-10-03T23:30:12.772724211Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:12.772266Z","key":"1_ram_usage","value":"0.198 GiB\n"}}
{"ts":"2024-10-03T23:30:12.774326949Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:30:12.774864759Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:30:12.772266Z","keys":["5_mem_usage_host","4_cpu_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:30:12.776399155Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","4_cpu_usage_host","1_ram_usage"],"num":3}}
{"ts":"2024-10-03T23:30:13.697955617Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:30:14.914616911Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:14.914613Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:30:14.915048485Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:14.914613Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:30:14.91530975Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:14.914613Z","key":"0_cpu_usage","value":"0.134 cores\n"}}
{"ts":"2024-10-03T23:30:14.915608908Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:14.914613Z","key":"4_cpu_usage_host","value":"2.61/64 cores (4..."}}
{"ts":"2024-10-03T23:30:14.917616539Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:30:14.918175069Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:30:14.914613Z","keys":["7_swap_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:30:14.919597449Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:30:15.354398975Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:30:15.914850283Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:15.914846Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:30:15.917163745Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:30:15.917846235Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:30:15.914846Z","keys":["3_home_disk"]}}}
{"ts":"2024-10-03T23:30:15.919824709Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["3_home_disk"],"num":1}}
{"ts":"2024-10-03T23:30:16.35443199Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:30:16.772276286Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:16.772274Z","key":"6_load_host","value":"0.07"}}
{"ts":"2024-10-03T23:30:16.772498316Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:16.772274Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:30:16.77354028Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":83}}
{"ts":"2024-10-03T23:30:16.773953929Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:30:16.772274Z","keys":["6_load_host","3_home_disk"]}}}
{"ts":"2024-10-03T23:30:16.774801077Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["6_load_host","3_home_disk"],"num":2}}
{"ts":"2024-10-03T23:30:17.698656424Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:30:17.773364541Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:17.773361Z","key":"0_cpu_usage","value":"0.016 cores\n"}}
{"ts":"2024-10-03T23:30:17.775736005Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:30:17.776490764Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:30:17.773361Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:30:17.778496812Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:30:18.698473191Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:30:21.915101856Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:21.915096Z","key":"5_mem_usage_host","value":"28.9/251 GiB (12..."}}
{"ts":"2024-10-03T23:30:21.917603592Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:30:21.918369192Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:30:21.915096Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:30:21.920299223Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:30:22.353982729Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:30:22.773968546Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:22.773965Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:30:22.776016505Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:30:22.776503316Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:30:22.773965Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:30:22.777778862Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:30:23.698951023Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:30:23.773869266Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:23.773866Z","key":"4_cpu_usage_host","value":"2.19/64 cores (3..."}}
{"ts":"2024-10-03T23:30:23.774291192Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:23.773866Z","key":"5_mem_usage_host","value":"28.9/251 GiB (12..."}}
{"ts":"2024-10-03T23:30:23.774561224Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:23.773866Z","key":"1_ram_usage","value":"0.193 GiB\n"}}
{"ts":"2024-10-03T23:30:23.776805592Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:30:23.777517659Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:30:23.773866Z","keys":["4_cpu_usage_host","5_mem_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:30:23.779373857Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["4_cpu_usage_host","5_mem_usage_host","1_ram_usage"],"num":3}}
{"ts":"2024-10-03T23:30:24.508856096Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:30:24.509674689Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:30:24.509853564Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:30:24.69841529Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:30:25.285780215Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.971708ms"}}
{"ts":"2024-10-03T23:30:25.337017821Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:30:25.341185638Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:30:25.342169851Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:30:25.914696943Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:25.91469Z","key":"0_cpu_usage","value":"0.163 cores\n"}}
{"ts":"2024-10-03T23:30:25.915146592Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:25.91469Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:30:25.915410081Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:25.91469Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:30:25.915719149Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:25.91469Z","key":"4_cpu_usage_host","value":"3.79/64 cores (6..."}}
{"ts":"2024-10-03T23:30:25.917981823Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":115}}
{"ts":"2024-10-03T23:30:25.918667628Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:30:25.91469Z","keys":["0_cpu_usage","7_swap_host","1_ram_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:30:25.920490151Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage","7_swap_host","1_ram_usage","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:30:26.354200549Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:30:27.773174764Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:27.77317Z","key":"0_cpu_usage","value":"0.016 cores\n"}}
{"ts":"2024-10-03T23:30:27.775489268Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":68}}
{"ts":"2024-10-03T23:30:27.776277872Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:30:27.77317Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:30:27.778184728Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:30:27.932528538Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:30:27.934073625Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:30:28.512186575Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.408533ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:30:28.698646077Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:30:29.331524073Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:30:29.331805938Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:30:32.354169148Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:30:32.773655039Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:32.773652Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:30:32.775835855Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:30:32.776498466Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:30:32.773652Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:30:32.779441435Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:30:32.914034274Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:32.91403Z","key":"5_mem_usage_host","value":"28.9/251 GiB (12..."}}
{"ts":"2024-10-03T23:30:32.916541772Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":73}}
{"ts":"2024-10-03T23:30:32.917361907Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:30:32.91403Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:30:32.919347956Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:30:33.354139675Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:30:33.698984458Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:30:34.772763614Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:34.77276Z","key":"1_ram_usage","value":"0.199 GiB\n"}}
{"ts":"2024-10-03T23:30:34.773120444Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:34.77276Z","key":"5_mem_usage_host","value":"28.9/251 GiB (12..."}}
{"ts":"2024-10-03T23:30:34.773375998Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:34.77276Z","key":"4_cpu_usage_host","value":"1.79/64 cores (3..."}}
{"ts":"2024-10-03T23:30:34.775284417Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":106}}
{"ts":"2024-10-03T23:30:34.775754416Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:30:34.77276Z","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:30:34.777425967Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:30:35.697979174Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:30:35.913719428Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:35.913716Z","key":"1_ram_usage","value":"0.193 GiB\n"}}
{"ts":"2024-10-03T23:30:35.914000311Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:35.913716Z","key":"4_cpu_usage_host","value":"2.66/64 cores (4..."}}
{"ts":"2024-10-03T23:30:35.91413985Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:35.913716Z","key":"0_cpu_usage","value":"0.193 cores\n"}}
{"ts":"2024-10-03T23:30:35.914272727Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:35.913716Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:30:35.915658206Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:30:35.916085091Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:30:35.913716Z","keys":["1_ram_usage","4_cpu_usage_host","0_cpu_usage","7_swap_host"]}}}
{"ts":"2024-10-03T23:30:35.917121194Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage","4_cpu_usage_host","0_cpu_usage","7_swap_host"],"num":4}}
{"ts":"2024-10-03T23:30:36.354002773Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:30:38.774160302Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:38.774156Z","key":"0_cpu_usage","value":"0.01 cores\n"}}
{"ts":"2024-10-03T23:30:38.776699581Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:30:38.777230537Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:30:38.774156Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:30:38.778817195Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:30:38.793121546Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.175,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":212},{"name":"magicsock_disco_recv_udp","type":1,"value":234},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":236},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":214},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":236},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":236},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:30:38.794638228Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:30:38.796240997Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:30:38.796575203Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:30:39.508733074Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:30:39.509636841Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:30:39.509923706Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:30:39.511259247Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.17957ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:30:39.69866029Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:30:40.336612986Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:30:42.353641265Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:30:42.922718079Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:42.922713Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:30:42.924537255Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:30:42.925147715Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:30:42.922713Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:30:42.926591436Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:30:43.353869973Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:30:43.771900201Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:43.771896Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:30:43.773281411Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:30:43.773762351Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:30:43.771896Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:30:43.774954255Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:30:44.698571075Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:30:45.772488801Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:45.772484Z","key":"5_mem_usage_host","value":"29.3/251 GiB (12..."}}
{"ts":"2024-10-03T23:30:45.772914744Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:45.772484Z","key":"4_cpu_usage_host","value":"2.64/64 cores (4..."}}
{"ts":"2024-10-03T23:30:45.773153566Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:45.772484Z","key":"1_ram_usage","value":"0.199 GiB\n"}}
{"ts":"2024-10-03T23:30:45.774484208Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:30:45.77493498Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:30:45.772484Z","keys":["5_mem_usage_host","4_cpu_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:30:45.7762233Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","4_cpu_usage_host","1_ram_usage"],"num":3}}
{"ts":"2024-10-03T23:30:46.698439154Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:30:46.914948314Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:46.914945Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:30:46.915384487Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:46.914945Z","key":"1_ram_usage","value":"0.193 GiB\n"}}
{"ts":"2024-10-03T23:30:46.915762037Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:46.914945Z","key":"4_cpu_usage_host","value":"2.11/64 cores (3..."}}
{"ts":"2024-10-03T23:30:46.916096434Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:46.914945Z","key":"0_cpu_usage","value":"0.179 cores\n"}}
{"ts":"2024-10-03T23:30:46.918397011Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:30:46.919119818Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:30:46.914945Z","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:30:46.921281737Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:30:47.354314046Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:30:48.773290141Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:48.773287Z","key":"0_cpu_usage","value":"0.019 cores\n"}}
{"ts":"2024-10-03T23:30:48.775617951Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:30:48.776314899Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:30:48.773287Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:30:48.778338771Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:30:49.69893851Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:30:53.354298049Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:30:53.772404065Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:53.772402Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:30:53.773822387Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:30:53.774452444Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:30:53.772402Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:30:53.77572283Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:30:53.914457356Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:53.914453Z","key":"5_mem_usage_host","value":"29.4/251 GiB (12..."}}
{"ts":"2024-10-03T23:30:53.916860241Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:30:53.917595913Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:30:53.914453Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:30:53.919416833Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:30:54.353798962Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:30:54.508616168Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:30:54.509543971Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:30:54.509849482Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:30:54.698437199Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:30:55.281195632Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:30:55.284609902Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.441543ms"}}
{"ts":"2024-10-03T23:30:55.334915437Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:30:55.337015827Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:30:55.337747992Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:30:55.341956929Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:30:55.342729672Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:30:56.773544744Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:56.773542Z","key":"1_ram_usage","value":"0.2 GiB\n"}}
{"ts":"2024-10-03T23:30:56.773813103Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:56.773542Z","key":"5_mem_usage_host","value":"29.4/251 GiB (12..."}}
{"ts":"2024-10-03T23:30:56.773956139Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:56.773542Z","key":"4_cpu_usage_host","value":"2.89/64 cores (5..."}}
{"ts":"2024-10-03T23:30:56.776092739Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:30:56.776696326Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:30:56.773542Z","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:30:56.778381313Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:30:57.698757832Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:30:57.914313761Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:57.91431Z","key":"4_cpu_usage_host","value":"1.58/64 cores (2..."}}
{"ts":"2024-10-03T23:30:57.914784361Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:57.91431Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:30:57.915058922Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:57.91431Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:30:57.915313764Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:30:57.91431Z","key":"0_cpu_usage","value":"0.131 cores\n"}}
{"ts":"2024-10-03T23:30:57.917480924Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":115}}
{"ts":"2024-10-03T23:30:57.918117865Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:30:57.91431Z","keys":["4_cpu_usage_host","7_swap_host","1_ram_usage","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:30:57.91994636Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","7_swap_host","1_ram_usage","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:30:57.931990402Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:30:57.933068456Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:30:57.993427966Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending handshake initiation","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:30:57.995005896Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Received handshake response","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:30:57.99528179Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending keepalive packet","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:30:58.354163039Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:30:58.511419129Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.02381ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:30:58.777589269Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:30:58.777587Z","key":"0_cpu_usage","value":"0.008 cores\n"}}
{"ts":"2024-10-03T23:30:58.779835582Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:30:58.780421083Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:30:58.777587Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:30:58.782277242Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:30:59.332291688Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:30:59.332524588Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:30:59.698605145Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:31:03.775862797Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:03.775858Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:31:03.77809904Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:31:03.778630778Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:31:03.775858Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:31:03.780405429Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:31:04.353486836Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:31:04.698385246Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:31:04.919436608Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:04.919432Z","key":"5_mem_usage_host","value":"29.4/251 GiB (12..."}}
{"ts":"2024-10-03T23:31:04.921932834Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:31:04.922590936Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:31:04.919432Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:31:04.924556646Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:31:05.354258287Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:31:07.773010533Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:07.773006Z","key":"5_mem_usage_host","value":"29.4/251 GiB (12..."}}
{"ts":"2024-10-03T23:31:07.773465703Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:07.773006Z","key":"1_ram_usage","value":"0.192 GiB\n"}}
{"ts":"2024-10-03T23:31:07.773736817Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:07.773006Z","key":"4_cpu_usage_host","value":"1.59/64 cores (2..."}}
{"ts":"2024-10-03T23:31:07.776090998Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:31:07.776881506Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:31:07.773006Z","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:31:07.778911831Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:31:07.914093409Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:07.91409Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:31:07.914480708Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:07.91409Z","key":"1_ram_usage","value":"0.192 GiB\n"}}
{"ts":"2024-10-03T23:31:07.91474564Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:07.91409Z","key":"4_cpu_usage_host","value":"1.78/64 cores (3..."}}
{"ts":"2024-10-03T23:31:07.914995413Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:07.91409Z","key":"0_cpu_usage","value":"0.276 cores\n"}}
{"ts":"2024-10-03T23:31:07.917215565Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":115}}
{"ts":"2024-10-03T23:31:07.917876723Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:31:07.91409Z","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:31:07.919853144Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:31:08.354013334Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:31:08.698038867Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:31:08.794155829Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.214,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":223},{"name":"magicsock_disco_recv_udp","type":1,"value":245},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":247},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":225},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":247},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":247},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:31:08.796000555Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:31:08.797268076Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:31:08.797882463Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:31:09.508580878Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:31:09.509204403Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:31:09.509402216Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:31:09.511260818Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"800.698µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:31:09.773204409Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:09.773199Z","key":"0_cpu_usage","value":"0.239 cores\n"}}
{"ts":"2024-10-03T23:31:09.775482994Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:31:09.776178528Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:31:09.773199Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:31:09.778111204Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:31:10.336816012Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:31:10.698686289Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:31:10.914752124Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:10.914748Z","key":"6_load_host","value":"0.07"}}
{"ts":"2024-10-03T23:31:10.917431624Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:31:10.918031594Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:31:10.914748Z","keys":["6_load_host"]}}}
{"ts":"2024-10-03T23:31:10.919880558Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host"],"num":1}}
{"ts":"2024-10-03T23:31:11.353935506Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:31:12.285924806Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:31:12.519386939Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:31:14.771539485Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:14.771536Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:31:14.772639913Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:31:14.772968227Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:31:14.771536Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:31:14.773961127Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:31:15.698539562Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:31:15.914383678Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:15.91438Z","key":"5_mem_usage_host","value":"29.4/251 GiB (12..."}}
{"ts":"2024-10-03T23:31:15.914908483Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:15.91438Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:31:15.917009163Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":87}}
{"ts":"2024-10-03T23:31:15.917722993Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:31:15.91438Z","keys":["5_mem_usage_host","3_home_disk"]}}}
{"ts":"2024-10-03T23:31:15.919357092Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host","3_home_disk"],"num":2}}
{"ts":"2024-10-03T23:31:16.354274828Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:31:16.772241767Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:16.772239Z","key":"6_load_host","value":"0.07"}}
{"ts":"2024-10-03T23:31:16.772498403Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:16.772239Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:31:16.773565475Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":83}}
{"ts":"2024-10-03T23:31:16.773958545Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:31:16.772239Z","keys":["6_load_host","3_home_disk"]}}}
{"ts":"2024-10-03T23:31:16.775009256Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["6_load_host","3_home_disk"],"num":2}}
{"ts":"2024-10-03T23:31:17.698948967Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:31:18.773216825Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:18.773213Z","key":"4_cpu_usage_host","value":"0.989/64 cores (..."}}
{"ts":"2024-10-03T23:31:18.773661585Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:18.773213Z","key":"1_ram_usage","value":"0.198 GiB\n"}}
{"ts":"2024-10-03T23:31:18.773929533Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:18.773213Z","key":"5_mem_usage_host","value":"29.4/251 GiB (12..."}}
{"ts":"2024-10-03T23:31:18.775936282Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:31:18.776606187Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:31:18.773213Z","keys":["4_cpu_usage_host","1_ram_usage","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:31:18.778654958Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["4_cpu_usage_host","1_ram_usage","5_mem_usage_host"],"num":3}}
{"ts":"2024-10-03T23:31:18.914324459Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:18.914321Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:31:18.914751054Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:18.914321Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:31:18.915022538Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:18.914321Z","key":"0_cpu_usage","value":"0.225 cores\n"}}
{"ts":"2024-10-03T23:31:18.915277952Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:18.914321Z","key":"4_cpu_usage_host","value":"0.695/64 cores (..."}}
{"ts":"2024-10-03T23:31:18.917336742Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:31:18.917850996Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:31:18.914321Z","keys":["7_swap_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:31:18.919685142Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:31:19.354077222Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:31:19.698822056Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:31:19.773497109Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:19.773493Z","key":"0_cpu_usage","value":"0.006 cores\n"}}
{"ts":"2024-10-03T23:31:19.775992383Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:31:19.776670654Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:31:19.773493Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:31:19.77854129Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:31:20.698619767Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:31:24.354414157Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:31:24.508674246Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:31:24.509367977Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:31:24.509532525Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:31:25.285416541Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.542458ms"}}
{"ts":"2024-10-03T23:31:25.337535802Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:31:25.341758606Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:31:25.342963084Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:31:25.698681971Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:31:25.77134714Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:25.771344Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:31:25.772959477Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:31:25.773461658Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:31:25.771344Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:31:25.774897884Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:31:26.698642399Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:31:26.914795182Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:26.914791Z","key":"5_mem_usage_host","value":"29.4/251 GiB (12..."}}
{"ts":"2024-10-03T23:31:26.916709984Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:31:26.91725646Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:31:26.914791Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:31:26.918380022Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:31:27.353939459Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:31:28.773169554Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:28.773166Z","key":"5_mem_usage_host","value":"29.4/251 GiB (12..."}}
{"ts":"2024-10-03T23:31:27.933035266Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:31:29.245082476Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:28.773166Z","key":"1_ram_usage","value":"0.192 GiB\n"}}
{"ts":"2024-10-03T23:31:29.245292803Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:28.773166Z","key":"4_cpu_usage_host","value":"2.3/64 cores (4%..."}}
{"ts":"2024-10-03T23:31:29.246856846Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:31:29.247714053Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:31:29.248330324Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:31:28.773166Z","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:31:29.250275885Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:31:29.333672799Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:31:29.3339317Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:31:29.511690705Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.285695ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:31:29.698059102Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:31:29.773362791Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:29.77336Z","key":"0_cpu_usage","value":"0.016 cores\n"}}
{"ts":"2024-10-03T23:31:29.775823809Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":68}}
{"ts":"2024-10-03T23:31:29.776514053Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:31:29.77336Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:31:29.778412282Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:31:29.913834216Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:29.913831Z","key":"1_ram_usage","value":"0.195 GiB\n"}}
{"ts":"2024-10-03T23:31:29.914118596Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:29.913831Z","key":"4_cpu_usage_host","value":"3.86/64 cores (6..."}}
{"ts":"2024-10-03T23:31:29.914313883Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:29.913831Z","key":"0_cpu_usage","value":"0.39 cores\n"}}
{"ts":"2024-10-03T23:31:29.914497929Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:29.913831Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:31:29.916468969Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:31:29.91702275Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:31:29.913831Z","keys":["1_ram_usage","4_cpu_usage_host","0_cpu_usage","7_swap_host"]}}}
{"ts":"2024-10-03T23:31:29.918795226Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage","4_cpu_usage_host","0_cpu_usage","7_swap_host"],"num":4}}
{"ts":"2024-10-03T23:31:30.353401962Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:31:30.698005112Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:31:35.354242539Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:31:35.699016681Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:31:36.773100176Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:36.773098Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:31:36.774867733Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:31:36.77530592Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:31:36.773098Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:31:36.778010739Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:31:36.917162392Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:36.917158Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:31:36.919294634Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:31:36.919844447Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:31:36.917158Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:31:36.921346941Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:31:37.353453835Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:31:37.698395911Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:31:38.771810324Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:38.771806Z","key":"1_ram_usage","value":"0.199 GiB\n"}}
{"ts":"2024-10-03T23:31:38.772261155Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:38.771806Z","key":"5_mem_usage_host","value":"29.3/251 GiB (12..."}}
{"ts":"2024-10-03T23:31:38.772586694Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:38.771806Z","key":"4_cpu_usage_host","value":"2.48/64 cores (4..."}}
{"ts":"2024-10-03T23:31:38.774668719Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:31:38.775332382Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:31:38.771806Z","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:31:38.777071654Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:31:38.796463571Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.271,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":234},{"name":"magicsock_disco_recv_udp","type":1,"value":256},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":258},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":236},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":258},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":258},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:31:38.798878329Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:31:38.800523208Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:31:38.800648651Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:31:39.508356287Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:31:39.508933082Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:31:39.509038416Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:31:39.511147473Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.046864ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:31:39.698746079Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:31:40.336120234Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:31:40.772976028Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:40.772971Z","key":"0_cpu_usage","value":"0.01 cores\n"}}
{"ts":"2024-10-03T23:31:40.774470237Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:31:40.77519086Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:31:40.772971Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:31:40.776518967Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:31:40.929718687Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:40.929716Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:31:40.930111817Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:40.929716Z","key":"1_ram_usage","value":"0.193 GiB\n"}}
{"ts":"2024-10-03T23:31:40.930371879Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:40.929716Z","key":"4_cpu_usage_host","value":"1.71/64 cores (3..."}}
{"ts":"2024-10-03T23:31:40.930602736Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:40.929716Z","key":"0_cpu_usage","value":"0.228 cores\n"}}
{"ts":"2024-10-03T23:31:40.932004876Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:31:40.93256547Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:31:40.929716Z","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:31:40.933806138Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:31:41.354011175Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:31:41.698787541Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:31:46.772684864Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:46.772682Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:31:46.774352527Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:31:46.774896359Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:31:46.772682Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:31:46.776525999Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:31:47.3542884Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:31:47.698300959Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:31:47.914795615Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:47.914792Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:31:47.917076403Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:31:47.917759294Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:31:47.914792Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:31:47.919663214Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:31:48.353956004Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:31:49.773277851Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:49.773273Z","key":"5_mem_usage_host","value":"29.3/251 GiB (12..."}}
{"ts":"2024-10-03T23:31:49.77374818Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:49.773273Z","key":"1_ram_usage","value":"0.192 GiB\n"}}
{"ts":"2024-10-03T23:31:49.774018914Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:49.773273Z","key":"4_cpu_usage_host","value":"3.11/64 cores (5..."}}
{"ts":"2024-10-03T23:31:49.776068967Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:31:49.776745104Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:31:49.773273Z","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:31:49.778537569Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:31:50.698437916Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:31:51.77401433Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:51.774009Z","key":"0_cpu_usage","value":"0.015 cores\n"}}
{"ts":"2024-10-03T23:31:51.776459086Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:31:51.777287197Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:31:51.774009Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:31:51.779403939Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:31:51.91451931Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:51.914515Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:31:51.914942999Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:51.914515Z","key":"1_ram_usage","value":"0.195 GiB\n"}}
{"ts":"2024-10-03T23:31:51.915208993Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:51.914515Z","key":"4_cpu_usage_host","value":"2.19/64 cores (3..."}}
{"ts":"2024-10-03T23:31:51.915469156Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:51.914515Z","key":"0_cpu_usage","value":"0.422 cores\n"}}
{"ts":"2024-10-03T23:31:51.917598232Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:31:51.918282976Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:31:51.914515Z","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:31:51.920342978Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:31:52.354081136Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:31:52.697967191Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:31:54.508351632Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:31:54.509084068Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:31:54.509336336Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:31:55.281464796Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:31:55.283288531Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"1.838855ms"}}
{"ts":"2024-10-03T23:31:55.334795349Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:31:55.335859707Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:31:55.336119629Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:31:55.341335912Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:31:55.342190625Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:31:57.698882292Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:31:57.772380612Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:31:57.772377Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:31:57.774445533Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:31:57.775129786Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:31:57.772377Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:31:57.777042243Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:31:57.914315205Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:31:57.914312Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:31:57.916534425Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:31:57.917197947Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:31:57.914312Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:31:57.918976956Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:31:57.932916733Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:31:57.935188024Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:31:58.353767689Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:31:58.511388056Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"955.457µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:31:58.698075551Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:31:59.335112216Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:31:59.335339605Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:32:00.773149565Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:00.773146Z","key":"1_ram_usage","value":"0.199 GiB\n"}}
{"ts":"2024-10-03T23:32:00.773582842Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:00.773146Z","key":"5_mem_usage_host","value":"29.3/251 GiB (12..."}}
{"ts":"2024-10-03T23:32:00.773852042Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:00.773146Z","key":"4_cpu_usage_host","value":"0.494/64 cores (..."}}
{"ts":"2024-10-03T23:32:00.775762866Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:32:00.776392684Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:32:00.773146Z","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:32:00.777983098Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:32:01.698000343Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:32:01.773708043Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:01.7737Z","key":"0_cpu_usage","value":"0.01 cores\n"}}
{"ts":"2024-10-03T23:32:01.77645855Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":67}}
{"ts":"2024-10-03T23:32:01.777138074Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:32:01.7737Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:32:01.778981177Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:32:02.69849102Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:32:02.919901529Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:02.919897Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:32:02.920333554Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:02.919897Z","key":"1_ram_usage","value":"0.193 GiB\n"}}
{"ts":"2024-10-03T23:32:02.920601001Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:02.919897Z","key":"4_cpu_usage_host","value":"1.59/64 cores (2..."}}
{"ts":"2024-10-03T23:32:02.920855553Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:02.919897Z","key":"0_cpu_usage","value":"0.081 cores\n"}}
{"ts":"2024-10-03T23:32:02.922953118Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:32:02.923734849Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:32:02.919897Z","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:32:02.925333549Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:32:03.353641441Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:32:08.698184477Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:32:08.772549301Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:08.772545Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:32:08.774713786Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:32:08.775401465Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:32:08.772545Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:32:08.777147771Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:32:08.793943759Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.246,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":245},{"name":"magicsock_disco_recv_udp","type":1,"value":267},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":269},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":247},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":269},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":269},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:32:08.795912675Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:32:08.79777714Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:32:08.797954092Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:32:08.915608429Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:08.915603Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:32:08.918771173Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:32:08.919412002Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:32:08.915603Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:32:08.921762726Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:32:09.353955638Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:32:09.508064116Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:32:09.50895082Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:32:09.509165896Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:32:09.511598318Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.28828ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:32:09.698211419Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:32:10.33715941Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:32:11.773831572Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:11.773826Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:32:11.774288105Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:11.773826Z","key":"4_cpu_usage_host","value":"2.26/64 cores (4..."}}
{"ts":"2024-10-03T23:32:11.774560281Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:11.773826Z","key":"1_ram_usage","value":"0.2 GiB\n"}}
{"ts":"2024-10-03T23:32:11.776886988Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:32:11.777663339Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:32:11.773826Z","keys":["5_mem_usage_host","4_cpu_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:32:11.779510019Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","4_cpu_usage_host","1_ram_usage"],"num":3}}
{"ts":"2024-10-03T23:32:11.914201872Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:11.914197Z","key":"6_load_host","value":"0.04"}}
{"ts":"2024-10-03T23:32:11.916633873Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:32:11.917362161Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:32:11.914197Z","keys":["6_load_host"]}}}
{"ts":"2024-10-03T23:32:11.91920293Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host"],"num":1}}
{"ts":"2024-10-03T23:32:12.285581046Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:32:12.354066385Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:32:12.519857165Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:32:12.698587399Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:32:12.773203028Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:12.773198Z","key":"0_cpu_usage","value":"0.014 cores\n"}}
{"ts":"2024-10-03T23:32:12.775802924Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:32:12.77661284Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:32:12.773198Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:32:12.778636612Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:32:12.914186393Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:12.914182Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:32:12.914591757Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:12.914182Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:32:12.914847231Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:12.914182Z","key":"4_cpu_usage_host","value":"2/64 cores (3%)\n"}}
{"ts":"2024-10-03T23:32:13.698532894Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:32:16.772963721Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:16.77296Z","key":"6_load_host","value":"0.05"}}
{"ts":"2024-10-03T23:32:17.35410707Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:32:29.329859598Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:12.914182Z","key":"0_cpu_usage","value":"0.143 cores\n"}}
{"ts":"2024-10-03T23:32:24.50871561Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:32:29.330049395Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:32:27.933042567Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:32:25.336763712Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:32:25.284473029Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.343052ms"}}
{"ts":"2024-10-03T23:32:25.34201327Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:32:29.330176581Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:16.77296Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:32:29.330346249Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:32:29.33074032Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:32:29.330918224Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:32:29.332206705Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:32:29.332636857Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:32:29.333156501Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:32:12.914182Z","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:32:29.334809858Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:32:29.335828567Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:32:29.335968287Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:32:29.337687601Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:32:29.339078049Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":82}}
{"ts":"2024-10-03T23:32:29.339661416Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:32:16.77296Z","keys":["6_load_host","3_home_disk"]}}}
{"ts":"2024-10-03T23:32:29.341533645Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["6_load_host","3_home_disk"],"num":2}}
{"ts":"2024-10-03T23:32:29.353810247Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:32:29.512393004Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.329971ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:32:29.698887758Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:32:29.772844875Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:29.772842Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:32:29.773143702Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:29.772842Z","key":"5_mem_usage_host","value":"29.3/251 GiB (12..."}}
{"ts":"2024-10-03T23:32:29.773348338Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:29.772842Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:32:29.773533636Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:29.772842Z","key":"4_cpu_usage_host","value":"1.29/64 cores (2..."}}
{"ts":"2024-10-03T23:32:29.773709767Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:29.772842Z","key":"0_cpu_usage","value":"0.014 cores\n"}}
{"ts":"2024-10-03T23:32:29.776072424Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":135}}
{"ts":"2024-10-03T23:32:29.776649169Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:32:29.772842Z","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:32:29.778480108Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host","5_mem_usage_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":5}}
{"ts":"2024-10-03T23:32:29.913898636Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:29.913895Z","key":"0_cpu_usage","value":"0.198 cores\n"}}
{"ts":"2024-10-03T23:32:29.914297577Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:29.913895Z","key":"4_cpu_usage_host","value":"1.59/64 cores (2..."}}
{"ts":"2024-10-03T23:32:29.914597347Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:29.913895Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:32:29.91485755Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:29.913895Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:32:29.915104998Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:29.913895Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:32:29.915351334Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:29.913895Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:32:29.917204046Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":149}}
{"ts":"2024-10-03T23:32:29.917803895Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:32:29.913895Z","keys":["0_cpu_usage","4_cpu_usage_host","3_home_disk","5_mem_usage_host","7_swap_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:32:29.919675253Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage","4_cpu_usage_host","3_home_disk","5_mem_usage_host","7_swap_host","1_ram_usage"],"num":6}}
{"ts":"2024-10-03T23:32:30.353686301Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:32:30.698662125Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:32:32.773696152Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:32.77369Z","key":"5_mem_usage_host","value":"29.3/251 GiB (12..."}}
{"ts":"2024-10-03T23:32:32.774148546Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:32.77369Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:32:32.774423397Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:32.77369Z","key":"4_cpu_usage_host","value":"1.89/64 cores (3..."}}
{"ts":"2024-10-03T23:32:32.776616397Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":106}}
{"ts":"2024-10-03T23:32:32.777173123Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:32:32.77369Z","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:32:32.778662111Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:32:33.698424658Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:32:33.916579995Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:33.916577Z","key":"1_ram_usage","value":"0.179 GiB\n"}}
{"ts":"2024-10-03T23:32:33.918818081Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:32:33.919449863Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:32:33.916577Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:32:33.9212848Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:32:34.354198828Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:32:34.772960858Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:34.772957Z","key":"0_cpu_usage","value":"0.011 cores\n"}}
{"ts":"2024-10-03T23:32:34.775167684Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:32:34.775864722Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:32:34.772957Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:32:34.777620175Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:32:34.914344348Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:34.914341Z","key":"0_cpu_usage","value":"0.121 cores\n"}}
{"ts":"2024-10-03T23:32:34.914777034Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:34.914341Z","key":"4_cpu_usage_host","value":"0.784/64 cores (..."}}
{"ts":"2024-10-03T23:32:34.915054661Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:34.914341Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:32:34.917355699Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:32:34.917912134Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:32:34.914341Z","keys":["0_cpu_usage","4_cpu_usage_host","7_swap_host"]}}}
{"ts":"2024-10-03T23:32:34.919680433Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage","4_cpu_usage_host","7_swap_host"],"num":3}}
{"ts":"2024-10-03T23:32:35.353919111Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:32:35.698722122Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:32:38.796860848Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.307,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":256},{"name":"magicsock_disco_recv_udp","type":1,"value":278},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":280},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":258},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":280},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":280},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:32:38.798913617Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:32:38.80253115Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:32:38.802958405Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:32:39.508611157Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:32:39.509359183Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:32:39.509576633Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:32:39.511507515Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"860.303µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:32:39.77598615Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:39.775983Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:32:39.779127743Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:32:39.779562805Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:32:39.775983Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:32:39.781115015Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:32:40.336186616Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:32:40.698085756Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:32:40.913418216Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:40.913415Z","key":"5_mem_usage_host","value":"29.3/251 GiB (12..."}}
{"ts":"2024-10-03T23:32:40.915347786Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:32:40.91601217Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:32:40.913415Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:32:40.917726384Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:32:41.353759482Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:32:43.773462093Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:43.773453Z","key":"5_mem_usage_host","value":"29.3/251 GiB (12..."}}
{"ts":"2024-10-03T23:32:43.77389548Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:43.773453Z","key":"1_ram_usage","value":"0.193 GiB\n"}}
{"ts":"2024-10-03T23:32:43.774179569Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:43.773453Z","key":"4_cpu_usage_host","value":"2.4/64 cores (4%..."}}
{"ts":"2024-10-03T23:32:43.776288316Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:32:43.77693724Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:32:43.773453Z","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:32:43.778807025Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:32:43.914759676Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:43.914757Z","key":"1_ram_usage","value":"0.179 GiB\n"}}
{"ts":"2024-10-03T23:32:43.916990217Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:32:43.917606709Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:32:43.914757Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:32:43.919511441Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:32:44.354341013Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:32:44.698138309Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:32:44.772582468Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:44.772579Z","key":"0_cpu_usage","value":"0.018 cores\n"}}
{"ts":"2024-10-03T23:32:44.774650916Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:32:44.775238793Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:32:44.772579Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:32:44.776784741Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:32:44.91409657Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:44.914093Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:32:44.91450012Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:44.914093Z","key":"0_cpu_usage","value":"0.135 cores\n"}}
{"ts":"2024-10-03T23:32:44.914769601Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:44.914093Z","key":"4_cpu_usage_host","value":"2.98/64 cores (5..."}}
{"ts":"2024-10-03T23:32:44.916829512Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:32:44.917502994Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:32:44.914093Z","keys":["7_swap_host","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:32:44.919410361Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","0_cpu_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:32:45.354264972Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:32:45.698883666Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:32:50.354391297Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:32:50.772688339Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:50.772686Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:32:50.774320434Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:32:50.774723163Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:32:50.772686Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:32:50.775693208Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:32:50.91445009Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:50.914446Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:32:50.91658627Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:32:50.917260834Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:32:50.914446Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:32:50.919082365Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:32:51.35416161Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:32:51.698534038Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:32:54.508691523Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:32:54.509359044Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:32:54.50951233Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:32:54.773914378Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:54.77391Z","key":"4_cpu_usage_host","value":"1.98/64 cores (3..."}}
{"ts":"2024-10-03T23:32:54.774345722Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:54.77391Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:32:54.774612878Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:54.77391Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:32:54.77670363Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":106}}
{"ts":"2024-10-03T23:32:54.777366251Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:32:54.77391Z","keys":["4_cpu_usage_host","5_mem_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:32:54.77915073Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["4_cpu_usage_host","5_mem_usage_host","1_ram_usage"],"num":3}}
{"ts":"2024-10-03T23:32:54.914475137Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:54.914472Z","key":"1_ram_usage","value":"0.18 GiB\n"}}
{"ts":"2024-10-03T23:32:54.916757218Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:32:54.917568797Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:32:54.914472Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:32:54.919480673Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:32:55.281401325Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:32:55.284695553Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.345988ms"}}
{"ts":"2024-10-03T23:32:55.335104759Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:32:55.336560272Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:32:55.338114587Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:32:55.341335434Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:32:55.342276372Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:32:55.353674245Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:32:55.698702542Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:32:55.773439116Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:32:55.773436Z","key":"0_cpu_usage","value":"0.012 cores\n"}}
{"ts":"2024-10-03T23:32:55.775847342Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:32:55.776649883Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:32:55.773436Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:32:55.778452067Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:32:55.916505178Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:55.9165Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:32:55.916951781Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:55.9165Z","key":"0_cpu_usage","value":"0.045 cores\n"}}
{"ts":"2024-10-03T23:32:55.917295265Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:32:55.9165Z","key":"4_cpu_usage_host","value":"2.18/64 cores (3..."}}
{"ts":"2024-10-03T23:32:55.919485078Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":100}}
{"ts":"2024-10-03T23:32:55.920296998Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:32:55.9165Z","keys":["7_swap_host","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:32:55.922244022Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","0_cpu_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:32:56.354092391Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:32:56.698364567Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:32:57.933505297Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:32:57.935675832Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:32:58.001508544Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending handshake initiation","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:32:58.002990028Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Received handshake response","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:32:58.003202749Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending keepalive packet","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:32:58.511767179Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.299732ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:32:59.336555163Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:32:59.336783254Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:33:00.77288289Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:33:00.772879Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:33:00.77498319Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:33:00.775585985Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:33:00.772879Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:33:00.77710954Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:33:00.913795749Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:00.913792Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:33:00.916132406Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:33:00.916743848Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:33:00.913792Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:33:00.918630145Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:33:01.353555733Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:33:01.698758037Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:33:04.914368473Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:04.914364Z","key":"1_ram_usage","value":"0.18 GiB\n"}}
{"ts":"2024-10-03T23:33:04.91691701Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:33:04.918178959Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:33:04.914364Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:33:04.920611962Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:33:05.353779883Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:33:05.772007342Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:33:05.772002Z","key":"4_cpu_usage_host","value":"3.17/64 cores (5..."}}
{"ts":"2024-10-03T23:33:05.772472512Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:33:05.772002Z","key":"1_ram_usage","value":"0.2 GiB\n"}}
{"ts":"2024-10-03T23:33:05.77275621Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:33:05.772002Z","key":"5_mem_usage_host","value":"29.3/251 GiB (12..."}}
{"ts":"2024-10-03T23:33:05.774080059Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:33:05.774648678Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:33:05.772002Z","keys":["4_cpu_usage_host","1_ram_usage","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:33:05.775662308Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["4_cpu_usage_host","1_ram_usage","5_mem_usage_host"],"num":3}}
{"ts":"2024-10-03T23:33:06.698655184Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:33:06.772187289Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:33:06.772185Z","key":"0_cpu_usage","value":"0.013 cores\n"}}
{"ts":"2024-10-03T23:33:06.773530967Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:33:06.773977099Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:33:06.772185Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:33:06.774890264Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:33:06.914103649Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:06.914097Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:33:06.914599217Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:06.914097Z","key":"4_cpu_usage_host","value":"2.18/64 cores (3..."}}
{"ts":"2024-10-03T23:33:06.914873517Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:06.914097Z","key":"0_cpu_usage","value":"0.161 cores\n"}}
{"ts":"2024-10-03T23:33:06.916151708Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:33:06.916622688Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:33:06.914097Z","keys":["7_swap_host","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:33:06.91780798Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","4_cpu_usage_host","0_cpu_usage"],"num":3}}
{"ts":"2024-10-03T23:33:07.353410757Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:33:07.698000076Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:33:09.508540639Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:33:10.337125484Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:33:11.773341376Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:33:11.773338Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:33:12.285295249Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:33:08.794622477Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.264,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":267},{"name":"magicsock_disco_recv_udp","type":1,"value":289},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":291},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":269},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":291},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":291},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:33:29.304656772Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:33:29.304559965Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:33:12.519512477Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:33:11.915954654Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:11.915948Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:33:25.283965948Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"2.199723ms"}}
{"ts":"2024-10-03T23:33:29.305051565Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:33:25.34148094Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:33:29.305265699Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:33:27.932765613Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:33:29.305150146Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:33:29.306550513Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:33:29.30697822Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:33:29.307046552Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:33:11.773338Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:33:29.3083906Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:33:29.312912521Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:33:29.313306473Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:33:29.313372701Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:33:29.314009432Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:33:29.314920353Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:33:29.316915269Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:33:29.317262951Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:33:11.915948Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:33:29.317499398Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:33:29.317935832Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:33:29.31914508Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:33:29.337227405Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:33:29.337368317Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:33:29.354379121Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:33:29.511355945Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":2,"elapsed":"832.209µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:33:29.698824452Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:33:29.773492444Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:33:29.773487Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:33:29.773902176Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:33:29.773487Z","key":"4_cpu_usage_host","value":"3.06/64 cores (5..."}}
{"ts":"2024-10-03T23:33:29.774230611Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:33:29.773487Z","key":"6_load_host","value":"0.03"}}
{"ts":"2024-10-03T23:33:29.774511624Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:33:29.773487Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:33:29.774808348Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:33:29.773487Z","key":"0_cpu_usage","value":"0.022 cores\n"}}
{"ts":"2024-10-03T23:33:29.77509384Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:33:29.773487Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:33:29.775365285Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:33:29.773487Z","key":"1_ram_usage","value":"0.195 GiB\n"}}
{"ts":"2024-10-03T23:33:29.777745355Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":163}}
{"ts":"2024-10-03T23:33:29.778500024Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:33:29.773487Z","keys":["5_mem_usage_host","4_cpu_usage_host","6_load_host","3_home_disk","0_cpu_usage","7_swap_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:33:29.780544987Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","4_cpu_usage_host","6_load_host","3_home_disk","0_cpu_usage","7_swap_host","1_ram_usage"],"num":7}}
{"ts":"2024-10-03T23:33:29.914257749Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:29.91425Z","key":"6_load_host","value":"0.03"}}
{"ts":"2024-10-03T23:33:29.914560555Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:29.91425Z","key":"1_ram_usage","value":"0.18 GiB\n"}}
{"ts":"2024-10-03T23:33:29.9147135Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:29.91425Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:33:29.914853381Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:29.91425Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:33:29.914986758Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:29.91425Z","key":"0_cpu_usage","value":"0.129 cores\n"}}
{"ts":"2024-10-03T23:33:29.915118684Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:29.91425Z","key":"4_cpu_usage_host","value":"1.47/64 cores (2..."}}
{"ts":"2024-10-03T23:33:29.915251781Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:29.91425Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:33:29.91753793Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":162}}
{"ts":"2024-10-03T23:33:29.918297248Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:33:29.91425Z","keys":["6_load_host","1_ram_usage","7_swap_host","3_home_disk","0_cpu_usage","4_cpu_usage_host","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:33:29.920382288Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host","1_ram_usage","7_swap_host","3_home_disk","0_cpu_usage","4_cpu_usage_host","5_mem_usage_host"],"num":7}}
{"ts":"2024-10-03T23:33:30.353663389Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:33:30.698046721Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:33:32.772830802Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:33:32.772825Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:33:32.775334912Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:33:32.776122445Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:33:32.772825Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:33:32.777556417Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:33:33.698307072Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:33:33.915022437Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:33.915018Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:33:33.917446212Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:33:33.918167497Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:33:33.915018Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:33:33.920394752Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:33:34.353866993Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:33:36.915497403Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:36.915491Z","key":"1_ram_usage","value":"0.18 GiB\n"}}
{"ts":"2024-10-03T23:33:36.917851704Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:33:36.918473717Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:33:36.915491Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:33:36.92033739Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:33:37.354269009Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:33:37.773646392Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:33:37.773641Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:33:37.774112383Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:33:37.773641Z","key":"1_ram_usage","value":"0.196 GiB\n"}}
{"ts":"2024-10-03T23:33:37.774398967Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:33:37.773641Z","key":"4_cpu_usage_host","value":"1.88/64 cores (3..."}}
{"ts":"2024-10-03T23:33:37.776755563Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:33:37.777425628Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:33:37.773641Z","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:33:37.779398331Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:33:37.913941418Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:37.913934Z","key":"4_cpu_usage_host","value":"1.39/64 cores (2..."}}
{"ts":"2024-10-03T23:33:37.914382962Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:37.913934Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:33:37.914658855Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:37.913934Z","key":"0_cpu_usage","value":"0.035 cores\n"}}
{"ts":"2024-10-03T23:33:37.916876031Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:33:37.917617996Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:33:37.913934Z","keys":["4_cpu_usage_host","7_swap_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:33:37.91967874Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","7_swap_host","0_cpu_usage"],"num":3}}
{"ts":"2024-10-03T23:33:38.353732084Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:33:38.698587458Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:33:38.771948894Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:33:38.771945Z","key":"0_cpu_usage","value":"0.015 cores\n"}}
{"ts":"2024-10-03T23:33:38.77354518Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:33:38.774128507Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:33:38.771945Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:33:38.775269473Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:33:38.794543011Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.277,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":278},{"name":"magicsock_disco_recv_udp","type":1,"value":300},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":302},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":280},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":302},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":302},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:33:38.79633258Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:33:38.797943114Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:33:38.79918242Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:33:39.508479271Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:33:39.509268877Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:33:39.509562855Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:33:39.511591868Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"951.56µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:33:39.698002831Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:33:40.337022479Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:33:43.774645876Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:33:43.774642Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:33:43.777688708Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:33:43.778274951Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:33:43.774642Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:33:43.780626877Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:33:43.91416372Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:43.914157Z","key":"5_mem_usage_host","value":"29.1/251 GiB (12..."}}
{"ts":"2024-10-03T23:33:43.916509995Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:33:43.9171332Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:33:43.914157Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:33:43.918986543Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:33:44.353553891Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:33:44.698459102Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:33:47.914411175Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:47.914407Z","key":"1_ram_usage","value":"0.18 GiB\n"}}
{"ts":"2024-10-03T23:33:47.916935294Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:33:47.91763158Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:33:47.914407Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:33:47.919469473Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:33:48.354162134Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:33:48.77361808Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:33:48.773613Z","key":"1_ram_usage","value":"0.201 GiB\n"}}
{"ts":"2024-10-03T23:33:48.774101424Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:33:48.773613Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:33:48.7745442Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:33:48.773613Z","key":"4_cpu_usage_host","value":"0.697/64 cores (..."}}
{"ts":"2024-10-03T23:33:48.776702392Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:33:48.777304446Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:33:48.773613Z","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:33:48.778785369Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:33:48.914502546Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:48.914499Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:33:48.914920774Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:48.914499Z","key":"0_cpu_usage","value":"0.137 cores\n"}}
{"ts":"2024-10-03T23:33:48.915187199Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:48.914499Z","key":"4_cpu_usage_host","value":"2.45/64 cores (4..."}}
{"ts":"2024-10-03T23:33:48.917533786Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:33:48.918318422Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:33:48.914499Z","keys":["7_swap_host","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:33:48.92031401Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","0_cpu_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:33:49.353576165Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:33:49.698606038Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:33:49.773335959Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:33:49.773329Z","key":"0_cpu_usage","value":"0.012 cores\n"}}
{"ts":"2024-10-03T23:33:49.775900697Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:33:49.776583146Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:33:49.773329Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:33:49.778503599Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:33:50.698522701Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:33:53.914650837Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:53.914647Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:33:53.916901067Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:33:53.917504293Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:33:53.914647Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:33:53.918963193Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:33:54.353940324Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:33:54.508442946Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:33:54.509142438Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:33:54.509329239Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:33:54.77307483Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:33:54.773071Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:33:54.775202132Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:33:54.77568234Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:33:54.773071Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:33:54.777057028Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:33:55.281055284Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:33:55.283347265Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"2.336246ms"}}
{"ts":"2024-10-03T23:33:55.334968254Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:33:55.33666814Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:33:55.337797724Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:33:55.342016339Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:33:55.343124782Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:33:55.698352097Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:33:57.914333886Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:57.91433Z","key":"1_ram_usage","value":"0.179 GiB\n"}}
{"ts":"2024-10-03T23:33:57.916791507Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":68}}
{"ts":"2024-10-03T23:33:57.91765194Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:33:57.91433Z","keys":["1_ram_usage"]}}}
{"ts":"2024-10-03T23:33:57.919589616Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage"],"num":1}}
{"ts":"2024-10-03T23:33:57.932087426Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:33:57.933545003Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:33:58.353429178Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:33:58.511573399Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"823.712µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:33:58.773699209Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:33:58.773694Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:33:58.774135442Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:33:58.773694Z","key":"4_cpu_usage_host","value":"0.589/64 cores (..."}}
{"ts":"2024-10-03T23:33:58.774405314Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:33:58.773694Z","key":"1_ram_usage","value":"0.201 GiB\n"}}
{"ts":"2024-10-03T23:33:58.776539409Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:33:58.777230255Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:33:58.773694Z","keys":["5_mem_usage_host","4_cpu_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:33:58.779151288Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","4_cpu_usage_host","1_ram_usage"],"num":3}}
{"ts":"2024-10-03T23:33:58.914249318Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:58.914245Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:33:58.914703516Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:58.914245Z","key":"0_cpu_usage","value":"0.042 cores\n"}}
{"ts":"2024-10-03T23:33:58.914971454Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:33:58.914245Z","key":"4_cpu_usage_host","value":"0.911/64 cores (..."}}
{"ts":"2024-10-03T23:33:58.916664848Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:33:58.917398145Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:33:58.914245Z","keys":["7_swap_host","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:33:58.918970194Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","0_cpu_usage","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:33:59.337572852Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:33:59.337762088Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:33:59.353758701Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:33:59.698887545Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:34:00.772620004Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:34:00.772617Z","key":"0_cpu_usage","value":"0.015 cores\n"}}
{"ts":"2024-10-03T23:34:04.914498528Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:34:04.914493Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:34:05.69798058Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:34:05.354262593Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:34:09.508022917Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:34:10.336790221Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:34:12.285458245Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:34:12.51919701Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:34:08.794021128Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.252,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":289},{"name":"magicsock_disco_recv_udp","type":1,"value":311},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":313},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":291},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":313},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":313},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:34:25.28343507Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"2.149215ms"}}
{"ts":"2024-10-03T23:34:29.463848959Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:34:25.341255193Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c37f3a0b-0952-4c61-bb4e-b2ec7eed4b7b","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:34:29.338059873Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:34:29.46438208Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:34:29.464495108Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:34:29.46391181Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:34:27.933427231Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:34:29.464560334Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:34:29.46447041Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:34:29.464969214Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:34:29.46508578Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:34:29.465906386Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:34:29.466549159Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:34:00.772617Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:34:29.466717264Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:34:29.467294089Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:34:04.914493Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:34:29.468446246Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:34:29.469347959Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c37f3a0b-0952-4c61-bb4e-b2ec7eed4b7b","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:34:29.469996363Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:34:29.470143477Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:34:29.470256987Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:34:29.47079678Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:34:29.472891359Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:34:29.474083694Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:34:29.512137597Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":2,"elapsed":"1.25183ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:34:29.698537079Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:34:29.773159834Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:34:29.773154Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:34:29.773600987Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:34:29.773154Z","key":"1_ram_usage","value":"0.194 GiB\n"}}
{"ts":"2024-10-03T23:34:29.77388699Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:34:29.773154Z","key":"4_cpu_usage_host","value":"0.396/64 cores (..."}}
{"ts":"2024-10-03T23:34:29.774149377Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:34:29.773154Z","key":"0_cpu_usage","value":"0.018 cores\n"}}
{"ts":"2024-10-03T23:34:29.774392166Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:34:29.773154Z","key":"6_load_host","value":"0.04"}}
{"ts":"2024-10-03T23:34:29.77463718Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:34:29.773154Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:34:29.774881592Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:34:29.773154Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:34:29.777015858Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":163}}
{"ts":"2024-10-03T23:34:29.77745636Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:34:29.773154Z","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage","6_load_host","3_home_disk","7_swap_host"]}}}
{"ts":"2024-10-03T23:34:29.778583358Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage","6_load_host","3_home_disk","7_swap_host"],"num":7}}
{"ts":"2024-10-03T23:34:29.913390256Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:34:29.913385Z","key":"0_cpu_usage","value":"0.08 cores\n"}}
{"ts":"2024-10-03T23:34:29.913700506Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:34:29.913385Z","key":"4_cpu_usage_host","value":"1.88/64 cores (3..."}}
{"ts":"2024-10-03T23:34:29.914007069Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:34:29.913385Z","key":"6_load_host","value":"0.04"}}
{"ts":"2024-10-03T23:34:29.914270698Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:34:29.913385Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:34:29.914528396Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:34:29.913385Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:34:29.914790243Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:34:29.913385Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:34:29.915040917Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:34:29.913385Z","key":"1_ram_usage","value":"0.18 GiB\n"}}
{"ts":"2024-10-03T23:34:29.916210809Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":163}}
{"ts":"2024-10-03T23:34:29.916670047Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:34:29.913385Z","keys":["0_cpu_usage","4_cpu_usage_host","6_load_host","5_mem_usage_host","3_home_disk","7_swap_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:34:29.918226575Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage","4_cpu_usage_host","6_load_host","5_mem_usage_host","3_home_disk","7_swap_host","1_ram_usage"],"num":7}}
{"ts":"2024-10-03T23:34:30.354480155Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:34:30.698498735Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:34:30.914195843Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:34:30.914193Z","key":"4_cpu_usage_host","value":"4.72/64 cores (7..."}}
{"ts":"2024-10-03T23:34:30.914464693Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:34:30.914193Z","key":"0_cpu_usage","value":"0.12 cores\n"}}
{"ts":"2024-10-03T23:34:30.916420444Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":88}}
{"ts":"2024-10-03T23:34:30.917128092Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:34:30.914193Z","keys":["4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:34:30.918824691Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","0_cpu_usage"],"num":2}}
{"ts":"2024-10-03T23:34:31.353681932Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:34:31.773135426Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:34:31.773132Z","key":"1_ram_usage","value":"0.201 GiB\n"}}
{"ts":"2024-10-03T23:34:31.773644921Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:34:31.773132Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:34:31.773978546Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:34:31.773132Z","key":"4_cpu_usage_host","value":"1.96/64 cores (3..."}}
{"ts":"2024-10-03T23:34:31.776207866Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:34:31.776866699Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:34:31.773132Z","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:34:31.778728578Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host"],"num":3}}
{"ts":"2024-10-03T23:34:32.698111636Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:34:32.773051133Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:34:32.773049Z","key":"0_cpu_usage","value":"0.003 cores\n"}}
{"ts":"2024-10-03T23:34:32.77494288Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:34:32.775515677Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:34:32.773049Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:34:32.777044373Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:34:33.697941748Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:34:36.354237887Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:34:36.772910632Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:34:36.772907Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:34:36.774863888Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:34:36.775370147Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:34:36.772907Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:34:36.776739735Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:34:37.698789117Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:34:37.91467479Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:34:37.91467Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:34:37.916724322Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":73}}
{"ts":"2024-10-03T23:34:37.91716811Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:34:37.91467Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:34:37.918290871Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:34:38.353464915Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:34:38.796191348Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.329,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":300},{"name":"magicsock_disco_recv_udp","type":1,"value":322},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":324},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":302},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":324},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":324},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:34:38.798478219Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:34:38.800917625Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:34:38.801801263Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:34:39.508622283Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:34:39.509519517Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:34:39.509768689Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:34:39.512164601Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.255638ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:34:39.914599185Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:34:39.914596Z","key":"1_ram_usage","value":"0.182 GiB\n"}}
{"ts":"2024-10-03T23:34:39.915014077Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:34:39.914596Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:34:39.917349682Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":83}}
{"ts":"2024-10-03T23:34:39.91803102Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:34:39.914596Z","keys":["1_ram_usage","7_swap_host"]}}}
{"ts":"2024-10-03T23:34:39.919906405Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage","7_swap_host"],"num":2}}
{"ts":"2024-10-03T23:34:40.336615724Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:34:40.353948691Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:34:41.7734089Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:34:41.773405Z","key":"4_cpu_usage_host","value":"1.69/64 cores (3..."}}
{"ts":"2024-10-03T23:34:41.773847277Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:34:41.773405Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:34:41.774120796Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:34:41.773405Z","key":"1_ram_usage","value":"0.195 GiB\n"}}
{"ts":"2024-10-03T23:34:41.776319105Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":107}}
{"ts":"2024-10-03T23:34:41.777067592Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:34:41.773405Z","keys":["4_cpu_usage_host","5_mem_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:34:41.779109179Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["4_cpu_usage_host","5_mem_usage_host","1_ram_usage"],"num":3}}
{"ts":"2024-10-03T23:34:41.914096125Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:34:41.914093Z","key":"0_cpu_usage","value":"0.042 cores\n"}}
{"ts":"2024-10-03T23:34:41.914413098Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:34:41.914093Z","key":"4_cpu_usage_host","value":"2.07/64 cores (3..."}}
{"ts":"2024-10-03T23:34:41.916140807Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":88}}
{"ts":"2024-10-03T23:34:41.916753682Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:34:41.914093Z","keys":["0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:34:41.918006875Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage","4_cpu_usage_host"],"num":2}}
{"ts":"2024-10-03T23:34:42.354172396Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:34:42.698078588Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:34:42.773480759Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:34:42.773476Z","key":"0_cpu_usage","value":"0.01 cores\n"}}
{"ts":"2024-10-03T23:34:42.776002093Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:34:42.776736303Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:34:42.773476Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:34:42.778589595Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:34:43.69848269Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:34:46.773836232Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:34:46.773832Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:34:46.77653034Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:34:46.777147894Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:34:46.773832Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:34:46.779839327Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:34:47.698436206Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:34:48.354034818Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:34:48.915069266Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:34:48.915064Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:34:48.916998586Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:34:48.917604688Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:34:48.915064Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:34:48.919516343Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:34:49.353630849Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:34:49.914956571Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:34:49.914952Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:34:49.915403074Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:34:49.914952Z","key":"1_ram_usage","value":"0.18 GiB\n"}}
{"ts":"2024-10-03T23:34:49.917649406Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":83}}
{"ts":"2024-10-03T23:34:49.918293351Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:34:49.914952Z","keys":["7_swap_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:34:49.920286293Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage"],"num":2}}
{"ts":"2024-10-03T23:34:50.354253154Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:34:52.773295418Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:34:52.773292Z","key":"1_ram_usage","value":"0.208 GiB\n"}}
{"ts":"2024-10-03T23:34:52.773727664Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:34:52.773292Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:34:52.774024137Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:34:52.773292Z","key":"4_cpu_usage_host","value":"0.699/64 cores (..."}}
{"ts":"2024-10-03T23:34:52.774290662Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:34:52.773292Z","key":"0_cpu_usage","value":"0.235 cores\n"}}
{"ts":"2024-10-03T23:34:52.776367637Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":121}}
{"ts":"2024-10-03T23:34:52.777002875Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:34:52.773292Z","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:34:52.778559023Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:34:52.913829598Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:34:52.913817Z","key":"4_cpu_usage_host","value":"0.916/64 cores (..."}}
{"ts":"2024-10-03T23:34:52.914216566Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:34:52.913817Z","key":"0_cpu_usage","value":"0.175 cores\n"}}
{"ts":"2024-10-03T23:34:52.916299713Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":88}}
{"ts":"2024-10-03T23:34:52.916879985Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:34:52.913817Z","keys":["4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:34:52.91858943Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","0_cpu_usage"],"num":2}}
{"ts":"2024-10-03T23:34:53.353599277Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:34:53.698351364Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:34:54.508580146Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:34:54.509382477Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:34:54.509541004Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:34:54.512816526Z","level":"DEBUG","msg":"check inactive user accounts","caller":"/home/runner/work/coder/coder/enterprise/coderd/dormancy/dormantusersjob.go:49","func":"github.com/coder/coder/v2/enterprise/coderd/dormancy.CheckInactiveUsersWithOptions.func1","logger_names":["coderd","dormancy"],"fields":{"dormancy_period":"2160h0m0s","last_seen_after":"2024-07-05T23:34:54.512811Z"}}
{"ts":"2024-10-03T23:34:54.513862959Z","level":"DEBUG","msg":"checking user accounts is done","caller":"/home/runner/work/coder/coder/enterprise/coderd/dormancy/dormantusersjob.go:63","func":"github.com/coder/coder/v2/enterprise/coderd/dormancy.CheckInactiveUsersWithOptions.func1","logger_names":["coderd","dormancy"],"fields":{"num_dormant_accounts":0,"execution_time":"1.050952ms"}}
{"ts":"2024-10-03T23:34:54.638441775Z","level":"DEBUG","msg":"submitted deployment info","caller":"/home/runner/work/coder/coder/coderd/telemetry/telemetry.go:282","func":"github.com/coder/coder/v2/coderd/telemetry.(*remoteReporter).deployment","logger_names":["telemetry"]}
{"ts":"2024-10-03T23:34:54.720624464Z","level":"DEBUG","msg":"submitted snapshot","caller":"/home/runner/work/coder/coder/coderd/telemetry/telemetry.go:150","func":"github.com/coder/coder/v2/coderd/telemetry.(*remoteReporter).reportSync","logger_names":["telemetry"]}
{"ts":"2024-10-03T23:34:55.28166794Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:34:55.285545465Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.908956ms"}}
{"ts":"2024-10-03T23:34:55.289873572Z","level":"DEBUG","msg":"pruning inactive agents","caller":"/home/runner/work/coder/coder/coderd/tailnet.go:235","func":"github.com/coder/coder/v2/coderd.(*ServerTailnet).doExpireOldAgents","logger_names":["coderd","servertailnet"],"fields":{"agent_count":1}}
{"ts":"2024-10-03T23:34:55.29008464Z","level":"DEBUG","msg":"successfully pruned inactive agents","caller":"/home/runner/work/coder/coder/coderd/tailnet.go:251","func":"github.com/coder/coder/v2/coderd.(*ServerTailnet).doExpireOldAgents","logger_names":["coderd","servertailnet"],"fields":{"deleted":0,"took":"211.228µs"}}
{"ts":"2024-10-03T23:34:55.334834207Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:34:55.33836898Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:34:55.338406011Z","level":"DEBUG","msg":"syncing licensed entitlements","caller":"/home/runner/work/coder/coder/enterprise/coderd/coderd.go:1068","func":"github.com/coder/coder/v2/enterprise/coderd.(*API).runEntitlementsLoop","logger_names":["coderd"]}
{"ts":"2024-10-03T23:34:55.338590348Z","level":"INFO","msg":"report generator finished","caller":"/home/runner/work/coder/coder/coderd/notifications/reports/generator.go:57","func":"github.com/coder/coder/v2/coderd/notifications/reports.NewReportGenerator.func1.1","logger_names":["notifications.report_generator"],"fields":{"duration":"1.033374ms"}}
{"ts":"2024-10-03T23:34:55.339956488Z","level":"DEBUG","msg":"synced licensed entitlements","caller":"/home/runner/work/coder/coder/enterprise/coderd/coderd.go:1076","func":"github.com/coder/coder/v2/enterprise/coderd.(*API).runEntitlementsLoop","logger_names":["coderd"]}
{"ts":"2024-10-03T23:34:55.341235461Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:34:55.342493503Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:34:55.345236906Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:34:55.352247869Z","level":"INFO","msg":"purged old database entries","caller":"/home/runner/work/coder/coder/coderd/database/dbpurge/dbpurge.go:66","func":"github.com/coder/coder/v2/coderd/database/dbpurge.New.func1.1","logger_names":["dbpurge"],"fields":{"duration":"2.936597ms"}}
{"ts":"2024-10-03T23:34:57.774148721Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:34:57.774146Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:34:57.77590721Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:34:57.776374624Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:34:57.774146Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:34:57.777493878Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:34:57.932945354Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:34:57.93507435Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:34:58.009491487Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending handshake initiation","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:34:58.010901783Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Received handshake response","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:34:58.011112471Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending keepalive packet","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:34:58.353804036Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:34:58.511825461Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.672684ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:34:58.69816095Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:34:59.465106109Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:34:59.465316226Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:34:59.915361238Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:34:59.915355Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:34:59.917797347Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:34:59.918640718Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:34:59.915355Z","keys":["5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:35:00.354037213Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:35:00.914662931Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:35:00.914659Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:34:59.920658218Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host"],"num":1}}
{"ts":"2024-10-03T23:35:00.001055115Z","level":"DEBUG","msg":"rolling up data","caller":"/home/runner/work/coder/coder/coderd/database/dbrollup/dbrollup.go:91","func":"github.com/coder/coder/v2/coderd/database/dbrollup.(*Rolluper).start.func1","logger_names":["coderd","dbrollup"]}
{"ts":"2024-10-03T23:35:02.773789642Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:35:02.773785Z","key":"1_ram_usage","value":"0.209 GiB\n"}}
{"ts":"2024-10-03T23:35:03.698294314Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:35:09.508678416Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:35:29.320108904Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:35:02.773785Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:35:10.337469682Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:35:29.320295314Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:35:12.51959425Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:35:08.794555187Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.228,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":311},{"name":"magicsock_disco_recv_udp","type":1,"value":333},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":335},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":313},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":335},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":335},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:35:29.320433561Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:35:02.773785Z","key":"4_cpu_usage_host","value":"1.19/64 cores (2..."}}
{"ts":"2024-10-03T23:35:25.284521234Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.338283ms"}}
{"ts":"2024-10-03T23:35:12.285677931Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:35:25.341741178Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:35:29.320730325Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:35:02.773785Z","key":"0_cpu_usage","value":"0.344 cores\n"}}
{"ts":"2024-10-03T23:35:29.320171525Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:35:29.320935111Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:35:29.319934677Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:35:00.914659Z","key":"1_ram_usage","value":"0.182 GiB\n"}}
{"ts":"2024-10-03T23:35:27.933016299Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:35:29.321049462Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:35:29.321021869Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:35:29.322356839Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":121}}
{"ts":"2024-10-03T23:35:29.322490398Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:35:29.323238444Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:35:02.773785Z","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:35:29.325493082Z","level":"DEBUG","msg":"rolled up data","caller":"/home/runner/work/coder/coder/coderd/database/dbrollup/dbrollup.go:126","func":"github.com/coder/coder/v2/coderd/database/dbrollup.(*Rolluper).start.func1","logger_names":["coderd","dbrollup"],"fields":{"took":"5.487399ms","event":{"template_usage_stats":true}}}
{"ts":"2024-10-03T23:35:29.325682148Z","level":"DEBUG","msg":"next rollup at","caller":"/home/runner/work/coder/coder/coderd/database/dbrollup/dbrollup.go:174","func":"github.com/coder/coder/v2/coderd/database/dbrollup.(*Rolluper).start","logger_names":["coderd","dbrollup"],"fields":{"next":"2024-10-03T23:40:00Z"}}
{"ts":"2024-10-03T23:35:29.325959604Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:35:29.326332996Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:35:29.32646952Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:35:29.327456638Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:35:29.328115371Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:35:29.330249036Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:35:29.330364299Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":83}}
{"ts":"2024-10-03T23:35:29.330732671Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:35:00.914659Z","keys":["7_swap_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:35:29.33184986Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:35:29.332533081Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage"],"num":2}}
{"ts":"2024-10-03T23:35:29.332740232Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:35:29.353526785Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:35:29.46561205Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:35:29.465835892Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:35:29.511941651Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":2,"elapsed":"1.181685ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:35:29.698517355Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:35:29.772841713Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:35:29.772836Z","key":"4_cpu_usage_host","value":"0.695/64 cores (..."}}
{"ts":"2024-10-03T23:35:29.773159267Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:35:29.772836Z","key":"0_cpu_usage","value":"0.223 cores\n"}}
{"ts":"2024-10-03T23:35:29.773326791Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:35:29.772836Z","key":"6_load_host","value":"0.03"}}
{"ts":"2024-10-03T23:35:29.773457143Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:35:29.772836Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:35:29.773571975Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:35:29.772836Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:35:29.773678501Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:35:29.772836Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:35:29.773810316Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:35:29.772836Z","key":"1_ram_usage","value":"0.209 GiB\n"}}
{"ts":"2024-10-03T23:35:29.775093957Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":163}}
{"ts":"2024-10-03T23:35:29.775533177Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:35:29.772836Z","keys":["4_cpu_usage_host","0_cpu_usage","6_load_host","3_home_disk","7_swap_host","5_mem_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:35:29.776684202Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["4_cpu_usage_host","0_cpu_usage","6_load_host","3_home_disk","7_swap_host","5_mem_usage_host","1_ram_usage"],"num":7}}
{"ts":"2024-10-03T23:35:29.913732894Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:35:29.913726Z","key":"4_cpu_usage_host","value":"1.48/64 cores (2..."}}
{"ts":"2024-10-03T23:35:29.914057071Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:35:29.913726Z","key":"0_cpu_usage","value":"0.012 cores\n"}}
{"ts":"2024-10-03T23:35:29.91427416Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:35:29.913726Z","key":"5_mem_usage_host","value":"29.1/251 GiB (12..."}}
{"ts":"2024-10-03T23:35:29.914476882Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:35:29.913726Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:35:29.914685055Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:35:29.913726Z","key":"1_ram_usage","value":"0.181 GiB\n"}}
{"ts":"2024-10-03T23:35:29.914883097Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:35:29.913726Z","key":"6_load_host","value":"0.02"}}
{"ts":"2024-10-03T23:35:29.915076121Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:35:29.913726Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:35:29.918451355Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":163}}
{"ts":"2024-10-03T23:35:29.919136369Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:35:29.913726Z","keys":["4_cpu_usage_host","0_cpu_usage","5_mem_usage_host","7_swap_host","1_ram_usage","6_load_host","3_home_disk"]}}}
{"ts":"2024-10-03T23:35:29.92253514Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host","0_cpu_usage","5_mem_usage_host","7_swap_host","1_ram_usage","6_load_host","3_home_disk"],"num":7}}
{"ts":"2024-10-03T23:35:30.353781554Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:35:30.698353495Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:35:31.914700147Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:35:31.914697Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:35:31.915112564Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:35:31.914697Z","key":"1_ram_usage","value":"0.187 GiB\n"}}
{"ts":"2024-10-03T23:35:31.915390541Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:35:31.914697Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:35:31.917711167Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:35:31.918398667Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:35:31.914697Z","keys":["7_swap_host","1_ram_usage","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:35:31.920433691Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","5_mem_usage_host"],"num":3}}
{"ts":"2024-10-03T23:35:32.354179556Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:35:34.773852139Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:35:34.773848Z","key":"1_ram_usage","value":"0.209 GiB\n"}}
{"ts":"2024-10-03T23:35:34.774307389Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:35:34.773848Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:35:34.774615736Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:35:34.773848Z","key":"4_cpu_usage_host","value":"0.7/64 cores (1%..."}}
{"ts":"2024-10-03T23:35:34.774882231Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:35:34.773848Z","key":"0_cpu_usage","value":"0.169 cores\n"}}
{"ts":"2024-10-03T23:35:34.777057035Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":121}}
{"ts":"2024-10-03T23:35:34.777727631Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:35:34.773848Z","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:35:34.780081362Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:35:34.914762077Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:35:34.914758Z","key":"4_cpu_usage_host","value":"0.293/64 cores (..."}}
{"ts":"2024-10-03T23:35:34.917223785Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:35:34.918102133Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:35:34.914758Z","keys":["4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:35:34.920211831Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host"],"num":1}}
{"ts":"2024-10-03T23:35:35.353833607Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:35:35.698313791Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:35:35.91548948Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:35:35.915486Z","key":"0_cpu_usage","value":"0.017 cores\n"}}
{"ts":"2024-10-03T23:35:35.917998139Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:35:35.918725555Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:35:35.915486Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:35:35.920777933Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:35:36.353837091Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:35:38.795954615Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.295,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":322},{"name":"magicsock_disco_recv_udp","type":1,"value":344},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":346},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":324},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":346},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":346},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:35:38.798107867Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:35:38.800742982Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:35:38.800825241Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:35:39.508091095Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:35:39.508961127Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:35:39.509146736Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:35:39.511887835Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.656353ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:35:40.339185907Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:35:40.772389254Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:35:40.772386Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:35:40.77464743Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:35:40.775164229Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:35:40.772386Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:35:40.776555709Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:35:41.698712425Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:35:41.914653076Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:35:41.91465Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:35:41.915070654Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:35:41.91465Z","key":"1_ram_usage","value":"0.186 GiB\n"}}
{"ts":"2024-10-03T23:35:41.915340054Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:35:41.91465Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:35:41.917458309Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":101}}
{"ts":"2024-10-03T23:35:41.918217306Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:35:41.91465Z","keys":["7_swap_host","1_ram_usage","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:35:41.920029459Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","5_mem_usage_host"],"num":3}}
{"ts":"2024-10-03T23:35:42.354335158Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:35:45.773766426Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:35:45.773763Z","key":"1_ram_usage","value":"0.209 GiB\n"}}
{"ts":"2024-10-03T23:35:45.774224832Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:35:45.773763Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:35:45.774499012Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:35:45.773763Z","key":"0_cpu_usage","value":"0.189 cores\n"}}
{"ts":"2024-10-03T23:35:45.774752742Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:35:45.773763Z","key":"4_cpu_usage_host","value":"1.49/64 cores (2..."}}
{"ts":"2024-10-03T23:35:45.776920212Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":121}}
{"ts":"2024-10-03T23:35:45.777574257Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:35:45.773763Z","keys":["1_ram_usage","5_mem_usage_host","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:35:45.779042986Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","5_mem_usage_host","0_cpu_usage","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:35:45.9138525Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:35:45.913849Z","key":"4_cpu_usage_host","value":"2.46/64 cores (4..."}}
{"ts":"2024-10-03T23:35:45.916249324Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:35:45.916947092Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:35:45.913849Z","keys":["4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:35:45.919290352Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host"],"num":1}}
{"ts":"2024-10-03T23:35:46.353640777Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:35:46.698598144Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:35:46.91453121Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:35:46.914527Z","key":"0_cpu_usage","value":"0.01 cores\n"}}
{"ts":"2024-10-03T23:35:46.917045811Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:35:46.917833584Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:35:46.914527Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:35:46.919366667Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:35:47.354158496Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:35:51.773581067Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:35:51.773577Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:35:51.776597839Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:35:51.777179062Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:35:51.773577Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:35:51.779828735Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:35:52.354245406Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:35:52.698049694Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:35:52.914954659Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:35:52.91495Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:35:52.91538415Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:35:52.91495Z","key":"1_ram_usage","value":"0.187 GiB\n"}}
{"ts":"2024-10-03T23:35:52.915693678Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:35:52.91495Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:35:52.917882279Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":101}}
{"ts":"2024-10-03T23:35:52.918593784Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:35:52.91495Z","keys":["7_swap_host","1_ram_usage","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:35:52.920675228Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","5_mem_usage_host"],"num":3}}
{"ts":"2024-10-03T23:35:53.353699609Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:35:54.508050789Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:35:54.508697289Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:35:54.508803775Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:35:55.281068221Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:35:55.286352687Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"5.2457ms"}}
{"ts":"2024-10-03T23:35:55.335084311Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:35:55.338138626Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:35:55.338956096Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:35:55.341118677Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:35:55.342444109Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:35:55.914800327Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:35:55.914797Z","key":"4_cpu_usage_host","value":"2/64 cores (3%)\n"}}
{"ts":"2024-10-03T23:35:55.917413829Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:35:55.918145113Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:35:55.914797Z","keys":["4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:35:55.920046418Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host"],"num":1}}
{"ts":"2024-10-03T23:35:56.353705538Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:35:56.773609726Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:35:56.773606Z","key":"1_ram_usage","value":"0.203 GiB\n"}}
{"ts":"2024-10-03T23:35:56.774081458Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:35:56.773606Z","key":"4_cpu_usage_host","value":"1.59/64 cores (2..."}}
{"ts":"2024-10-03T23:35:56.774357041Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:35:56.773606Z","key":"0_cpu_usage","value":"0.361 cores\n"}}
{"ts":"2024-10-03T23:35:56.774619017Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:35:56.773606Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:35:56.776711873Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":121}}
{"ts":"2024-10-03T23:35:56.777356029Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:35:56.773606Z","keys":["1_ram_usage","4_cpu_usage_host","0_cpu_usage","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:35:56.778988975Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","4_cpu_usage_host","0_cpu_usage","5_mem_usage_host"],"num":4}}
{"ts":"2024-10-03T23:35:56.914395313Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:35:56.914392Z","key":"0_cpu_usage","value":"0.004 cores\n"}}
{"ts":"2024-10-03T23:35:56.916666834Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:35:56.917281232Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:35:56.914392Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:35:56.919046144Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:35:57.353694105Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:35:57.6982782Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:35:57.933546895Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:35:57.935836Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:35:58.512099211Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.318899ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:35:59.466695369Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:35:59.46695437Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:36:01.772886375Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:36:01.772881Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:36:01.774951618Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:36:02.69855906Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:36:02.353932703Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:36:03.914661144Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:36:03.914657Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:36:09.508694407Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:36:10.336609836Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:36:12.285163365Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:36:29.499497284Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:36:12.520273122Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:36:08.795222754Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.211,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":333},{"name":"magicsock_disco_recv_udp","type":1,"value":355},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":357},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":335},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":357},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":357},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:36:29.49960918Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:36:25.341982871Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:36:25.28479055Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.560843ms"}}
{"ts":"2024-10-03T23:36:29.46715879Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:36:29.500084399Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:36:27.935151327Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:36:29.500194462Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:36:29.500156779Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:36:29.500180164Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:36:29.499475161Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:36:03.914657Z","key":"1_ram_usage","value":"0.187 GiB\n"}}
{"ts":"2024-10-03T23:36:29.499955981Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:36:01.772881Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:36:29.500612801Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:36:29.500533778Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:36:29.500433053Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:36:03.914657Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:36:29.501287765Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:36:29.501732676Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:36:29.502819948Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:36:29.50330767Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:36:03.914657Z","keys":["7_swap_host","1_ram_usage","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:36:29.504981286Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:36:29.505269192Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","5_mem_usage_host"],"num":3}}
{"ts":"2024-10-03T23:36:29.505334799Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:36:29.506062696Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:36:29.507874208Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:36:29.509441147Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:36:29.511361018Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":2,"elapsed":"942.813µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:36:29.698132242Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:36:29.773093432Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:36:29.773086Z","key":"0_cpu_usage","value":"0.017 cores\n"}}
{"ts":"2024-10-03T23:36:29.773377581Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:36:29.773086Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:36:29.773514516Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:36:29.773086Z","key":"1_ram_usage","value":"0.196 GiB\n"}}
{"ts":"2024-10-03T23:36:29.773648766Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:36:29.773086Z","key":"4_cpu_usage_host","value":"0.896/64 cores (..."}}
{"ts":"2024-10-03T23:36:29.773776292Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:36:29.773086Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:36:29.773915792Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:36:29.773086Z","key":"6_load_host","value":"0.02"}}
{"ts":"2024-10-03T23:36:29.774043338Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:36:29.773086Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:36:29.775987026Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":163}}
{"ts":"2024-10-03T23:36:29.776751734Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:36:29.773086Z","keys":["0_cpu_usage","5_mem_usage_host","1_ram_usage","4_cpu_usage_host","7_swap_host","6_load_host","3_home_disk"]}}}
{"ts":"2024-10-03T23:36:29.778702355Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage","5_mem_usage_host","1_ram_usage","4_cpu_usage_host","7_swap_host","6_load_host","3_home_disk"],"num":7}}
{"ts":"2024-10-03T23:36:29.914409124Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:36:29.914405Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:36:29.914799218Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:36:29.914405Z","key":"6_load_host","value":"0.02"}}
{"ts":"2024-10-03T23:36:29.91508999Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:36:29.914405Z","key":"5_mem_usage_host","value":"29.2/251 GiB (12..."}}
{"ts":"2024-10-03T23:36:29.91534887Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:36:29.914405Z","key":"1_ram_usage","value":"0.182 GiB\n"}}
{"ts":"2024-10-03T23:36:29.915620084Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:36:29.914405Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:36:29.915875087Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:36:29.914405Z","key":"4_cpu_usage_host","value":"1.4/64 cores (2%..."}}
{"ts":"2024-10-03T23:36:29.916132395Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:36:29.914405Z","key":"0_cpu_usage","value":"0.016 cores\n"}}
{"ts":"2024-10-03T23:36:29.917847861Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":163}}
{"ts":"2024-10-03T23:36:29.918318Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:36:29.914405Z","keys":["7_swap_host","6_load_host","5_mem_usage_host","1_ram_usage","3_home_disk","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:36:29.91930569Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","6_load_host","5_mem_usage_host","1_ram_usage","3_home_disk","4_cpu_usage_host","0_cpu_usage"],"num":7}}
{"ts":"2024-10-03T23:36:30.354429111Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:36:30.698265923Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:36:33.773223736Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:36:33.773221Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:36:33.775714331Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:36:33.776527323Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:36:33.773221Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:36:33.777852644Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:36:34.699024592Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:36:34.914286161Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:36:34.914283Z","key":"5_mem_usage_host","value":"29.3/251 GiB (12..."}}
{"ts":"2024-10-03T23:36:34.914586803Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:36:34.914283Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:36:34.914783503Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:36:34.914283Z","key":"1_ram_usage","value":"0.187 GiB\n"}}
{"ts":"2024-10-03T23:36:34.917799022Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:36:34.918395645Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:36:34.914283Z","keys":["5_mem_usage_host","7_swap_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:36:34.921052832Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host","7_swap_host","1_ram_usage"],"num":3}}
{"ts":"2024-10-03T23:36:35.354006329Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:36:37.914418035Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:36:37.914415Z","key":"4_cpu_usage_host","value":"1.28/64 cores (2..."}}
{"ts":"2024-10-03T23:36:37.916547902Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:36:37.91725003Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:36:37.914415Z","keys":["4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:36:37.919080969Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host"],"num":1}}
{"ts":"2024-10-03T23:36:38.354073237Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:36:38.77302686Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:36:38.773021Z","key":"5_mem_usage_host","value":"29.3/251 GiB (12..."}}
{"ts":"2024-10-03T23:36:38.773324927Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:36:38.773021Z","key":"0_cpu_usage","value":"0.167 cores\n"}}
{"ts":"2024-10-03T23:36:38.77350802Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:36:38.773021Z","key":"4_cpu_usage_host","value":"2.06/64 cores (3..."}}
{"ts":"2024-10-03T23:36:38.77369908Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:36:38.773021Z","key":"1_ram_usage","value":"0.209 GiB\n"}}
{"ts":"2024-10-03T23:36:38.775647296Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":121}}
{"ts":"2024-10-03T23:36:38.77615638Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:36:38.773021Z","keys":["5_mem_usage_host","0_cpu_usage","4_cpu_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:36:38.777864101Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","0_cpu_usage","4_cpu_usage_host","1_ram_usage"],"num":4}}
{"ts":"2024-10-03T23:36:38.794965601Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.214,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":344},{"name":"magicsock_disco_recv_udp","type":1,"value":366},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":368},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":346},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":368},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":368},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:36:38.796357932Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:36:38.798545501Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:36:38.798830652Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:36:39.508490149Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:36:39.509306857Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:36:39.509484771Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:36:39.511476892Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"911.592µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:36:39.697978374Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:36:39.914409705Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:36:39.914406Z","key":"0_cpu_usage","value":"0.013 cores\n"}}
{"ts":"2024-10-03T23:36:39.916706686Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:36:39.917430685Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:36:39.914406Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:36:39.919263528Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:36:40.33719709Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:36:40.353428307Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:36:44.69873271Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:36:44.77290223Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:36:44.772899Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:36:44.774789839Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:36:44.775295707Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:36:44.772899Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:36:44.777068814Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:36:44.914509445Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:36:44.914506Z","key":"5_mem_usage_host","value":"29.3/251 GiB (12..."}}
{"ts":"2024-10-03T23:36:44.914934397Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:36:44.914506Z","key":"1_ram_usage","value":"0.181 GiB\n"}}
{"ts":"2024-10-03T23:36:44.915203757Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:36:44.914506Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:36:44.917151994Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:36:44.917773285Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:36:44.914506Z","keys":["5_mem_usage_host","1_ram_usage","7_swap_host"]}}}
{"ts":"2024-10-03T23:36:44.919657938Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host","1_ram_usage","7_swap_host"],"num":3}}
{"ts":"2024-10-03T23:36:45.353392234Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:36:45.698053361Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:36:48.91483Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:36:48.914825Z","key":"4_cpu_usage_host","value":"2.35/64 cores (4..."}}
{"ts":"2024-10-03T23:36:48.917255479Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:36:48.917890176Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:36:48.914825Z","keys":["4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:36:48.919789919Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host"],"num":1}}
{"ts":"2024-10-03T23:36:49.353953094Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:36:49.773296792Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:36:49.773293Z","key":"1_ram_usage","value":"0.21 GiB\n"}}
{"ts":"2024-10-03T23:36:49.773754517Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:36:49.773293Z","key":"5_mem_usage_host","value":"29.4/251 GiB (12..."}}
{"ts":"2024-10-03T23:36:49.774026923Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:36:49.773293Z","key":"4_cpu_usage_host","value":"3.39/64 cores (5..."}}
{"ts":"2024-10-03T23:36:49.774280754Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:36:49.773293Z","key":"0_cpu_usage","value":"0.254 cores\n"}}
{"ts":"2024-10-03T23:36:49.77640485Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":121}}
{"ts":"2024-10-03T23:36:49.777152816Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:36:49.773293Z","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:36:49.778978586Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","5_mem_usage_host","4_cpu_usage_host","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:36:49.914476842Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:36:49.914475Z","key":"0_cpu_usage","value":"0.016 cores\n"}}
{"ts":"2024-10-03T23:36:49.916681554Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:36:49.917412487Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:36:49.914475Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:36:49.919496996Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:36:50.353883825Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:36:50.698362478Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:36:54.508673051Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:36:54.509353426Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:36:54.509560336Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:36:54.914396198Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:36:54.914391Z","key":"1_ram_usage","value":"0.181 GiB\n"}}
{"ts":"2024-10-03T23:36:54.914875284Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:36:54.914391Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:36:54.915158812Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:36:54.914391Z","key":"5_mem_usage_host","value":"29.6/251 GiB (12..."}}
{"ts":"2024-10-03T23:36:54.917269562Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:36:54.917985867Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:36:54.914391Z","keys":["1_ram_usage","7_swap_host","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:36:54.919637881Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage","7_swap_host","5_mem_usage_host"],"num":3}}
{"ts":"2024-10-03T23:36:55.281203706Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:36:55.285934892Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"4.742838ms"}}
{"ts":"2024-10-03T23:36:55.334936158Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:36:55.337010448Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:36:55.339162719Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:36:55.341361509Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:36:55.342823305Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:36:55.354077902Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:36:55.698953964Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:36:55.772349818Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:36:55.772345Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:36:55.775166483Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:36:55.775872217Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:36:55.772345Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:36:55.778101076Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:36:56.698993985Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:36:57.932405106Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:36:57.934137885Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:36:58.016786987Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending handshake initiation","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:36:58.018148389Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Received handshake response","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:36:58.018315242Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending keepalive packet","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:36:58.511789894Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.211292ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:36:59.500731713Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:36:59.50096852Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:36:59.773448912Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:36:59.773438Z","key":"4_cpu_usage_host","value":"3.47/64 cores (5..."}}
{"ts":"2024-10-03T23:36:59.775668913Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":74}}
{"ts":"2024-10-03T23:36:59.776400137Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:36:59.773438Z","keys":["4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:36:59.778069374Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["4_cpu_usage_host"],"num":1}}
{"ts":"2024-10-03T23:36:59.914214721Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:36:59.91421Z","key":"4_cpu_usage_host","value":"3.62/64 cores (6..."}}
{"ts":"2024-10-03T23:36:59.916428471Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":73}}
{"ts":"2024-10-03T23:36:59.917133884Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:36:59.91421Z","keys":["4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:36:59.918984431Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host"],"num":1}}
{"ts":"2024-10-03T23:37:00.354105349Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:37:00.698651103Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:37:00.773215295Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:00.773211Z","key":"1_ram_usage","value":"0.202 GiB\n"}}
{"ts":"2024-10-03T23:37:00.773606722Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:00.773211Z","key":"5_mem_usage_host","value":"29.5/251 GiB (12..."}}
{"ts":"2024-10-03T23:37:00.773894047Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:00.773211Z","key":"0_cpu_usage","value":"0.068 cores\n"}}
{"ts":"2024-10-03T23:37:00.775503729Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":102}}
{"ts":"2024-10-03T23:37:00.776115391Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:37:00.773211Z","keys":["1_ram_usage","5_mem_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:37:00.77769777Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","5_mem_usage_host","0_cpu_usage"],"num":3}}
{"ts":"2024-10-03T23:37:00.914027875Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:00.914026Z","key":"0_cpu_usage","value":"0.009 cores\n"}}
{"ts":"2024-10-03T23:37:00.915956914Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:37:00.916407164Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:37:00.914026Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:37:00.918119715Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:37:01.354273088Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:37:01.69827484Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:37:05.914500876Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:05.914495Z","key":"5_mem_usage_host","value":"29.4/251 GiB (12..."}}
{"ts":"2024-10-03T23:37:05.91500955Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:05.914495Z","key":"1_ram_usage","value":"0.18 GiB\n"}}
{"ts":"2024-10-03T23:37:05.915367361Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:05.914495Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:37:05.917588255Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:37:05.918362281Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:37:05.914495Z","keys":["5_mem_usage_host","1_ram_usage","7_swap_host"]}}}
{"ts":"2024-10-03T23:37:05.920297341Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host","1_ram_usage","7_swap_host"],"num":3}}
{"ts":"2024-10-03T23:37:06.354160688Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:37:06.698631026Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:37:06.773872658Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:06.773869Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:37:06.776097208Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:37:06.776708009Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:37:06.773869Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:37:06.77843605Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:37:07.698062082Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:37:08.794405152Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.266,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":355},{"name":"magicsock_disco_recv_udp","type":1,"value":377},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":379},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":357},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":379},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":379},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:37:08.795973133Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:37:08.797751501Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:37:08.797979522Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:37:09.509031542Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:37:09.509850154Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:37:09.50995155Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:37:09.511807598Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"791.871µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:37:09.773324186Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:09.773322Z","key":"4_cpu_usage_host","value":"2.29/64 cores (4..."}}
{"ts":"2024-10-03T23:37:09.775871289Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":74}}
{"ts":"2024-10-03T23:37:09.776360385Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:37:09.773322Z","keys":["4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:37:09.777949627Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["4_cpu_usage_host"],"num":1}}
{"ts":"2024-10-03T23:37:09.913827077Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:09.913825Z","key":"4_cpu_usage_host","value":"3.64/64 cores (6..."}}
{"ts":"2024-10-03T23:37:09.915687092Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:37:09.916198461Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:37:09.913825Z","keys":["4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:37:09.917722296Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host"],"num":1}}
{"ts":"2024-10-03T23:37:10.336905755Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:37:10.354120033Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:37:10.69848654Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:37:10.773178319Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:10.773176Z","key":"5_mem_usage_host","value":"29.5/251 GiB (12..."}}
{"ts":"2024-10-03T23:37:10.773404927Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:10.773176Z","key":"1_ram_usage","value":"0.197 GiB\n"}}
{"ts":"2024-10-03T23:37:10.77354615Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:10.773176Z","key":"0_cpu_usage","value":"0.179 cores\n"}}
{"ts":"2024-10-03T23:37:10.775353564Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":102}}
{"ts":"2024-10-03T23:37:10.775872417Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:37:10.773176Z","keys":["5_mem_usage_host","1_ram_usage","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:37:10.777414789Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","1_ram_usage","0_cpu_usage"],"num":3}}
{"ts":"2024-10-03T23:37:11.698610345Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:37:11.91467097Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:11.914665Z","key":"0_cpu_usage","value":"0.012 cores\n"}}
{"ts":"2024-10-03T23:37:11.916800887Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:37:11.917429452Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:37:11.914665Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:37:11.918930233Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:37:12.285313853Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:37:12.353799184Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:37:12.519629206Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:37:14.915035002Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:14.915031Z","key":"6_load_host","value":"0.02"}}
{"ts":"2024-10-03T23:37:14.917223693Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:37:14.917890502Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:37:14.915031Z","keys":["6_load_host"]}}}
{"ts":"2024-10-03T23:37:14.919363931Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host"],"num":1}}
{"ts":"2024-10-03T23:37:15.353586071Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:37:15.914465889Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:15.914463Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:37:15.914713227Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:15.914463Z","key":"5_mem_usage_host","value":"29.4/251 GiB (12..."}}
{"ts":"2024-10-03T23:37:15.914862165Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:15.914463Z","key":"1_ram_usage","value":"0.18 GiB\n"}}
{"ts":"2024-10-03T23:37:15.916671222Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:37:15.917209372Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:37:15.914463Z","keys":["7_swap_host","5_mem_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:37:15.918762835Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","5_mem_usage_host","1_ram_usage"],"num":3}}
{"ts":"2024-10-03T23:37:16.353451097Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:37:16.773522532Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:16.773519Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:37:16.775705683Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:37:16.776370648Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:37:16.773519Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:37:16.778227748Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:37:17.698514448Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:37:18.914846434Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:18.914842Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:37:18.917043191Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:37:18.917625977Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:37:18.914842Z","keys":["3_home_disk"]}}}
{"ts":"2024-10-03T23:37:18.919216852Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["3_home_disk"],"num":1}}
{"ts":"2024-10-03T23:37:19.35362368Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:37:19.77299353Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:19.772991Z","key":"6_load_host","value":"0.02"}}
{"ts":"2024-10-03T23:37:19.773260917Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:19.772991Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:37:19.775296381Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":83}}
{"ts":"2024-10-03T23:37:19.776210318Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:37:19.772991Z","keys":["6_load_host","3_home_disk"]}}}
{"ts":"2024-10-03T23:37:19.777635182Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["6_load_host","3_home_disk"],"num":2}}
{"ts":"2024-10-03T23:37:19.913581154Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:19.913579Z","key":"4_cpu_usage_host","value":"3.56/64 cores (6..."}}
{"ts":"2024-10-03T23:37:19.914716149Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:37:19.915092055Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:37:19.913579Z","keys":["4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:37:19.916483776Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host"],"num":1}}
{"ts":"2024-10-03T23:37:20.354327097Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:37:20.698762978Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:37:20.772135307Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:20.772131Z","key":"4_cpu_usage_host","value":"3.58/64 cores (6..."}}
{"ts":"2024-10-03T23:37:20.774107309Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":74}}
{"ts":"2024-10-03T23:37:20.774716207Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:37:20.772131Z","keys":["4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:37:20.776778593Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["4_cpu_usage_host"],"num":1}}
{"ts":"2024-10-03T23:37:21.698411025Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:37:21.773521423Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:21.773517Z","key":"1_ram_usage","value":"0.202 GiB\n"}}
{"ts":"2024-10-03T23:37:21.773988506Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:21.773517Z","key":"5_mem_usage_host","value":"29.5/251 GiB (12..."}}
{"ts":"2024-10-03T23:37:21.774342761Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:21.773517Z","key":"0_cpu_usage","value":"0.082 cores\n"}}
{"ts":"2024-10-03T23:37:21.776513077Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":102}}
{"ts":"2024-10-03T23:37:21.777169406Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:37:21.773517Z","keys":["1_ram_usage","5_mem_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:37:21.778988282Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","5_mem_usage_host","0_cpu_usage"],"num":3}}
{"ts":"2024-10-03T23:37:22.698617471Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:37:22.914205713Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:22.914202Z","key":"0_cpu_usage","value":"0.018 cores\n"}}
{"ts":"2024-10-03T23:37:22.915744828Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:37:22.916197072Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:37:22.914202Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:37:22.917291548Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:37:23.354257403Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:37:24.508239769Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:37:24.509175187Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:37:24.50935274Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:37:25.285038267Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.251696ms"}}
{"ts":"2024-10-03T23:37:25.337275148Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:37:25.341509734Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:37:25.342900182Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:37:26.772298706Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:26.772295Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:37:26.773564533Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:37:26.774041725Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:37:26.772295Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:37:26.775066677Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:37:26.914459292Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:26.914456Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:37:26.914873402Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:26.914456Z","key":"1_ram_usage","value":"0.187 GiB\n"}}
{"ts":"2024-10-03T23:37:26.915206656Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:26.914456Z","key":"5_mem_usage_host","value":"29.5/251 GiB (12..."}}
{"ts":"2024-10-03T23:37:26.917347555Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:37:26.917951242Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:37:26.914456Z","keys":["7_swap_host","1_ram_usage","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:37:26.91975068Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","5_mem_usage_host"],"num":3}}
{"ts":"2024-10-03T23:37:27.353434561Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:37:27.698407341Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:37:27.930716907Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:37:27.931929872Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:37:28.511330753Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.160704ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:37:29.501215697Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:37:29.501503193Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:37:29.7453484Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/api/v2/deployment/stats","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:37:29.740535676Z","took":"4.809778ms","status_code":200,"latency_ms":4,"request_id":"f25e1ee5-c8df-4864-998b-0d916d30cdd2"}}
{"ts":"2024-10-03T23:37:30.914651854Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:30.914647Z","key":"4_cpu_usage_host","value":"1.97/64 cores (3..."}}
{"ts":"2024-10-03T23:37:30.916866435Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:37:30.917575736Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:37:30.914647Z","keys":["4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:37:30.919183955Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host"],"num":1}}
{"ts":"2024-10-03T23:37:31.354053398Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:37:31.773313054Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:31.773309Z","key":"1_ram_usage","value":"0.209 GiB\n"}}
{"ts":"2024-10-03T23:37:31.773768244Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:31.773309Z","key":"5_mem_usage_host","value":"29.6/251 GiB (12..."}}
{"ts":"2024-10-03T23:37:31.774049909Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:31.773309Z","key":"0_cpu_usage","value":"0.034 cores\n"}}
{"ts":"2024-10-03T23:37:31.774402651Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:31.773309Z","key":"4_cpu_usage_host","value":"3.75/64 cores (6..."}}
{"ts":"2024-10-03T23:37:31.776592745Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":121}}
{"ts":"2024-10-03T23:37:31.777189208Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:37:31.773309Z","keys":["1_ram_usage","5_mem_usage_host","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:37:31.778943048Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","5_mem_usage_host","0_cpu_usage","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:37:32.698473407Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:37:33.914085523Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:33.914082Z","key":"0_cpu_usage","value":"0.01 cores\n"}}
{"ts":"2024-10-03T23:37:33.916333889Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:37:33.916973746Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:37:33.914082Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:37:33.918587616Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:37:34.353455345Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:37:36.773000259Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:36.772997Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:37:36.775195974Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:37:36.775903502Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:37:36.772997Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:37:36.77782187Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:37:36.914668063Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:36.914662Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:37:36.915120578Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:36.914662Z","key":"5_mem_usage_host","value":"29.5/251 GiB (12..."}}
{"ts":"2024-10-03T23:37:36.915446298Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:36.914662Z","key":"1_ram_usage","value":"0.18 GiB\n"}}
{"ts":"2024-10-03T23:37:36.919034815Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:37:36.919806777Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:37:36.914662Z","keys":["7_swap_host","5_mem_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:37:36.922472711Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","5_mem_usage_host","1_ram_usage"],"num":3}}
{"ts":"2024-10-03T23:37:37.354269874Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:37:37.697939896Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:37:38.794878511Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.285,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":366},{"name":"magicsock_disco_recv_udp","type":1,"value":388},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":390},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":368},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":390},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":390},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:37:38.79686436Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:37:38.798813658Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:37:38.800245466Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:37:39.508301426Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:37:39.508907117Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:37:39.509155617Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:37:39.511068886Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"814.444µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:37:40.337198239Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:37:41.7741781Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:41.774172Z","key":"4_cpu_usage_host","value":"5.08/64 cores (8..."}}
{"ts":"2024-10-03T23:37:41.774660482Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:41.774172Z","key":"0_cpu_usage","value":"0.33 cores\n"}}
{"ts":"2024-10-03T23:37:41.774937778Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:41.774172Z","key":"5_mem_usage_host","value":"29.4/251 GiB (12..."}}
{"ts":"2024-10-03T23:37:41.775199093Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:41.774172Z","key":"1_ram_usage","value":"0.203 GiB\n"}}
{"ts":"2024-10-03T23:37:41.777495112Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":121}}
{"ts":"2024-10-03T23:37:41.778258568Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:37:41.774172Z","keys":["4_cpu_usage_host","0_cpu_usage","5_mem_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:37:41.779846067Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["4_cpu_usage_host","0_cpu_usage","5_mem_usage_host","1_ram_usage"],"num":4}}
{"ts":"2024-10-03T23:37:41.913867849Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:41.913864Z","key":"4_cpu_usage_host","value":"3.28/64 cores (5..."}}
{"ts":"2024-10-03T23:37:41.91602039Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:37:41.916631071Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:37:41.913864Z","keys":["4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:37:41.91844628Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host"],"num":1}}
{"ts":"2024-10-03T23:37:42.354002571Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:37:42.698060052Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:37:44.914557349Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:44.914554Z","key":"0_cpu_usage","value":"0.016 cores\n"}}
{"ts":"2024-10-03T23:37:44.916866863Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:37:44.917645318Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:37:44.914554Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:37:44.919469574Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:37:45.354351181Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:37:47.698516719Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:37:47.772477505Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:47.772474Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:37:47.774795927Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:37:47.775559774Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:37:47.772474Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:37:47.777576793Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:37:47.922098964Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:47.922095Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:37:47.92256218Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:47.922095Z","key":"1_ram_usage","value":"0.187 GiB\n"}}
{"ts":"2024-10-03T23:37:47.922830929Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:47.922095Z","key":"5_mem_usage_host","value":"29.4/251 GiB (12..."}}
{"ts":"2024-10-03T23:37:47.925151034Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:37:47.925799718Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:37:47.922095Z","keys":["7_swap_host","1_ram_usage","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:37:47.92767822Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","1_ram_usage","5_mem_usage_host"],"num":3}}
{"ts":"2024-10-03T23:37:48.353636707Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:37:48.698674272Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:37:51.772708789Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:51.772706Z","key":"5_mem_usage_host","value":"29.5/251 GiB (12..."}}
{"ts":"2024-10-03T23:37:51.77296773Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:51.772706Z","key":"1_ram_usage","value":"0.206 GiB\n"}}
{"ts":"2024-10-03T23:37:51.773105957Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:51.772706Z","key":"0_cpu_usage","value":"0.281 cores\n"}}
{"ts":"2024-10-03T23:37:51.773234826Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:51.772706Z","key":"4_cpu_usage_host","value":"2.45/64 cores (4..."}}
{"ts":"2024-10-03T23:37:51.774482087Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":121}}
{"ts":"2024-10-03T23:37:51.774935053Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:37:51.772706Z","keys":["5_mem_usage_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:37:51.77598867Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:37:51.913185921Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:51.913183Z","key":"4_cpu_usage_host","value":"3.24/64 cores (5..."}}
{"ts":"2024-10-03T23:37:51.91450956Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:37:51.914968367Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:37:51.913183Z","keys":["4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:37:51.916093452Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host"],"num":1}}
{"ts":"2024-10-03T23:37:52.354120139Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:37:52.698698506Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:37:54.508862556Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:37:54.509447848Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:37:54.509626473Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:37:55.281948219Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:37:55.285199524Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.284259ms"}}
{"ts":"2024-10-03T23:37:55.334909942Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:37:55.33664725Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:37:55.33683857Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:37:55.342050946Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:37:55.342975984Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:37:55.913190599Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:55.913188Z","key":"0_cpu_usage","value":"0.002 cores\n"}}
{"ts":"2024-10-03T23:37:55.914493928Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:37:55.915051226Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:37:55.913188Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:37:55.916187202Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:37:56.354118614Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:37:57.931798109Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:37:57.933093764Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:37:58.511039865Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"916.542µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:37:58.698467138Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:37:58.772479073Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:37:58.772477Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:37:58.774455824Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:37:58.774896266Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:37:58.772477Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:37:58.776522369Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:37:58.913874059Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:58.913872Z","key":"1_ram_usage","value":"0.181 GiB\n"}}
{"ts":"2024-10-03T23:37:58.914090097Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:58.913872Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:37:58.914214978Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:37:58.913872Z","key":"5_mem_usage_host","value":"29.6/251 GiB (12..."}}
{"ts":"2024-10-03T23:37:58.915289235Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:37:58.915783681Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:37:58.913872Z","keys":["1_ram_usage","7_swap_host","5_mem_usage_host"]}}}
{"ts":"2024-10-03T23:37:58.917146886Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage","7_swap_host","5_mem_usage_host"],"num":3}}
{"ts":"2024-10-03T23:37:59.354278202Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:37:59.501861151Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:37:59.502034035Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:37:59.698487898Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:38:02.773093622Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:02.773089Z","key":"5_mem_usage_host","value":"29.5/251 GiB (12..."}}
{"ts":"2024-10-03T23:38:02.773533743Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:02.773089Z","key":"1_ram_usage","value":"0.204 GiB\n"}}
{"ts":"2024-10-03T23:38:02.773805788Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:02.773089Z","key":"4_cpu_usage_host","value":"2/64 cores (3%)\n"}}
{"ts":"2024-10-03T23:38:02.774082744Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:02.773089Z","key":"0_cpu_usage","value":"0.305 cores\n"}}
{"ts":"2024-10-03T23:38:02.776250354Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":121}}
{"ts":"2024-10-03T23:38:02.776911352Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:38:02.773089Z","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:38:02.778781998Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:38:02.913804846Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:02.913801Z","key":"4_cpu_usage_host","value":"1.49/64 cores (2..."}}
{"ts":"2024-10-03T23:38:02.916208803Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:38:02.916860794Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:38:02.913801Z","keys":["4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:38:02.918911128Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host"],"num":1}}
{"ts":"2024-10-03T23:38:03.353679456Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:38:03.698432061Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:38:06.914283934Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:06.914281Z","key":"0_cpu_usage","value":"0.018 cores\n"}}
{"ts":"2024-10-03T23:38:06.916605302Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:38:06.917384628Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:38:06.914281Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:38:06.918787781Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:38:07.353908851Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:38:08.699008678Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:38:08.795589823Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.262,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":377},{"name":"magicsock_disco_recv_udp","type":1,"value":399},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":401},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":379},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":401},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":401},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:38:08.797453165Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:38:08.799844428Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:38:08.800207289Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:38:08.914024794Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:08.914022Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:38:08.914417694Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:08.914022Z","key":"5_mem_usage_host","value":"29.4/251 GiB (12..."}}
{"ts":"2024-10-03T23:38:08.914688598Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:08.914022Z","key":"1_ram_usage","value":"0.182 GiB\n"}}
{"ts":"2024-10-03T23:38:08.916855687Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:38:08.917526443Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:38:08.914022Z","keys":["7_swap_host","5_mem_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:38:08.919595142Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","5_mem_usage_host","1_ram_usage"],"num":3}}
{"ts":"2024-10-03T23:38:09.353466156Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:38:09.508941382Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:38:09.509724376Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:38:09.50989214Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:38:09.512070421Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.099004ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:38:09.772612465Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:09.77261Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:38:09.77457022Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":68}}
{"ts":"2024-10-03T23:38:09.775123459Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:38:09.77261Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:38:09.776468058Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:38:10.336842722Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:38:10.698499004Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:38:12.285064499Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:38:12.519257547Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"timer","only_check_latest_build":false,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:38:12.913743965Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:12.91374Z","key":"4_cpu_usage_host","value":"1.78/64 cores (3..."}}
{"ts":"2024-10-03T23:38:12.915901927Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":73}}
{"ts":"2024-10-03T23:38:12.916524851Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:38:12.91374Z","keys":["4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:38:12.918476333Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host"],"num":1}}
{"ts":"2024-10-03T23:38:13.353425922Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:38:13.773941578Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:13.773938Z","key":"5_mem_usage_host","value":"29.4/251 GiB (12..."}}
{"ts":"2024-10-03T23:38:13.774386108Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:13.773938Z","key":"1_ram_usage","value":"0.204 GiB\n"}}
{"ts":"2024-10-03T23:38:13.774654476Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:13.773938Z","key":"0_cpu_usage","value":"0.111 cores\n"}}
{"ts":"2024-10-03T23:38:13.774914299Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:13.773938Z","key":"4_cpu_usage_host","value":"4.4/64 cores (7%..."}}
{"ts":"2024-10-03T23:38:13.7770358Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":121}}
{"ts":"2024-10-03T23:38:13.777703831Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:38:13.773938Z","keys":["5_mem_usage_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:38:13.779674812Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","1_ram_usage","0_cpu_usage","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:38:14.698216763Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:38:14.914600433Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:14.914597Z","key":"6_load_host","value":"0.03"}}
{"ts":"2024-10-03T23:38:14.916850082Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:38:14.917513685Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:38:14.914597Z","keys":["6_load_host"]}}}
{"ts":"2024-10-03T23:38:14.919377097Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["6_load_host"],"num":1}}
{"ts":"2024-10-03T23:38:15.354105198Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:38:16.916363534Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:16.916361Z","key":"0_cpu_usage","value":"0.021 cores\n"}}
{"ts":"2024-10-03T23:38:16.917906627Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:38:16.91847726Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:38:16.916361Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:38:16.919698992Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:38:17.35354097Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:38:19.698367581Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:38:19.773527757Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:19.773524Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:38:19.775746877Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:38:19.776603863Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:38:19.773524Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:38:19.778591786Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:38:19.913608883Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:19.913606Z","key":"5_mem_usage_host","value":"27.6/251 GiB (11..."}}
{"ts":"2024-10-03T23:38:19.913918872Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:19.913606Z","key":"1_ram_usage","value":"0.183 GiB\n"}}
{"ts":"2024-10-03T23:38:19.914107257Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:19.913606Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:38:19.914293777Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:19.913606Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:38:19.915440704Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":116}}
{"ts":"2024-10-03T23:38:19.915781032Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:38:19.913606Z","keys":["5_mem_usage_host","1_ram_usage","7_swap_host","3_home_disk"]}}}
{"ts":"2024-10-03T23:38:19.916572382Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["5_mem_usage_host","1_ram_usage","7_swap_host","3_home_disk"],"num":4}}
{"ts":"2024-10-03T23:38:20.353730471Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:38:20.698750794Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:38:20.771661781Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:20.771659Z","key":"6_load_host","value":"0.03"}}
{"ts":"2024-10-03T23:38:20.771922966Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:20.771659Z","key":"3_home_disk","value":"24.2/468 GiB (5%..."}}
{"ts":"2024-10-03T23:38:20.773048652Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":83}}
{"ts":"2024-10-03T23:38:20.773390142Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:38:20.771659Z","keys":["6_load_host","3_home_disk"]}}}
{"ts":"2024-10-03T23:38:20.774465972Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["6_load_host","3_home_disk"],"num":2}}
{"ts":"2024-10-03T23:38:21.698334371Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:38:23.772965657Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:23.772962Z","key":"5_mem_usage_host","value":"27.5/251 GiB (11..."}}
{"ts":"2024-10-03T23:38:23.773406469Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:23.772962Z","key":"0_cpu_usage","value":"0.204 cores\n"}}
{"ts":"2024-10-03T23:38:23.773672433Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:23.772962Z","key":"4_cpu_usage_host","value":"2.88/64 cores (5..."}}
{"ts":"2024-10-03T23:38:23.773922326Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:23.772962Z","key":"1_ram_usage","value":"0.21 GiB\n"}}
{"ts":"2024-10-03T23:38:23.776364537Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":121}}
{"ts":"2024-10-03T23:38:23.777031757Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:38:23.772962Z","keys":["5_mem_usage_host","0_cpu_usage","4_cpu_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:38:23.778864249Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","0_cpu_usage","4_cpu_usage_host","1_ram_usage"],"num":4}}
{"ts":"2024-10-03T23:38:23.913838013Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:23.913832Z","key":"4_cpu_usage_host","value":"3.46/64 cores (5..."}}
{"ts":"2024-10-03T23:38:23.916123972Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:38:23.916714413Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:38:23.913832Z","keys":["4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:38:23.918503382Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host"],"num":1}}
{"ts":"2024-10-03T23:38:24.35417151Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:38:24.508692Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:38:24.509470455Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:38:24.509662486Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:38:24.698198563Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:38:25.284554473Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.316442ms"}}
{"ts":"2024-10-03T23:38:25.336840188Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:38:25.342098654Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:38:25.34313126Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:38:27.913972601Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:27.913969Z","key":"0_cpu_usage","value":"0.002 cores\n"}}
{"ts":"2024-10-03T23:38:27.916138108Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:38:27.916897025Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:38:27.913969Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:38:27.918629013Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:38:27.931726061Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:38:27.933512505Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:38:28.354414498Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:38:28.511262779Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.168169ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:38:29.502279495Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:38:29.50253033Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:38:29.698803493Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:38:29.914163886Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:29.914159Z","key":"1_ram_usage","value":"0.187 GiB\n"}}
{"ts":"2024-10-03T23:38:29.9145641Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:29.914159Z","key":"5_mem_usage_host","value":"27.5/251 GiB (11..."}}
{"ts":"2024-10-03T23:38:29.914834132Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:29.914159Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:38:29.916035725Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:38:29.916527686Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:38:29.914159Z","keys":["1_ram_usage","5_mem_usage_host","7_swap_host"]}}}
{"ts":"2024-10-03T23:38:29.917514593Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["1_ram_usage","5_mem_usage_host","7_swap_host"],"num":3}}
{"ts":"2024-10-03T23:38:30.354230357Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:38:30.773061938Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:30.773058Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:38:30.774850896Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:38:30.775481796Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:38:30.773058Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:38:30.776926649Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:38:31.698855559Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:38:33.915423361Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:33.91542Z","key":"4_cpu_usage_host","value":"1.78/64 cores (3..."}}
{"ts":"2024-10-03T23:38:33.917249882Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":73}}
{"ts":"2024-10-03T23:38:33.91776138Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:38:33.91542Z","keys":["4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:38:33.919329091Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host"],"num":1}}
{"ts":"2024-10-03T23:38:34.3542426Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:38:34.77310447Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:34.7731Z","key":"0_cpu_usage","value":"0.253 cores\n"}}
{"ts":"2024-10-03T23:38:34.773362218Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:34.7731Z","key":"1_ram_usage","value":"0.21 GiB\n"}}
{"ts":"2024-10-03T23:38:34.773502189Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:34.7731Z","key":"5_mem_usage_host","value":"27.4/251 GiB (11..."}}
{"ts":"2024-10-03T23:38:34.7736372Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:34.7731Z","key":"4_cpu_usage_host","value":"0.994/64 cores (..."}}
{"ts":"2024-10-03T23:38:34.774849463Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":119}}
{"ts":"2024-10-03T23:38:34.775398855Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:38:34.7731Z","keys":["0_cpu_usage","1_ram_usage","5_mem_usage_host","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:38:34.776871983Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["0_cpu_usage","1_ram_usage","5_mem_usage_host","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:38:35.698927749Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:38:38.795668946Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","interval":"30s","workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","payload":{"stats":{"connection_median_latency_ms":0.287,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1,"value":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1,"value":22},{"name":"magicsock_disco_recv_pong","type":1,"value":388},{"name":"magicsock_disco_recv_udp","type":1,"value":410},{"name":"magicsock_disco_send_derp","type":1,"value":1},{"name":"magicsock_disco_send_udp","type":1,"value":412},{"name":"magicsock_disco_sent_callmemaybe","type":1,"value":1},{"name":"magicsock_disco_sent_derp","type":1,"value":1},{"name":"magicsock_disco_sent_ping","type":1,"value":390},{"name":"magicsock_disco_sent_pong","type":1,"value":22},{"name":"magicsock_disco_sent_udp","type":1,"value":412},{"name":"magicsock_netmap_num_peers","type":2,"value":1},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1,"value":1},{"name":"magicsock_recv_data_ipv4","type":1,"value":18},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":6},{"name":"magicsock_send_data","type":1,"value":18},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1,"value":2},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1,"value":2},{"name":"magicsock_send_udp","type":1,"value":412},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":6},{"name":"netcheck_https_measure","type":1,"value":5},{"name":"netcheck_report","type":1,"value":5},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":1},{"name":"netcheck_stun_recv_ipv4","type":1,"value":27},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":27},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":5},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":5},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":5},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"value":1,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":3.494637673,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:38:38.797736503Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:38:38.800147615Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:38:38.800606592Z","level":"DEBUG","msg":"checking for new logs","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:505","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e","triggered_by":"workspace","only_check_latest_build":true,"keep_going":true,"last_sent_log_id":42,"workspace_has_agents":true}}
{"ts":"2024-10-03T23:38:38.914798606Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:38.914795Z","key":"0_cpu_usage","value":"0.018 cores\n"}}
{"ts":"2024-10-03T23:38:38.917830377Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:38:38.918472038Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:38:38.914795Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:38:38.921068438Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:38:39.354352242Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:38:39.508887217Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:38:39.509563345Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:38:39.509719307Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:38:39.511624964Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"837.12µs","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:38:39.914416288Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:39.914413Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:38:39.914673456Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:39.914413Z","key":"5_mem_usage_host","value":"27.6/251 GiB (11..."}}
{"ts":"2024-10-03T23:38:39.914858113Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:39.914413Z","key":"1_ram_usage","value":"0.18 GiB\n"}}
{"ts":"2024-10-03T23:38:39.916950832Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:38:39.917453655Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:38:39.914413Z","keys":["7_swap_host","5_mem_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:38:39.918891628Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","5_mem_usage_host","1_ram_usage"],"num":3}}
{"ts":"2024-10-03T23:38:40.336676575Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:38:40.353927296Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:38:41.698605448Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:38:41.773123664Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:41.77312Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:38:41.774997189Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":68}}
{"ts":"2024-10-03T23:38:41.775490254Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:38:41.77312Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:38:41.777013441Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:38:42.6984522Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:38:43.914188554Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:43.914183Z","key":"4_cpu_usage_host","value":"3.73/64 cores (6..."}}
{"ts":"2024-10-03T23:38:43.916169447Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:38:43.916715033Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:38:43.914183Z","keys":["4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:38:43.918092589Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host"],"num":1}}
{"ts":"2024-10-03T23:38:44.354178623Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:38:44.773273569Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:44.773271Z","key":"1_ram_usage","value":"0.21 GiB\n"}}
{"ts":"2024-10-03T23:38:44.773546568Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:44.773271Z","key":"5_mem_usage_host","value":"27.6/251 GiB (11..."}}
{"ts":"2024-10-03T23:38:44.773698662Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:44.773271Z","key":"0_cpu_usage","value":"0.255 cores\n"}}
{"ts":"2024-10-03T23:38:44.773828704Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:44.773271Z","key":"4_cpu_usage_host","value":"2.46/64 cores (4..."}}
{"ts":"2024-10-03T23:38:44.775874142Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":121}}
{"ts":"2024-10-03T23:38:44.776587803Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:38:44.773271Z","keys":["1_ram_usage","5_mem_usage_host","0_cpu_usage","4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:38:44.778386052Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["1_ram_usage","5_mem_usage_host","0_cpu_usage","4_cpu_usage_host"],"num":4}}
{"ts":"2024-10-03T23:38:45.698006624Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:38:49.914712882Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:49.914708Z","key":"0_cpu_usage","value":"0.004 cores\n"}}
{"ts":"2024-10-03T23:38:49.917085142Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":69}}
{"ts":"2024-10-03T23:38:49.917792381Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:38:49.914708Z","keys":["0_cpu_usage"]}}}
{"ts":"2024-10-03T23:38:49.91906837Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["0_cpu_usage"],"num":1}}
{"ts":"2024-10-03T23:38:50.353416985Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:38:50.698893189Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:38:50.914357257Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:50.914346Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:38:50.914810284Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:50.914346Z","key":"5_mem_usage_host","value":"27.5/251 GiB (11..."}}
{"ts":"2024-10-03T23:38:50.915107449Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:50.914346Z","key":"1_ram_usage","value":"0.181 GiB\n"}}
{"ts":"2024-10-03T23:38:50.917238743Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":102}}
{"ts":"2024-10-03T23:38:50.917980618Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:38:50.914346Z","keys":["7_swap_host","5_mem_usage_host","1_ram_usage"]}}}
{"ts":"2024-10-03T23:38:50.919763438Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["7_swap_host","5_mem_usage_host","1_ram_usage"],"num":3}}
{"ts":"2024-10-03T23:38:51.35375428Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:38:51.773620118Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:51.773617Z","key":"7_swap_host","value":"0.2/8.0"}}
{"ts":"2024-10-03T23:38:51.776058908Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":69}}
{"ts":"2024-10-03T23:38:51.776644571Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:38:51.773617Z","keys":["7_swap_host"]}}}
{"ts":"2024-10-03T23:38:51.778356023Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["7_swap_host"],"num":1}}
{"ts":"2024-10-03T23:38:52.698862008Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:38:54.508693065Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog","message_len":0}}
{"ts":"2024-10-03T23:38:54.509451954Z","level":"DEBUG","msg":"published heartbeat on pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:86","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).publishLoop.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:38:54.509603477Z","level":"DEBUG","msg":"got heartbeat for pubsub watchdog","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:100","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor.func1","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:38:54.914378731Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","collected_at":"2024-10-03T23:38:54.914375Z","key":"4_cpu_usage_host","value":"0.892/64 cores (..."}}
{"ts":"2024-10-03T23:38:54.916582616Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9","message_len":74}}
{"ts":"2024-10-03T23:38:54.917250448Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","payload":{"collected_at":"2024-10-03T23:38:54.914375Z","keys":["4_cpu_usage_host"]}}}
{"ts":"2024-10-03T23:38:54.919144253Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","keys":["4_cpu_usage_host"],"num":1}}
{"ts":"2024-10-03T23:38:55.281856053Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:38:55.284936865Z","level":"DEBUG","msg":"metrics refreshed","caller":"/home/runner/work/coder/coder/coderd/metricscache/metricscache.go:202","func":"github.com/coder/coder/v2/coderd/metricscache.(*Cache).run","logger_names":["coderd","metrics_cache"],"fields":{"name":"deployment stats","interval":"30s","took":"3.089649ms"}}
{"ts":"2024-10-03T23:38:55.335148014Z","level":"DEBUG","msg":"nothing to flush","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:122","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).flush","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:38:55.33706352Z","level":"DEBUG","msg":"dequeued messages","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:148","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).process","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d","count":0}}
{"ts":"2024-10-03T23:38:55.338492756Z","level":"DEBUG","msg":"run stats","caller":"/home/runner/work/coder/coder/coderd/autobuild/lifecycle_executor.go:96","func":"github.com/coder/coder/v2/coderd/autobuild.(*Executor).Run.func1","logger_names":["autobuild"],"fields":{"elapsed":"0s","transitions":{}}}
{"ts":"2024-10-03T23:38:55.341739318Z","level":"DEBUG","msg":"got clearance to call database","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:122","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:38:55.342986672Z","level":"DEBUG","msg":"no job available","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:137","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"}}}
{"ts":"2024-10-03T23:38:55.354219748Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"d58a2e26-156e-4505-bbbd-753810120e6d","num":7}}
{"ts":"2024-10-03T23:38:55.772763353Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:55.77276Z","key":"5_mem_usage_host","value":"27.5/251 GiB (11..."}}
{"ts":"2024-10-03T23:38:55.773068373Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:55.77276Z","key":"1_ram_usage","value":"0.206 GiB\n"}}
{"ts":"2024-10-03T23:38:55.773205258Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:55.77276Z","key":"4_cpu_usage_host","value":"2.28/64 cores (4..."}}
{"ts":"2024-10-03T23:38:55.773334468Z","level":"DEBUG","msg":"accepted metadata report","caller":"/home/runner/work/coder/coder/coderd/agentapi/metadata.go:102","func":"github.com/coder/coder/v2/coderd/agentapi.(*MetadataAPI).BatchUpdateMetadata","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","collected_at":"2024-10-03T23:38:55.77276Z","key":"0_cpu_usage","value":"0.072 cores\n"}}
{"ts":"2024-10-03T23:38:55.775032504Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27","message_len":120}}
{"ts":"2024-10-03T23:38:55.775678885Z","level":"DEBUG","msg":"received metadata update","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1021","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func1","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","payload":{"collected_at":"2024-10-03T23:38:55.77276Z","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"]}}}
{"ts":"2024-10-03T23:38:55.777018166Z","level":"DEBUG","msg":"fetched metadata update for keys","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1138","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func5","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","keys":["5_mem_usage_host","1_ram_usage","4_cpu_usage_host","0_cpu_usage"],"num":4}}
{"ts":"2024-10-03T23:38:56.698231098Z","level":"DEBUG","msg":"sending metadata","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:1088","func":"github.com/coder/coder/v2/coderd.(*API).watchWorkspaceAgentMetadata.func4","logger_names":["coderd","workspace_metadata_watcher"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca","num":7}}
{"ts":"2024-10-03T23:38:57.932671353Z","level":"DEBUG","msg":"read stats report","caller":"/home/runner/work/coder/coder/coderd/agentapi/stats.go:54","func":"github.com/coder/coder/v2/coderd/agentapi.(*StatsAPI).UpdateStats","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","interval":"30s","workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","payload":{"stats":{"connection_median_latency_ms":-0.001,"metrics":[{"name":"derp_home_change","type":1},{"name":"dnsfallback_recursive_errors","type":1},{"name":"dnsfallback_recursive_matches","type":1},{"name":"dnsfallback_recursive_mismatches","type":1},{"name":"issue_869_workaround","type":1},{"name":"magicdns_packet_in","type":1},{"name":"magicsock_disco_recv_bad_key","type":1},{"name":"magicsock_disco_recv_bad_parse","type":1},{"name":"magicsock_disco_recv_bad_peer","type":1},{"name":"magicsock_disco_recv_bpf_ipv4","type":1},{"name":"magicsock_disco_recv_bpf_ipv6","type":1},{"name":"magicsock_disco_recv_callmemaybe","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_disco","type":1},{"name":"magicsock_disco_recv_callmemaybe_bad_node","type":1},{"name":"magicsock_disco_recv_derp","type":1},{"name":"magicsock_disco_recv_derp_peer_gone_unknown","type":1},{"name":"magicsock_disco_recv_derp_peer_not_here","type":1},{"name":"magicsock_disco_recv_ping","type":1},{"name":"magicsock_disco_recv_pong","type":1},{"name":"magicsock_disco_recv_udp","type":1},{"name":"magicsock_disco_send_derp","type":1},{"name":"magicsock_disco_send_udp","type":1},{"name":"magicsock_disco_sent_callmemaybe","type":1},{"name":"magicsock_disco_sent_derp","type":1},{"name":"magicsock_disco_sent_ping","type":1},{"name":"magicsock_disco_sent_pong","type":1},{"name":"magicsock_disco_sent_udp","type":1},{"name":"magicsock_netmap_num_peers","type":2},{"name":"magicsock_num_derp_conns","type":2,"value":1},{"name":"magicsock_rebind_calls","type":1},{"name":"magicsock_recv_data_derp","type":1},{"name":"magicsock_recv_data_ipv4","type":1},{"name":"magicsock_recv_data_ipv6","type":1},{"name":"magicsock_restun_calls","type":1,"value":31},{"name":"magicsock_send_data","type":1},{"name":"magicsock_send_data_network_down","type":1},{"name":"magicsock_send_derp","type":1},{"name":"magicsock_send_derp_error","type":1},{"name":"magicsock_send_derp_error_chan","type":1},{"name":"magicsock_send_derp_error_closed","type":1},{"name":"magicsock_send_derp_error_queue","type":1},{"name":"magicsock_send_derp_queued","type":1},{"name":"magicsock_send_udp","type":1},{"name":"magicsock_send_udp_error","type":1},{"name":"magicsock_update_endpoints","type":1,"value":31},{"name":"netcheck_https_measure","type":1,"value":30},{"name":"netcheck_report","type":1,"value":30},{"name":"netcheck_report_error","type":1},{"name":"netcheck_report_full","type":1,"value":3},{"name":"netcheck_stun_recv_ipv4","type":1,"value":450},{"name":"netcheck_stun_recv_ipv6","type":1},{"name":"netcheck_stun_send_ipv4","type":1,"value":450},{"name":"netcheck_stun_send_ipv6","type":1},{"name":"packet_reflect_to_os","type":1},{"name":"portmap_pcp_address_mismatch","type":1},{"name":"portmap_pcp_not_authorized","type":1},{"name":"portmap_pcp_ok","type":1},{"name":"portmap_pcp_sent","type":1,"value":30},{"name":"portmap_pcp_unhandled_response_code","type":1},{"name":"portmap_pmp_network_failure","type":1},{"name":"portmap_pmp_not_authorized","type":1},{"name":"portmap_pmp_ok","type":1},{"name":"portmap_pmp_out_of_resources","type":1},{"name":"portmap_pmp_sent","type":1,"value":30},{"name":"portmap_pmp_unhandled_opcode","type":1},{"name":"portmap_pmp_unhandled_response_code","type":1},{"name":"portmap_pxp_response","type":1},{"name":"portmap_upnp_ok","type":1},{"name":"portmap_upnp_parse_err","type":1},{"name":"portmap_upnp_response","type":1},{"name":"portmap_upnp_response_alternate_port","type":1},{"name":"portmap_upnp_sent","type":1,"value":30},{"name":"portmap_upnp_updated_meta","type":1},{"name":"wgengine_major_changes","type":1},{"name":"wgengine_minor_changes","type":1},{"name":"agent_reconnecting_pty_connections_total","type":1},{"name":"agent_scripts_executed_total","type":1,"value":1,"labels":[{"name":"success","value":"true"}]},{"name":"agent_ssh_server_failed_connections_total","type":1},{"name":"agent_ssh_server_sftp_connections_total","type":1},{"name":"agent_ssh_server_sftp_server_errors_total","type":1},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"derp"}]},{"name":"coderd_agentstats_currently_reachable_peers","type":2,"labels":[{"name":"connection_type","value":"p2p"}]},{"name":"coderd_agentstats_startup_script_seconds","type":2,"value":4.065790943,"labels":[{"name":"success","value":"true"}]}]}}}}
{"ts":"2024-10-03T23:38:57.934988537Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:38:58.023997068Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending handshake initiation","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.025588628Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Received handshake response","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.02575478Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Sending keepalive packet","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.512182387Z","level":"DEBUG","msg":"flush complete","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:218","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).flush.func1","logger_names":["coderd","batchstats"],"fields":{"count":1,"elapsed":"1.303081ms","forced":false,"reason":"scheduled"}}
{"ts":"2024-10-03T23:38:58.855161411Z","level":"INFO","msg":"graceful stop requested","caller":"/home/runner/work/coder/coder/coderd/notifications/manager.go:365","func":"github.com/coder/coder/v2/coderd/notifications.(*Manager).Stop.func1","logger_names":["notifications.manager"]}
{"ts":"2024-10-03T23:38:58.855215936Z","level":"DEBUG","msg":"agent connection monitor is closing connection","caller":"/home/runner/work/coder/coder/coderd/workspaceagentsrpc.go:400","func":"github.com/coder/coder/v2/coderd.(*agentConnectionMonitor).monitor.func2","logger_names":["coderd"],"fields":{"workspace_id":"ae875178-00fb-4cad-bea6-560ab2739bb8","agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","reason":"canceled"}}
{"ts":"2024-10-03T23:38:58.855200236Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/derp","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:04:55.335154326Z","took":"34m3.520042313s","status_code":0,"latency_ms":2043520,"request_id":"c17582ff-c618-4e1f-8e83-ef5e6551a63c"}}
{"ts":"2024-10-03T23:38:58.855426594Z","level":"INFO","msg":"graceful stop requested","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:345","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).stop.func1","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d"}}
{"ts":"2024-10-03T23:38:58.855457704Z","level":"DEBUG","msg":"job logs context canceled","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:553","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e"}}
{"ts":"2024-10-03T23:38:58.85535717Z","level":"DEBUG","msg":"end log streaming loop","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:469","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3.1","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb"}}
{"ts":"2024-10-03T23:38:58.855461041Z","level":"DEBUG","msg":"drpc server error","caller":"/home/runner/work/coder/coder/coderd/agentapi/api.go:189","func":"github.com/coder/coder/v2/coderd/agentapi.(*API).Server.func1","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","error":"context canceled"}}
{"ts":"2024-10-03T23:38:58.855297113Z","level":"INFO","msg":"[ERR] yamux: Failed to write header: failed to write msg: WebSocket closed: read timed out: context canceled","caller":"/home/runner/go/pkg/mod/github.com/hashicorp/yamux@v0.1.1/session.go:473","func":"github.com/hashicorp/yamux.(*Session).sendLoop","logger_names":["coderd","agentrpc","yamux","stdlib"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956"}}
{"ts":"2024-10-03T23:38:58.855437996Z","level":"DEBUG","msg":"job logs context canceled","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:553","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb"}}
{"ts":"2024-10-03T23:38:58.855499445Z","level":"DEBUG","msg":"end log streaming loop","caller":"/home/runner/work/coder/coder/coderd/workspaceagents.go:469","func":"github.com/coder/coder/v2/coderd.(*API).workspaceAgentLogs.func3.1","logger_names":["coderd"],"fields":{"workspace_agent_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e"}}
{"ts":"2024-10-03T23:38:58.855376908Z","level":"DEBUG","msg":"stopped listening to event channel","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:291","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).subscribeQueue.func2","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:b1f1200e-d38f-4dfd-a1c6-598f3df62c27"}}
{"ts":"2024-10-03T23:38:58.855488273Z","level":"DEBUG","msg":"agent connection monitor is closing connection","caller":"/home/runner/work/coder/coder/coderd/workspaceagentsrpc.go:400","func":"github.com/coder/coder/v2/coderd.(*agentConnectionMonitor).monitor.func2","logger_names":["coderd"],"fields":{"workspace_id":"3914deb3-cfbc-4474-ac0c-d18858413cd8","agent_id":"510b058c-9955-47e0-af97-46e48e739ac9","request_id":"542db09f-4624-40a8-8994-108a409aa956","reason":"canceled"}}
{"ts":"2024-10-03T23:38:58.855608366Z","level":"INFO","msg":"gracefully stopped","caller":"/home/runner/work/coder/coder/coderd/notifications/notifier.go:71","func":"github.com/coder/coder/v2/coderd/notifications.(*notifier).run.func1","logger_names":["notifications.manager","notifier"],"fields":{"notifier_id":"65d92172-c013-4a45-b343-12d306c0ec3d"}}
{"ts":"2024-10-03T23:38:58.855602244Z","level":"DEBUG","msg":"peerReadLoop context done","caller":"/home/runner/work/coder/coder/tailnet/peer.go:128","func":"github.com/coder/coder/v2/tailnet.(*peer).reqLoop","logger_names":["coderd","coord"],"fields":{"peer_id":"510b058c-9955-47e0-af97-46e48e739ac9","peer_name":"Help-azure-kite-88-main","request_id":"542db09f-4624-40a8-8994-108a409aa956"}}
{"ts":"2024-10-03T23:38:58.85559502Z","level":"DEBUG","msg":"error receiving requests from DRPC stream","caller":"/home/runner/work/coder/coder/tailnet/service.go:226","func":"github.com/coder/coder/v2/tailnet.communicator.loopReq","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","peer_id":"{Name:Help-azure-kite-88-main ID:510b058c-9955-47e0-af97-46e48e739ac9 Auth:{ID:510b058c-9955-47e0-af97-46e48e739ac9}}","name":"Help-azure-kite-88-main","request_id":"542db09f-4624-40a8-8994-108a409aa956","error":"context canceled"}}
{"ts":"2024-10-03T23:38:58.855552888Z","level":"DEBUG","msg":"peerReadLoop context done","caller":"/home/runner/work/coder/coder/tailnet/peer.go:128","func":"github.com/coder/coder/v2/tailnet.(*peer).reqLoop","logger_names":["coderd","coord"],"fields":{"peer_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","peer_name":"Help-turquoise-meadowlark-45-main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6"}}
{"ts":"2024-10-03T23:38:58.855629497Z","level":"DEBUG","msg":"loopResp failed to get response","caller":"/home/runner/work/coder/coder/tailnet/service.go:248","func":"github.com/coder/coder/v2/tailnet.communicator.loopResp","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","peer_id":"{Name:Help-azure-kite-88-main ID:510b058c-9955-47e0-af97-46e48e739ac9 Auth:{ID:510b058c-9955-47e0-af97-46e48e739ac9}}","name":"Help-azure-kite-88-main","request_id":"542db09f-4624-40a8-8994-108a409aa956","error":"context canceled"}}
{"ts":"2024-10-03T23:38:58.855964515Z","level":"DEBUG","msg":"lostPeer","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:790","func":"github.com/coder/coder/v2/tailnet.(*core).lostPeer","logger_names":["coderd","coord"],"fields":{"peer_id":"510b058c-9955-47e0-af97-46e48e739ac9"}}
{"ts":"2024-10-03T23:38:58.855939757Z","level":"INFO","msg":"notification manager stopped","caller":"/home/runner/work/coder/coder/coderd/notifications/manager.go:160","func":"github.com/coder/coder/v2/coderd/notifications.(*Manager).loop.func1","logger_names":["notifications.manager"]}
{"ts":"2024-10-03T23:38:58.855981568Z","level":"DEBUG","msg":"stopped listening to event channel","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:291","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).subscribeQueue.func2","logger_names":["pubsub"],"fields":{"event":"workspace_agent_metadata:510b058c-9955-47e0-af97-46e48e739ac9"}}
{"ts":"2024-10-03T23:38:58.855441182Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/derp","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:21:08.857241945Z","took":"17m49.9981953s","status_code":0,"latency_ms":1069998,"request_id":"b80eaa29-ad62-4c73-84a0-89247db335e1"}}
{"ts":"2024-10-03T23:38:58.855476962Z","level":"DEBUG","msg":"error receiving requests from DRPC stream","caller":"/home/runner/work/coder/coder/tailnet/service.go:226","func":"github.com/coder/coder/v2/tailnet.communicator.loopReq","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","peer_id":"{Name:Help-turquoise-meadowlark-45-main ID:b1f1200e-d38f-4dfd-a1c6-598f3df62c27 Auth:{ID:b1f1200e-d38f-4dfd-a1c6-598f3df62c27}}","name":"Help-turquoise-meadowlark-45-main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","error":"context canceled"}}
{"ts":"2024-10-03T23:38:58.855826007Z","level":"INFO","msg":"[ERR] yamux: Failed to read header: failed to get reader: context canceled","caller":"/home/runner/go/pkg/mod/github.com/hashicorp/yamux@v0.1.1/session.go:538","func":"github.com/hashicorp/yamux.(*Session).recvLoop","logger_names":["coderd","agentrpc","yamux","stdlib"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956"}}
{"ts":"2024-10-03T23:38:58.855598837Z","level":"DEBUG","msg":"loopResp failed to get response","caller":"/home/runner/work/coder/coder/tailnet/service.go:248","func":"github.com/coder/coder/v2/tailnet.communicator.loopResp","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","peer_id":"{Name:Help-turquoise-meadowlark-45-main ID:b1f1200e-d38f-4dfd-a1c6-598f3df62c27 Auth:{ID:b1f1200e-d38f-4dfd-a1c6-598f3df62c27}}","name":"Help-turquoise-meadowlark-45-main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","error":"context canceled"}}
{"ts":"2024-10-03T23:38:58.855428498Z","level":"DEBUG","msg":"drpc server error","caller":"/home/runner/work/coder/coder/coderd/agentapi/api.go:189","func":"github.com/coder/coder/v2/coderd/agentapi.(*API).Server.func1","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","error":"context canceled"}}
{"ts":"2024-10-03T23:38:58.856049349Z","level":"INFO","msg":"gracefully stopped","caller":"/home/runner/work/coder/coder/coderd/notifications/manager.go:392","func":"github.com/coder/coder/v2/coderd/notifications.(*Manager).Stop.func1","logger_names":["notifications.manager"]}
{"ts":"2024-10-03T23:38:58.856233636Z","level":"DEBUG","msg":"stopped listening to event channel","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:291","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).subscribeQueue.func2","logger_names":["pubsub"],"fields":{"event":"template:95988f7b-bca7-4ed5-8861-343284f7457a"}}
{"ts":"2024-10-03T23:38:58.856267852Z","level":"DEBUG","msg":"drpc server error","caller":"/home/runner/work/coder/coder/coderd/agentapi/api.go:189","func":"github.com/coder/coder/v2/coderd/agentapi.(*API).Server.func1","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"turquoise-meadowlark-45","agent_name":"main","request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6","error":"context canceled"}}
{"ts":"2024-10-03T23:38:58.855892896Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaceagents/b1f1200e-d38f-4dfd-a1c6-598f3df62c27/logs","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:12.509347578Z","took":"17m46.346543244s","status_code":101,"latency_ms":1066346,"request_id":"3243b118-6cb4-4b75-a76c-7618128e7efb"}}
{"ts":"2024-10-03T23:38:58.856411821Z","level":"INFO","msg":"attempting graceful shutdown","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:486","func":"github.com/coder/coder/v2/provisionerd.(*Server).Shutdown","logger_names":["provisionerd-backstage-jr-1"]}
{"ts":"2024-10-03T23:38:58.856413774Z","level":"INFO","msg":"attempting graceful shutdown","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:486","func":"github.com/coder/coder/v2/provisionerd.(*Server).Shutdown","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:38:58.855915059Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaceagents/b1f1200e-d38f-4dfd-a1c6-598f3df62c27/watch-metadata","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:08.691755188Z","took":"17m50.164156835s","status_code":200,"latency_ms":1070164,"request_id":"2b9a43f3-6cce-4a05-b9b7-f95c43d85cca"}}
{"ts":"2024-10-03T23:38:58.856564085Z","level":"DEBUG","msg":"sending acquire job cancel","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:393","func":"github.com/coder/coder/v2/provisionerd.(*Server).acquireGraceful.func1","logger_names":["provisionerd-backstage-jr-1"]}
{"ts":"2024-10-03T23:38:58.85641175Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaces/ae875178-00fb-4cad-bea6-560ab2739bb8/watch","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:04.032409732Z","took":"17m54.823998933s","status_code":200,"latency_ms":1074823,"request_id":"d8e37c10-2d3b-40de-83b0-fc28f9497b3f"}}
{"ts":"2024-10-03T23:38:58.856179551Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/api/v2/workspaceagents/510b058c-9955-47e0-af97-46e48e739ac9/watch-metadata","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:04:55.335066006Z","took":"34m3.521107393s","status_code":200,"latency_ms":2043521,"request_id":"d58a2e26-156e-4505-bbbd-753810120e6d"}}
{"ts":"2024-10-03T23:38:58.856415397Z","level":"INFO","msg":"attempting graceful shutdown","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:486","func":"github.com/coder/coder/v2/provisionerd.(*Server).Shutdown","logger_names":["provisionerd-backstage-jr-2"]}
{"ts":"2024-10-03T23:38:58.856122451Z","level":"DEBUG","msg":"drpc server error","caller":"/home/runner/work/coder/coder/coderd/agentapi/api.go:189","func":"github.com/coder/coder/v2/coderd/agentapi.(*API).Server.func1","logger_names":["coderd","agentrpc"],"fields":{"owner":"Help","workspace_name":"azure-kite-88","agent_name":"main","request_id":"542db09f-4624-40a8-8994-108a409aa956","error":"context canceled"}}
{"ts":"2024-10-03T23:38:58.856100077Z","level":"DEBUG","msg":"got tunnel peers","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:689","func":"github.com/coder/coder/v2/tailnet.(*core).updateTunnelPeersLocked","logger_names":["coderd","coord"],"fields":{"peer_id":"510b058c-9955-47e0-af97-46e48e739ac9","tunnel_peers":[]}}
{"ts":"2024-10-03T23:38:58.856642176Z","level":"DEBUG","msg":"sending acquire job cancel","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:393","func":"github.com/coder/coder/v2/provisionerd.(*Server).acquireGraceful.func1","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:38:58.856511423Z","level":"DEBUG","msg":"stopped listening to event channel","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:291","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).subscribeQueue.func2","logger_names":["pubsub"],"fields":{"event":"agent-logs:b1f1200e-d38f-4dfd-a1c6-598f3df62c27"}}
{"ts":"2024-10-03T23:38:58.856786405Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8","message_len":0}}
{"ts":"2024-10-03T23:38:58.856966203Z","level":"DEBUG","msg":"lostPeer","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:790","func":"github.com/coder/coder/v2/tailnet.(*core).lostPeer","logger_names":["coderd","coord"],"fields":{"peer_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27"}}
{"ts":"2024-10-03T23:38:58.856793509Z","level":"DEBUG","msg":"sending acquire job cancel","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:393","func":"github.com/coder/coder/v2/provisionerd.(*Server).acquireGraceful.func1","logger_names":["provisionerd-backstage-jr-2"]}
{"ts":"2024-10-03T23:38:58.856730106Z","level":"DEBUG","msg":"acquiring job canceled","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:114","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c37f3a0b-0952-4c61-bb4e-b2ec7eed4b7b","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"},"error":"context canceled"}}
{"ts":"2024-10-03T23:38:58.857120532Z","level":"DEBUG","msg":"got tunnel peers","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:689","func":"github.com/coder/coder/v2/tailnet.(*core).updateTunnelPeersLocked","logger_names":["coderd","coord"],"fields":{"peer_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","tunnel_peers":["08c6a77c-80ad-4fd2-a89c-738973cd7a13"]}}
{"ts":"2024-10-03T23:38:58.857242899Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"workspace:3914deb3-cfbc-4474-ac0c-d18858413cd8","message_len":0}}
{"ts":"2024-10-03T23:38:58.857174516Z","level":"DEBUG","msg":"stopped listening to event channel","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:291","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).subscribeQueue.func2","logger_names":["pubsub"],"fields":{"event":"workspace:ae875178-00fb-4cad-bea6-560ab2739bb8"}}
{"ts":"2024-10-03T23:38:58.857273498Z","level":"DEBUG","msg":"successful cancel","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:348","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).AcquireJobWithCancel","logger_names":["coderd","inmem-provisionerd-backstage-jr-1"]}
{"ts":"2024-10-03T23:38:58.857285531Z","level":"DEBUG","msg":"acquiring job canceled","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:114","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"c2be32f7-aaaf-4bfb-bace-ce7be317b2b6","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"},"error":"context canceled"}}
{"ts":"2024-10-03T23:38:58.857493704Z","level":"DEBUG","msg":"closed stream","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:322","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).AcquireJobWithCancel.func1","logger_names":["coderd","inmem-provisionerd-backstage-jr-1"],"fields":{"error":null}}
{"ts":"2024-10-03T23:38:58.857049795Z","level":"DEBUG","msg":"acquiring job canceled","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/acquirer.go:114","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*Acquirer).AcquireJob","logger_names":["coderd","acquirer"],"fields":{"organization_id":"6ed51444-d360-4b0c-aac1-6894bd4cbd11","worker_id":"50afe5ae-8294-4a97-b88a-2dca49c5a311","provisioner_types":["terraform"],"tags":{"owner":"","scope":"organization"},"error":"context canceled"}}
{"ts":"2024-10-03T23:38:58.857304027Z","level":"DEBUG","msg":"got updated mapping","caller":"/home/runner/work/coder/coder/tailnet/peer.go:92","func":"github.com/coder/coder/v2/tailnet.(*peer).storeMappingLocked","logger_names":["coderd","coord"],"fields":{"peer_id":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","peer_name":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","from_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","kind":"LOST","reason":"lost"}}
{"ts":"2024-10-03T23:38:58.857566956Z","level":"DEBUG","msg":"successful cancel","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:348","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).AcquireJobWithCancel","logger_names":["coderd","inmem-provisionerd-backstage-jr-2"]}
{"ts":"2024-10-03T23:38:58.857571424Z","level":"DEBUG","msg":"graceful acquire done","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:284","func":"github.com/coder/coder/v2/provisionerd.(*Server).acquireAndRunOne","logger_names":["provisionerd-backstage-jr-1"],"fields":{"job_id":"","error":null}}
{"ts":"2024-10-03T23:38:58.857616191Z","level":"DEBUG","msg":"successful cancel","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:348","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).AcquireJobWithCancel","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:38:58.857761633Z","level":"DEBUG","msg":"closed stream","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:322","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).AcquireJobWithCancel.func1","logger_names":["coderd","inmem-provisionerd-backstage-jr-2"],"fields":{"error":null}}
{"ts":"2024-10-03T23:38:58.857689202Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/api/v2/workspaceagents/me/rpc","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:04:57.900526722Z","took":"34m0.957160426s","status_code":101,"latency_ms":2040957,"request_id":"542db09f-4624-40a8-8994-108a409aa956"}}
{"ts":"2024-10-03T23:38:58.857798023Z","level":"DEBUG","msg":"acquire job successfully canceled","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:296","func":"github.com/coder/coder/v2/provisionerd.(*Server).acquireAndRunOne","logger_names":["provisionerd-backstage-jr-1"]}
{"ts":"2024-10-03T23:38:58.857554051Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"1ce8t8h51oihk.pit-1.try.coder.app","path":"/api/v2/workspaceagents/me/rpc","proto":"HTTP/1.1","remote_addr":"fcca::1","start":"2024-10-03T23:21:08.764306181Z","took":"17m50.093245305s","status_code":101,"latency_ms":1070093,"request_id":"0c4efe37-b5ef-4cf9-a4e2-c2e8200a3ee6"}}
{"ts":"2024-10-03T23:38:58.857629387Z","level":"DEBUG","msg":"wrote peer update","caller":"/home/runner/work/coder/coder/tailnet/peer.go:48","func":"github.com/coder/coder/v2/tailnet.(*peer).updateMappingLocked","logger_names":["coderd","coord"],"fields":{"peer_id":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","peer_name":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","from_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","kind":"LOST","reason":"lost"}}
{"ts":"2024-10-03T23:38:58.85779133Z","level":"DEBUG","msg":"graceful acquire done","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:284","func":"github.com/coder/coder/v2/provisionerd.(*Server).acquireAndRunOne","logger_names":["provisionerd-backstage-jr-2"],"fields":{"job_id":"","error":null}}
{"ts":"2024-10-03T23:38:58.857860664Z","level":"DEBUG","msg":"closed stream","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:322","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).AcquireJobWithCancel.func1","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"error":null}}
{"ts":"2024-10-03T23:38:58.857478304Z","level":"DEBUG","msg":"GET","caller":"/home/runner/work/coder/coder/coderd/httpmw/logger.go:72","func":"github.com/coder/coder/v2/coderd.New.Logger.func22.1.1","logger_names":["coderd"],"fields":{"host":"localhost:3005","path":"/api/v2/workspaceagents/b1f1200e-d38f-4dfd-a1c6-598f3df62c27/logs","proto":"HTTP/1.1","remote_addr":"127.0.0.1","start":"2024-10-03T23:21:09.634781865Z","took":"17m49.222691129s","status_code":101,"latency_ms":1069222,"request_id":"9a97437b-013d-4096-82b9-42151f2a1a0e"}}
{"ts":"2024-10-03T23:38:58.857931171Z","level":"DEBUG","msg":"exiting acquire; provisionerd is shutting down","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:274","func":"github.com/coder/coder/v2/provisionerd.(*Server).acquireExit","logger_names":["provisionerd-backstage-jr-1"]}
{"ts":"2024-10-03T23:38:58.857648774Z","level":"DEBUG","msg":"qRespLoop got response","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:985","func":"github.com/coder/coder/v2/tailnet.qRespLoop","logger_names":["coderd","coord","multiagent"],"fields":{"client_id":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","resp":{"peer_updates":[{"id":"sfEgDtOPTf2hxlmPPfYsJw==","kind":3,"reason":"lost"}]}}}
{"ts":"2024-10-03T23:38:58.858019461Z","level":"DEBUG","msg":"acquire job successfully canceled","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:296","func":"github.com/coder/coder/v2/provisionerd.(*Server).acquireAndRunOne","logger_names":["provisionerd-backstage-jr-2"]}
{"ts":"2024-10-03T23:38:58.858086411Z","level":"DEBUG","msg":"acquire loop exited","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:254","func":"github.com/coder/coder/v2/provisionerd.(*Server).acquireLoop","logger_names":["provisionerd-backstage-jr-1"]}
{"ts":"2024-10-03T23:38:58.857873339Z","level":"DEBUG","msg":"graceful acquire done","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:284","func":"github.com/coder/coder/v2/provisionerd.(*Server).acquireAndRunOne","logger_names":["provisionerd-backstage-jr-0"],"fields":{"job_id":"","error":null}}
{"ts":"2024-10-03T23:38:58.858104045Z","level":"INFO","msg":"gracefully shutdown","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:500","func":"github.com/coder/coder/v2/provisionerd.(*Server).Shutdown","logger_names":["provisionerd-backstage-jr-1"]}
{"ts":"2024-10-03T23:38:58.858182477Z","level":"DEBUG","msg":"acquire job successfully canceled","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:296","func":"github.com/coder/coder/v2/provisionerd.(*Server).acquireAndRunOne","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:38:58.858216242Z","level":"INFO","msg":"closing provisionerd","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:507","func":"github.com/coder/coder/v2/provisionerd.(*Server).Close","logger_names":["provisionerd-backstage-jr-1"]}
{"ts":"2024-10-03T23:38:58.85812716Z","level":"DEBUG","msg":"exiting acquire; provisionerd is shutting down","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:274","func":"github.com/coder/coder/v2/provisionerd.(*Server).acquireExit","logger_names":["provisionerd-backstage-jr-2"]}
{"ts":"2024-10-03T23:38:58.8582618Z","level":"DEBUG","msg":"exiting acquire; provisionerd is shutting down","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:274","func":"github.com/coder/coder/v2/provisionerd.(*Server).acquireExit","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:38:58.858280477Z","level":"DEBUG","msg":"waiting for goroutines to exit","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:543","func":"github.com/coder/coder/v2/provisionerd.(*Server).closeWithError","logger_names":["provisionerd-backstage-jr-1"]}
{"ts":"2024-10-03T23:38:58.858316887Z","level":"DEBUG","msg":"acquire loop exited","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:254","func":"github.com/coder/coder/v2/provisionerd.(*Server).acquireLoop","logger_names":["provisionerd-backstage-jr-2"]}
{"ts":"2024-10-03T23:38:58.858334631Z","level":"DEBUG","msg":"acquire loop exited","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:254","func":"github.com/coder/coder/v2/provisionerd.(*Server).acquireLoop","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:38:58.858280747Z","level":"DEBUG","msg":"marked peer lost","caller":"/home/runner/work/coder/coder/tailnet/configmaps.go:480","func":"github.com/coder/coder/v2/tailnet.(*configMaps).updatePeerLocked","logger_names":["coderd","servertailnet"],"fields":{"peer_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27"}}
{"ts":"2024-10-03T23:38:58.858346324Z","level":"DEBUG","msg":"connect loop exited","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:224","func":"github.com/coder/coder/v2/provisionerd.(*Server).connect","logger_names":["provisionerd-backstage-jr-1"]}
{"ts":"2024-10-03T23:38:58.858389017Z","level":"INFO","msg":"gracefully shutdown","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:500","func":"github.com/coder/coder/v2/provisionerd.(*Server).Shutdown","logger_names":["provisionerd-backstage-jr-2"]}
{"ts":"2024-10-03T23:38:58.858410157Z","level":"INFO","msg":"gracefully shutdown","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:500","func":"github.com/coder/coder/v2/provisionerd.(*Server).Shutdown","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:38:58.85836994Z","level":"INFO","msg":"provisioner daemon disconnected","caller":"/home/runner/work/coder/coder/coderd/coderd.go:1563","func":"github.com/coder/coder/v2/coderd.(*API).CreateInMemoryTaggedProvisionerDaemon.func3","logger_names":["coderd","inmem-provisionerd-backstage-jr-1"],"fields":{"error":"InmemoryListener is already closed: use of closed network connection"}}
{"ts":"2024-10-03T23:38:58.858470514Z","level":"INFO","msg":"closing provisionerd","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:507","func":"github.com/coder/coder/v2/provisionerd.(*Server).Close","logger_names":["provisionerd-backstage-jr-2"]}
{"ts":"2024-10-03T23:38:58.858488429Z","level":"INFO","msg":"closing provisionerd","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:507","func":"github.com/coder/coder/v2/provisionerd.(*Server).Close","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:38:58.858489271Z","level":"DEBUG","msg":"closing server with error","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:545","func":"github.com/coder/coder/v2/provisionerd.(*Server).closeWithError","logger_names":["provisionerd-backstage-jr-1"],"fields":{"error":null}}
{"ts":"2024-10-03T23:38:58.85853011Z","level":"DEBUG","msg":"waiting for goroutines to exit","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:543","func":"github.com/coder/coder/v2/provisionerd.(*Server).closeWithError","logger_names":["provisionerd-backstage-jr-2"]}
{"ts":"2024-10-03T23:38:58.858384408Z","level":"DEBUG","msg":"peer lost timeout","caller":"/home/runner/work/coder/coder/tailnet/configmaps.go:520","func":"github.com/coder/coder/v2/tailnet.(*configMaps).peerLostTimeout","logger_names":["coderd","servertailnet"],"fields":{"peer_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27"}}
{"ts":"2024-10-03T23:38:58.858559466Z","level":"DEBUG","msg":"waiting for goroutines to exit","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:543","func":"github.com/coder/coder/v2/provisionerd.(*Server).closeWithError","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:38:58.858580196Z","level":"DEBUG","msg":"connect loop exited","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:224","func":"github.com/coder/coder/v2/provisionerd.(*Server).connect","logger_names":["provisionerd-backstage-jr-2"]}
{"ts":"2024-10-03T23:38:58.858636014Z","level":"DEBUG","msg":"connect loop exited","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:224","func":"github.com/coder/coder/v2/provisionerd.(*Server).connect","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:38:58.858607319Z","level":"INFO","msg":"provisioner daemon disconnected","caller":"/home/runner/work/coder/coder/coderd/coderd.go:1563","func":"github.com/coder/coder/v2/coderd.(*API).CreateInMemoryTaggedProvisionerDaemon.func3","logger_names":["coderd","inmem-provisionerd-backstage-jr-2"],"fields":{"error":"InmemoryListener is already closed: use of closed network connection"}}
{"ts":"2024-10-03T23:38:58.858698165Z","level":"DEBUG","msg":"closing server with error","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:545","func":"github.com/coder/coder/v2/provisionerd.(*Server).closeWithError","logger_names":["provisionerd-backstage-jr-0"],"fields":{"error":null}}
{"ts":"2024-10-03T23:38:58.858687033Z","level":"DEBUG","msg":"closing server with error","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:545","func":"github.com/coder/coder/v2/provisionerd.(*Server).closeWithError","logger_names":["provisionerd-backstage-jr-2"],"fields":{"error":null}}
{"ts":"2024-10-03T23:38:58.858694538Z","level":"INFO","msg":"removing lost peer","caller":"/home/runner/work/coder/coder/tailnet/configmaps.go:548","func":"github.com/coder/coder/v2/tailnet.(*configMaps).peerLostTimeout","logger_names":["coderd","servertailnet"],"fields":{"peer_id":"b1f1200e-d38f-4dfd-a1c6-598f3df62c27","key_id":"[T0XWz]"}}
{"ts":"2024-10-03T23:38:58.858708284Z","level":"INFO","msg":"provisioner daemon disconnected","caller":"/home/runner/work/coder/coder/coderd/coderd.go:1563","func":"github.com/coder/coder/v2/coderd.(*API).CreateInMemoryTaggedProvisionerDaemon.func3","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"],"fields":{"error":"InmemoryListener is already closed: use of closed network connection"}}
{"ts":"2024-10-03T23:38:58.85879398Z","level":"DEBUG","msg":"updating engine network map","caller":"/home/runner/work/coder/coder/tailnet/configmaps.go:157","func":"github.com/coder/coder/v2/tailnet.(*configMaps).configLoop.func3","logger_names":["coderd","servertailnet"],"fields":{"network_map":"netmap: self: [D+E0H] auth=machine-unknown u=? [fd7a:115c:a1e0:47d3:a6eb:7bea:2a88:57fc/128]\n"}}
{"ts":"2024-10-03T23:38:58.858925445Z","level":"DEBUG","msg":"[v1] magicsock: got updated network map; 0 peers","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/magicsock/magicsock.go:1903","func":"tailscale.com/wgengine/magicsock.(*Conn).SetNetworkMap","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:38:58.85900583Z","level":"DEBUG","msg":"[v1] magicsock: doing cleanup for discovery key d:d07225f2039f44bf","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/magicsock/endpoint.go:1108","func":"tailscale.com/wgengine/magicsock.(*endpoint).stopAndReset","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:38:58.858940684Z","level":"DEBUG","msg":"stopped listening to event channel","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:291","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).subscribeQueue.func2","logger_names":["pubsub"],"fields":{"event":"replica"}}
{"ts":"2024-10-03T23:38:58.859053843Z","level":"DEBUG","msg":"magicsock: disco: node [T0XWz] d:d07225f2039f44bf now using DERP only (reset)","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/magicsock/endpoint.go:1129","func":"tailscale.com/wgengine/magicsock.(*endpoint).resetLocked","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:38:58.859216337Z","level":"DEBUG","msg":"wgengine: Reconfig: configuring userspace WireGuard config (with 0/0 peers)","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:696","func":"tailscale.com/wgengine.(*userspaceEngine).maybeReconfigWireguardLocked","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:38:58.85925924Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"replica","message_len":36}}
{"ts":"2024-10-03T23:38:58.859426284Z","level":"DEBUG","msg":"wg: [v2] peer(T0XW…xpwU) - UAPI: Removing","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/wglog/wglog.go:81","func":"tailscale.com/wgengine/wglog.NewLogger.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:38:58.859546737Z","level":"DEBUG","msg":"wg: [v2] peer(T0XW…xpwU) - Stopping","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/wglog/wglog.go:81","func":"tailscale.com/wgengine/wglog.NewLogger.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:38:58.859604529Z","level":"DEBUG","msg":"heartbeat loop canceled","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:246","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).heartbeatLoop","logger_names":["coderd","inmem-provisionerd-backstage-jr-1"]}
{"ts":"2024-10-03T23:38:58.859654385Z","level":"DEBUG","msg":"[v1] wgengine: Reconfig done","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/userspace.go:958","func":"tailscale.com/wgengine.(*userspaceEngine).Reconfig","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:38:58.859595832Z","level":"DEBUG","msg":"heartbeat loop canceled","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:246","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).heartbeatLoop","logger_names":["coderd","inmem-provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:38:58.859657311Z","level":"DEBUG","msg":"flushing workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:244","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:38:58.859673001Z","level":"DEBUG","msg":"magicsock: [0xc015ebfa40] derp.Recv(derp-999): derp.Recv: EOF","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/magicsock/derp.go:513","func":"tailscale.com/wgengine/magicsock.(*Conn).runDerpReader","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:38:58.85963632Z","level":"DEBUG","msg":"heartbeat loop canceled","caller":"/home/runner/work/coder/coder/coderd/provisionerdserver/provisionerdserver.go:246","func":"github.com/coder/coder/v2/coderd/provisionerdserver.(*server).heartbeatLoop","logger_names":["coderd","inmem-provisionerd-backstage-jr-2"]}
{"ts":"2024-10-03T23:38:58.859652782Z","level":"DEBUG","msg":"derp: internal: client [D+E0H]: readFrameHeader: io: read/write on closed pipe","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/derp/derp_server.go:447","func":"tailscale.com/derp.(*Server).Accept","logger_names":["coderd","derp"]}
{"ts":"2024-10-03T23:38:58.859790408Z","level":"DEBUG","msg":"derp-999: [v1] backoff: 7 msec","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/logtail/backoff/backoff.go:73","func":"tailscale.com/logtail/backoff.(*Backoff).BackOff","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:38:58.859723549Z","level":"DEBUG","msg":"stopped listening to event channel","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:291","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).subscribeQueue.func2","logger_names":["pubsub"],"fields":{"event":"provisioner_job_posted"}}
{"ts":"2024-10-03T23:38:58.859771572Z","level":"DEBUG","msg":"flushed workspace app stats","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:249","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).flush.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:38:58.859897666Z","level":"DEBUG","msg":"workspace app stats collector stopped","caller":"/home/runner/work/coder/coder/coderd/workspaceapps/stats.go:292","func":"github.com/coder/coder/v2/coderd/workspaceapps.(*StatsCollector).start.func1","logger_names":["coderd","workspaceapps","stats_collector"]}
{"ts":"2024-10-03T23:38:58.859888909Z","level":"DEBUG","msg":"stopped listening to event channel","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:291","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).subscribeQueue.func2","logger_names":["pubsub"],"fields":{"event":"licenses"}}
{"ts":"2024-10-03T23:38:58.85999779Z","level":"DEBUG","msg":"publish","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:298","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Publish","logger_names":["pubsub"],"fields":{"event":"licenses","message_len":10}}
{"ts":"2024-10-03T23:38:58.859965176Z","level":"DEBUG","msg":"got tunnel peers","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:689","func":"github.com/coder/coder/v2/tailnet.(*core).updateTunnelPeersLocked","logger_names":["coderd","coord"],"fields":{"peer_id":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","tunnel_peers":["b1f1200e-d38f-4dfd-a1c6-598f3df62c27"]}}
{"ts":"2024-10-03T23:38:58.860138873Z","level":"DEBUG","msg":"qRespLoop done reading responses","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:982","func":"github.com/coder/coder/v2/tailnet.qRespLoop","logger_names":["coderd","coord","multiagent"],"fields":{"client_id":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","error":"EOF"}}
{"ts":"2024-10-03T23:38:58.860267892Z","level":"DEBUG","msg":"peerReadLoop got request","caller":"/home/runner/work/coder/coder/tailnet/peer.go:135","func":"github.com/coder/coder/v2/tailnet.(*peer).reqLoop","logger_names":["coderd","coord"],"fields":{"peer_id":"08c6a77c-80ad-4fd2-a89c-738973cd7a13","peer_name":"08c6a77c-80ad-4fd2-a89c-738973cd7a13"}}
{"ts":"2024-10-03T23:38:58.860413945Z","level":"DEBUG","msg":"lostPeer","caller":"/home/runner/work/coder/coder/tailnet/coordinator.go:790","func":"github.com/coder/coder/v2/tailnet.(*core).lostPeer","logger_names":["coderd","coord"],"fields":{"peer_id":"08c6a77c-80ad-4fd2-a89c-738973cd7a13"}}
{"ts":"2024-10-03T23:38:58.860498889Z","level":"INFO","msg":"closing tailnet Conn","caller":"/home/runner/work/coder/coder/tailnet/conn.go:572","func":"github.com/coder/coder/v2/tailnet.(*Conn).Close","logger_names":["coderd","servertailnet"]}
{"ts":"2024-10-03T23:38:58.860577211Z","level":"DEBUG","msg":"closing configMaps configLoop","caller":"/home/runner/work/coder/coder/tailnet/configmaps.go:140","func":"github.com/coder/coder/v2/tailnet.(*configMaps).configLoop","logger_names":["coderd","servertailnet"]}
{"ts":"2024-10-03T23:38:58.860641645Z","level":"DEBUG","msg":"closing nodeUpdater updateLoop","caller":"/home/runner/work/coder/coder/tailnet/node.go:57","func":"github.com/coder/coder/v2/tailnet.(*nodeUpdater).updateLoop","logger_names":["coderd","servertailnet"]}
{"ts":"2024-10-03T23:38:58.86078378Z","level":"DEBUG","msg":"closed netstack","caller":"/home/runner/work/coder/coder/tailnet/conn.go:601","func":"github.com/coder/coder/v2/tailnet.(*Conn).Close","logger_names":["coderd","servertailnet"]}
{"ts":"2024-10-03T23:38:58.860974109Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: named node \"1000stun0\" has no address","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:38:58.86096952Z","level":"DEBUG","msg":"magicsock: closing connection to derp-999 (conn-close), age 34m4s","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/magicsock/derp.go:816","func":"tailscale.com/wgengine/magicsock.(*Conn).closeDerpLocked","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:38:58.8610008Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: named node \"1000stun0\" has no address","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:38:58.861050236Z","level":"DEBUG","msg":"portmapper: createOrGetMapping: read udp4 0.0.0.0:32871: use of closed network connection","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func6","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:38:58.861004918Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: named node \"1000stun0\" has no address","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:38:58.861018394Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: named node \"1002stun0\" has no address","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:38:58.861084913Z","level":"DEBUG","msg":"magicsock: 0 active derp conns","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/magicsock/derp.go:827","func":"tailscale.com/wgengine/magicsock.(*Conn).logActiveDerpLocked","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:38:58.861034505Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: named node \"1002stun0\" has no address","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:38:58.861055095Z","level":"DEBUG","msg":"netcheck: netcheck.runProbe: named node \"1002stun0\" has no address","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:38:58.861296242Z","level":"DEBUG","msg":"wg: [v2] Routine: receive incoming mkReceiveFunc - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/wglog/wglog.go:81","func":"tailscale.com/wgengine/wglog.NewLogger.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:38:58.86130037Z","level":"DEBUG","msg":"wg: [v2] Routine: receive incoming mkReceiveFunc - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/wglog/wglog.go:81","func":"tailscale.com/wgengine/wglog.NewLogger.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:38:58.910808658Z","level":"DEBUG","msg":"netcheck: [v1] report: udp=false v4=false icmpv4=false v6=false v6os=false mapvarydest= hair= portmap= derp=0","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/types/logger/logger.go:98","func":"tailscale.com/wgengine/magicsock.NewConn.WithPrefix.func7","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:38:58.911720402Z","level":"DEBUG","msg":"magicsock: endpoints changed: 172.17.0.1:54187 (local), 172.20.0.15:54187 (local)","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/magicsock/magicsock.go:2039","func":"tailscale.com/wgengine/magicsock.(*Conn).logEndpointChange","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:38:58.911842469Z","level":"DEBUG","msg":"wireguard status","caller":"/home/runner/work/coder/coder/tailnet/node.go:173","func":"github.com/coder/coder/v2/tailnet.(*nodeUpdater).setStatus","logger_names":["coderd","servertailnet"],"fields":{"status":null,"error":"engine closing; no status"}}
{"ts":"2024-10-03T23:38:58.912111219Z","level":"DEBUG","msg":"[v1] warning: fakeRouter.Close: not implemented.","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/router/router_fake.go:31","func":"tailscale.com/wgengine/router.fakeRouter.Close","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:38:58.912211893Z","level":"DEBUG","msg":"wg: [v2] Device closing","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/wglog/wglog.go:81","func":"tailscale.com/wgengine/wglog.NewLogger.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:38:58.91232395Z","level":"DEBUG","msg":"wg: [v2] Routine: receive incoming receiveDERP - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/wglog/wglog.go:81","func":"tailscale.com/wgengine/wglog.NewLogger.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:38:58.912471396Z","level":"DEBUG","msg":"wg: [v2] Device closed","caller":"/home/runner/go/pkg/mod/github.com/coder/tailscale@v1.1.1-0.20240920101701-ddd4a72e1b56/wgengine/wglog/wglog.go:81","func":"tailscale.com/wgengine/wglog.NewLogger.func1","logger_names":["coderd","servertailnet","net.wgengine"]}
{"ts":"2024-10-03T23:38:58.912585637Z","level":"DEBUG","msg":"workspace usage tracker loop exited","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:166","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).loop.func1","logger_names":["coderd","workspace_usage_tracker"]}
{"ts":"2024-10-03T23:38:58.912703865Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Stopping","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.912834969Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Routine: sequential sender - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.912847674Z","level":"DEBUG","msg":"peer(9i3o…UMXM) - Routine: sequential receiver - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.913061067Z","level":"DEBUG","msg":"Device closing","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.91344501Z","level":"DEBUG","msg":"Routine: event worker - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.913497421Z","level":"DEBUG","msg":"Routine: receive incoming v4 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.91348631Z","level":"DEBUG","msg":"Routine: TUN reader - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.913590151Z","level":"DEBUG","msg":"Routine: receive incoming v6 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.913812882Z","level":"DEBUG","msg":"Device closed","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.913845094Z","level":"DEBUG","msg":"Routine: decryption worker 15 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.91385853Z","level":"DEBUG","msg":"Routine: handshake worker 24 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.913879771Z","level":"DEBUG","msg":"Routine: handshake worker 11 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.913839563Z","level":"DEBUG","msg":"Routine: decryption worker 10 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.91385871Z","level":"DEBUG","msg":"Routine: handshake worker 35 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.9139464Z","level":"DEBUG","msg":"Routine: decryption worker 64 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.913974404Z","level":"DEBUG","msg":"Routine: handshake worker 29 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.913955608Z","level":"DEBUG","msg":"Routine: handshake worker 21 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.91387389Z","level":"DEBUG","msg":"Routine: handshake worker 12 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.913897345Z","level":"DEBUG","msg":"Routine: handshake worker 19 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.913983311Z","level":"DEBUG","msg":"Routine: handshake worker 13 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.913934427Z","level":"DEBUG","msg":"Routine: handshake worker 44 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914077283Z","level":"DEBUG","msg":"Routine: handshake worker 36 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914025132Z","level":"DEBUG","msg":"Routine: handshake worker 23 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914106179Z","level":"DEBUG","msg":"Routine: handshake worker 50 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914161356Z","level":"DEBUG","msg":"Routine: decryption worker 11 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914083836Z","level":"DEBUG","msg":"Routine: handshake worker 18 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914197706Z","level":"DEBUG","msg":"Routine: handshake worker 34 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914051814Z","level":"DEBUG","msg":"Routine: handshake worker 62 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914152679Z","level":"DEBUG","msg":"Routine: handshake worker 26 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914289494Z","level":"DEBUG","msg":"Routine: handshake worker 59 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914272842Z","level":"DEBUG","msg":"Routine: handshake worker 57 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914158731Z","level":"DEBUG","msg":"Routine: handshake worker 48 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.9141224Z","level":"DEBUG","msg":"Routine: handshake worker 47 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914154883Z","level":"DEBUG","msg":"Routine: handshake worker 20 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.91423049Z","level":"DEBUG","msg":"Routine: handshake worker 63 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914216943Z","level":"DEBUG","msg":"Routine: decryption worker 44 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914278192Z","level":"DEBUG","msg":"Routine: handshake worker 46 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.91437548Z","level":"DEBUG","msg":"Routine: handshake worker 58 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914395569Z","level":"DEBUG","msg":"Routine: decryption worker 46 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914191634Z","level":"DEBUG","msg":"Routine: decryption worker 14 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914051754Z","level":"DEBUG","msg":"Routine: handshake worker 61 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914505161Z","level":"DEBUG","msg":"Routine: handshake worker 60 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914350001Z","level":"DEBUG","msg":"Routine: decryption worker 23 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914231772Z","level":"DEBUG","msg":"Routine: decryption worker 12 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914472819Z","level":"DEBUG","msg":"Routine: decryption worker 34 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914030643Z","level":"DEBUG","msg":"Routine: handshake worker 15 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914532554Z","level":"DEBUG","msg":"Routine: decryption worker 43 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914167017Z","level":"DEBUG","msg":"Routine: handshake worker 32 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914585376Z","level":"DEBUG","msg":"Routine: handshake worker 16 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914447369Z","level":"DEBUG","msg":"Routine: handshake worker 27 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914672916Z","level":"DEBUG","msg":"Routine: handshake worker 5 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914316466Z","level":"DEBUG","msg":"Routine: handshake worker 42 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914709086Z","level":"DEBUG","msg":"Routine: decryption worker 63 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914746097Z","level":"DEBUG","msg":"Routine: handshake worker 31 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914235179Z","level":"DEBUG","msg":"Routine: handshake worker 25 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914830972Z","level":"DEBUG","msg":"Routine: decryption worker 37 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914667485Z","level":"DEBUG","msg":"Routine: decryption worker 45 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914848656Z","level":"DEBUG","msg":"Routine: handshake worker 33 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914704898Z","level":"DEBUG","msg":"Routine: handshake worker 53 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914021425Z","level":"DEBUG","msg":"Routine: handshake worker 39 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914883163Z","level":"DEBUG","msg":"Routine: decryption worker 29 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914698916Z","level":"DEBUG","msg":"Routine: handshake worker 45 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914532454Z","level":"DEBUG","msg":"Routine: handshake worker 38 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914780454Z","level":"DEBUG","msg":"Routine: decryption worker 28 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914336855Z","level":"DEBUG","msg":"Routine: decryption worker 58 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914218887Z","level":"DEBUG","msg":"Routine: handshake worker 8 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914642226Z","level":"DEBUG","msg":"Routine: handshake worker 55 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914201874Z","level":"DEBUG","msg":"Routine: handshake worker 54 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914062895Z","level":"DEBUG","msg":"Routine: decryption worker 25 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.9148971Z","level":"DEBUG","msg":"Routine: decryption worker 53 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.91430318Z","level":"DEBUG","msg":"Routine: decryption worker 20 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914168089Z","level":"DEBUG","msg":"Routine: decryption worker 26 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914453471Z","level":"DEBUG","msg":"Routine: decryption worker 59 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914401501Z","level":"DEBUG","msg":"Routine: handshake worker 9 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914700669Z","level":"DEBUG","msg":"Routine: decryption worker 6 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914325554Z","level":"DEBUG","msg":"Routine: decryption worker 17 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914180202Z","level":"DEBUG","msg":"Routine: decryption worker 55 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.91493345Z","level":"DEBUG","msg":"Routine: decryption worker 1 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914458501Z","level":"DEBUG","msg":"Routine: decryption worker 42 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914965943Z","level":"DEBUG","msg":"Routine: decryption worker 19 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914088745Z","level":"DEBUG","msg":"Routine: handshake worker 49 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914304493Z","level":"DEBUG","msg":"Routine: decryption worker 62 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914458852Z","level":"DEBUG","msg":"Routine: decryption worker 2 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914256259Z","level":"DEBUG","msg":"Routine: decryption worker 18 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914392704Z","level":"DEBUG","msg":"Routine: handshake worker 51 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.91403954Z","level":"DEBUG","msg":"Routine: decryption worker 24 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914266539Z","level":"DEBUG","msg":"Routine: handshake worker 40 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914621707Z","level":"DEBUG","msg":"Routine: decryption worker 54 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.91440628Z","level":"DEBUG","msg":"Routine: handshake worker 6 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.91450477Z","level":"DEBUG","msg":"Routine: decryption worker 33 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914661995Z","level":"DEBUG","msg":"Routine: decryption worker 5 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914718153Z","level":"DEBUG","msg":"Routine: handshake worker 41 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914603582Z","level":"DEBUG","msg":"Routine: handshake worker 56 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914559226Z","level":"DEBUG","msg":"Routine: handshake worker 7 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914919583Z","level":"DEBUG","msg":"Routine: decryption worker 57 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914743041Z","level":"DEBUG","msg":"Routine: decryption worker 40 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914586959Z","level":"DEBUG","msg":"Routine: decryption worker 48 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914484661Z","level":"DEBUG","msg":"Routine: handshake worker 3 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914622658Z","level":"DEBUG","msg":"Routine: decryption worker 27 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914698345Z","level":"DEBUG","msg":"Routine: decryption worker 9 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914786135Z","level":"DEBUG","msg":"Routine: decryption worker 16 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914611377Z","level":"DEBUG","msg":"Routine: decryption worker 8 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914735387Z","level":"DEBUG","msg":"Routine: decryption worker 36 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914876199Z","level":"DEBUG","msg":"Routine: decryption worker 32 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914735537Z","level":"DEBUG","msg":"Routine: handshake worker 4 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914222835Z","level":"DEBUG","msg":"Routine: handshake worker 28 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914182747Z","level":"DEBUG","msg":"Routine: decryption worker 51 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914232524Z","level":"DEBUG","msg":"Routine: decryption worker 52 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914947687Z","level":"DEBUG","msg":"Routine: decryption worker 61 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914409215Z","level":"DEBUG","msg":"Routine: handshake worker 17 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914353167Z","level":"DEBUG","msg":"Routine: decryption worker 30 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914326415Z","level":"DEBUG","msg":"Routine: decryption worker 4 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914480473Z","level":"DEBUG","msg":"Routine: decryption worker 3 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914475945Z","level":"DEBUG","msg":"Routine: handshake worker 43 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914552823Z","level":"DEBUG","msg":"Routine: decryption worker 22 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914472017Z","level":"DEBUG","msg":"Routine: decryption worker 56 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914543375Z","level":"DEBUG","msg":"Routine: decryption worker 35 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914552643Z","level":"DEBUG","msg":"Routine: decryption worker 47 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914523106Z","level":"DEBUG","msg":"Routine: handshake worker 64 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914627027Z","level":"DEBUG","msg":"Routine: handshake worker 1 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914547844Z","level":"DEBUG","msg":"Routine: handshake worker 22 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914697934Z","level":"DEBUG","msg":"Routine: handshake worker 2 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914710308Z","level":"DEBUG","msg":"Routine: decryption worker 60 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914658949Z","level":"DEBUG","msg":"Routine: handshake worker 37 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914779402Z","level":"DEBUG","msg":"Routine: decryption worker 31 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914716901Z","level":"DEBUG","msg":"Routine: handshake worker 52 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914714346Z","level":"DEBUG","msg":"Routine: decryption worker 39 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914781656Z","level":"DEBUG","msg":"Routine: handshake worker 14 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914653598Z","level":"DEBUG","msg":"Routine: decryption worker 41 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914778741Z","level":"DEBUG","msg":"Routine: decryption worker 50 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914750626Z","level":"DEBUG","msg":"Routine: decryption worker 21 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914716961Z","level":"DEBUG","msg":"Routine: decryption worker 38 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914740617Z","level":"DEBUG","msg":"Routine: handshake worker 30 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914826503Z","level":"DEBUG","msg":"Routine: decryption worker 7 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914916207Z","level":"DEBUG","msg":"Routine: decryption worker 13 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.914823287Z","level":"DEBUG","msg":"Routine: handshake worker 10 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.916645332Z","level":"DEBUG","msg":"Routine: encryption worker 37 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.916653328Z","level":"DEBUG","msg":"Routine: encryption worker 2 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.916646815Z","level":"DEBUG","msg":"Routine: encryption worker 57 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.916715278Z","level":"DEBUG","msg":"Routine: encryption worker 53 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.916776656Z","level":"DEBUG","msg":"Routine: encryption worker 50 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.91668574Z","level":"DEBUG","msg":"Routine: encryption worker 6 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.916791716Z","level":"DEBUG","msg":"Routine: encryption worker 11 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.916701311Z","level":"DEBUG","msg":"Routine: encryption worker 4 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.916729696Z","level":"DEBUG","msg":"Routine: encryption worker 35 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.916810482Z","level":"DEBUG","msg":"Routine: encryption worker 41 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.916830941Z","level":"DEBUG","msg":"Routine: encryption worker 14 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.916839248Z","level":"DEBUG","msg":"Routine: encryption worker 28 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.916751307Z","level":"DEBUG","msg":"Routine: encryption worker 40 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.916889685Z","level":"DEBUG","msg":"Routine: encryption worker 49 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.91493326Z","level":"DEBUG","msg":"Routine: decryption worker 49 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.916912379Z","level":"DEBUG","msg":"Routine: encryption worker 59 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.91692325Z","level":"DEBUG","msg":"Routine: encryption worker 46 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.916793269Z","level":"DEBUG","msg":"Routine: encryption worker 26 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.91686658Z","level":"DEBUG","msg":"Routine: encryption worker 18 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917033453Z","level":"DEBUG","msg":"Routine: encryption worker 47 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.916886619Z","level":"DEBUG","msg":"Routine: encryption worker 60 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.916669669Z","level":"DEBUG","msg":"Routine: encryption worker 42 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917127916Z","level":"DEBUG","msg":"Routine: encryption worker 24 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.91696954Z","level":"DEBUG","msg":"Routine: encryption worker 13 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.916828517Z","level":"DEBUG","msg":"Routine: encryption worker 15 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.916840039Z","level":"DEBUG","msg":"Routine: encryption worker 33 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917127776Z","level":"DEBUG","msg":"Routine: encryption worker 64 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917152263Z","level":"DEBUG","msg":"Routine: encryption worker 8 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.916986913Z","level":"DEBUG","msg":"Routine: encryption worker 19 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917109661Z","level":"DEBUG","msg":"Routine: encryption worker 61 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917077438Z","level":"DEBUG","msg":"Routine: encryption worker 43 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917161892Z","level":"DEBUG","msg":"Routine: encryption worker 63 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917146031Z","level":"DEBUG","msg":"Routine: encryption worker 9 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917049895Z","level":"DEBUG","msg":"Routine: encryption worker 1 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.916908672Z","level":"DEBUG","msg":"Routine: encryption worker 17 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917125962Z","level":"DEBUG","msg":"Routine: encryption worker 34 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.916988456Z","level":"DEBUG","msg":"Routine: encryption worker 44 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917011691Z","level":"DEBUG","msg":"Routine: encryption worker 5 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917043833Z","level":"DEBUG","msg":"Routine: encryption worker 22 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917095533Z","level":"DEBUG","msg":"Routine: encryption worker 36 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917022642Z","level":"DEBUG","msg":"Routine: encryption worker 27 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.916986733Z","level":"DEBUG","msg":"Routine: encryption worker 52 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917175498Z","level":"DEBUG","msg":"Routine: encryption worker 25 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917082498Z","level":"DEBUG","msg":"Routine: encryption worker 12 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917174556Z","level":"DEBUG","msg":"Routine: encryption worker 51 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917153215Z","level":"DEBUG","msg":"Routine: encryption worker 31 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917040727Z","level":"DEBUG","msg":"Routine: encryption worker 54 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.916927558Z","level":"DEBUG","msg":"Routine: encryption worker 58 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917012312Z","level":"DEBUG","msg":"Routine: encryption worker 23 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.91696477Z","level":"DEBUG","msg":"Routine: encryption worker 55 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917041359Z","level":"DEBUG","msg":"Routine: encryption worker 45 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.916938439Z","level":"DEBUG","msg":"Routine: encryption worker 10 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917044324Z","level":"DEBUG","msg":"Routine: encryption worker 20 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917007924Z","level":"DEBUG","msg":"Routine: encryption worker 56 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.916899574Z","level":"DEBUG","msg":"Routine: encryption worker 38 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917051228Z","level":"DEBUG","msg":"Routine: encryption worker 32 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.91699023Z","level":"DEBUG","msg":"Routine: encryption worker 62 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917092818Z","level":"DEBUG","msg":"Routine: encryption worker 30 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917122626Z","level":"DEBUG","msg":"Routine: encryption worker 3 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917151702Z","level":"DEBUG","msg":"Routine: encryption worker 29 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917165138Z","level":"DEBUG","msg":"Routine: encryption worker 7 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917158646Z","level":"DEBUG","msg":"Routine: encryption worker 16 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.916956254Z","level":"DEBUG","msg":"Routine: encryption worker 21 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917172803Z","level":"DEBUG","msg":"Routine: encryption worker 39 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:58.917158656Z","level":"DEBUG","msg":"Routine: encryption worker 48 - stopped","caller":"/home/runner/go/pkg/mod/github.com/coder/wgtunnel@v0.1.13-0.20240522110300-ade90dfb2da0/tunnelsdk/tunnel.go:287","func":"github.com/coder/wgtunnel/tunnelsdk.(*Client).LaunchTunnel.func3","logger_names":["net.devtunnel","wireguard_device"]}
{"ts":"2024-10-03T23:38:59.051840815Z","level":"DEBUG","msg":"submitted deployment info","caller":"/home/runner/work/coder/coder/coderd/telemetry/telemetry.go:282","func":"github.com/coder/coder/v2/coderd/telemetry.(*remoteReporter).deployment","logger_names":["telemetry"]}
{"ts":"2024-10-03T23:38:59.131650938Z","level":"DEBUG","msg":"submitted snapshot","caller":"/home/runner/work/coder/coder/coderd/telemetry/telemetry.go:150","func":"github.com/coder/coder/v2/coderd/telemetry.(*remoteReporter).reportSync","logger_names":["telemetry"]}
{"ts":"2024-10-03T23:38:59.132002588Z","level":"DEBUG","msg":"context done, flushing before exit","caller":"/home/runner/work/coder/coder/coderd/workspacestats/batcher.go:194","func":"github.com/coder/coder/v2/coderd/workspacestats.(*DBBatcher).run","logger_names":["coderd","batchstats"]}
{"ts":"2024-10-03T23:38:59.132052184Z","level":"DEBUG","msg":"workspace usage tracker loop exited","caller":"/home/runner/work/coder/coder/coderd/workspacestats/tracker.go:166","func":"github.com/coder/coder/v2/coderd/workspacestats.(*UsageTracker).loop.func1","logger_names":["workspace_usage_tracker"]}
{"ts":"2024-10-03T23:38:59.132049519Z","level":"DEBUG","msg":"context done; exiting subscribeMonitor","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/watchdog.go:115","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*Watchdog).subscribeMonitor","logger_names":["pswatch"]}
{"ts":"2024-10-03T23:38:59.132028638Z","level":"DEBUG","msg":"closing report generator","caller":"/home/runner/work/coder/coder/coderd/notifications/reports/generator.go:74","func":"github.com/coder/coder/v2/coderd/notifications/reports.NewReportGenerator.func2","logger_names":["notifications.report_generator"]}
{"ts":"2024-10-03T23:38:59.132183859Z","level":"INFO","msg":"closing provisionerd","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:507","func":"github.com/coder/coder/v2/provisionerd.(*Server).Close","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:38:59.132407221Z","level":"DEBUG","msg":"waiting for first closer to complete","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:550","func":"github.com/coder/coder/v2/provisionerd.(*Server).closeWithError","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:38:59.132376672Z","level":"DEBUG","msg":"stopped listening to event channel","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:291","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).subscribeQueue.func2","logger_names":["pubsub"],"fields":{"event":"pubsub_watchdog"}}
{"ts":"2024-10-03T23:38:59.132527293Z","level":"DEBUG","msg":"first closer completed","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:552","func":"github.com/coder/coder/v2/provisionerd.(*Server).closeWithError","logger_names":["provisionerd-backstage-jr-0"]}
{"ts":"2024-10-03T23:38:59.132617708Z","level":"INFO","msg":"closing provisionerd","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:507","func":"github.com/coder/coder/v2/provisionerd.(*Server).Close","logger_names":["provisionerd-backstage-jr-1"]}
{"ts":"2024-10-03T23:38:59.132703865Z","level":"DEBUG","msg":"waiting for first closer to complete","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:550","func":"github.com/coder/coder/v2/provisionerd.(*Server).closeWithError","logger_names":["provisionerd-backstage-jr-1"]}
{"ts":"2024-10-03T23:38:59.132787637Z","level":"DEBUG","msg":"first closer completed","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:552","func":"github.com/coder/coder/v2/provisionerd.(*Server).closeWithError","logger_names":["provisionerd-backstage-jr-1"]}
{"ts":"2024-10-03T23:38:59.132862051Z","level":"INFO","msg":"closing provisionerd","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:507","func":"github.com/coder/coder/v2/provisionerd.(*Server).Close","logger_names":["provisionerd-backstage-jr-2"]}
{"ts":"2024-10-03T23:38:59.132936345Z","level":"DEBUG","msg":"waiting for first closer to complete","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:550","func":"github.com/coder/coder/v2/provisionerd.(*Server).closeWithError","logger_names":["provisionerd-backstage-jr-2"]}
{"ts":"2024-10-03T23:38:59.133018885Z","level":"DEBUG","msg":"first closer completed","caller":"/home/runner/work/coder/coder/provisionerd/provisionerd.go:552","func":"github.com/coder/coder/v2/provisionerd.(*Server).closeWithError","logger_names":["provisionerd-backstage-jr-2"]}
{"ts":"2024-10-03T23:38:59.133315569Z","level":"INFO","msg":"pubsub is closing","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:314","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Close","logger_names":["pubsub"]}
{"ts":"2024-10-03T23:38:59.133521417Z","level":"INFO","msg":"pubsub listen stopped receiving notify","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:337","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).listen.func1","logger_names":["pubsub"]}
{"ts":"2024-10-03T23:38:59.133677038Z","level":"DEBUG","msg":"pubsub closed","caller":"/home/runner/work/coder/coder/coderd/database/pubsub/pubsub.go:317","func":"github.com/coder/coder/v2/coderd/database/pubsub.(*PGPubsub).Close","logger_names":["pubsub"]}
{"ts":"2024-10-03T23:38:59.235951629Z","level":"DEBUG","msg":"waiting for server to shut down...2024-10-03 23:38:59.135 UTC [334615] LOG:  received fast shutdown request\n.2024-10-03 23:38:59.135 UTC [334615] LOG:  aborting any active transactions\n2024-10-03 23:38:59.137 UTC [334615] LOG:  background worker \"logical replication launcher\" (PID 334622) exited with exit code 1\n2024-10-03 23:38:59.137 UTC [334617] LOG:  shutting down\n2024-10-03 23:38:59.144 UTC [334615] LOG:  database system is shut down\n done\nserver stopped","caller":"/home/runner/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.22.6.linux-amd64/src/os/file.go:269","func":"os.genericWriteTo","logger_names":["postgres","stdlib"]}
{"ts":"2024-10-03T23:38:59.236198186Z","level":"DEBUG","msg":"closing tracing","caller":"/home/runner/work/coder/coder/cli/server.go:380","func":"github.com/coder/coder/v2/cli.(*RootCmd).Server.func2.1"}
{"ts":"2024-10-03T23:38:59.236318318Z","level":"DEBUG","msg":"tracing closed","caller":"/home/runner/work/coder/coder/cli/server.go:382","func":"github.com/coder/coder/v2/cli.(*RootCmd).Server.func2.1","fields":{"error":null}}
